<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
<title><![CDATA[流浪的龙－个人知识管理]]></title> 
<link>http://i.renjihe.com/blog/index.php</link> 
<description><![CDATA[]]></description> 
<language>zh-cn</language> 
<copyright><![CDATA[流浪的龙－个人知识管理]]></copyright>
<item>
<link>http://i.renjihe.com/blog/read.php?</link>
<title><![CDATA[创建Node.js - http.IncomingMessage]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[web]]></category>
<pubDate>Wed, 24 Aug 2016 11:38:50 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?</guid> 
<description>
<![CDATA[ 
	<h3 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 1.6em; color: #333333; text-rendering: optimizeLegibility; font-size: 18px; text-indent: 1em; background-color: #fefefe">http.IncomingMessage</h3><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe"></p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;推荐：《精通Node.js开发》《Angular.js视频详解》腾讯QQ 微信号&nbsp;forjs_org<img style="max-width: 96%; height: auto; vertical-align: middle; border: 0px none; margin: 0px auto 10px; text-align: center; display: block" class="alignCenter" src="http://img1.tuicool.com/auQZfe.jpg!web" border="0" />book</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">look&nbsp;它的实例我们简称msg。这个实例的产生是被动的，可以由5种场景产生。&nbsp;look</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-style: italic; color: #999988" class="comment">//这里的request就是msg对象</span> <span style="font-weight: bold" class="keyword">var</span> server = http.createServer(<span style="font-weight: bold" class="keyword">function</span>(request,response)&#123; ... &#125;)&nbsp;&nbsp;<span style="font-weight: bold" class="keyword">var</span> server = http.createServer(); server.on(<span style="color: #dd1144" class="string">&quot;request&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>(request,response)&#123; ... &#125;)&nbsp;&nbsp;<span style="font-style: italic; color: #999988" class="comment">// response 是msg对象&nbsp;&nbsp;</span> <span style="font-weight: bold" class="keyword">var</span> request = http.request(options, <span style="font-weight: bold" class="keyword">function</span>(response) &#123; ... &#125;)&nbsp;&nbsp;<span style="font-weight: bold" class="keyword">var</span> request = http.request(options); request.on(<span style="color: #dd1144" class="string">&quot;response&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>(response)&#123; ... &#125;)&nbsp;&nbsp;<span style="font-weight: bold" class="keyword">var</span> request = http.get(options,<span style="font-weight: bold" class="keyword">function</span>(response)&#123;&#125;)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">god&nbsp;msg并不一定代表请求对象，有时候也代表响应对象。msg可以理解为另一端socket发送来（或返回来）的数据，所以http.IncomingMessage是stream.Readable的子类，也就是只读的。&nbsp;good</p><h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe">事件</h4><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">'data'事件</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">god&nbsp;当接收到数据时会产生这个事件，事件监听器会接收到数据。注意，如果不对这个事件添加监听器，那么数据会丢失。&nbsp;yellow</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6">incomingMessage.on(<span style="color: #dd1144" class="string">'data'</span>,<span style="font-weight: bold" class="keyword">function</span>(chunk)&#123; ... &#125;);</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">yellow&nbsp;chunk 是个数据片段，Buffer类型。&nbsp;book</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">'end' 事件</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">god&nbsp;如果在这个之后不会再产生数据了，那么就会发出这个事件。这个事件只发生一次。&nbsp;this</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6">incomingMessage.on(<span style="color: #dd1144" class="string">'end'</span>,<span style="font-weight: bold" class="keyword">function</span>()&#123; ... &#125;)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">'close' 事件</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;这个事件的产生是当服务器端response.end() 调用之前客户端关闭造成的。看如下代码：&nbsp;god</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-weight: bold" class="keyword">var</span> http = require(<span style="color: #dd1144" class="string">&quot;http&quot;</span>); <span style="font-weight: bold" class="keyword">var</span> server = http.createServer(); server.on(<span style="color: #dd1144" class="string">&quot;request&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>(req,res)&#123;&nbsp;&nbsp;<span class="indent">&nbsp;&nbsp;</span>req.on(<span style="color: #dd1144" class="string">&quot;close&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>()&#123; <span class="indent">&nbsp;&nbsp;</span><span class="indent">&nbsp;&nbsp;</span>console.log(<span style="color: #dd1144" class="string">&quot;close&quot;</span>) <span class="indent">&nbsp;&nbsp;</span>&#125;) <span class="indent">&nbsp;&nbsp;</span>res.write(<span style="color: #dd1144" class="string">&quot;hello!&quot;</span>); <span class="indent">&nbsp;&nbsp;</span><span style="font-style: italic; color: #999988" class="comment">// res.end();</span> &#125;) server.listen(<span style="color: #009999" class="number">8080</span>);</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">googog&nbsp;这里的res.end() 不会被调用，当浏览器访问服务器，然后关闭浏览器，这时req就会发出close事件。&nbsp;sex</p><h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe">incomingMessage对象的属性信息</h4><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.headers 得到头部信息</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;下面的例子将获得一个浏览器发送来的请求的头部信息，然后进行详细分析。看代码：&nbsp;googog</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-style: italic; color: #999988" class="comment">// 服务器</span> <span style="font-weight: bold" class="keyword">var</span> http = require(<span style="color: #dd1144" class="string">&quot;http&quot;</span>); <span style="font-weight: bold" class="keyword">var</span> server = http.createServer(); server.on(<span style="color: #dd1144" class="string">&quot;request&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>(req,res)&#123;&nbsp;&nbsp;&nbsp;&nbsp;console.log(req.headers) &#125;) server.listen(<span style="color: #009999" class="number">8080</span>)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">sex&nbsp;然后通过浏览器访问，会得到下面的信息，当然不同浏览器的信息稍有不同。&nbsp;yellow</p><pre class="prettyprint sql" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6">&#123;&nbsp;&nbsp;&nbsp;&nbsp;host: 'localhost:8080',&nbsp;&nbsp; connection: 'keep-alive',&nbsp;&nbsp; accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,*<span style="font-style: italic; color: #999988" class="comment">/*;q=0.8',&nbsp;&nbsp; 'user-agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.141 0.43 Safari/537.31',&nbsp;&nbsp; 'accept-encoding': 'gzip,deflate,sdch',&nbsp;&nbsp; 'accept-language': 'zh-CN,zh;q=0.8',&nbsp;&nbsp; 'accept-charset': 'GBK,utf-8;q=0.7,*;q=0.3',&nbsp;&nbsp; cookie: 'connect.sid=s%3AknJhNxKEK7nxXiYIsNfY%2BINl.%2B6HPsMaN6rEj9Hlm0e6CKp8lc6md2dHA9lo0xJs2szM' &#125;</span></pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">this&nbsp;下面对这些信息进行详细说明。&nbsp;sex</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">good&nbsp;host , 客户端指定自己想访问的WEB服务器的域名/IP 地址和端口号。&nbsp;googog</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;connection , 有两个值close（告诉WEB服务器或者代理服务器，在完成本次请求的响应后，断开连接，不要等待本次连接的后续请求了）。keepalive（告诉WEB服务器或者代理服务器，在完成本次请求的响应后，保持连接，等待本次连接的后续请求）。&nbsp;sex</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">look&nbsp;accept, 告诉WEB服务器自己接受什么介质类型，&nbsp;<em>/</em>&nbsp;表示任何类型，type/* 表示该类型下的所有子类型，type/sub-type。&nbsp;god</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">good&nbsp;user-agent, 浏览器表明自己的身份（是哪种浏览器）。&nbsp;book</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">god&nbsp;accept-encoding , 浏览器申明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法 （gzip，deflate）&nbsp;good</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;accept-language , 浏览器申明自己接收的语言跟字符集的区别。&nbsp;god</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;accept-charset , 浏览器申明自己接收的字符集。&nbsp;god</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">googog&nbsp;下面是查看服务器发回来的响应信息的代码。&nbsp;god</p><pre class="prettyprint cs" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-style: italic; color: #999988" class="comment">// 客户端</span> <span style="font-weight: bold" class="keyword">var</span> http = require(<span style="color: #dd1144" class="string">&quot;http&quot;</span>); <span style="font-weight: bold" class="keyword">var</span> req = http.<span style="font-weight: bold" class="keyword">get</span>(<span style="color: #dd1144" class="string">&quot;http://www.google.com/&quot;</span> ,function(res)&#123;&nbsp;&nbsp;&nbsp;&nbsp; console.log(res.headers) &#125;)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;运行后控制台打印如下信息：&nbsp;this</p><pre class="prettyprint sql" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6">&#123;&nbsp;&nbsp;&nbsp;&nbsp;location: 'http://www.google.com.hk/url?sa=p&amp;hl=zh-CN&amp;pref=hkredirect&amp;pval=yes&amp;q=http://www.google .com.hk/&amp;ust=1365300533439727&amp;usg=AFQjCNG7gOne9e40NICfSf7Od0fvo4_ldg',&nbsp;&nbsp; 'cache-control': 'private',&nbsp;&nbsp; 'content-type': 'text/html; char<span class="operator"><span style="font-weight: bold" class="keyword">set</span>=UTF-<span style="color: #009999" class="number">8</span><span style="color: #dd1144" class="string">',&nbsp;&nbsp; '</span><span style="font-weight: bold" class="keyword">set</span>-cookie<span style="color: #dd1144" class="string">': [ '</span>PREF=ID=<span style="color: #009999" class="number">5472e4793</span>df80ea7:FF=<span style="color: #009999" class="number">0</span>:NW=<span style="color: #009999" class="number">1</span>:TM=<span style="color: #009999" class="number">1365300503</span>:LM=<span style="color: #009999" class="number">1365300503</span>:S=j3_mzrMxXuiqPI0d ;</span> expires=Tue, 07-Apr-2015 02:08:23 GMT; path=/; domain=.google.com' ],&nbsp;&nbsp; date: 'Sun, 07 Apr 2013 02:08:23 GMT',&nbsp;&nbsp; server: 'gws',&nbsp;&nbsp; 'content-length': '376',&nbsp;&nbsp; 'x-xss-protection': '1; mode=b<span class="operator"><span style="font-weight: bold" class="keyword">lock</span><span style="color: #dd1144" class="string">',&nbsp;&nbsp; '</span>x-frame-options<span style="color: #dd1144" class="string">': '</span>SAMEORIGIN<span style="color: #dd1144" class="string">'&nbsp;&nbsp;&#125;</span></span></pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">yellow&nbsp;下面对这些信息进行详细说明。&nbsp;look</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;Cache- Control指定请求和响应遵循的缓存机制。在请求消息或响应消息中设置 Cache-Control并不会修改另一个消息处理过程中的缓存处理过程。请求时的缓存指令包括no-cache、no-store、max-age、 max-stale、min-fresh、only-if-cached，响应消息中的指令包括public、private、no-cache、no- store、no-transform、must-revalidate、proxy-revalidate、max-age。各个消息中的指令含义如 下： Public指示响应可被任何缓存区缓存。Private指示对于单个用户的整个或部分响应消息，不能被共享缓存处理。这允许服务器仅仅描述当用户的部分响应消息，此响应消息对于其他用户的请求无效。 no-cache指示请求或响应消息不能缓存 no-store用于防止重要的信息被无意的发布。在请求消息中发送将使得请求和响应消息都不使用缓存。max-age指示客户机可以接收生存期不大于指定时间（以秒为单位）的响应。min-fresh指示客户机可以接收响应时间小于当前时间加上指定时间的响应。max-stale指示客户机可以接收超出超时期间的响应消息。如果指定max-stale消息的值，那么客户机可以接收超出超时期指定值之内的响应消息。&nbsp;book</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">yellow&nbsp;Location响应头用于重定向接收者到一个新URI地址。&nbsp;this</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;Content-Type实体头用于向接收方指示实体的介质类型。&nbsp;this</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;set-cookie设置和页面关联的Cookie。&nbsp;googog</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;expires 指定应该在什么时候认为文档已经过期，从而不再缓存它。&nbsp;god</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">googog&nbsp;server 服务器名字。&nbsp;this</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">look&nbsp;content-length 表示内容长度。&nbsp;googog</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">sex&nbsp;x-xss-protection XSS筛选器,主要用于防御反射型跨站攻击，网站一般都会设置为 0 。&nbsp;fuck</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">book&nbsp;x-frame-options 可用于指示是否应该允许浏览器呈现在一个页面FRAME 或 IFRAME 中。 以确保网站内容是不是嵌入到其它网站。使用X-Frame-Options 有两种可能的值：DENY ：该页无法显示在一个框架中。SAMEORIGHT ：页面只能显示在页面本网站的框架中。&nbsp;fuck</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.httpVersion http版本 1.1或1.0，基本都是1.1了。</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.method 请求方法，这个只存在于请求对象中。 GET/POST</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.url 请求url，这只存在于请求对象中。看例子</p><pre class="prettyprint javascript" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-style: italic; color: #999988" class="comment">// 服务器</span> <span style="font-weight: bold" class="keyword">var</span> http = require(<span style="color: #dd1144" class="string">&quot;http&quot;</span>); <span style="font-weight: bold" class="keyword">var</span> server = http.createServer(); server.on(<span style="color: #dd1144" class="string">&quot;request&quot;</span>,<span style="font-weight: bold" class="keyword">function</span>(req,res)&#123;&nbsp;&nbsp;&nbsp;&nbsp;console.log(req.url) &#125;) server.listen(<span style="color: #009999" class="number">8080</span>)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">look&nbsp;通过浏览器访问&nbsp;<a style="color: #949494; text-decoration: none; transition: 0.25s; outline: none 0px; border-bottom-width: 1px; border-bottom-style: dashed; border-bottom-color: #949494; font-style: italic; font-weight: bold" rel="nofollow,noindex" href="http://localhost:8080/article?id=1221212">http://localhost:8080/article?id=1221212</a>&nbsp;， 控制台会打印：&nbsp;god</p><pre class="prettyprint ruby" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6">/article<span style="color: #009999" class="number">?i</span>d=<span style="color: #009999" class="number">1221212</span></pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.statusCode 响应状态代码，只存在于响应对象中。</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;例如 404 表示未找到资源。来做个例子。&nbsp;book</p><pre class="prettyprint cs" style="padding: 0.3em; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: #333333; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: #f6f6f6"><span style="font-style: italic; color: #999988" class="comment">// 客户端</span> <span style="font-weight: bold" class="keyword">var</span> http = require(<span style="color: #dd1144" class="string">&quot;http&quot;</span>); <span style="font-weight: bold" class="keyword">var</span> req = http.<span style="font-weight: bold" class="keyword">get</span>(<span style="color: #dd1144" class="string">&quot;http://www.google.com/idsddd.html&quot;</span> ,function(res)&#123;&nbsp;&nbsp;&nbsp;&nbsp; console.log(res.statusCode); <span style="font-style: italic; color: #999988" class="comment">// 404</span> &#125;)</pre><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">message.socket 这个是底层的net.Socket对象。（参看&ldquo;node.js中的Socket对象&rdquo;一节）</p><h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe">三个方法</h4><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">fuck&nbsp;要知道 IncommingMessage是stream.Readable子类。&nbsp;googog</p><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">sex&nbsp;关于 message.setEncoding([encoding]) / message.pause() / message.resume() 三个方法，这里就不介绍了，可以参看 stream.Readable 一章节。&nbsp;god</p><h4 style="margin: 0px 0px 0.5em; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; line-height: 27.2px; color: #333333; text-rendering: optimizeLegibility; font-size: 16px; text-indent: 1em; background-color: #fefefe">【小结】</h4><p style="margin: 0px 0px 0.75em; font-size: 16px; line-height: 27.2px; text-indent: 1em; color: #333333; font-family: 'Helvetica Neue', Helvetica, Tahoma, Arial, STXihei, 'Microsoft YaHei', 微软雅黑, sans-serif; background-color: #fefefe">this&nbsp;本节介绍的是个特殊的对象，它的产生是被动的，它可能是服务器端监听到的请求者信息，也可能是客户端接收到的响应信息。所以在各个例子中，它可能扮演req或res，其实类型都是IncommingMessage。&nbsp;this</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?#blogcomment</link>
<title><![CDATA[[评论] 创建Node.js - http.IncomingMessage]]></title> 
<author> &lt;user@domain.com&gt;</author>
<category><![CDATA[评论]]></category>
<pubDate>Thu, 01 Jan 1970 00:00:00 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?#blogcomment</guid> 
<description>
<![CDATA[ 
	
]]>
</description>
</item>
</channel>
</rss>