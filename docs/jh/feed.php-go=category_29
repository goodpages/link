<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
<title><![CDATA[流浪的龙－个人知识管理]]></title> 
<link>http://i.renjihe.com/blog/index.php</link> 
<description><![CDATA[]]></description> 
<language>zh-cn</language> 
<copyright><![CDATA[流浪的龙－个人知识管理]]></copyright>
<item>
<link>http://i.renjihe.com/blog/read.php?6983</link>
<title><![CDATA[向热爱计算机科学的你推荐SICP]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:47:58 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6983</guid> 
<description>
<![CDATA[ 
	<p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">先谈谈关于《计算机程序的构造和解释》（后面简称为SICP）的几个八卦。</p><ul style="color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px"><li style="margin: 4px 0px 6px; letter-spacing: 1px">本书曾经是MIT本科第一门课的教材。前两年被Python取代，在geek中引发了轩然大波。有兴趣可以Google一下[sicp mit python]。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">本书在Amazon上的评分严重两极分化，五星（&gt;90）和一星（&gt;50）为主，彻底反正态分布。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">本书在Amazon上排名最高的书评出自Peter Norvig，当然是强烈推荐，顺便狠狠地鄙视了给一颗星的同学们；第二篇出自Paul Graham，还是强烈推荐。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">本书别名紫书（The Purple Book），巫师书（The Wizard Book），或者干脆The Book。</li></ul><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">这是一本什么样的书？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">前言说，这是一本给MIT学生的入门级（entry-level）计算机科学教材。作者的出发点有两条：&nbsp;</p><ul style="color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px"><li style="margin: 4px 0px 6px; letter-spacing: 1px">语言首先是写给人看的，只是恰巧（incidentally）能够运行。这当然是个修辞，格外强调代码之可读。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">语言的语法，漂亮的算法，数学的分析，这些统统都不重要。最打紧的是如何控制复杂度（The techniques used to control the intellectual complexity of large software systems）。</li></ul><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">在本书成书的年代（1984），以上言论即使不算正邪不两立，也够的上离经叛道了。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">通俗的说，这本书教你如何用最基本的构造和原则，解决复杂和多样的问题。用摄影打比方，这本书不比较尼康和佳能，不介绍繁杂的机型和参数，不介绍后期处理的技巧。这本书只讨论光线、色彩和构图，以及如何在不同场景拿捏这些基本原则组合出美妙的照片。</p><div align="center" style="margin: 12px 0px 15px; padding: 0px; font-family: Arial, Helvetica, sans-serif; color: #333333; line-height: 18px"><a style="color: #333333; text-decoration: none" href="http://www.amazon.cn/gp/product/B0011AP7RY/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;tag=nowa-23&amp;linkCode=as2&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0011AP7RY" target="_blank"><img style="max-width: 550px; border: none" src="http://www.nowamagic.net/librarys/images/books/book_023.jpg" border="0" width="175" /></a></div><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif" align="center">《计算机程序的构造和解释》（<a style="color: #333333; text-decoration: none" href="http://www.nowamagic.net/librarys/veda/books/" target="_blank">更多推荐&hellip;&hellip;</a>）</p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">这本书适合初学者吗？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">不好说。Amazon上的一颗星评价大多鄙视本书已经过时或者太过高深。我个人看法，它很适合一部分初学者，但是需要满足几个条件：&nbsp;</p><ul style="color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px"><li style="margin: 4px 0px 6px; letter-spacing: 1px">热爱计算机科学&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">有时间和耐心&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">受过（高中水平）数学和抽象思维的训练&nbsp;</li></ul><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">所以，如果只是想领一份程序员的薪水，这本书完全可以略过。并不是说这本书有多么不实用，只是计算机科学与写代码并不是一码事。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">这本书广而不深，讨论到了非常多重要的思想，有些甚至冷不丁出现在注释里（比如Y算子）。内容安排很照顾初学者，循循善诱；语言直白简单；代码大多简明自然。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">至于习题，个人认为只要认真思考，大部分都不是很难，需要耐心多于智力。有时间不妨多做几道。</p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">这本书适合有经验的程序员吗？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">还行。如此庖丁解牛般的讲解，其他书中不多见；内容简单，思想却不过时。另外，国内绝大部分程序员都从命令式语言入门，不妨接触一些函数式思想，开开眼界。如果时间不多，至少看看前两章，学习一些解决复杂问题和编写优雅代码的技巧。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">为什么我们要学习这本书？因为这本书告诉我们如何抽象。为什么我们要学习如何抽象？因为抽象是我们控制软件复杂性的重要手段。软件是人类有史以来最复杂的系统。其一、软件系统本身规模庞大，参与人手众多，难以管理；其二、环境和需求不断变化，且错误难以避免。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">人类无法驾驭过于复杂的事物，于是只能寻找方法简化软件系统：把系统分为许多子部分，人们开发一个部分的时候，系统其他部分都是一种抽象，无需了解其细节。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">本书讨论的就是系统的组织和设计，有哪些方法可以帮助我们控制软件的复杂度。<br /></p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">Scheme好学吗？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">其实Scheme是一门异常简单的语言。直来直去，除了括号多，基本没有旁门左道（比如指针）和撕心裂肺的语言构造（比如模版、多重继承、Monad）。再者，这本书的内容和具体的语言基本没有关系，思想才是重头戏。如果实在有顾虑，推荐先读两本薄薄的小册子：The Little Schemer和The Seasoned Schemer。</p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">这本书到底讲什么？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">本书按照内容可以分为三个部分：过程抽象（第一章）；数据抽象（第二、三章）和语言抽象（第四、五章）。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">过程抽象部分比较简单，先介绍了Scheme的基本语法，让读者初步领略函数式编程的风采。对于有一定编程基础（相信国内极少有人入门就读这个）的读者来说，会有耳目一新的感觉，原来递归和迭代可以有另一种表现形式，但并不难理解。习题也比较简单，不会用掉太多的时间。过程抽象的概念也很简单，就是编程语言中的函数，目的是封装计算过程的细节。关于何时应该用过程抽象的原则是：一切可以定义为过程的计算片段都应该定义为过程。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">数据抽象是我认为的本书的核心，也是最值得我们仔细研读的部分。关于数据抽象最直接的理解就是面向对象编程，如C++，而Java和C#则是更彻底的数据抽象。把一组过程抽象（类的方法）集中考虑，并加入内部状态（类的变量），就是一个数据抽象。每个数据抽象都应该把自己的内部对象状态和对象的实现隐藏起来，对外通过一组接口进行消息传递。这样听起来好像本书与一般的面向对象书没有区别，但实际上，这些都是我自己的总结，书里面不会把这些概念直接罗列出来，而是通过一个个巧妙的例子，让读者一步步深入，感叹原来A还可以这样抽象，原来B还可以这样封装。个人认为如果时间有限，读完前三章已经可以领会本书大部分思想了，后两章可以不读。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">语言抽象是指自己发明一门语言，以解决某一特定应用领域的问题。在这一领域中，自己发明的语言会比其他通用语言更方便。定义了新语言的语法后，就要自己去实现该语言的编译器或解释器，可以通过现有的语言去构造。这一部分包含了许多编译方面的知识，但又与编译原理中的构造方法有不少区别，自己看书很容易看得云里雾里，听老师讲课才好一些。大部分习题很难做，一部分习题非常难。<br /></p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第一章讨论程序设计的最基本原则：原语（primitive expressions）、组合（means of composition）和抽象（means of abstraction），以及如何利用这些基本原则化解复杂度。重点是过程抽象和高阶过程（high-order procedures）。本章的例题十分精彩，抽象和组合的过程十分清晰。有关递归和迭代的讨论也非常耐读。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第二章讨论数据抽象，即利用基本数据构造复杂结构。Scheme里的基本构造能力只有cons，但由此可以组合出所有实用的结构。图像语言、符号运算、集合表示、哈夫曼编码和复数系统都是经典实用的例子。顺带还介绍了data-directed方法，与面向对象中的封装有异曲同工之妙。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">即使没有太多时间，我觉得前两章也值得值得细读。尤其是例子。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第三章主要讨论了状态（local state）和环境（environment model），可变数据结构（mutable data），以及状态和时间的交互（concurrency和laziness）。前两章用到语言是Scheme的一个没有副作用的子集，从这一章开始涉及解释器的核心机制，尤其是状态的管理，及其优缺点。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第四章用Scheme实现了一个简单的Scheme解释器。重点是讨论语言的解释过程，以及如何针对问题（领域）创造和修改语言，从中可见DSL（Domain Specific Language）的思想。后三节各自讨论一个工程中不常见但高效解决特定问题的语言变种及其实现。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第五章介绍将Scheme编译为现实中的寄存器机器模型（register machine）。重点不是编译技巧（Scheme压根不需要文法分析），而是基本构造（条件、过程，等等）对应于寄存器模型的实现。略带讨论了最简单的垃圾回收。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">后三章较深，最好略有一点语言、编译和体系结构的基础，或者多些耐心。</p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">语言会影响思维</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">如果要问现代数学最重要的概念是什么，那毫无疑问就是函数了，或者更确切地说，是映射。泛函这个词，或许对非数学系的同学来说有些陌生，但如果写成英语 functional, 看起来就眼熟多了。狭隘一点地说，泛函就是以函数为参数，返回值是数值的一类函数。看到这里相信不少同学都发现了，这就是在很多语言中被称为高阶函数（high-order function）的那个东西。泛函在数学中是如此普遍的概念，现代数学几乎无处不会用到。数学家们很自然地在集合上添加运算，构造空间；从一个空间映射到另一个空间，创造泛函。对泛函做变换，构造泛函的泛函等等。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">为什么我要在这里提到数学和泛函？因为在我看来， lisp 是一门以表达数学为己任的语言。正如&nbsp;<a style="color: #333333; text-decoration: none" href="http://www.nowamagic.net/librarys/veda/tag/SICP" target="_blank">SICP</a>&nbsp;中希望表达的一种观点：语言会影响思维。如果数学推理过程中最频繁应用到的泛函，在计算机语言中却没有对应的表达，换言之数学思维不能很自然地表述为计算机语言的话，那么计算机对于数学研究的意义就显得很可疑了，毕竟那时候的计算机可不是用来玩大菠萝3的。所以这里就有了两拨人，务实的一拨人开发出了 fortran ，力主解决数值计算；务虚的一拨人则创造了 lisp ，试图一举解决符号计算的难题。在 John McCarthy 所作的 history of lisp 中这样写到：&nbsp;</p><blockquote style="margin: 5px 0px; padding: 8px 1em 8px 4em; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px; background-image: url('http://www.nowamagic.net/librarys/application/views/veda/images/quotes.gif'); background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: 12px 12px; background-repeat: no-repeat"><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px">Then mathematical neatness became a goal and led to pruning some features from the core of the language.（保证数学上的简洁性成为我们的目标，并因此拒绝了将一些特性加入到语言核心中。）&nbsp;</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px">This was partly motivated by esthetic reasons and partly by the belief that it would be easier to devise techniques for proving programs correct if the semantics were compact and without exceptions.（这部分是基于美学上的考虑，部分是因为我们相信，紧凑而没有特例的语法才更有可能设计出一种从数学上证明程序正确的方法。）&nbsp;</p></blockquote><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">之所以讲了这么多关于数学和历史的东西，是因为我觉得在看这本书前，最重要的是理解： lisp 是什么。而我又一直相信理解一样事物最好的办法就是理解其历史。（顺带说一句，以上历史都是在看过书以后才找的，所以也是我的血泪教训&hellip;&hellip;）如上所示， lisp 是一门为了表达数学推导过程而诞生的语言，所以不可避免地使得 SICP 前两章的例子几乎全是数学问题。代码只是其形，而其神是纯粹的数学。所以这里似乎就陷入了一种两难的境地：如果执意于写代码的话，那看起来做的都是形而下的工作；而如果只思考问题的数学原理的话，那姑且不说是舍本逐末，至少也是偏离主题了。在看完 SICP 以后我始终怀着这种疑问而不解&mdash;&mdash;看的时候是不会有这种感觉的，因为注意力全部纠结于书中的题目了&mdash;&mdash;不过在写这篇书评时又翻了一下第一章，似乎明白了。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">小节1.1写到：&nbsp;</p><blockquote style="margin: 5px 0px; padding: 8px 1em 8px 4em; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px; background-image: url('http://www.nowamagic.net/librarys/application/views/veda/images/quotes.gif'); background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: 12px 12px; background-repeat: no-repeat"><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px">一个强有力的程序设计语言，不仅是一种指挥计算机执行任务的方式，它还应该成为一种框架，使我们能够在其中组织自己有关计算过程的思想。每一种强有力的语言都为此提供了三种机制：基本表达形式，组合的方法，<a style="color: #333333; text-decoration: none" href="http://www.nowamagic.net/librarys/veda/tag/%E6%8A%BD%E8%B1%A1" target="_blank">抽象</a>的方法。</p></blockquote><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">所以我认为 SICP 这本书最主要的目的，就是&ldquo;教你用 lisp 的语言，来组织，来抽象，来表达想法&rdquo;。从这个意义上来说， SICP 和一本 Learning Python ，或者一本 C Programming Language 并没有太多的区别，依然讲授的是&ldquo;用特定的语言求解特定的问题&rdquo;。不过略有不同的是， lisp 太特殊了，导致从 c 转向 python 或许不需要太多的思维转换，但从 c 转向 lisp 却需要对思维习惯大改造一番，这我想就是 SICP 地位如此之高的原因吧。我也同意，学习 SICP 确实很锻炼思维，以及培养一种更加高度的抽象习惯。其实在看 SICP 的过程中，很多时候我都会感慨，&ldquo;如果我不是数学系的，这一段到底会怎么理解呢&rdquo;。一个典型例子就是习题2.6，初看我也一头雾水，后来才意识到 zero 是 f-&gt;id 的泛函，正是零映射， one 是 f-&gt;f 的泛函，正是恒同映射，也就是函数空间的1。如果没有学过泛函分析的我来看这道题目，估计只能好不容易推导出规律后，感慨于 Church 计数的&ldquo;巧妙&rdquo;了。所以从好的层面来看， SICP 至少能够带来泛函的直观感受，因此我才说 SICP 是一本写给CS人的泛函数。但是从坏的层面上说，数学抽象毕竟是象牙塔里的产物，当好不容易抽象出一个优雅的模型却发现手头的语言难以表达或者效率上有种种顾虑的时候，还是很郁闷的吧。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">前面貌似说了 SICP 的不少坏话，其实只是想拉低一下 SICP 的评价，至少使得后人不至于期待过高。SICP 是一本好书，至少是一本有趣的书，这点我是非常赞同的。就冲着她那创意的封面图和作者头像，每章开篇都会引用一段（非常利于装逼）的名言，以及用半页的篇幅讲述和主题完全无关的 MIT 第一任校长的生平，想不有趣都难啊。不过我还是世俗一下，列一下自己看过这本书以后比较&quot;现实&quot;的收获：&nbsp;</p><ol style="color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 18px"><li style="margin: 4px 0px 6px; letter-spacing: 1px">对于构造递归式的训练。相信做过的都深有体会&hellip;&hellip;&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">列表处理流程，也就是 map-filter-reduce 。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">流处理这一节让我终于明白了 generator 的意义。</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">从另一个角度看程序和程序设计中的问题&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">函数式程序设计&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">多种多样的程序组织方式&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">丰富多彩的编程模式&nbsp;</li><li style="margin: 4px 0px 6px; letter-spacing: 1px">对一些基础问题的理解&nbsp;<br /></li><li style="margin: 4px 0px 6px; letter-spacing: 1px">&hellip;&hellip;</li></ol><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">关于习题</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">最后说一下习题，习题的重要性想来大家都很清楚。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">本书共有5章，每章都有近100道习题。这本书可以说是时间黑洞。每章分为4-5节，每节有几个小节，全书有一百小节（即X.X.X）左右。我以小节为单位进行了估算，包括完成习题，每小节大约需要一个小时。当然不同小节难度不同，有的耗时长些，有的短些。于是读完本书并做完大部分习题需要上百个小时。再加上听课或看视频教程的时间则会更长。所以我觉得恐怕只有在校学生才有时间和精力来完成这本书的学习。<br /></p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">不过对于 SICP 来说，我觉得习题未必都要写成代码，在纸上写出思路和关键代码也未为不可。因为 scheme 的编码效率实在不高（就是 scheme 逼得我给 vim 装上 surround 插件&hellip;&hellip;），而习题重要的还是整个抽象的过程。另外就是，要找个好一点的解释器，我下了 MIT 的 scheme 解释器发现各种操作太不人性了&hellip;&hellip;&nbsp;</p><h4 style="margin: 1.5em 0px 0.5em; text-indent: 24px; font-size: 14px; line-height: 21px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">为什么推荐SICP？</h4><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">向大家推荐 SICP，不知道有多少人看了，也不知道有多少人明白了，更不知道有多少人惊叹了。或者你根本不屑一顾，或者你看见 Lisp 那层层括号心生畏惧，又或者你了了一瞥，觉得没什么精彩之处。那我真的很失望。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">我为什么要推荐SICP，而且为什么如此执着？这本不算厚的书带给我的观念，是从未有过的，是关乎于软件本质的。曾几何时，我觉得我看到了计算机编程书中没有的哲学观，但这一次我的梦破灭了，那些已经被写进书里差不多快 30 年了。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">我现在就来谈谈我的心得，以再次向你展现这本书的魔力。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">第一章作为基础，作者并没有象后续章节写太多的软件思想，主要还是介绍 Scheme 语言，所以草草看去，没什么精辟之处。不过在第一章中，作者用了大量的篇幅来探讨数学问题，因为他想向你揭示程序设计中的核心哲学：抽象。而数学无疑是最好的例子。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">了解数学史的人，应该知道整个数学史，就是一个不断抽象的历史。古希腊人将字母引入计算，使数学不再只是算术，而且具有表达抽象规则的能力。近代数学对函数和微积分的探求中，用 f(x) 替代了多项式表达式，函数更一般了，然后 n 维空间、复分析、映射、泛函，抽象代数、群论，等等等等，直到集合论，摧毁了数学的基石，使数学界再次陷入沉思。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">构造程序的方法也是抽象。从最简单的元素开始，基本元素(自演算表达式，包括数字，字符串和布尔值），然后定义基本过程（基本运算符，四则运算和布尔运算），进一步，自定义标识符（如同代数），再自定义过程（函数），再将过程作为值参与运算（高阶过程）。一步步的抽象，形成了整个程序的结构。而我们编程，无非就是从现实世界抽象出模型，再将模型不断的提炼抽象，属性、方法、类、继承、层次、框架。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">编程就是一个不断抽象的过程。我再次把作者在第一章末写下的结论抄在这里，作为最后的注脚。</p><p style="text-indent: 2em; margin: 1.2em 0em 1em; line-height: 20.4px; letter-spacing: 1px; color: #333333; font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif">&ldquo;作为编程者，我们应该对这类可能性保持高度敏感，设法从中设别出程序中的基本抽象，基于它们去进一步构造，并推广它们以创建威力更强大的抽象。当然，这并不是说总应该采用尽可能抽象的方式去写程序，程序设计专家们知道如何根据工作中的情况，去选择合适的抽象层次。但是，能基于这种抽象去思考确实是最重要的，只有这样才可能在新的上下文中去应用它们。高阶过程的重要性，就在于我们能显式地用程序设计语言的要素去描述这些抽象，使我们能像操作其他计算元素一样去操作它们。&rdquo;&nbsp;</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6982</link>
<title><![CDATA[康托尔、哥德尔、图灵——永恒的金色对角线]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:45:53 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6982</guid> 
<description>
<![CDATA[ 
	http://blog.csdn.net/pongba/article/details/1336028<br /><br /><div align="center" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 16pt">康托尔、哥德尔、图灵</span></strong><strong><span style="font-size: 16pt">&mdash;&mdash;</span></strong><strong><span style="font-size: 16pt">永恒的金色对角线</span></strong><strong><span style="font-size: 16pt">(rev#2)</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div align="center" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">By&nbsp;</span><span style="font-size: 12pt">刘未鹏</span></div><div align="center" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">C++</span><span style="font-size: 12pt">的罗浮宫</span><span style="font-size: 12pt">(<a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/pongba">http://blog.csdn.net/pongba</a>)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div align="right" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">我看到了它，却不敢相信它</span></em><sup><span style="font-size: 12pt">[1]</span></sup><em><span style="font-size: 12pt">。</span></em></div><div align="right" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">&mdash;&mdash;</span></em><em><span style="font-size: 12pt">康托尔</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div align="right" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">计算机是数学家一次失败思考的产物。</span></em></div><div align="right" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">&mdash;&mdash;</span></em><em><span style="font-size: 12pt">无名氏</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Kurt_Godel">哥德尔</a></span><span style="font-size: 12pt">的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://www.answers.com/topic/g-del-s-incompleteness-theorems">不完备性定理</a></span><span style="font-size: 12pt">震撼了</span><span style="font-size: 12pt">20</span><span style="font-size: 12pt">世纪数学界的天空，其数学意义颠覆了</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/David_Hilbert">希尔伯特</a></span><span style="font-size: 12pt">的形式化数学的宏伟计划，其哲学意义直到</span><span style="font-size: 12pt">21</span><span style="font-size: 12pt">世纪的今天仍然不断被延伸到各个自然学科，深刻影响着人们的思维。</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://www.alanturing.net/">图灵</a></span><span style="font-size: 12pt">为了解决希尔伯特著名的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Hilbert's_tenth_problem">第十问题</a></span><span style="font-size: 12pt">而提出有效计算模型，进而作出了</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Computability_theory_(computation)">可计算理论</a></span><span style="font-size: 12pt">和现代计算机的奠基性工作，著名的停机问题给出了机械计算模型的能力极限，其深刻的意义和漂亮的证明使它成为可计算理论中的标志性定理之一。</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Alonzo_Church">丘齐</a></span><span style="font-size: 12pt">，跟图灵同时代的天才，则从另一个抽象角度提出了</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Lambda_calculus">lambda算子</a></span><span style="font-size: 12pt">的思想，与</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Turing_machine">图灵机</a></span><span style="font-size: 12pt">抽象的倾向于硬件性不同，丘齐的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子理论是从数学的角度进行抽象，不关心运算的机械过程而只关心运算的抽象性质，只用最简洁的几条公理便建立起了与图灵机</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Turing_machine#Models_equivalent_to_the_Turing_machine_model">完全等价</a></span><span style="font-size: 12pt">的计算模型，其体现出来的数学抽象美开出了</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Functional_programming">函数式编程语言</a></span><span style="font-size: 12pt">这朵奇葩，</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Lisp_programming_language">Lisp</a></span><span style="font-size: 12pt">、</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Scheme_(programming_language)">Scheme</a></span><span style="font-size: 12pt">、</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://www.haskell.org/">Haskell</a>&hellip;</span><span style="font-size: 12pt">这些以抽象性和简洁美为特点的语言至今仍然活跃在计算机科学界，虽然由于其本质上源于</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子理论的抽象方式不符合人的思维习惯从而注定无法成为主流的编程语言</span><sup><span style="font-size: 12pt">[2]</span></sup><span style="font-size: 12pt">，然而这仍然无法妨碍它们成为编程理论乃至计算机学科的最佳教本。而诞生于函数式编程语言的神奇的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Y_combinator">Y combinator</a></span><span style="font-size: 12pt">至今仍然让人们陷入深沉的震撼和反思当中</span><span style="font-size: 12pt">&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">然而，这一切的一切，看似不很相关却又有点相关，认真思考其关系却又有点一头雾水的背后，其实隐隐藏着一条线，这条线把它们从本质上串到了一起，而顺着时光的河流逆流而上，我们将会看到，这条线的尽头，不是别人，正是只手拨开被不严密性问题困扰的</span><span style="font-size: 12pt">19</span><span style="font-size: 12pt">世纪数学界阴沉天空的天才数学家</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Georg_Cantor">康托尔</a></span><span style="font-size: 12pt">，康托尔创造性地将一一对应和对角线方法运用到无穷集合理论的建立当中，这个被希尔伯特称为</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">谁也无法将我们从康托尔为我们创造的乐园中驱逐出去</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">、被罗素称为</span><span style="font-size: 12pt">&ldquo;19</span><span style="font-size: 12pt">世纪最伟大的智者之一</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的人，他在</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://www.amazon.com/Contributions-Founding-Theory-Transfinite-Numbers/dp/0875481574/ref=sr_1_4/103-3576835-0834231?ie=UTF8&amp;s=books&amp;qid=1177237889&amp;sr=8-4">集合论方面的工作</a></span><span style="font-size: 12pt">终于驱散了不严密性问题带来的阴霾，仿佛一道金色的阳光刺破乌云，</span><span style="font-size: 12pt">19</span><span style="font-size: 12pt">世纪的数学终于看到了真正严格化的曙光，数学终于得以站在了前所未有的坚固的基础之上；集合论至今仍是数学里最基础和最重要的理论之一。而康托尔当初在研究无穷集合时最具天才的方法之一</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">对角线方法</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">则带来了极其深远的影响，其纯粹而直指事物本质的思想如洪钟大吕般响彻数学和哲学的每一个角落</span><sup><span style="font-size: 12pt">[3]</span></sup><span style="font-size: 12pt">。随着本文的展开，你将会看到，刚才提到的一切，歌德尔的不完备性定理，图灵的停机问题，</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子理论中神奇的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">、乃至著名的罗素悖论、理发师悖论等等，其实都源自这个简洁、纯粹而同时又是最优美的数学方法，反过来说，从康托尔的对角线方法出发，我们可以轻而易举地推导出哥德尔的不完备性定理，而由后者又可以轻易导出停机问题和</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">，实际上，我们将会看到，后两者也可以直接由康托尔的对角线方法导出。尤其是</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">，这个形式上绕来绕去，本质上捉摸不透，看上去神秘莫测的算子，其实只是一个非常自然而然的推论，如果从哥德尔的不完备性定理出发，它甚至比停机问题还要来得直接简单。总之，你将会看到这些看似深奥的理论是如何由一个至为简单而又至为深刻的数学方法得出的，你将会看到最纯粹的数学美。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">图灵的停机问题</span></strong><strong><span style="font-size: 15pt">(The Halting Problem)</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">了解停机问题的可以直接跳过这一节，到下一节&ldquo;Y Combinator&rdquo;，了解后者的再跳到下一节&ldquo;哥德尔的不完备性定理&rdquo;</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们还是从图灵著名的停机问题说起，一来它相对来说是我们要说的几个定理当中最简单的，二来它也最贴近程序员。实际上，我以前曾写过</span><span style="font-size: 12pt; color: blue"><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/pongba/archive/2006/03/11/621723.aspx">一篇关于图灵机的文章</a></span><span style="font-size: 12pt">，有兴趣的读者可以从那篇开始，那篇主要是从理论上阐述，所以这里我们打算避开抽象的理论，换一种符合程序员思维习惯的直观方式来加以解释。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">停机问题</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">不存在这样一个程序（算法），它能够计算任何程序（算法）在给定输入上是否会结束（停机）。</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">那么，如何来证明这个停机问题呢？反证。假设我们某一天真做出了这么一个极度聪明的万能算法（就叫</span><span style="font-size: 12pt">God_algo</span><span style="font-size: 12pt">吧），你只要给它一段程序（二进制描述），再给它这段程序的输入，它就能告诉你这段程序在这个输入上会不会结束（停机），我们来编写一下我们的这个算法吧：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">bool God_algo(char* program, char* input)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&#123;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">if(<em>&lt;program</em>&gt;&nbsp;<em>halts on&nbsp;</em>&lt;<em>input</em>&gt;)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 24pt"><span style="font-size: 12pt">return true;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">return false;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&#125;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这里我们假设</span><span style="font-size: 12pt">if</span><span style="font-size: 12pt">的判断语句里面是你天才思考的结晶，它能够像上帝一样洞察一切程序的宿命。现在，我们从这个</span><span style="font-size: 12pt">God_algo</span><span style="font-size: 12pt">出发导出一个新的算法：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">bool Satan_algo(char* program)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&#123;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">if(&nbsp;<em>God_algo</em>(program, program) )&#123;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp;&nbsp;while(1); // loop forever!</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp;&nbsp;return false; // can never get here!</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">&#125;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">else</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp;&nbsp;return true;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&#125;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">正如它的名字所暗示的那样，这个算法便是一切邪恶的根源了。当我们把这个算法运用到它自身身上时，会发生什么呢？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Satan_algo(Satan_algo);</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们来分析一下这行简单的调用：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">显然，</span><span style="font-size: 12pt">Satan_algo(Satan_algo)</span><span style="font-size: 12pt">这个调用</span><span style="font-size: 12pt">要么能够运行结束返回（停机），要么不能返回（</span><span style="font-size: 12pt">loop forever</span><span style="font-size: 12pt">）。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">如果它能够结束</span></em><span style="font-size: 12pt">，那么</span><span style="font-size: 12pt">Santa_algo</span><span style="font-size: 12pt">算法里面的那个</span><span style="font-size: 12pt">if</span><span style="font-size: 12pt">判断就会成立（因为</span><span style="font-size: 12pt">God_algo(Santa_algo,Santa_algo)</span><span style="font-size: 12pt">将会返回</span><span style="font-size: 12pt">true</span><span style="font-size: 12pt">），从而程序便进入那个包含一个无穷循环</span><span style="font-size: 12pt">while(1);</span><span style="font-size: 12pt">的</span><span style="font-size: 12pt">if</span><span style="font-size: 12pt">分支</span><span style="font-size: 12pt">，于是这个</span><span style="font-size: 12pt">Satan_algo(Satan_algo)</span><span style="font-size: 12pt">调用<em>便永远不会返回（结束）了</em>。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">而<em>如果</em></span><em><span style="font-size: 12pt">Satan_algo(Satan_algo)</span></em><em><span style="font-size: 12pt">不能结束（停机）呢</span></em><span style="font-size: 12pt">，则</span><span style="font-size: 12pt">if</span><span style="font-size: 12pt">判断就会失败，从而选择另一个</span><span style="font-size: 12pt">if</span><span style="font-size: 12pt">分支并返回</span><span style="font-size: 12pt">true</span><span style="font-size: 12pt">，即</span><em><span style="font-size: 12pt">Satan_algo(Satan_algo)</span></em><em><span style="font-size: 12pt">又</span></em><em><span style="font-size: 12pt">能够返回（停机）</span></em><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">总之，我们有：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">Satan_algo(Satan_algo)</span></em><em><span style="font-size: 12pt">能够停机</span></em><em><span style="font-size: 12pt">=&gt;&nbsp;</span></em><em><span style="font-size: 12pt">它不能停机</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">Satan_algo(Satan_algo)</span></em><em><span style="font-size: 12pt">不能停机</span></em><em><span style="font-size: 12pt">=&gt;&nbsp;</span></em><em><span style="font-size: 12pt">它能够停机</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">所以它停也不是，不停也不是。左右矛盾。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">于是，我们的假设，即</span><span style="font-size: 12pt">God_algo</span><span style="font-size: 12pt">算法的存在性，便不成立了。正如</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Joseph_Louis_Lagrange">拉格朗日</a></span><span style="font-size: 12pt">所说：</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">陛下，我们不需要（上帝）这个假设</span><span style="font-size: 12pt">&rdquo;<sup>[4]</sup></span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个证明相信每个程序员都能够容易的看懂。然而，这个看似不可捉摸的技巧背后其实隐藏着深刻的数学原理（甚至是哲学原理）。在没有认识到这一数学原理之前，至少我当时是对于图灵如何想出这一绝妙证明感到无法理解。但后面，在介绍完了与图灵的停机问题</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">同构</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">之后，我们会深入哥德尔的不完备性定理，在理解了哥德尔不完备性定理之后，我们从这一同样绝妙的定理出发，就会突然发现，离停机问题和神奇的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">只是咫尺之遥而已。当然，最后我们会回溯到一切的尽头，康托尔那里，看看停机问题、</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">、以及不完备性定理是如何自然而然地由康托尔的对角线方法推导出来的，我们将会看到这些看似神奇的构造性证明的背后，其实是一个简洁优美的数学方法在起作用。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">Y Combinator</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">了解</span></em><em><span style="font-size: 12pt">Y combinator</span></em><em><span style="font-size: 12pt">的请直接跳过这一节，到下一节</span></em><em><span style="font-size: 12pt">&ldquo;</span></em><em><span style="font-size: 12pt">哥德尔的不完备性定理</span></em><em><span style="font-size: 12pt">&rdquo;</span></em><em><span style="font-size: 12pt">。</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">让我们暂且搁下但记住绕人的图灵停机问题，走进函数式编程语言的世界，走进由跟图灵机理论等价的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子发展出来的另一个平行的语言世界。让我们来看一看被人们一代一代吟唱着的神奇的</span><span style="font-size: 12pt">Y Combinator&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">关于</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">的文章可谓数不胜数，这个由师从希尔伯特的著名逻辑学家</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Haskell_Curry">Haskell B.Curry</a></span><span style="font-size: 12pt">（</span><span style="font-size: 12pt">Haskell</span><span style="font-size: 12pt">语言就是以他命名的，而函数式编程语言里面的</span><span style="font-size: 12pt">Curry</span><span style="font-size: 12pt">手法也是以他命名）</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">发明</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">出来的组合算子（</span><span style="font-size: 12pt">Haskell</span><span style="font-size: 12pt">是研究</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Combinatory_logic">组合逻辑(combinatory logic)</a></span><span style="font-size: 12pt">的）仿佛有种神奇的魔力，它能够算出给定</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式（函数）的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Fixed_point">不动点</a></span><span style="font-size: 12pt">。从而使得递归成为可能。事实上，我们待会就会看到，</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">在神奇的表面之下，其实隐藏着深刻的意义，其背后体现的意义，曾经开出过历史上最灿烂的数学之花，所以</span><span style="font-size: 12pt">MIT</span><span style="font-size: 12pt">的计算机科学系将它做成系徽也就不足为奇了</span><sup><span style="font-size: 12pt">[5]</span></sup><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div align="center" style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="http://p.blog.csdn.net/images/p_blog_csdn_net/pongba/38175/o_lambda_logo.png" border="0" />&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">当然，要了解这个神奇的算子，我们需要一点点</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子理论的基础知识，不过别担心，</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子理论是我目前见过的最简洁的公理系统，这个系统仅仅由三条非常简单的公理构成，而这三条公理里面我们又只需要关注前两条。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">以下小节</span></em><em><span style="font-size: 12pt">&mdash;&mdash;lambda calculus&mdash;&mdash;</span></em><em><span style="font-size: 12pt">纯粹是为了没有接触过</span></em><em><span style="font-size: 12pt">lambda</span></em><em><span style="font-size: 12pt">算子理论的读者准备的，并不属于本文重点讨论的东西，然而要讨论</span></em><em><span style="font-size: 12pt">Y combinator</span></em><em><span style="font-size: 12pt">就必须先了解一下</span></em><em><span style="font-size: 12pt">lambda</span></em><em><span style="font-size: 12pt">（当然，以编程语言来了解也行，但是你会看到，丘齐最初提出的</span></em><em><span style="font-size: 12pt">lambda</span></em><em><span style="font-size: 12pt">算子理论才是最最简洁和漂亮的，学起来也最省事。）所以我单独准备了一个小节来介绍它。如果你已经知道，可以跳过这一小节。不知道的读者也可以跳过这一小节去</span></em><em><span style="font-size: 12pt">wikipedia</span></em><em><span style="font-size: 12pt">上面看，这里的介绍使用了</span></em><em><span style="font-size: 12pt">wikipedia</span></em><em><span style="font-size: 12pt">上的方式</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">lambda calculus</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">先来看一下</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式的基本语法</span><span style="font-size: 12pt">(BNF)</span><span style="font-size: 12pt">：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&lt;expr&gt; ::= &lt;identifier&gt;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&lt;expr&gt; ::=&nbsp;<em>lambda</em>&nbsp;&lt;identifier-list&gt;. &lt;expr&gt;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&lt;expr&gt; ::= (&lt;expr&gt; &lt;expr&gt;)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">前两条语法用于生成</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式（</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数），如：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">lambda</span></em><span style="font-size: 12pt">&nbsp;x y. x + y</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">haskell</span></em><em><span style="font-size: 12pt">里面为了简洁起见用</span></em><em><span style="font-size: 12pt">&ldquo;/&rdquo;</span></em><em><span style="font-size: 12pt">来代替希腊字母</span></em><em><span style="font-size: 12pt">lambda</span></em><em><span style="font-size: 12pt">，它们形状比较相似。故而上面的定义也可以写成：</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">/ x y. x + y</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这是一个匿名的加法函数，它接受两个参数，返回两值相加的结果。当然，这里我们为了方便起见赋予了</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数直观的计算意义，而实际上</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">里面一切都只不过是文本替换，有点像</span><span style="font-size: 12pt">C</span><span style="font-size: 12pt">语言的宏。并且这里的</span><span style="font-size: 12pt">&ldquo;+&rdquo;</span><span style="font-size: 12pt">我们假设已经是一个具有原子语义的运算符</span><sup><span style="font-size: 12pt">[6]</span></sup><span style="font-size: 12pt">，此外，为了方便我们使用了中缀表达（按照</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">系统的语法实际上应该写成</span><span style="font-size: 12pt">&ldquo;(+ x y)&rdquo;</span><span style="font-size: 12pt">才对</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">参考第三条语法）。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">那么，函数定义出来了，怎么使用呢？最后一条规则就是用来调用一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数的：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">((<em>lambda</em>&nbsp;x y. x + y) 2 3)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">以上这一行就是把刚才定义的加法函数运用到</span><span style="font-size: 12pt">2</span><span style="font-size: 12pt">和</span><span style="font-size: 12pt">3</span><span style="font-size: 12pt">上（这个调用语法形式跟</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Imperative_programming">命令式语言(imperative language)</a></span><span style="font-size: 12pt">惯用的调用形式有点区别，后者是</span><span style="font-size: 12pt">&ldquo;f(x, y)&rdquo;</span><span style="font-size: 12pt">，而这里是</span><span style="font-size: 12pt">&ldquo;(f x y)&rdquo;</span><span style="font-size: 12pt">，不过好在顺序没变</span><span style="font-size: 12pt">:)&nbsp;</span><span style="font-size: 12pt">）。为了表达简洁一点，我们可以给</span><span style="font-size: 12pt">(<em>lambda</em>&nbsp;x y. x + y)</span><span style="font-size: 12pt">起一个名字，像这样：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let Add = (<em>lambda</em>&nbsp;x y. x + y)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这样我们便可以使用</span><span style="font-size: 12pt">Add</span><span style="font-size: 12pt">来表示该</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数了：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">(Add 2 3)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">不过还是为了方便起见，后面调用的时候一般用</span><span style="font-size: 12pt">&ldquo;Add(2, 3)&rdquo;</span><span style="font-size: 12pt">，即我们熟悉</span><span style="font-size: 12pt">的形式。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">有了语法规则之后，我们便可以看一看这个语言系统的两条简单至极的公理了：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">Alpha</span></em><em><span style="font-size: 12pt">转换公理</span></em><span style="font-size: 12pt">：例如，</span><span style="font-size: 12pt">&ldquo;lambda x y. x + y&rdquo;</span><span style="font-size: 12pt">转换为</span><span style="font-size: 12pt">&ldquo;lambda a b. a + b&rdquo;</span><span style="font-size: 12pt">。换句话说，函数的参数起什么名字没有关系，可以随意替换，只要函数体里面对参数的使用的地方也同时注意相应替换掉就是了。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">Beta</span></em><em><span style="font-size: 12pt">转换公理</span></em><span style="font-size: 12pt">：例如</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">&ldquo;(lambda x y. x + y) 2 3&rdquo;</span><span style="font-size: 12pt">转换为</span><span style="font-size: 12pt">&ldquo;2 + 3&rdquo;</span><span style="font-size: 12pt">。这个就更简单了，也就是说，当把一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数用到参数身上时，只需用实际的参数来替换掉其函数体中的相应变量即可。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">就这些。是不是感觉有点太简单了？但事实就是如此，</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统从根本上其实就这些东西，然而你却能够从这几个简单的规则中推演出神奇无比的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">来。我们这就开始！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">递归的迷思</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">敏锐的你可能会发现，就以上这两条公理，我们的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">语言中无法表示递归函数，为什么呢？假设我们要计算经典的阶乘，递归描述肯定像这样：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">f(n):</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;if n == 0 return 1</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;return n*f(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">当然，上面这个程序是假定</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">为正整数。这个程序显示了一个特点，</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">在定义的过程中用到了它自身。那么如何在</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统中表达这一函数呢？理所当然的想法如下：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">lambda</span></em><span style="font-size: 12pt">&nbsp;n. If_Else n==0 1 n*&lt;<em>self</em>&gt;(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">当然，上面的程序假定了</span><span style="font-size: 12pt">If_Else</span><span style="font-size: 12pt">是一个已经定义好的三元操作符（你可以想象</span><span style="font-size: 12pt">C</span><span style="font-size: 12pt">的</span><span style="font-size: 12pt">&ldquo;?:&rdquo;</span><span style="font-size: 12pt">操作符，后面跟的三个参数分别是判断条件、成功后求值的表达式、失败后求值的表达式。那么很显然，这个定义里面有一个地方没法解决，那就是</span><span style="font-size: 12pt">&lt;<em>self</em>&gt;</span><span style="font-size: 12pt">那个地方我们应该填入什么呢？很显然，熟悉</span><span style="font-size: 12pt">C</span><span style="font-size: 12pt">这类命令式语言的人都知道应该填入这个函数本身的名字，然而</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统里面的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式（或称函数）是没有名字的。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">怎么办？难道就没有办法实现递归了？或者说，丘齐做出的这个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统里面根本没法实现递归从而在计算能力上面有重大的缺陷？显然不是。马上你就会看到</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">是如何把一个看上去非递归的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式像变魔术那样变成一个递归版本的。在成功之前我们再失败一次，注意下面的尝试：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let F =&nbsp;<em>lambda</em>&nbsp;n. IF_Else n==0 1 n*F(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">看上去不错，是吗？可惜还是不行。因为</span><span style="font-size: 12pt">let F</span><span style="font-size: 12pt">只是起到一个</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Syntactic_sugar">语法糖</a></span><span style="font-size: 12pt">的作用，在它所代表的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">表达式还没有完全定义出来之前你是不可以使用</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">这个名字的。更何况实际上丘齐当初的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统里面也并没有这个语法元素，这只是刚才为了简化代码而引入的语法糖。当然，了解这个</span><span style="font-size: 12pt">let</span><span style="font-size: 12pt">语句还是有意义的，后面还会用到。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">一次成功的尝试</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">在上面几次失败的尝试之后，我们是不是就一筹莫展了呢？别忘了软件工程里面的一条黄金定律：</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">任何问题都可以通过增加一个间接层来解决</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。不妨把它沿用到我们面临的递归问题上：没错，我们的确没办法在一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数的定义里面直接（按名字）来调用其自身。但是，可不可以间接调用呢？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们回顾一下刚才不成功的定义：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">lambda</span></em><span style="font-size: 12pt">&nbsp;n. If_Else n==0 1 n*&lt;<em>self</em>&gt;(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在</span><span style="font-size: 12pt">&lt;self&gt;</span><span style="font-size: 12pt">处不是缺少</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">这个函数自身</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">嘛，既然不能直接填入</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">这个函数自身</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，我们可以增加一个参数，也就是说，把</span><span style="font-size: 12pt">&lt;self&gt;</span><span style="font-size: 12pt">参数化：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">lambda</span></em><span style="font-size: 12pt">&nbsp;<strong>self</strong>&nbsp;n. If_Else n==0 1 n*<strong>self</strong>(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">上面这个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子总是合法定义了吧。现在，我们调用这个函数的时候，只要加传一个参数</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">，这个参数不是别人，正是这个函数自身。还是为了简单起见，我们用</span><span style="font-size: 12pt">let</span><span style="font-size: 12pt">语句来给上面这个函数起个别名：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let P =&nbsp;<em>lambda</em>&nbsp;self n. If_Else n==0 1 n*self(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们这样调用，比如说我们要计算</span><span style="font-size: 12pt">3</span><span style="font-size: 12pt">的阶乘：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">P</span></strong><span style="font-size: 12pt">(<strong>P</strong>, 3)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">也就是说，把</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">自己</span><span style="font-size: 12pt">作为</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的第一个参数（注意，调用的时候</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">已经定义完毕了，所以我们当然可以使用它的名字了）。这样一来，</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">里面的</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">处不就等于是</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">本身了吗？自身调用自身，递归！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">可惜这只是个美好的设想，还差一点点。我们分析一下</span><span style="font-size: 12pt">P(P, 3)</span><span style="font-size: 12pt">这个调用。利用前面讲的</span><span style="font-size: 12pt">Beta</span><span style="font-size: 12pt">转换规则，这个函数调用展开其实就是（你可以完全把</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">当成一个宏来进行展开！）：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">IF_Else n==0 1 n*<strong>P</strong>(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">看出问题了吗？这里的</span><strong><span style="font-size: 12pt">P</span></strong><span style="font-size: 12pt">(n-1)</span><span style="font-size: 12pt">虽然调用到了</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，然而只给出了一个参数；而从</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的定义来看，它是需要两个参数的（分别为</span><strong><span style="font-size: 12pt">self</span></strong><span style="font-size: 12pt">和</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">）！也就是说，为了让</span><strong><span style="font-size: 12pt">P</span></strong><span style="font-size: 12pt">(n-1)</span><span style="font-size: 12pt">变成良好的调用，我们得加一个参数才行，所以我们得稍微修改一下</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的定义：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let P =&nbsp;<em>lambda</em>&nbsp;<strong>self</strong>&nbsp;n. If_Else n==0 1 n*<strong>self</strong>(<strong>self</strong>, n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">请注意，我们在</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的函数体内调用</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">的时候增加了一个参数。现在当我们调用</span><span style="font-size: 12pt">P(P, 3)</span><span style="font-size: 12pt">的时候，展开就变成了：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">IF_Else 3==0 1 3*<strong>P</strong>(<strong>P</strong>, 3-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">而</span><strong><span style="font-size: 12pt">P</span></strong><span style="font-size: 12pt">(<strong>P</strong>, 3-1)</span><span style="font-size: 12pt">是对</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">合法的递归调用。这次我们真的成功了！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">不动点原理</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">然而，看看我们的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的定义，是不是很丑陋？</span><span style="font-size: 12pt">&ldquo;n*<strong>self</strong>(<strong>self</strong>, n-1)&rdquo;</span><span style="font-size: 12pt">？什么玩意？为什么要多出一个多余的</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">？</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a></span><span style="font-size: 12pt">！怎么办呢？我们想起我们一开始定义的那个失败的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，虽然行不通，但最初的努力往往是大脑最先想到的最直观的做法，我们来回顾一下：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let P =&nbsp;<em>lambda</em>&nbsp;self n. If_Else n==0 1 n*<strong>self</strong>(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的函数体就非常清晰，没有冗余成分，虽然参数列表里面多出一个</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">，但我们其实根本不用管它，看函数体就行了，</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">这个名字已经可以说明一切了对不对？但很可惜这个函数不能用。我们再来回想一下为什么不能用呢？因为当你调用</span><span style="font-size: 12pt">P(P, n)</span><span style="font-size: 12pt">的时候，里面的</span><span style="font-size: 12pt">self(n-1)</span><span style="font-size: 12pt">会展开为</span><span style="font-size: 12pt">P(n-1)</span><span style="font-size: 12pt">而</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">是需要两个参数的。唉，要是这里的</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">是一个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">真正</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的，只需要一个参数的递归阶乘函数，那该多好啊。为什么不呢？干脆我们假设出一个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">真正</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的递归阶乘函数：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">power(n):</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;if(n==0) return 1;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;return n*power(n-1);</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">但是，前面不是说过了，这个理想的版本无法在</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统中定义出来吗（由于</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数都是没名字的，无法自己内部调用自己）？不急，我们并不需要它被定义出来，我们只需要在头脑中</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">假设</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">它以</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">某种</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">方式被定义出来了，现在我们把这个真正完美的</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">传给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，这样：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">P(<strong>power</strong>, 3)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">注意它跟</span><span style="font-size: 12pt">P(P, 3)</span><span style="font-size: 12pt">的不同，</span><span style="font-size: 12pt">P(P, 3)</span><span style="font-size: 12pt">我们传递的是一个有缺陷的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">为参数。而</span><span style="font-size: 12pt">P(power, 3)</span><span style="font-size: 12pt">我们则是传递的一个真正的递归函数</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">。我们试着展开</span><span style="font-size: 12pt">P(power, 3):</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">IF_Else 3==0 1 3*<strong>power</strong>(3-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">发生了什么？？</span><span style="font-size: 12pt">power(3-1)</span><span style="font-size: 12pt">将会计算出</span><span style="font-size: 12pt">2</span><span style="font-size: 12pt">的阶乘（别忘了，</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">是我们设想的完美递归函数），所以这个式子将会忠实地计算出</span><span style="font-size: 12pt">3</span><span style="font-size: 12pt">的阶乘！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">回想一下我们是怎么完成这项任务的：我们设想了一个以某种方式构造出来的完美的能够内部自己调用自己的递归阶乘函数</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">，我们发现把这个</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">传给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的话，</span><span style="font-size: 12pt">P(power, n)</span><span style="font-size: 12pt">的展开式就是真正的递归计算</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">阶乘的代码了。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">你可能要说：废话！都有了</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">了我们还要费那事把它传给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">来个</span><span style="font-size: 12pt">P(power, n)</span><span style="font-size: 12pt">干嘛？直接</span><span style="font-size: 12pt">power(n)</span><span style="font-size: 12pt">不就得了？</span><span style="font-size: 12pt">!&nbsp;</span><span style="font-size: 12pt">别急，之所以设想出这个</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">只是为了引入不动点的概念，而不动点的概念将会带领我们发现</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">什么是不动点？一点都不神秘。让我们考虑刚才的</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">与</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">之间的关系。一个是真正可递归的函数，一个呢，则是以一个额外的</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">参数来试图实现递归的伪递归函数，我们已经看到了把</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">交给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">为参数发生了什么，对吧？不，似乎还没有，我们只是看到了，</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">把</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">加上一个</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">一起交给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">为参数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">能够实现真正的递归。现在我们想考虑</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">跟</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">之间的关系，直接把</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">交给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">如何？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">P(power)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这是什么？这叫函数的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Partial_evaluation"><em>部分求值</em>(<em>partial evaluation</em>)</a></span><span style="font-size: 12pt">。换句话说，第一个参数是给出来了，但第二个参数还悬在那里，等待给出。那么，光给一个参数得到的是什么呢？是</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">还剩一个参数待给的一个新的函数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。其实也很简单，只要按照</span><span style="font-size: 12pt">Beta</span><span style="font-size: 12pt">转换规则做就是了，把</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的函数体里面的</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">出现处皆替换为</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">就可以了。我们得到：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">IF_Else n==0 1 n*power(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">当然，这个式子里面还有一个变量没有绑定，那就是</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">，所以这个式子还不能求值，你需要给它一个</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">才能具体求值，对吧。这么说，这可不就是一个以</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">为参数的函数么？实际上就是的。在</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">算子系统里面，如果给一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数的参数不足，则得到的就是一个新的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数，这个新的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数所接受的参数也就是你尚未给出的那些参数。换句话来说，调用一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数可以分若干步来进行，每次只给出一部分参数，而只有等所有参数都给齐了，函数的求值结果才能出来，否则你得到的就是一个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">中间函数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">那么，这跟不动点定理有什么关系？关系大了，刚才不是说了，</span><span style="font-size: 12pt">P(power)</span><span style="font-size: 12pt">返回的是一个新的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">中间函数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">嘛？这个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">中间函数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的函数体我们刚才已经看到了，就是简单地展开</span><span style="font-size: 12pt">P(power)</span><span style="font-size: 12pt">而已，回顾一遍：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">IF_Else n==0 1 n*power(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们已经知道，这是个函数，参数</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">待定。因此我们不妨给它加上一个</span><span style="font-size: 12pt">&ldquo;lambda n&rdquo;</span><span style="font-size: 12pt">的帽子，这样好看一点：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">lambda</span></em><span style="font-size: 12pt">&nbsp;n. IF_Else n==0 1 n*power(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这是什么呢？这可不就是</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">本身的定义？（当然，如果我们能够定义</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">的话）。不信我们看看</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">如果能够定义出来像什么样子：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let power =&nbsp;<em>lambda</em>&nbsp;n. IF_Else n==0 1 n*power(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">一模一样！也就是说，</span><span style="font-size: 12pt">P(power)</span><span style="font-size: 12pt">展开后跟</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">是一样的。即：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">P(power) = power</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">以上就是所谓的<em>不动点</em>。即对于函数</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">来说</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">是这样一个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">点</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">：当把</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">用到</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">身上的时候，得到的结果仍然还是</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">，也就是说，</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">这个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">点</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">在</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的作用下是</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">不动</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">可惜的是，这一切居然都是建立在一个不存在的</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">的基础上的，又有什么用呢？可别过早提</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">不存在</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">这个词，你觉得一样东西不存在或许只是你没有找到使它存在的正确方法。我们已经看到</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">是跟</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">有着密切联系的。密切到什么程度呢？对于伪递归的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，存在一个</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">，满足</span><span style="font-size: 12pt">P(power)=power</span><span style="font-size: 12pt">。注意，这里所说的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">伪递归</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，是指这样的形式：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let P =&nbsp;<em>lambda</em>&nbsp;self n. If_Else n==0 1 n*<strong>self</strong>(n-1) //&nbsp;</span><span style="font-size: 12pt">注意，</span><span style="font-size: 12pt">不是</span><span style="font-size: 12pt">self(self,n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">一般化的描述就是，对任一伪递归</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">（回想一下伪递归的</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">如何得到</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">是我们为了解决</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数不能引用自身的问题，于是给理想的</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">加一个</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">参数从而得到的），必存在一个理想</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">（</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">就是从这个理想</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">演变而来的），满足</span><span style="font-size: 12pt">F(f) = f</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">那么，现在的问题就归结为如何针对</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">找到它的</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">了。根据</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">和</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">之间的密切联系（</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">就比</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">多出一个</span><span style="font-size: 12pt">self</span><span style="font-size: 12pt">参数而已），我们可以从</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">得出</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">吗？假设我们可以（又是假设），也就是说假设我们找到了一根魔棒，把它朝任意一个伪递归的</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">一挥，眼前一花，它就变成了真正的</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">了。这根魔棒如果存在的话，它具有什么性质？我们假设这个神奇的函数叫做</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">，把</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">用到任何伪递归的函数</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">上就能够得到真正的</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">，也就是说：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Y(F) = f</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">结合上面的</span><span style="font-size: 12pt">F(f) = f</span><span style="font-size: 12pt">，我们得到：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Y(F) = f = F(f) = F(Y(F))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">也就是说，</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">具有性质：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">Y(F) = F(Y(F))</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">性质倒是找出来了，怎么构造出这个</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">却又成了难题。一个办法就是使用抽象法，这是从工程学的思想的角度，也就是通过不断迭代、重构，最终找到问题的解。然而对于这里的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">，接近问题解的过程却显得复杂而费力，甚至过程中的有些点上的思维跳跃有点如羚羊挂角无迹可寻。然而，在这整个</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">介绍完了之后我们将会介绍著名的哥德尔不完备性定理，然后我们就会发现，通过哥德尔不完备性定理证明中的一个核心构造式，只需一步自然的推导就能得出我们的</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">。而且，最美妙的是，还可以再往下归约，把一切都归约到康托尔当初提出的对角线方法，到那时我们就会发现原来同样如羚羊挂角般的哥德尔的证明其实是对角线方法的一个自然推论。数学竟是如此奇妙，我们由简单得无法再简单的</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">系统的两条公理居然能够导出如此复杂如此令人目眩神迷的</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">，而这些复杂性其实也只是荡漾在定理海洋中的涟漪，拨开复杂性的迷雾我们重又发现它们居然寓于极度的简洁之中。这就是数学之美。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">让我们先来看一看</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">的费力而复杂的工程学构造法，我会尽量让这个过程显得自然而流畅</span><sup><span style="font-size: 12pt">[7]</span></sup><span style="font-size: 12pt">：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们再次回顾一下那个伪递归的求阶乘函数：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let P =&nbsp;<em>lambda</em>&nbsp;self n. If_Else n==0 1 n*<strong>self</strong>(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们的目标是找出</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的不动点</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">，根据不动点的性质，只要把</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">传给</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，即</span><span style="font-size: 12pt">P(power)</span><span style="font-size: 12pt">，便能够得到真正的递归函数了。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在，关键的地方到了，由于：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">power = P(power) //&nbsp;</span><span style="font-size: 12pt">不动点原理</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这就意味着，</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">作为一个函数（</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">里面一切都是函数），它是自己调用了自己的。那么，我们如何实现这样一个能够自己调用自己的</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">呢？回顾我们当初成功的一次尝试，要实现递归，我们是通过增加一个间接层来进行的：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let power_gen =&nbsp;<em>lambda</em>&nbsp;self. P(<strong>self</strong>(<strong>self</strong>))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">还记得</span><strong><span style="font-size: 12pt">self</span></strong><span style="font-size: 12pt">(<strong>self</strong>)</span><span style="font-size: 12pt">这个形式吗？我们在成功实现出求阶乘递归函数的时候不就是这么做的？那么对于现在这个</span><span style="font-size: 12pt">power_gen</span><span style="font-size: 12pt">，怎么递归调用？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">power_gen(power_gen)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">不明白的话可以回顾一下前面我们调用</span><span style="font-size: 12pt">P(P, n)</span><span style="font-size: 12pt">的地方。这里</span><span style="font-size: 12pt">power_gen(power_gen)</span><span style="font-size: 12pt">展开后得到的是什么呢？我们根据刚才</span><span style="font-size: 12pt">power_gen</span><span style="font-size: 12pt">的定义展开看一看，原来是：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">P</span></strong><span style="font-size: 12pt">(power_gen(power_gen))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">看到了吗？也就是说：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">power_gen(power_gen) =&gt;&nbsp;<strong>P</strong>(power_gen(power_gen))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong>&nbsp;</strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在，我们把</span><span style="font-size: 12pt">power_gen(power_gen)</span><span style="font-size: 12pt">当成整体看，不妨令为</span><span style="font-size: 12pt">power</span><span style="font-size: 12pt">，就看得更清楚了：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">power =&gt;&nbsp;<strong>P</strong>(power)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这不正是我们要的答案么？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">OK</span><span style="font-size: 12pt">，我们<em>总结一下</em>：对于给定的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，只要构造出一个相应的</span><span style="font-size: 12pt">power_gen</span><span style="font-size: 12pt">如下：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let power_gen =&nbsp;<em>lambda</em>&nbsp;self. P(<strong>self</strong>(<strong>self</strong>))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们就会发现，</span><span style="font-size: 12pt">power_gen(power_gen)</span><span style="font-size: 12pt">这个调用展开后正是</span><span style="font-size: 12pt">P(power_gen(power_gen))</span><span style="font-size: 12pt">。也就是说，我们的</span><span style="font-size: 12pt">power_gen(power_gen)</span><span style="font-size: 12pt">就是我们苦苦寻找的不动点了！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">铸造</span></strong><strong><span style="font-size: 14pt">Y Combinator</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在我们终于可以铸造我们的</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">了，</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">只要生成一个形如</span><span style="font-size: 12pt">power_gen</span><span style="font-size: 12pt">的</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数然后把它应用到自身，就大功告成：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let&nbsp;<strong>Y</strong>&nbsp;=&nbsp;<em>lambda</em>&nbsp;F.</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 48pt"><span style="font-size: 12pt">let&nbsp;<strong><em>f_gen</em></strong>&nbsp;=&nbsp;<em>lambda</em>&nbsp;self. F(<strong>self</strong>(<strong>self</strong>))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 48pt"><span style="font-size: 12pt">return&nbsp;<strong>f_gen</strong>(<strong>f_gen</strong>)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">稍微解释一下，</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">是一个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数，它接受一个伪递归</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">，在内部生成一个</span><span style="font-size: 12pt">f_gen</span><span style="font-size: 12pt">（还记得我们刚才看到的</span><span style="font-size: 12pt">power_gen</span><span style="font-size: 12pt">吧），然后把</span><span style="font-size: 12pt">f_gen</span><span style="font-size: 12pt">应用到它自身（记得</span><span style="font-size: 12pt">power_gen(power_gen)</span><span style="font-size: 12pt">吧），得到的这个</span><span style="font-size: 12pt">f_gen(f_gen)</span><span style="font-size: 12pt">也就是</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">的不动点了（因为</span><span style="font-size: 12pt">f_gen(f_gen) = F(f_gen(f_gen))</span><span style="font-size: 12pt">），而根据不动点的性质，</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">的不动点也就是那个对应于</span><span style="font-size: 12pt">F</span><span style="font-size: 12pt">的真正的递归函数！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">如果你还觉得不相信，我们稍微展开一下看看，还是拿阶乘函数说事，首先我们定义阶乘函数的伪递归版本：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">let Pwr =&nbsp;<em>lambda</em>&nbsp;self n. If_Else n==0 1 n*self(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">让我们把这个</span><span style="font-size: 12pt">Pwr</span><span style="font-size: 12pt">交给</span><strong><span style="font-size: 12pt">Y</span></strong><span style="font-size: 12pt">，看会发生什么（根据刚才</span><span style="font-size: 12pt">Y</span><span style="font-size: 12pt">的定义展开吧）：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Y(Pwr) =&gt;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;let f_gen =&nbsp;<em>lambda</em>&nbsp;self.&nbsp;<strong>Pwr</strong>(self(self))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;return f_gen(f_gen)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Y(Pwr)</span><span style="font-size: 12pt">的求值结果就是里面返回的那个</span><span style="font-size: 12pt">f_gen(f_gen)</span><span style="font-size: 12pt">，我们再根据</span><span style="font-size: 12pt">f_gen</span><span style="font-size: 12pt">的定义展开</span><span style="font-size: 12pt">f_gen(f_gen)</span><span style="font-size: 12pt">，得到：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">也就是说：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Y(Pwr) =&gt; f_gen(f_gen) =&gt; Pwr(f_gen(f_gen))</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们来看看得到的这个</span><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span><span style="font-size: 12pt">到底是不是真有递归的魔力。我们展开它（注意，因为</span><span style="font-size: 12pt">Pwr</span><span style="font-size: 12pt">需要两个参数，而我们这里只给出了一个，所以</span><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span><span style="font-size: 12pt">得到的是一个单参（即</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">）的函数）：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Pwr(<strong>f_gen</strong>(<strong>f_gen</strong>)) =&gt; If_Else n==0 1 n*<strong>f_gen</strong>(<strong>f_gen</strong>) (n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">而里面的那个</span><strong><span style="font-size: 12pt">f_gen</span></strong><span style="font-size: 12pt">(<strong>f_gen</strong>)</span><span style="font-size: 12pt">，根据</span><span style="font-size: 12pt">f_gen</span><span style="font-size: 12pt">的定义，又会展开为</span><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span><span style="font-size: 12pt">，所以：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span></strong><span style="font-size: 12pt">&nbsp;=&gt; If_Else n==0 1 n*&nbsp;<strong>Pwr(f_gen(f_gen))</strong>&nbsp;(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">看到加粗的部分了吗？因为</span><strong><span style="font-size: 12pt">Pwr(f_gen(f_gen))</span></strong><span style="font-size: 12pt">是一个接受</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">为参数的函数，所以不妨把它令成</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">（</span><span style="font-size: 12pt">f</span><span style="font-size: 12pt">的参数是</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">），这样上面的式子就是：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">f</span></strong><span style="font-size: 12pt">&nbsp;=&gt; If_Else n==0 1 n*<strong>f</strong>(n-1)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">完美的阶乘函数！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">哥德尔的不完备性定理</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><em><span style="font-size: 12pt">了解哥德尔不完备性定理的可以跳到下一节，</span></em><em><span style="font-size: 12pt">&ldquo;</span></em><em><span style="font-size: 12pt">大道至简</span></em><em><span style="font-size: 12pt">&mdash;&mdash;</span></em><em><span style="font-size: 12pt">康托尔的天才</span></em><em><span style="font-size: 12pt">&rdquo;</span></em></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">然而，漫长的</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">征途仍然并非本文的最终目的，对于</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">的构造和解释，只是给不了解</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">或</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">的读者看的。关键是马上你会看到</span><span style="font-size: 12pt">Y combinator</span><span style="font-size: 12pt">可以由哥德尔不完备性定理证明的一个核心构造式一眼瞧出来！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">让我们的思绪回到</span><span style="font-size: 12pt">1931</span><span style="font-size: 12pt">年，那个数学界风起云涌的年代，一个名不经传的</span><span style="font-size: 12pt">20</span><span style="font-size: 12pt">出头的学生，在他的博士论文中证明了一个惊天动地的结论。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">在那个年代，希尔伯特的数学天才就像太阳的光芒一般夺目，在关于数学严格化的大纷争中希尔伯特带领的形式主义派系技压群雄，得到许多当时有名望的数学家的支持。希尔伯特希望借助于形式化的手段，抽掉数学证明中的意义，把数学证明抽象成一堆无意义的符号转换，就连我们人类赖以自豪的逻辑推导，也不过只是一堆堆符号转换而已（想起</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">系统了吧：）</span><span style="font-size: 12pt">)</span><span style="font-size: 12pt">。这样一来，一个我们日常所谓的，带有直观意义和解释的数学系统就变成了一个纯粹由无意义符号表达的、公理加上推导规则所构成的形式系统，而数学证明呢，只不过是在这个系统内玩的一个文字游戏。令人惊讶的是，这样一种做法，真的是可行的！数学的意义，似乎竟然真的可以被抽掉！另一方面，一个形式系统具有非常好的性质，平时人们证明一个定理所动用的推导，变成了纯粹机械的符号变换。希尔伯特希望能够证明，在任一个无矛盾的形式系统中所能表达的所有陈述都要么能够证明要么能够证伪。这看起来是个非常直观的结论，因为一个结论要么是真要么是假，而它在它所处的领域</span><span style="font-size: 12pt">/</span><span style="font-size: 12pt">系统中当然应该能够证明或证伪了（只要我们能够揭示出该系统中足够多的真理）。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">然而，哥德尔的证明无情的击碎了这一企图，哥德尔的证明揭示出，任何足够强到蕴含了皮亚诺算术系统（</span><span style="font-size: 12pt">PA</span><span style="font-size: 12pt">）的一致（即无矛盾）的系统都是不完备的，所谓不完备也就是说在系统内存在一个为真但无法在系统内推导出的命题。这在当时的数学界揭起了轩然大波，其证明不仅具有数学意义，而且蕴含了深刻的哲学意义。从那时起这一不完备性定理就被引申到自然科学乃至人文科学的各个角落</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">至今还没有任何一个数学定理居然能够产生这么广泛而深远的影响。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">哥德尔的证明非常的长，达到了</span><span style="font-size: 12pt">200</span><span style="font-size: 12pt">多页纸，但其中很大的成分是用在了一些辅助性的工作上面，比如占据超过</span><span style="font-size: 12pt">1/3</span><span style="font-size: 12pt">纸张的是关于一个形式系统如何映射到自然数，也就是说，如何把一个形式系统中的所有公式都表示为自然数，并可以从一自然数反过来得出相应的公式。这其实就是编码，在我们现在看来是很显然的，因为一个程序就可以被编码成二进制数，反过来也可以解码。但是在当时这是一个全新的思想，也是最关键的辅助性工作之一，另一方面，这正是</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">程序即数据</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的最初想法。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在我们知道，要证明哥德尔的不完备性定理，只需在假定的形式系统</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内表达出一个为真但无法在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内推导出（证明）的命题。于是哥德尔构造了这样一个命题，用自然语言表达就是：命题</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">说的是</span><span style="font-size: 12pt">&ldquo;<em>P</em></span><em><span style="font-size: 12pt">不可在系统</span></em><em><span style="font-size: 12pt">T</span></em><em><span style="font-size: 12pt">内证明</span></em><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">（这里的系统</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">当然就是我们的命题</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">所处的形式系统了），也就是说</span><span style="font-size: 12pt">&ldquo;</span><em><span style="font-size: 12pt">我不可以被证明</span></em><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，跟著名的说谎者悖论非常相似，只是把</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">说谎</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">改成了</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">不可以被证明</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。我们注意到，一旦这个命题能够在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内表达出来，我们就可以得出</span><span style="font-size: 12pt">&ldquo;P</span><span style="font-size: 12pt">为真但无法在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内推导出来</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的结论，从而证明</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">的不完备性。为什么呢？我们假设</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">可以证明出</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，而因为</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">说的就是</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">不可在系统</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内证明，于是我们又得到</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">无法证明出</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，矛盾产生，说明我们的假设</span><span style="font-size: 12pt">&ldquo;T</span><span style="font-size: 12pt">可以证明</span><span style="font-size: 12pt">P&rdquo;</span><span style="font-size: 12pt">是错误的，根据排中律，我们得到</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">不可以证明</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，而由于</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">说的正是</span><span style="font-size: 12pt">&ldquo;T</span><span style="font-size: 12pt">不可证明</span><span style="font-size: 12pt">P&rdquo;</span><span style="font-size: 12pt">，所以</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">就成了一个正确的命题，同时无法由</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内证明！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">如果你足够敏锐，你会发现上面这番推理本身不就是证明吗？其证明的结果不就是</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">是正确的？然而实际上这番证明是位于</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">系统之外的，它用到了一个关于</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">系统的假设</span><span style="font-size: 12pt">&ldquo;T</span><span style="font-size: 12pt">是一致（无矛盾）的</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，这个假设并非</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">系统里面的内容，所以我们刚才其实是在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">系统<em>之外</em>推导出了</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">是正确的，这跟</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">不能在</span><span style="font-size: 12pt">T</span><em><span style="font-size: 12pt">之</span></em><em><span style="font-size: 12pt">内</span></em><span style="font-size: 12pt">推导出来并不矛盾。所以别担心，一切都正常。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">那么，剩下来最关键的问题就是如何用形式语言在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内表达出这个</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，上面的理论虽然漂亮，但若是</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">根本没法在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内表达出来，我们又如何能证明</span><span style="font-size: 12pt">&ldquo;T</span><span style="font-size: 12pt">内存在这个为真但无法被证明的</span><span style="font-size: 12pt">P&rdquo;</span><span style="font-size: 12pt">呢？那一切还不是白搭？</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">于是，就有了哥德尔证明里面最核心的构造，哥德尔构造了这样一个公式：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">N(n) is unprovable in T</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个公式由两部分构成，</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">是这个公式的自由变量，它是一个自然数，一旦给定，那么这个公式就变成一个明确的命题。而</span><span style="font-size: 12pt">N</span><span style="font-size: 12pt">则是从</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">解码出的货真价实的（即我们常见的符号形式的）公式（记得哥德尔的证明第一部分就是把公式编码吗？）。</span><span style="font-size: 12pt">&rdquo;is unprovable in T&rdquo;</span><span style="font-size: 12pt">则是一个谓词，这里我们没有用形式语言而是用自然语言表达出来的，但哥德尔证明了它是可以用形式语言表达出来的，大致思路就是：一个形式系统中的符号数目是有限的，它们构成这个形式系统的符号表。于是，我们可以依次枚举出所有长度为</span><span style="font-size: 12pt">1</span><span style="font-size: 12pt">的串，长度为</span><span style="font-size: 12pt">2</span><span style="font-size: 12pt">的串，长度为</span><span style="font-size: 12pt">3</span><span style="font-size: 12pt">的串</span><span style="font-size: 12pt">&hellip;&nbsp;</span><span style="font-size: 12pt">此外根据形式系统给出的语法规则，我们可以检查每个串是否是良构的公式（</span><span style="font-size: 12pt">well formed formula</span><span style="font-size: 12pt">，简称</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">，其实也就是说，是否符合语法规则，前面我们在介绍</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">的时候看到了，一个形式系统是需要语法规则的，比如逻辑语言形式化之后我们就会看到</span><span style="font-size: 12pt">P-&gt;Q</span><span style="font-size: 12pt">是一个</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">，而</span><span style="font-size: 12pt">-&gt;PQ</span><span style="font-size: 12pt">则不是），因而我们就可以枚举出所有的</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">来。最关键的是，我们观察到形式系统中的证明也不过就是由一个个的</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">构成的序列（想想推导的过程，不就是一个公式接一个公式嘛）。而</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">构成的序列本身同样也是由符号表内的符号构成的串。所以我们只需枚举所有的串，对每一个串检查它是否是一个由</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">构成的序列（证明），如果是，则记录下这个</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">序列（证明）的最后一个</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">，也就是它的结论。这样我们便枚举出了所有的可由</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">推导出的定理。然后为了表达出</span><span style="font-size: 12pt">&rdquo;X is unprovable in T&rdquo;</span><span style="font-size: 12pt">，本质上我们只需说</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">不存在这样一个自然数</span><span style="font-size: 12pt">S</span><span style="font-size: 12pt">，它所解码出来的</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">序列以</span><span style="font-size: 12pt">X</span><span style="font-size: 12pt">为终结</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">！这也就是说，我们表达出了</span><span style="font-size: 12pt">&ldquo;is unprovable in T&rdquo;</span><span style="font-size: 12pt">这个谓词。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们用</span><span style="font-size: 12pt">UnPr(X)</span><span style="font-size: 12pt">来表达</span><span style="font-size: 12pt">&ldquo;X is unprovable in T&rdquo;</span><span style="font-size: 12pt">，于是哥德尔的公式变成了：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">UnPr( N(n) )</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在，到了最关键的部分，首先我们把这个公式简记为</span><span style="font-size: 12pt">G(n)&mdash;&mdash;</span><span style="font-size: 12pt">别忘了</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">内有一个自由变量</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">，所以</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">现在还不是一个命题，而只是一个公式，所以谈不上真假：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">G(n): UnPr( N(n) )</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">又由于</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">也是个</span><span style="font-size: 12pt">wff</span><span style="font-size: 12pt">，所以它也有自己的编码</span><span style="font-size: 12pt">g</span><span style="font-size: 12pt">，当然</span><span style="font-size: 12pt">g</span><span style="font-size: 12pt">是一个自然数，现在我们把</span><span style="font-size: 12pt">g</span><span style="font-size: 12pt">作为</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">的参数，也就是说，把</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">里面的自由变量</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">替换为</span><span style="font-size: 12pt">g</span><span style="font-size: 12pt">，我们于是得到一个真正的命题：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">G(g): UnPr( G(g) )</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">用自然语言来说，这个命题</span><span style="font-size: 12pt">G(g)</span><span style="font-size: 12pt">说的就是</span><span style="font-size: 12pt">&ldquo;</span><em><span style="font-size: 12pt">我是不可在</span></em><em><span style="font-size: 12pt">T</span></em><em><span style="font-size: 12pt">内证明的</span></em><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。看，我们在形式系统</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内表达出了</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">我是不可在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内证明的</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">这个命题。而我们一开始已经讲过了如何用这个命题来推断出</span><span style="font-size: 12pt">G(g)</span><span style="font-size: 12pt">为真但无法在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内证明，于是这就证明了哥德尔的不完备性定理</span><sup><span style="font-size: 12pt">[8]</span></sup><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">哥德尔的不完备性定理被称为</span><span style="font-size: 12pt">20</span><span style="font-size: 12pt">世纪数学最重大的发现（不知道有没有</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">之一</span><span style="font-size: 12pt">&rdquo;:)&nbsp;</span><span style="font-size: 12pt">）现在我们知道为真但无法在系统内证明的命题不仅仅是这个诡异的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">哥德尔命题</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，还有很多真正有意义的明确命题，其中最著名的就是</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Continuum_hypothesis">连续统假设</a></span><span style="font-size: 12pt">，此外哥德巴赫猜想也有可能是个没法在数论系统中证明的真命题。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">从哥德尔公式到</span></strong><strong><span style="font-size: 15pt">Y Combinator</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">哥德尔的不完备性定理证明了数学是一个未完结的学科，永远有需要我们以人的头脑从系统之外去用我们独有的直觉发现的东西。罗杰</span><span style="font-size: 12pt">&middot;</span><span style="font-size: 12pt">彭罗斯在</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://www.amazon.com/Emperors-New-Mind-Roger-Penrose/dp/0140145346">《The Emperor's New Mind》</a></span><span style="font-size: 12pt">中用它来证明人工智能的不可实现。当然，这个结论是很受质疑的。但哥德尔的不完备性定理的确还有很多很多的有趣推论，数学的和哲学上的。哥德尔的不完备性定理最深刻的地方就是它揭示了自指（或称自引用，递归调用自身等等）结构的普遍存在性，我们再来看一看哥德尔命题的绝妙构造：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">G(n): UnPr( N(n) )</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们注意到，这里的</span><span style="font-size: 12pt">UnPr</span><span style="font-size: 12pt">其实是一个形式化的谓词，它不一定要说</span><span style="font-size: 12pt">&ldquo;X</span><span style="font-size: 12pt">在</span><span style="font-size: 12pt">T</span><span style="font-size: 12pt">内可证明</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，我们可以把它泛化为一个一般化的谓词，</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 12pt">G(n): P( N(n) )</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">也就是说，对于任意一个单参的谓词</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，都存在上面这个哥德尔公式。然后我们算出这个哥德尔公式的自然数编码</span><span style="font-size: 12pt">g</span><span style="font-size: 12pt">，然后把它扔给</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">，就得到：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">G(g): P( G(g) )</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">是不是很熟悉这个结构？我们的</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">的构造不就是这样一个形式？我们把</span><span style="font-size: 12pt">G</span><span style="font-size: 12pt">和</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">都看成一元函数，</span><span style="font-size: 12pt">G(g)</span><span style="font-size: 12pt">可不正是</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">这个函数的不动点么！于是，<strong>我们从哥德尔的证明里面直接看到了</strong></span><strong><span style="font-size: 12pt">Y Combinator</span></strong><span style="font-size: 12pt">！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">至于如何从哥德尔的证明联系到停机问题，就留给你去解决吧</span><span style="font-size: 12pt">:)&nbsp;</span><span style="font-size: 12pt">因为更重要的还在后面，我们看到，哥德尔的证明虽然巧妙至极，然而其背后的思维过程仍然飘逸而不可捉摸，至少我当时看到</span><span style="font-size: 12pt">G(n)</span><span style="font-size: 12pt">的时候，</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">乃大惊</span><span style="font-size: 12pt">&rdquo;&ldquo;</span><span style="font-size: 12pt">不知所从出</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，他怎么想到的？难道是某一个瞬间</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">灵光一现</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">？一般我是不信这一说的，已经有越来越多的科学研究表明一瞬间的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">灵感</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">往往是潜意识乃至表层意识长期思考的结果。哥德尔天才的证明也不例外，我们马上就会看到，在这个神秘的构造背后，其实隐藏着某种更深的东西，这就是康托尔在</span><span style="font-size: 12pt">19</span><span style="font-size: 12pt">世纪</span><span style="font-size: 12pt">80</span><span style="font-size: 12pt">年代研究无穷集合和超限数时引入的对角线方法。这个方法仿佛有种神奇的力量，能够揭示出某种自指的结构来，而同时，这又是一个极度简单的手法，通过它我们能够得到数学里面一些非常奇妙的性质。无论是哥德尔的不完备性定理还是再后来丘齐建立的</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">，抑或我们非常熟悉的图灵机理论里的停机问题，其实都只是这个手法简单推演的结果！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">大道至简</span></strong><strong><span style="font-size: 15pt">&mdash;&mdash;</span></strong><strong><span style="font-size: 15pt">康托尔的天才</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">大道至简</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">这个名词或许更多出现在文学和哲学里面，一般用在一些模模糊糊玄玄乎乎的哲学观点上。然而，用在这里，数学上，这个名词才终于适得其所。大道至简，看上去最复杂的理论其实建立在一个最简单最纯粹的道理之上。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">康托尔在无穷集合和超限数方面的工作主要集中在两篇突破性的论文上，这也是我所见过的最纯粹最美妙的数学论文，现代的数学理论充斥了太多复杂的符号和概念，很多时候让人看不到最本质的东西，当然，不否认这些东西很多也是有用的，然而，要领悟真正的数学美，像集合论和数论这种纯粹的东西，真的非常适合。不过这里就不过多谈论数学的细节了，只说康托尔引入对角线方法的动机和什么是对角线方法。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">神奇的一一对应</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">康托尔在研究无穷集合的时候，富有洞察性地看到了对于无穷集合的大小问题，我们不能再使用直观的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">所含元素的个数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">来描述，于是他创造性地将一一对应引入进来，两个无穷集合</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">大小</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">一样当且仅当它们的元素之间能够构成一一对应。这是一个非常直观的概念，一一对应嘛，当然个数相等了，是不是呢？然而这同时就是它不直观的地方了。对于无穷集合，我们日常的所谓</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">个数</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的概念不管用了，因为无穷集合里面的元素个数本就是无穷多个。不信我们来看一个小小的例子。我们说自然数集合能够跟偶数集合构成一一对应，从而<em>自然数集合跟偶数集合里面元素</em></span><em><span style="font-size: 12pt">&ldquo;</span></em><em><span style="font-size: 12pt">个数</span></em><em><span style="font-size: 12pt">&rdquo;</span></em><em><span style="font-size: 12pt">是一样多的</span></em><span style="font-size: 12pt">。怎么可能？偶数集合是自然数集合的真子集，所有偶数都是自然数，但自然数里面还包含奇数呢，说起来应该是二倍的关系不是？不是！我们只要这样来构造一一对应：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">1 2 3 4 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">2 4 6 8 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">用函数来描述就是</span><span style="font-size: 12pt">&nbsp;f(n) = 2n</span><span style="font-size: 12pt">。检验一下是不是一一对应的？不可思议对吗？还有更不可思议的，<em>自然数集是跟有理数集一一对应的</em>！对应函数的构造就留给你解决吧，提示，按如下方式来挨个数所有的有理数：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">1/1 &nbsp;1/2 &nbsp;2/1 &nbsp;1/3 &nbsp;2/2 &nbsp;3/1 &nbsp;1/4 &nbsp;2/3&nbsp;3/2&nbsp;4/1 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">用这种一一对应的手法还可以得到很多惊人的结论，如<em>一条直线上所有的点跟一个平面上所有的点构成一一对应</em>（也就是说<em>复数集合跟实数集合构成一一对应</em>）。以致于连康托尔自己都不敢相信自己的眼睛了，这也就是为什么他在给戴得金的信中会说</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">我看到了它，却不敢相信它</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的原因。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">然而，除了一一对应之外，还有没有不能构成一一对应的两个无穷集合呢？有。<em>实数集合就比自然数集合要</em></span><em><span style="font-size: 12pt">&ldquo;</span></em><em><span style="font-size: 12pt">大</span></em><em><span style="font-size: 12pt">&rdquo;</span></em><span style="font-size: 12pt">，它们之间实际上无法构成一一对应。这就是康托尔的对角线方法要解决的问题。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">实数集和自然数集无法构成一一对应？！</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们只需将实数的小数位展开，并且我们假设实数集能够与自然数集一一对应，也就是说假设实数集</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Countable">可列</a></span><span style="font-size: 12pt">，所以我们把它们与自然数一一对应列出，如下：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">1&nbsp;</span><span style="font-size: 12pt">&nbsp;a</span><sub><span style="font-size: 12pt">10</span></sub><span style="font-size: 12pt">.a<sub>11</sub>a<sub>12</sub>a<sub>13</sub>&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">2&nbsp;</span><span style="font-size: 12pt">&nbsp;a</span><sub><span style="font-size: 12pt">20</span></sub><span style="font-size: 12pt">.a<sub>21</sub>a<sub>22</sub>a<sub>23</sub>&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">3&nbsp;</span><span style="font-size: 12pt">&nbsp;a</span><sub><span style="font-size: 12pt">30</span></sub><span style="font-size: 12pt">.a<sub>31</sub>a<sub>32</sub>a<sub>33</sub>&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">4&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">5&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">（注：</span><span style="font-size: 12pt">aij</span><span style="font-size: 12pt">里面的</span><span style="font-size: 12pt">ij</span><span style="font-size: 12pt">是下标</span><span style="font-size: 12pt">）</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">现在，我们构造一个新的实数，它的第</span><span style="font-size: 12pt">i</span><span style="font-size: 12pt">位小数不等于</span><span style="font-size: 12pt">aii</span><span style="font-size: 12pt">。也就是说，它跟上面列出的每一个实数都至少有一个对应的小数位不等，也就是说它不等于我们上面列出的所有实数，这跟我们上面假设已经列出了所有实数的说法相矛盾。所以实数集只能是不可列的，即不可与自然数集一一对应！这是对角线方法的最简单应用。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">对角线方法</span></strong><strong><span style="font-size: 14pt">&mdash;&mdash;</span></strong><strong><span style="font-size: 14pt">停机问题的深刻含义</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">对角线方法有很多非常奇妙的结论。其中之一就是文章一开始提到的停机问题。我想绝大多数人刚接触停机问题的时候都有一个问题，图灵怎么能够想到这么诡异的证明，怎么能构造出那个诡异的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">说停机又不停机，说不停机又停机</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的悖论机器。马上我们就会看到，这其实只是对角线方法的一个直接结论。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">还是从反证开始，我们假设存在这样一个图灵机，他能够判断任何程序在任何输入上是否停机。由于所有图灵机构成的集合是一个可列集（也就是说，我们可以逐一列出所有的图灵机，严格证明见我以前的一篇文章《</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/pongba/archive/2006/03/11/621723.aspx">图灵机杂思</a></span><span style="font-size: 12pt">》），所以我们可以很自然地列出下表，它表示每个图灵机分别在每一个可能的输入（</span><span style="font-size: 12pt">1,2,3,&hellip;</span><span style="font-size: 12pt">）下的输出，</span><span style="font-size: 12pt">N</span><span style="font-size: 12pt">表示无法停机，其余数值则表示停机后的输出：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp; &nbsp;&nbsp;1 &nbsp;&nbsp;&nbsp;2 &nbsp;&nbsp;&nbsp;&nbsp;3 &nbsp;&nbsp;&nbsp;4 &nbsp;&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">M1 &nbsp;N &nbsp;&nbsp;&nbsp;1 &nbsp;&nbsp;&nbsp;N &nbsp;&nbsp;&nbsp;N &nbsp;&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">M2 &nbsp;2 &nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;N &nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">M3 &nbsp;0 &nbsp;&nbsp;&nbsp;1 &nbsp;&nbsp;&nbsp;&nbsp;2 &nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">M4 &nbsp;N &nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp; &nbsp;N &nbsp;&nbsp;&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">M1</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">M2</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">M3 &hellip;&nbsp;</span><span style="font-size: 12pt">是逐一列出的图灵机，并且，注意，由于程序即数据，每个图灵机都有唯一编码，所以我们规定在枚举图灵机的时候</span><span style="font-size: 12pt">Mi</span><span style="font-size: 12pt">其实就代表编码为</span><span style="font-size: 12pt">i</span><span style="font-size: 12pt">的图灵机，当然这里很多图灵机将会是根本没用的玩意，但这不要紧。此外，最上面的一行</span><span style="font-size: 12pt">1 2 3 4 &hellip;&nbsp;</span><span style="font-size: 12pt">是输入数据，如，矩阵的第一行代表</span><span style="font-size: 12pt">M1</span><span style="font-size: 12pt">分别在</span><span style="font-size: 12pt">1</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">2</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">3</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">上面的输出，不停机的话就是</span><span style="font-size: 12pt">N</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们刚才假设存在这样一个图灵机</span><span style="font-size: 12pt">H</span><span style="font-size: 12pt">，它能够判断任何程序在任何输入上能否停机，换句话说，</span><span style="font-size: 12pt">H(i,j)</span><span style="font-size: 12pt">（</span><span style="font-size: 12pt">i</span><span style="font-size: 12pt">是</span><span style="font-size: 12pt">Mi</span><span style="font-size: 12pt">的编码）能够给出</span><span style="font-size: 12pt">&ldquo;Mi(j)&rdquo;</span><span style="font-size: 12pt">是</span><span style="font-size: 12pt">N</span><span style="font-size: 12pt">（不停）呢还是给出一个具体的结果（停）。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们现在来运用康托尔的对角线方法，我们构造一个新的图灵机</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">在</span><span style="font-size: 12pt">1</span><span style="font-size: 12pt">上的输出行为跟</span><span style="font-size: 12pt">M1(1)&ldquo;</span><span style="font-size: 12pt">不一样</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，在</span><span style="font-size: 12pt">2</span><span style="font-size: 12pt">上的输出行为跟</span><span style="font-size: 12pt">M2(2)&ldquo;</span><span style="font-size: 12pt">不一样</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">总之</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">在输入</span><span style="font-size: 12pt">i</span><span style="font-size: 12pt">上的输出跟</span><span style="font-size: 12pt">Mi(i)</span><span style="font-size: 12pt">不一样。只需利用一下我们万能的</span><span style="font-size: 12pt">H</span><span style="font-size: 12pt">，这个图灵机</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">就不难构造出来，如下：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">P(i):</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">if(&nbsp;<strong>H</strong>(i, i) == 1 ) then // Mi(i) halts</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 24pt"><span style="font-size: 12pt">return 1 + Mi(i)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px; text-indent: 12pt"><span style="font-size: 12pt">else // if H(i, i) == 0 (Mi(i) doesn&rsquo;t halt)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp;&nbsp; return 0</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">也就是说，如果</span><span style="font-size: 12pt">Mi(i)</span><span style="font-size: 12pt">停机，那么</span><span style="font-size: 12pt">P(i)</span><span style="font-size: 12pt">的输出就是</span><span style="font-size: 12pt">Mi(i)+1</span><span style="font-size: 12pt">，如果</span><span style="font-size: 12pt">Mi(i)</span><span style="font-size: 12pt">不停机的话，</span><span style="font-size: 12pt">P(i)</span><span style="font-size: 12pt">就停机且输出</span><span style="font-size: 12pt">0</span><span style="font-size: 12pt">。这就保证了</span><span style="font-size: 12pt">P(i)</span><span style="font-size: 12pt">的输出行为跟</span><span style="font-size: 12pt">Mi(i)</span><span style="font-size: 12pt">反正不一样。现在，我们注意到</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">本身是一个图灵机，而我们上面已经列出了所有的图灵机，所以必然存在一个</span><span style="font-size: 12pt">k</span><span style="font-size: 12pt">，使得</span><span style="font-size: 12pt">Mk = P</span><span style="font-size: 12pt">。而两个图灵机相等当且仅当它们对于所有的输入都相等，也就是说对于任取的</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">，有</span><span style="font-size: 12pt">Mk(n) = P(n)</span><span style="font-size: 12pt">，现在令</span><span style="font-size: 12pt">n=k</span><span style="font-size: 12pt">，得到</span><span style="font-size: 12pt">Mk(k)=P(k)</span><span style="font-size: 12pt">，根据上面给出的</span><span style="font-size: 12pt">P</span><span style="font-size: 12pt">的定义，这实际上就是：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Mk(k) = P(k) =</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">1+Mk(k) if Mk(k) halts</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if Mk(k) doesn&rsquo;t halt</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">看到这个式子里蕴含的矛盾了吗？如果</span><span style="font-size: 12pt">Mk(k)</span><span style="font-size: 12pt">停机，那么</span><span style="font-size: 12pt">Mk(k)=1+Mk(k)</span><span style="font-size: 12pt">；如果</span><span style="font-size: 12pt">Mk(k)</span><span style="font-size: 12pt">不停机，则</span><span style="font-size: 12pt">Mk(k)=0</span><span style="font-size: 12pt">（给出结果</span><span style="font-size: 12pt">0</span><span style="font-size: 12pt">即意味着</span><span style="font-size: 12pt">Mk(k)</span><span style="font-size: 12pt">停机）；不管哪种情况都是矛盾。于是我们得出，不存在那样的</span><span style="font-size: 12pt">H</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个对角线方法实际上说明了，无论多聪明的</span><span style="font-size: 12pt">H</span><span style="font-size: 12pt">，总存在一个图灵机的停机行为是它无法判断的。这跟哥德尔定理</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">无论多</span><span style="font-size: 12pt">&lsquo;</span><span style="font-size: 12pt">完备</span><span style="font-size: 12pt">&rsquo;</span><span style="font-size: 12pt">的形式化公理系统，都存在一个</span><span style="font-size: 12pt">&lsquo;</span><span style="font-size: 12pt">哥德尔命题</span><span style="font-size: 12pt">&rsquo;</span><span style="font-size: 12pt">是无法在系统内推导出来的</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">从本质上其实是一模一样的。只不过我们一般把图灵的停机问题称为</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">可判定问题</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，而把数学的称为</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">可证明问题</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">等等！如果我们把那个无法判定是否停机的图灵机作为算法的特例纳入到我们的</span><span style="font-size: 12pt">H</span><span style="font-size: 12pt">当中呢？我们把得到的新的判定算法记为</span><span style="font-size: 12pt">H<sub>1</sub></span><span style="font-size: 12pt">。然而，可惜的是，在</span><span style="font-size: 12pt">H<sub>1</sub></span><span style="font-size: 12pt">下，我们又可以相应地以同样的手法从</span><span style="font-size: 12pt">H<sub>1</sub></span><span style="font-size: 12pt">构造出一个无法被它（</span><span style="font-size: 12pt">H<sub>1</sub></span><span style="font-size: 12pt">）判定的图灵机来。你再加，我再构造，无论你加多少个特例进去，我都可以由同样的方式构造出来一个你无法够到的图灵机，以彼之矛，攻彼之盾。其实这也是哥德尔定理最深刻的结论之一，哥德尔定理其实就说明了无论你给出多少个公理，即无论你建立多么完备的公理体系，这个系统里面都有由你的那些公理出发所推导不到的地方，这些黑暗的角落，就是人类直觉之光才能照射到的地方！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">本节我们从对角线方法证明了图灵的停机问题，我们看到，对角线方法能够揭示出某种自指结构，从而构造出一个</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">悖论图灵机</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">。实际上，对角线方法是一种有深远影响的方法，哥德尔的证明其实也是这个方法的一则应用。证明与上面的停机问题证明如出一辙，只不过把</span><span style="font-size: 12pt">Mi</span><span style="font-size: 12pt">换成了一个形式系统内的公式</span><span style="font-size: 12pt">fi</span><span style="font-size: 12pt">，具体的证明就留给聪明的你吧</span><span style="font-size: 12pt">:)</span><span style="font-size: 12pt">我们现在来简单的看一下这个奇妙方法的几个不那么明显的推论。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 14pt">罗素悖论</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">学过逻辑的人大约肯定是知道著名的罗素悖论的，罗素悖论用数学的形式来描述就是：</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">R = &#123;X:X</span><span style="font-size: 12pt">不属于</span><span style="font-size: 12pt">X&#125;;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个悖论最初是从康托尔的无穷集合论里面引申出来的。当初康托尔在思考无穷集合的时候发现可以称</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">一切集合的集合</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，这样一个集合由于它本身也是一个集合，所以它就属于它自身。也就是说，我们现在可以称世界上存在一类属于自己的集合，除此之外当然就是不属于自己的集合了。而我们把所有不属于自己的集合收集起来做成一个集合</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">，这就是上面这个著名的罗素悖论了。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们来看</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">是否属于</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">，如果</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">属于</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">，根据</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">的定义，</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">就不应该属于</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">。而如果</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">不属于</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">，则再次根据</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">的定义，</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">就应该属于</span><span style="font-size: 12pt">R</span><span style="font-size: 12pt">。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这个悖论促使了集合论的公理化。后来策梅罗公理化的集合论里面就不允许</span><span style="font-size: 12pt">X</span><span style="font-size: 12pt">属于</span><span style="font-size: 12pt">X</span><span style="font-size: 12pt">（不过可惜的是，尽管如此还是没法证明这样的集合论不可能产生出新的悖论。而且永远没法证明</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">这就是哥德尔第二不完备性定理的结论</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">一个包含了</span><span style="font-size: 12pt">PA</span><span style="font-size: 12pt">的形式化公理系统永远无法在内部证明其自身的一致（无矛盾）性。从而希尔伯特想从元数学推出所有数学系统的一致性的企图也就失败了，因为元数学的一致性又得由元元数学来证明，后者的一致性又得由元元元数学来证明</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">）。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">这里我们只关心罗素是如何想出这个绝妙的悖论的。还是对角线方法！我们罗列出所有的集合，</span><span style="font-size: 12pt">S1,S2,S3 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&nbsp;&nbsp;&nbsp; S1 &nbsp;S2 &nbsp;S3 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">S1&nbsp;0&nbsp;&nbsp; 1&nbsp;&nbsp;1 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">S2&nbsp;1&nbsp;&nbsp; 1 &nbsp;&nbsp;0 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">S3&nbsp;0&nbsp;&nbsp; 0 &nbsp;&nbsp;0 &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">&hellip;&nbsp;&nbsp;&nbsp; &hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">右侧纵向列出所有集合，顶行横向列出所有集合。</span><span style="font-size: 12pt">0/1</span><span style="font-size: 12pt">矩阵的</span><span style="font-size: 12pt">(i,j)</span><span style="font-size: 12pt">处的元素表示</span><span style="font-size: 12pt">Si</span><span style="font-size: 12pt">是否包含</span><span style="font-size: 12pt">Sj</span><span style="font-size: 12pt">，记为</span><span style="font-size: 12pt">Si(j)</span><span style="font-size: 12pt">。现在我们只需构造一个新的</span><span style="font-size: 12pt">0/1</span><span style="font-size: 12pt">序列</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">，它的第</span><span style="font-size: 12pt">i</span><span style="font-size: 12pt">位与矩阵的</span><span style="font-size: 12pt">(i,i)</span><span style="font-size: 12pt">处的值恰恰相反：</span><span style="font-size: 12pt">L(i) = 1-Si(i)</span><span style="font-size: 12pt">。我们看到，这个新的序列其实对应了一个集合，不妨也记为</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">，</span><span style="font-size: 12pt">L(i)</span><span style="font-size: 12pt">表示</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">是否包含</span><span style="font-size: 12pt">Si</span><span style="font-size: 12pt">。根据</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">的定义，如果矩阵的</span><span style="font-size: 12pt">(i,i)</span><span style="font-size: 12pt">处值为</span><span style="font-size: 12pt">0</span><span style="font-size: 12pt">（也就是说，如果</span><span style="font-size: 12pt">Si</span><span style="font-size: 12pt">不包含</span><span style="font-size: 12pt">Si</span><span style="font-size: 12pt">），那么</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">这个集合就包含</span><span style="font-size: 12pt">Si,</span><span style="font-size: 12pt">否则就不包含。我们注意到这个新的集合</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">肯定等于某个</span><span style="font-size: 12pt">Sk</span><span style="font-size: 12pt">（因为我们已经列出了所有的集合），</span><span style="font-size: 12pt">L = Sk</span><span style="font-size: 12pt">。既然</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">与</span><span style="font-size: 12pt">Sk</span><span style="font-size: 12pt">是同一集合，那么它们肯定包含同样的元素，从而对于任意</span><span style="font-size: 12pt">n</span><span style="font-size: 12pt">，有</span><span style="font-size: 12pt">L(n) = Sk(n)</span><span style="font-size: 12pt">。于是通过令</span><span style="font-size: 12pt">n=k</span><span style="font-size: 12pt">，得到</span><span style="font-size: 12pt">L(k) = Sk(k)</span><span style="font-size: 12pt">，而根据</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">的定义，</span><span style="font-size: 12pt">L(k) = 1- Sk(k)</span><span style="font-size: 12pt">。这就有</span><span style="font-size: 12pt">Sk(k) = 1-Sk(k)</span><span style="font-size: 12pt">，矛盾。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">通过抽象简化以上过程，我们看到，我们构造的</span><span style="font-size: 12pt">L</span><span style="font-size: 12pt">其实是</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">包含了所有不包含它自身的集合的集合</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">，用数学的描述正是罗素悖论！</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">敏锐的你可能会注意到所有集合的数目是不可数的从而根本不能</span><span style="font-size: 12pt">S1,S2&hellip;</span><span style="font-size: 12pt">的一一列举出来。没错，但通过假设它们可以列举出来，我们发现了一个与可列性无关的悖论。所以这里的对角线方法其实可以说是一种启发式方法。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">同样的手法也可以用到证明</span><span style="font-size: 12pt">P(A)</span><span style="font-size: 12pt">（</span><span style="font-size: 12pt">A</span><span style="font-size: 12pt">的所有子集构成的集合，也叫幂集）无法跟</span><span style="font-size: 12pt">A</span><span style="font-size: 12pt">构成一一对应上面。证明就留给聪明的你了</span><span style="font-size: 12pt">:)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">希尔伯特第十问题结出的硕果</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">希尔伯特是在</span><span style="font-size: 12pt">1900</span><span style="font-size: 12pt">年巴黎数学家大会上提出著名的希尔伯特第十问题的，简言之就是<em>是否存在一个算法，能够计算任意</em></span><em><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Diophantine_equation">丢番图方程</a></span></em><em><span style="font-size: 12pt">是否有整根</span></em><span style="font-size: 12pt">。要解决这个问题，就得先严格定义</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">算法</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">这一概念。为此图灵和丘齐分别提出了图灵机和</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">这两个概念，它们从不同的角度抽象出了</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">有效（机械）计算</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的概念，著名的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Church-Turing_thesis">图灵&mdash;&mdash;丘齐命题</a></span><span style="font-size: 12pt">就是说<em>所有可以有效计算出来的问题都可以由图灵机计算出来</em>。实际上我们已经看到，丘齐的</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">其实就是数学推理系统的一个形式化。而图灵机则是把这个数学概念物理化了。而也正因为图灵机的概念隐含了实际的物理实现，所以冯</span><span style="font-size: 12pt">&middot;</span><span style="font-size: 12pt">诺依曼才据此提出了奠定现代计算机体系结构的</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://en.wikipedia.org/wiki/Von_Neumann_architecture">冯&middot;诺依曼体系结构</a></span><span style="font-size: 12pt">，其遵循的，正是图灵机的概念。而</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">程序即数据</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的理念，这个发端于数学家哥德尔的不完备性定理的证明之中的理念，则早就在黑暗中预示了可编程机器的必然问世。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><strong><span style="font-size: 15pt">对角线方法</span></strong><strong><span style="font-size: 15pt">&mdash;&mdash;</span></strong><strong><span style="font-size: 15pt">回顾</span></strong></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">我们看到了对角线方法是如何简洁而深刻地揭示出自指或递归结构的。我们看到了著名的不完备性定理、停机问题、</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">、罗素悖论等等等等如何通过这一简洁优美的方法推导出来。这一诞生于康托尔的天才的手法如同一条金色的丝线，把位于不同年代的伟大发现串联了起来，并且将一直延续下去</span><span style="font-size: 12pt">&hellip;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 14pt">P.S</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">1</span><span style="font-size: 12pt">.&nbsp;</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">里面的</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">停机问题</span><span style="font-size: 12pt">&rdquo;</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">实际上</span><span style="font-size: 12pt">lambda calculus</span><span style="font-size: 12pt">里面也是有</span><span style="font-size: 12pt">&ldquo;</span><span style="font-size: 12pt">停机问题</span><span style="font-size: 12pt">&rdquo;</span><span style="font-size: 12pt">的等价版本的。其描述就是：不存在一个算法能够判定任意两个</span><span style="font-size: 12pt">lambda</span><span style="font-size: 12pt">函数是否等价。所谓等价当然是对于所有的</span><span style="font-size: 12pt">n,</span><span style="font-size: 12pt">有</span><span style="font-size: 12pt">f(n)=g(n)</span><span style="font-size: 12pt">了。这个问题的证明更加能够体现对角线方法的运用。仍然留给你吧。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">2</span><span style="font-size: 12pt">.&nbsp;</span><span style="font-size: 12pt; color: blue"><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon">负喧琐话</a></span><span style="font-size: 12pt">(</span><span style="font-size: 12pt"><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon">http://blog.csdn.net/g9yuayon</a>)</span><span style="font-size: 12pt">是个非常不错的</span><span style="font-size: 12pt">blog:)</span><span style="font-size: 12pt">。</span><span style="font-size: 12pt">g9</span><span style="font-size: 12pt">的文字轻松幽默，而且有很多名人八卦可以养眼，真的灰常</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">灰常</span><span style="font-size: 12pt">&hellip;</span><span style="font-size: 12pt">不错哦。此外</span><span style="font-size: 12pt">g9</span><span style="font-size: 12pt">老兄还是个理论功底非常扎实的牛。所以，</span><span style="font-size: 12pt">anyway</span><span style="font-size: 12pt">，看了他的</span><span style="font-size: 12pt">blog</span><span style="font-size: 12pt">就知道啦！最初这篇文章的动机也正是看了上面的一篇</span><span style="font-size: 12pt; color: blue"><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon/archive/2006/09/24/1271319.aspx">关于Y Combinator的铸造过程的介绍</a></span><span style="font-size: 12pt">，于是想揭示一些更深的东西，于是便有了本文。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">3.&nbsp;</span><span style="font-size: 12pt">文章起名《康托尔、哥德尔、图灵</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">永恒的金色对角线》其实是为了纪念看过的一本好书</span><span style="font-size: 12pt">GEB</span><span style="font-size: 12pt">，即《</span><span style="font-size: 12pt">Godel</span><span style="font-size: 12pt">、</span><span style="font-size: 12pt">Escher</span><span style="font-size: 12pt">、</span><span style="font-size: 12pt">Bach-An Eternal Golden Braid</span><span style="font-size: 12pt">》中文译名《哥德尔、埃舍尔、巴赫</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">集异璧之大成》</span><span style="font-size: 12pt">&mdash;&mdash;</span><span style="font-size: 12pt">商务印书馆出版。对于一本定价</span><span style="font-size: 12pt">50</span><span style="font-size: 12pt">元居然能够在</span><span style="font-size: 12pt">douban</span><span style="font-size: 12pt">上卖到</span><span style="font-size: 12pt">100</span><span style="font-size: 12pt">元的二手旧书，我想无需多说。另，幸福的是，电子版可以找到</span><span style="font-size: 12pt">:)</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">4</span><span style="font-size: 12pt">.&nbsp;</span><span style="font-size: 12pt">其实很久前想写的是一篇《从哥德尔到图灵》，但那篇写到</span><span style="font-size: 12pt">1/3</span><span style="font-size: 12pt">不到就搁下了，一是由于事务，二是总觉得少点什么。呵呵，如今把康托尔扯进来，也算是完成当时扔掉的那一篇吧。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">5.&nbsp;</span><span style="font-size: 12pt">这恐怕算是写得最曲折的一篇文章了。不仅自己被这些问题搞得有点晕头转向（还好总算走出来），更因为要把这些东西自然而然的串起来，也颇费周章。很多时候是利用吃饭睡觉前或走路的时间思考本质的问题以及如何表达等等，然后到纸上一气呵成。不过同时也锻炼了不拿纸笔思考数学的能力，呵呵。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">6.&nbsp;</span><span style="font-size: 12pt">关于图灵的停机问题、</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">、哥德尔的不完备性定理以及其它种种与康托尔的对角线之间的本质联系，几乎查不到完整系统的深入介绍，一些书甚至如《</span><span style="font-size: 12pt">The Emperor&rsquo;s New Mind</span><span style="font-size: 12pt">》也只是介绍了与图灵停机问题之间的联系（已经非常的难得了），</span><span style="font-size: 12pt">google</span><span style="font-size: 12pt">和</span><span style="font-size: 12pt">baidu</span><span style="font-size: 12pt">的结果也是基本没有头绪。很多地方都是一带而过让人干着急。所以看到很多地方介绍这些定理和构造的时候都是弄得人晕头转向的，绝大部分人在面对如</span><span style="font-size: 12pt">Y Combinator</span><span style="font-size: 12pt">、不完备性定理、停机问题的时候都把注意力放在力图理解它是怎么运作的上面了，却使人看不到其本质上从何而来，于是人们便对这些东东大为惊叹。这使我感到很不痛快，如隔靴搔痒般。这也是写这篇文章的主要动机之一。</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 12pt">Reference</span></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[1] 《数学&mdash;&mdash;确定性的丧失》</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[2] 也有观点认为函数式编程语言之所以没有广泛流行起来是因为一些实际的商业因素。</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[3] Douglas R.Hofstadter的著作《Godel, Escher, Bach: An Eternal Golden Braid》（《哥德尔、艾舍尔、巴赫&mdash;&mdash;集异璧之大成》）就是围绕这一思想写出的一本奇书。非常建议一读。</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[4] 《数学&mdash;&mdash;确定性的丧失》</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[5] 虽然我觉得那个系徽做得太复杂，要表达这一简洁优美的思想其实还能有更好的方式。</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[6] 关于如何在lambda calculus系统里实现&ldquo;+&rdquo;操作符以及自然数等等，可参见<a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon/archive/2006/05/29/759778.aspx">这里，</a><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon/archive/2006/06/12/790953.aspx">这里，和</a><a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon/archive/2006/08/14/1062514.aspx">这里。</a></div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[7] g9的blog（负暄琐话）<a style="color: #336699; text-decoration: none" href="http://blog.csdn.net/g9yuayon/">http://blog.csdn.net/g9yuayon/</a>&nbsp;上有一系列介绍lambda calculus的文章（当然，还有其它好文章:)），非常不错，强烈推荐。最近的两篇就是介绍Y combinator的。其中有一篇以javaScript语言描述了迭代式逐步抽象出Y Combinator的过程。</div><div style="color: #333333; font-family: Arial; font-size: 14px; line-height: 26px">[8] 实际上这只是第一不完备性定理，它还有一个推论，被称为第二不完备性定理，说的是任一个系统T内无法证明这个系统本身的一致性。这个定理的证明核心思想如下：我们前面证明第一不完备性定理的时候用的推断其实就表明 Con/T -&gt; G(g) （自然语言描述就是，由系统T的无矛盾，可以推出G(g)成立），而这个&ldquo;Con/T -&gt; G(g)&rdquo;本身又是可以在T内表达且证明出来的（具体怎么表达就不再多说了）&mdash;&mdash;只需要用排中律即可。于是我们立即得到，T里面无法推出Con/T，因为一旦推出Con/T就立即推出G(g)从而推出UnPr(G(g))，这就矛盾了。所以，Con/T无法在T内推出（证明）。</div>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6981</link>
<title><![CDATA[Lambda演算的哲学基础]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:45:13 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6981</guid> 
<description>
<![CDATA[ 
	<p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">lambda演算的哲学基础是结构主义。结构主义其实是一种整体论理论。结构主义认为一切概念因为互相结网的原因与事实得到具有本体性也就是说描述能力。罗蒂认为这些都是瞎扯意思好好说话就行，跟我的思想有点像。我认为，言语有根据就行。我认为人的知识是顺着逻辑往下走的。可以把我看成逻辑经验主义，但是我的思想比逻辑经验主义更彻底。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">意思，希尔伯特的形式主义事实上是一种结构主义，其根本方法是尝试从一个严格的符号系统得到数学的描述基础即将数学知识化，建立数学的知识系统，去掉它的形式性。这种做法毫无疑问是自相矛盾的：它实际上是一种从符号中来到符号中去的作法，在符号里面打圈圈，本质上跟传统的数学手段没有区别，只不过使得数学的内部更严谨了而已并没有改变或提供最终数学的知识观。所以罗素说希尔伯特就像是一个精密的表匠，这个比喻再恰当不过了。然而更讽刺的是，罗素做的事情其实最终也是走的这条路。希尔伯特是从数学走向逻辑，罗素则是从逻辑走上数学。这两条路线产生数理逻辑的两个学派，数学派与逻辑派。但其实东西都差不多，即都是逻辑与数学的混合物。我认为就是一样的东西。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">lambda像极了弗雷格的自然数系统。而弗雷格是数理逻辑的开山鼻祖。弗雷格的一个重要目标就是把数学给逻辑化。并通过此，来做到数学的&ldquo;知识&rdquo;化。因为逻辑是可靠的，所以如果数学是逻辑的，那么它自然也是可靠的。弗雷格打先锋，罗素紧跟其后，与希尔伯特一起等所有对数学不满的人统统被历史埋葬。宣布形式主义与逻辑主义的彻底失败。也宣布了怀疑者或不可知论者的&ldquo;伟大&rdquo;胜利。但是我是个知识论这。我认为，人的作为产生知识，这就是一切。罗蒂从没有提过这个但我相信他肯定也有这样的思想。即：我们虽然不是上帝但我们仍然是人。只要我们有根据的说话做事，不要随便提&ldquo;科学&rdquo;，那么我们就是有希望的。这个观点，是对&ldquo;人类一思考，上帝就发笑&rdquo;的最佳诠释！我们应该跟上帝划清界限。不去思考上帝的东西。而科学就是上帝的东西。那不是我们的事。我们不能思考。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">但是尽管这样我们仍然有知识。数理逻辑没有解决数学问题，但是却构成人类的新知识，为什么呢？因为它是人类的思维结晶，是人类的作为，而作为构成知识。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">lambda演算有深刻的逻辑思想。它虽然没有建立最终的数学基础，却是弗雷格数学思想的最佳形式化。有人控告邱奇抄袭弗雷格，我认为这个不重要，重要的是它是一个成功的数学抽象系统，是一个更有思想的数学系统。如果说传统数学是在用数字演算，那么lambda就是在用思想演算。lambda事实上是一个推理系统，它使用了一种独特的数学理解方式进行推理。应该说它是一种比传统数学更牢固的数学系统，它的逻辑性更强。但是在我这里它仍然是传统数学的翻版因为我认为弗雷格与罗素都没有对数学产生本质的更改，因此不可能成功。在lambda里面的确可以看出数学的&ldquo;逻辑性&rdquo;，但是逻辑化的数学是一个半路产品，它的确胜过形式主义者的工作但是离真正的数学基础与知识化还很远。归根结底，把数学逻辑化的结果是得到一个逻辑，仅此而已。并且这个逻辑还不是一个好逻辑。所以不能把它当成&ldquo;知识&rdquo;。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">罗素与弗雷格的另一个问题是他们并不&ldquo;逻辑&rdquo;。他们的产品带有逻辑性，但是并不是彻头彻尾的逻辑。与形式主义一样，从没有纯粹的形式也没有纯粹的逻辑。没有凭空而起的逻辑。离开了还原论，逻辑数学事实上只是一个海市蜃楼。何谈真正的逻辑。所以历史上绕来绕去最终都是绕到逻辑经验主义这里。可是逻辑经验主义又被&ldquo;科学&rdquo;的巨大成就压得透不过气来，以至竟然逼得马赫说&ldquo;你们把我踢出科学的队伍吧！&rdquo;闹到如此决裂的程度，可以看出科学与哲学的分歧有多大。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">不想说了。。。。。。累了。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">不管如何，lambda演算是一个比现有数学更好的系统。你会发现它非常有意思，非常有根据，非常哲学，比起蛮不讲理的规则式计算系统，lambda要&ldquo;以理服人&rdquo;得多得多！</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6980</link>
<title><![CDATA[函数式编程背后的可计算性理论——λ演算的荣光]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:44:55 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6980</guid> 
<description>
<![CDATA[ 
	<h2 style="padding: 0px; margin: 0px; font-family: Arial; line-height: 24px; background-color: #ededed">宏伟计划</h2><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">十九世纪七十年代，康托尔创立了集合论，为现代数学打下了基础，也是产生危机的直接来源。希尔伯特在1900年于巴黎发表演讲《数学问题》，提出了23个数学家们需要解决的问题。然而悖论的出现使得整个数学大厦出现了动摇。其中最为严重的，是&ldquo;罗素悖论&rdquo;，其中涉及的是以自己为元素的集合，这就被称作&ldquo;第三次数学危机&rdquo;。后来这个定义被公理所排斥，危机得以解决。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">于是在20世纪20年代，在集合论不断发展的基础上，大数学家希尔伯特向全世界的数学家抛出了一个宏伟计划&mdash;&mdash;建立一组公理体系，使一切数学命题原则上都可由此经有限步推定真伪，这叫做公里体系的完备性。希尔伯特还要求公理体系保持&ldquo;独立性&rdquo;（所有公理都是相互独立的，使公理系统尽可能简洁）和&ldquo;无矛盾性&rdquo;（即相容性，不能从公理系统导出矛盾）。这又叫做希尔伯特判定问题，即能否有一个算法自动判定谓词逻辑表达式是真还是假。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">希尔伯特将公理进行了彻底的形式化，并且他的计划也确实有了一定的进展。几乎全世界的数学家都乐观地看着数学大厦即将竣工，然而一声晴天霹雳，哥德尔使得这座数学大厦变成了一个海市蜃楼。他证明了：任何无矛盾的公理体系，只要包含初等算术的陈述，则必定存在一个不可判定命题，用这组公理不能判定其真假。即是说，&ldquo;无矛盾&rdquo;和&ldquo;完备&rdquo;是不能同时满足的，这便是著名的哥德尔不完备性定理。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">为了证明不完备性定理，哥德尔写出了第一个&ldquo;计算机程序&rdquo;（用逻辑公式去形式化几个步骤）来验证一个命题是否能被证明。然而人们从哥德尔的&ldquo;程序&rdquo;中察觉到希尔伯特判定问题也可能不存在答案，或者没有这样的算法或者不可计算。但是要想证明这一点，首要的是定义清楚什么是有效可计算性。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1936年，计算机科学之父图灵发表了一篇划时代的论文《论可计算数及其在判定问题上的应用》，他用图灵机来定义可计算性，并用图灵机重写了1931年哥德尔的&ldquo;程序&rdquo;，证明了希尔伯特判定问题是不可计算的。</p><h2 style="padding: 0px; margin: 0px; font-family: Arial; line-height: 24px; background-color: #ededed">停机问题</h2><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">一个很简单的例子，就是著名的停机问题&mdash;&mdash;不存在这样一个程序（算法），它能够计算任何程序（算法）在给定输入上是否会结束（停机）。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">假设存在这样一个图灵机，它能够判断任何程序在任何输入上是否停机。由于所有图灵机构成的集合是一个可列集，我们可以自然地列出一个矩阵，它表示一个图灵机Mi在每一个输入Tj下的输出，用N表示无法停机，其余数值表示输出</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T1&nbsp; T2&nbsp; T3&nbsp; T4&nbsp; &hellip;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">M1&nbsp; 1&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp; &hellip;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">M2&nbsp; N&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; &hellip;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&hellip;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">假设判定停机问题的图灵机为H，它能够判断Mi在Tj下的输入是否停机，即H(i,j)是否为真。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">现在构造一个新的图灵机P，运用康托尔的对角线方法，使得让P在Ti上的输入和Mi在Ti上的输入不一样，利用图灵机H这个新的图灵机P不难构造出来：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">P(i):</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">If (H(i,i)==1)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return1+Mi(i)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">Else</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return0;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">这样做我们确保了P(i)跟每一个Mi(i)都不一样。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">然而，P本身也是一个图灵机，所以一定有一个整数k，Mk=P，两个图灵机等价，即对于所有的输入，Mk(i)=P(i)。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">于是我们得到Mk(k)=P(k)=Mk(k)+1（Mk(k)停机）或者Mk(k)=0（不停机）。矛盾在于如果停机，则Mk(k)将没有一个确定的值，如果不停机，返回值为0说明它还是停机的。这表明不存在这样的P，也就不存在这样的H。从而得出停机问题是不可判定的。</p><h2 style="padding: 0px; margin: 0px; font-family: Arial; line-height: 24px; background-color: #ededed">&lambda;演算的诞生</h2><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">虽然图灵提出了图灵机这个解决可计算性问题的概念，但是他并不是第一个解决这个问题的人。早在1932年，阿隆佐邱奇提出了&lambda;算子，其核心思想是&ldquo;万物皆可为函数&rdquo;。邱奇给出了一组无类型的函数定义规则，然后又加入了几条规则，试图以函数来形式化整个逻辑系统。但他的学生克林发现这套逻辑系统不一致，导致邱奇只发表了&lambda;算子的内容。克林发现这个&lambda;算子能够表示整数算术系统，这似乎是可计算性的定义。但是在他跟哥德尔提出这个想法的时候，遭到了哥德尔的反对。克林向哥德尔下了战书&mdash;&mdash;如果这个定义不对，请提出你的定义，我能证明二者等价。1934年，哥德尔提出一般递归函数的概念，于是1936年克林将一般递归函数具体化，并证明了和他之前的定义等价。随后邱奇又证明一般递归函数和&lambda;算子等价，并用&lambda;算子证明了希尔伯特判定问题是不可计算的，最早地证明了这个问题。几个月后，图灵才发表了图灵机的概念。随后图灵跟随邱奇学习，并证明一般递归函数、&lambda;演算和图灵机三者等价。于是才有了邱奇图灵论题。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">邱奇图灵问题指出，所有的计算或算法都可以由一台图灵机来执行。以任何常规编程语言编写的计算机程序都可以翻译成一台图灵机，反之任何一台图灵机也都可以翻译成大部分编程语言大程序。该论题和以下说法等价：常规的编程语言可以足够有效的来表达任何算法。该论题被普遍假定为真。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;演算和图灵机都可以用来支持可计算性理论，只不过图灵机更偏向于物理意义上真正的计算机，而&lambda;演算则是一系列的按一定规则而进行的转换，更偏向于数学意义。</p><h3 style="padding: 0px; margin: 0px; font-family: Arial; line-height: 24px; background-color: #ededed">&lambda;演算系统的形式化定义</h3><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;演算系统中合法的字符如下：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;x1,x2,x3，&hellip;变元（变元的数量是无穷的，不能再有限步骤内穷举）</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;&agrave;&nbsp;归约</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;＝&nbsp;等价</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">4.&nbsp;&nbsp;&nbsp;&lsquo;&lambda;&rsquo;&lsquo;（&rsquo;&lsquo;）&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">所有在&lambda;演算系统中合法的字符只有上列4种，其他符号都是非法的。假如没有对&lsquo;+&rsquo;的说明，那么&lambda;x.x+2是不合法的&lambda;表达式。</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;-项</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;-项又称为&lambda;表达式，它是由合法字符组成的表达式，合法的组成规则如下：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;任一变元是一个项</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;若M，N是项，则（MN）也是项</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;若M是一个项，x是一个变元，则（&lambda;x.M）是一个项</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">4.&nbsp;&nbsp;&nbsp;仅仅由以上规则归纳定义得到的字符串是项</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">用BNF范式表达的上下文无关文法描述就是：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;&lt;表达式&gt;&nbsp;::= &lt;标识符&gt;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;&lt;表达式&gt;&nbsp;::=(&lambda;&lt;标识符&gt; .&lt;表达式&gt;)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;&lt;表达式&gt;&nbsp;::=(&lt;表达式&gt; &lt;表达式&gt;)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">说明：&lambda;-项是左结合的，所以f x y = (f x )y。诸如（&lambda;x.M）这样的&lambda;-项被称为函数抽象，原因是因为它常常是一个函数的定义，函数的参数是变量x，函数体是M，函数名称则是匿名的。MN这样的项被称为函数应用，原因是它表达了将M这个函数应用到N这个概念。假如f(x)=x+1,那么可以被抽象表达为&lambda;x.x+1，而如果要表达f(2)的话，就要用形如MN的项(&lambda;x.x+1) 2。但是并非所有MN形式的项都是如此，比如xy也是MN形式的项，它跟函数理论谈不上直观联系，只是这个&lambda;-项是合法的。因此，&lambda;-项的形式化定义中，有一些是可以和函数理论直观联系，而另一些只是合法，没有直观的字面意义。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">公式</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">若M，N是&lambda;-项，则M&agrave;N，M=N，是公式。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">变量自由出现法则</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在一个&lambda;-项中，变元要么自由出现，要么被一个&lambda;符号约束。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">考虑如下直观的表达方式，f(x)=xy，在这里面x就是约束变元，而y是自由变元。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">最直观的理解，被&lambda;符号约束的变元就是作为某个函数形参的变元，而自由变元则是不作为任何函数形参的变元。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">自由出现法则：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;在表达式x中，如果x是一个变元，那么x就是一个单独的自由出现。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;在表达式&lambda;x.M中，自由出现就是M中所有除了变元x的自由出现。M中所有的x变元都是被&lambda;符号约束的约束变元。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;在表达式（MN）中，变元的自由出现就是M和N中所有变元的自由出现。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">用另一种方法表达，看起来会更加直接</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;free(x) = x</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;free(&lambda;x.M) =free(M) &ndash; &#123;x&#125;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;free(MN) =free(M) &cup; free(N)</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda; x的辖域</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">假设有两个&lambda;-项，&lambda;x.xx和&lambda;x.(xx)，x的出现情况又是怎样的？</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">由于&lambda;-项是左结合的，所以第一个&lambda;-项可以写作是(&lambda;x.x) x，因此第一个x是约束变元，第二个x是自由变元。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">而对于第二个&lambda;-项，里面所有的x都是被&lambda;约束了，这表明所有的x都是约束变元。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">理解辖域的概念可以参考在谓词逻辑中量词的辖域。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">归约</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在&lambda;表达式的集合上定义了一个<a style="text-decoration: none; color: #000000" href="http://zh.wikipedia.org/wiki/%E7%AD%89%E4%BB%B7%E5%85%B3%E7%B3%BB" target="_blank" title="等价关系">等价关系</a>，&ldquo;两个表达式其实表示的是同一个函数&rdquo;这样的直觉性判断即由此表述，这种等价关系是通过所谓的&ldquo;&alpha;-变换规则&rdquo;和&ldquo;beta-归约规则&rdquo;。</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&alpha;-变换（&alpha;-conversion）</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&alpha;变换规则所表达的是，约束变元的名称是不重要的。两个&lambda;表达式&lambda;x.x和&lambda;y.y表达的是同一个函数，因此，将某个表达式中的约束变元全部换名是可以的，但是变换需要遵循规则。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">如果M，N都是&lambda;-项，x在M中有自由出现，若以N置换M中所有x的自由出现，可以得到另一个&lambda;-项，记为M[x/N]</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">则变换规则如下：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;x.M=&lambda;y.M[x/y] 如果y没有在M中自由出现，那么y替换了M中的x，y不会被M中的&lambda;符号约束</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">例子：&lambda;x. ( &lambda;x.x) x= &lambda;y. (&lambda;x.x) y</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">被替换的x只能是M中的自由变元，因此括号内的x没有被替换。</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&beta;-归约</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&beta;-归约表达的是函数应用或者函数代入的概念。MN是合法的&lambda;-项，那么MN的含义是将M应用到N，通俗的说法是将N作为参数代替M中的约束变元传入M函数体。尽管N也可能是一个函数，它依然可以作为参数传入一个函数。理解函数作为参数传入的概念可以参考微分算子d/dx，它接收一个函数作为参数，并且返回值也是一个函数&mdash;&mdash;参数函数的导数。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&beta;-归约的规则如下：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">(&lambda;x.M) N &agrave;M[x/N] （如果N中所有变量的自由出现都在M[x/N]中保持自由出现）</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&beta;-归约是&lambda;演算中重要的概念和规则，它是函数代入概念的形式化表示</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&eta;-变换</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&eta;-变换表达的是外延性的概念，这里外延性指的是，两个函数对于所有的参数得到的结果一致，当且仅当它们是同一个函数。&eta;-变换可以令&lambda;x.f x和f相互转换，只要x不是f中的自由出现。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">外延性指出，如果两个函数f和g，如果f(x)=g(x)，对于所有x都成立，那么两个函数f和g被认为是相等的。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">若外延性是有效的，那么由&beta;-归约，&lambda;x.f x和f之间可以相互转换，具体转换规则如下</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">对于所有的y，如果有(&lambda;x.f x) y = f y，那么&lambda;x.f x = f</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;演算的公理</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">1.&nbsp;&nbsp;&nbsp;(&lambda;x.M)N&agrave;M[x/N] N中所有变量的自由出现都在M[x/N]中保持自由出现</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">2.&nbsp;&nbsp;&nbsp;M&agrave;M</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">3.&nbsp;&nbsp;&nbsp;M&agrave;N,N&agrave;L =&gt; M&agrave;L</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">4.&nbsp;&nbsp;&nbsp;M&agrave;M&rsquo; =&gt; ZM&agrave;ZM&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">5.&nbsp;&nbsp;&nbsp;M&agrave;M&rsquo; =&gt; MZ&agrave;M&rsquo;Z</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">6.&nbsp;&nbsp;&nbsp;M&agrave;M&rsquo; =&gt; &lambda;x.M&agrave;&lambda;x.M&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">7.&nbsp;&nbsp;&nbsp;M&agrave;M&rsquo; =&gt; M=M&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">8.&nbsp;&nbsp;&nbsp;M=M&rsquo; =&gt;M&rsquo;=M</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">9.&nbsp;&nbsp;&nbsp;&nbsp;M=N,N=L=&gt;M=L</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">10. &nbsp;&nbsp;M=M&rsquo; =&gt; ZM = ZM&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">11. &nbsp;M=M&rsquo; =&gt; MZ = M&rsquo;Z</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">12. &nbsp;M=M&rsquo; =&gt;&lambda;x.&nbsp;M =&lambda;x.&nbsp;M&rsquo;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">如果某一公式M&agrave;N或者M=N可以用以上公理推出，则记为&lambda;├M&agrave;N和&lambda;├M＝N</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">范式</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">如果一个&lambda;-项M中，不含任何形为((&lambda;x.N1)N2)的子项，则称M是一个范式，简记为n.f.。如果一个&lambda;-项通过有穷步&beta;-归约后，得到一个范式，则称M有n.f.，没有n.f.的&lambda;-项称为n.n.f.。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">将一个&lambda;-项进行&beta;-归约，如果通过有穷步代入可以得到一个不能够代入的&lambda;-项，那么这个&lambda;-项就是它的范式。如果无论怎样代入，总存在可以继续代入的子项，那么它就没有范式。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">比如M=&lambda;x.(xx) &lambda;x.(xx)，则无论经过多少次代入，归约的路径都是其本身，所有M就是n.n.f.。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">Church-Rosser定理</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">如果&lambda;-项M有一个范式，那么这个范式是唯一的，并且&beta;-归约的路径必将终止，而且终止到这个范式。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed" align="left">Church-Rosser定理：如果&lambda;├M=N，则对某一个Z，&lambda;├M&agrave;Z并且&lambda;├N&agrave;Z。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed" align="left">与之等价的定理如下，</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed" align="left">Diamond Property定理：如果M&agrave;N1,M&agrave;N2，则存在某一Z，使得N1&agrave;Z，N2&agrave;Z。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">科里化（Currying）</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">科里化的概念最早由俄国数学家Moses Sch&ouml;nfinkel引入，而后由著名的数理逻辑学家哈斯格尔&middot;科里（Haskell Curry）将其丰富和发展，Currying由此得名。它表示一种将一个带有N元组参数的函数转换成N一个一元函数链的方法。由于&lambda;演算用到的都是一元函数，在有多个变量的情况下就要使用科里化了。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">科里化的过程非常直观，假设一个函数有N个参数，则先固定一个参数，返回一个具有N-1个参数的函数，再对这个函数进行科里化。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">假设一个函数f(x,y,z)=x/y+z，要求f(4,2,1)的值</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">首先用4替换f(x,y,z)中的x，得到函数g(y,z)=4/y+z</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">然后用2替换g(y,z)中的y，得到函数h(z)=4/2+z=z+2</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">最后用1替换h(z)中的z，得到h(1)=3</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在科里化的步骤中，每一步代入一个参数，最终得到一个嵌套的一元函数链。通过科里化，可以对任何一个多元函数进行化简，使之能够进行&lambda;演算。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">现在我们可以处理一元函数和多元函数的计算，对于一些非常微小的程序已经可以用形式化的方法展示。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h4 style="padding: 0px; margin: 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">不动点理论</h4><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">不动点理论的诞生是为了处理递归的问题。递归是使用函数自身的函数定义；在表面上，&lambda;演算不允许这样做。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">考虑阶乘函数f(n)递归的定义为</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">f(n)=(n==0)?1:n*f(n-1)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在&lambda;演算中，不能定义一个包含了自身的函数。为了避免这样做，必须开始一个新的入口函数g，它接收一个函数f和一个整数n作为它的参数</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">g(f,n)=(n==0)?1:n*f(n-1)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">那么对g进行科里化，之后得出的&lambda;表达式如下：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">g=&lambda;f.( &lambda;n.(n==0)?1:n*(f(n-1)))</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">但是g本身又不是递归的，为了使用g来建立递归函数，作为参数传递给g的函数f必须有特殊的性质，也就是说，作为参数传递的f函数必须展开为调用带有一个参数的函数g，并且这个参数必须再是f函数。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">换句话说，f必须展开为g(f)，这个到g的调用将接着展开为上面的阶乘函数并计算下至另一层递归。然后f再次出现，并再次被展开为g(f)，才能继续递归。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">这里的f=g(f)，叫做g的不动点，它可以在&lambda;演算中使用不动点算子来实现，它叫做Y组合子：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">Y=&lambda;g.( &lambda;x.g(x x)) (&lambda;x.g(x x))</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在&lambda;演算中，Y g是g的不动点，因为它展开为g(Y g)。现在我们调用g(Y g,5),计算5的阶乘。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">它展开为：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&lambda;f.(&lambda;n.(n==0)?1:n*f(n-1) (5)) (Y g)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">然后f(4)展开之后是：</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">g(Y g,4)</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">之后就是一直递归到g(Y g,0).</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">递归的求值算法的结构，都可以被表达为某个适当函数的不动点，因此所有使用递归定义的函数都可以表达为&lambda;表达式。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">现在多元函数、递归函数都可以用&lambda;表达式来表示，它在计算性上已经是无缺陷的了。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><h2 style="padding: 0px; margin: 0px; font-family: Arial; line-height: 24px; background-color: #ededed">荣光的焕发？函数式编程！</h2><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">&nbsp;</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">函数式编程并不是一个新兴的词语。约翰巴克斯在他1977年图灵奖的演讲&ldquo;编程语言可以从冯&middot;诺依曼风格中被解放吗？一种函数式的风格以及其程序中的代数学&rdquo;中展示了FP语言。巴克斯的论文使得函数式编程的研究受到欢迎。在20世纪80年代，<a style="text-decoration: none; color: #000000" href="http://en.wikipedia.org/wiki/Per_Martin-L%C3%B6f" target="_blank" title="Per Martin-L&ouml;f"><span style="padding: 0px; margin: 0px; color: #252525">Per Martin-L&ouml;f</span></a><span style="padding: 0px; margin: 0px; color: #252525">开发了直</span>观类型理论，将函数式编程和表现形式为依赖类型的任意复杂的数学命题的构造性证明联系起来。这引导了新的证明交互式定理的强大方法并且影响了许多后来的函数式编程语言的开发。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">函数式编程中拥有大量特定的概念和编程范式，并且和指令式编程（包括面向对象编程）是无关的。然而，编程语言经常会是多种编程范式的杂交种，因此这些概念可能会被用到。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">在函数式编程中，首要的概念叫做初类函数（first-class function）。初类函数和高阶函数（Higher-Order function）有着非常紧密的联系，它们都可以允许函数作为其它函数的参数或者返回值。&ldquo;高阶&rdquo;描述了一个数学概念，比如微分算子d/dx，接受一个函数作为参数，返回一个函数作为返回值。高阶函数也实现了偏函数应用和科里化，使一个多元函数变成一个嵌套的一元函数链。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">函数式编程将计算看做是数学函数的值，并且避免状态和可变数据。函数式编程强调那些只由输入数据决定而不是程序状态决定计算结果的函数，换言之叫做纯函数。在函数式的代码当中，一个函数的输出值只取决于该函数的输入参数，因此调用同一个函数f，如果参数x相同，那么将会输出同样的结果f(x)两次。也就是说，函数的返回值不依赖于程序现在的状态比如static类型的变量的值，这样做使得理解和预测一个程序的行为变得更加容易。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">纯函数式的函数或者表达式没有副作用（内存或者I/O）。这意味着纯函数有许多有用的属性，其中许多可以用来优化代码。如果两个纯函数式的表达式之间没有数据的依赖性，那么他们的顺序是可以被调换的，或者他们可以悲哀并行执行而且不能互相干扰，换句话说纯函数式的表达式或函数是线程安全的。并且这样的特性给予编译器绝对的自由去重新排序或者组合程序中表达式和函数的计算，可以规避一些由编译器带来的不确定性因素比如静态初始化的相依性。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">由于函数式编程有种种优秀的特性，使得一直以来被广泛在学术领域上强调而不是商业软件开发的函数式编程在工程中重新焕发荣光。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">但是没有一种编程范式是完美的。面向对象编程的问题在于它对对象的定义，它试图将所有事情就纳入到这个概念里，当这个思想极端化之后，就会得出一个一切皆为对象的思想。但是这种思想并不一定是正确的，因为有些东西不是对象，函数就不是对象。而妄图将世界抽象成一个一个的对象的结果是，函数被&ldquo;绑架&rdquo;，被监禁在&ldquo;对象&rdquo;里，反而增加了设计的难度。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">而相似地，函数式编程走向极端，成为了纯函数式编程，但是纯函数式编程面临的问题是&mdash;&mdash;有些东西不是纯的，副作用是真实存在的。纯函数式编程试图通过函数，在函数中传入传出整个宇宙来实现整个宇宙。但是现实生活中副作用确实存在。回顾一下函数式编程背后的可计算性理论，&lambda;演算和图灵机的区别恰恰在于，&lambda;演算更偏向于数学意义而图灵机具有更深层的物理实际意义是真正的抽象计算机。数学上的理想主义是纯函数编程语言的背后推力。毫无疑问，数学函数是简单漂亮的，但不幸的是，生活不是数学，就算是数学建模也有不能模拟的因素存在。</p><p style="padding: 0px; margin: 10px 0px; font-family: Arial; font-size: 16px; line-height: 24px; background-color: #ededed">因此纯粹的面向对象和纯粹的函数式编程在一定程度上都是具有问题的。无论任何事情，走向极端都是有害的。正因为如此，java、C++、C#等等现在流行的编程语言都加入了函数式编程的元素。一个好的编程语言应该吸收多种编程范式而不能极端地拘泥于一种，因为世界不会适应程序员的模型，反而应该是程序员的模型去适应这个世界。</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6979</link>
<title><![CDATA[python做的lambda 演算示例]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:44:34 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6979</guid> 
<description>
<![CDATA[ 
	<p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">所有关于函数式编程的介绍中都指明 lambda演算是<span style="padding: 0px; margin: 0px">函数式编程的数学基础。死了不少脑细胞研究了一下维基百科上关于lambda演算的介绍文章。</span></p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体"><span style="padding: 0px; margin: 0px">参考：<a style="padding: 0px; margin: 0px; color: #ff8373; outline: 0px; font-size: 12px" rel="nofollow" href="http://en.wikipedia.org/wiki/Lambda_calculus">http://en.wikipedia.org/wiki/Lambda_calculus</a></span></p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">普通的数学运算用这个纯抽象的符号演算来定义，计算结果只能在脑子里存在。所以写了点代码，来验证文章中介绍的演算规则。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">我们来验证文章里介绍的自然数及自然数运算规则。说到自然数，今天还百度了一下，据度娘说，1993年后国家规定0是属于自然数。先定义自然数及自然数的运算规则：</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">用lambda表达式定义自然数（邱齐数）</p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_814240" class="syntaxhighlighter&nbsp;&nbsp;shell" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div></td><td class="code" style="width: 675px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">0&nbsp;:=&nbsp;&lambda;f.&lambda;x.x</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;x</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;(f&nbsp;x)</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;(f&nbsp;(f&nbsp;x))</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">...</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体"><span style="padding: 0px; margin: 0px">上面定义直观的意思就是数字n, 是f(x)的n阶函数。1就是f(x), 2就是f(f(x))....，严格来说，这样表述并不准确。其实每个邱奇数都是一个二阶函数，它有两个变量f和x。用二元命名函数来表达就是：</span></p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_859603" class="syntaxhighlighter&nbsp;&nbsp;shell" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div></td><td class="code" style="width: 675px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">0&nbsp;-&gt;&nbsp;num0(f,x)=x</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1&nbsp;-&gt;&nbsp;num1(f,&nbsp;x)=f(x)</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2&nbsp;-&gt;&nbsp;num2(f,x)=f(f(x))</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3&nbsp;-&gt;&nbsp;num3(f,x)=f(f(f(x)))</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">...</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体"><span style="padding: 0px; margin: 0px">&nbsp;其中参数f是一个函数。这一段有点绕，但是不能理解这个，对后面的lambda演算理解会比较困难。</span><br /></p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体"><span style="padding: 0px; margin: 0px">首先用递归法，定义邱齐数（自然数）</span></p><ul style="padding: 0px; margin: 0px 0px 10px 20px; line-height: 22.5px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px"><li style="padding: 0px; margin: 0px"><p style="padding: 0px; margin: 8px 0px; letter-spacing: 0.5px; word-wrap: break-word; word-break: break-all">0是自然数， &nbsp;<span style="padding: 0px; margin: 0px">度娘说1993年后，国家规定0是属于自然数。</span></p></li><li style="padding: 0px; margin: 0px"><p style="padding: 0px; margin: 8px 0px; letter-spacing: 0.5px; word-wrap: break-word; word-break: break-all">每个自然数，都有一个后续。</p></li></ul><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">用代码表达就是：</p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_606878" class="syntaxhighlighter&nbsp;&nbsp;python" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div></td><td class="code" style="width: 675px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">NUM0=lambda&nbsp;f:&nbsp;lambda&nbsp;x:x</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">SUCC=lambda&nbsp;n:&nbsp;lambda&nbsp;f:&nbsp;lambda&nbsp;x:&nbsp;f(n(f)(x))</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">后面则是定义运算符，包括加法，乘法，减法和幂。维基文章里没有介绍除法，估摸着除法定义比较复杂，一时讲不清楚。那我们也不验证了。</p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_148725" class="syntaxhighlighter&nbsp;&nbsp;python" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div><div class="line number6 index5 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">6</div><div class="line number7 index6 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">7</div><div class="line number8 index7 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">8</div><div class="line number9 index8 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">9</div><div class="line number10 index9 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">10</div><div class="line number11 index10 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">11</div><div class="line number12 index11 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">12</div><div class="line number13 index12 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">13</div><div class="line number14 index13 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">14</div><div class="line number15 index14 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">15</div><div class="line number16 index15 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">16</div><div class="line number17 index16 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">17</div><div class="line number18 index17 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">18</div><div class="line number19 index18 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">19</div><div class="line number20 index19 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">20</div></td><td class="code" style="width: 668px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#define&nbsp;number&nbsp;calculus&nbsp;rules</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#define&nbsp;Church&nbsp;numeral&nbsp;inductively.</div><div class="line number6 index5 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#0&nbsp;:=&nbsp;&lambda;f.&lambda;x.x</div><div class="line number7 index6 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#1&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;x</div><div class="line number8 index7 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#2&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;(f&nbsp;x)</div><div class="line number9 index8 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#3&nbsp;:=&nbsp;&lambda;f.&lambda;x.f&nbsp;(f&nbsp;(f&nbsp;x))</div><div class="line number10 index9 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#...</div><div class="line number11 index10 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">NUM0=lambda&nbsp;f:&nbsp;lambda&nbsp;x:x</div><div class="line number12 index11 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">SUCC=lambda&nbsp;n:&nbsp;lambda&nbsp;f:&nbsp;lambda&nbsp;x:&nbsp;f(n(f)(x))</div><div class="line number13 index12 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number14 index13 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#define&nbsp;Operator</div><div class="line number15 index14 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">PLUS=lambda&nbsp;m:&nbsp;lambda&nbsp;n:&nbsp;m(SUCC)(n)</div><div class="line number16 index15 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">MULT=&nbsp;lambda&nbsp;m:&nbsp;lambda&nbsp;n:&nbsp;m(PLUS(n))(NUM0)</div><div class="line number17 index16 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#define&nbsp;predecessor&nbsp;to&nbsp;obtain&nbsp;the&nbsp;previous&nbsp;number.</div><div class="line number18 index17 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">PRED=&nbsp;lambda&nbsp;n:&nbsp;lambda&nbsp;f:&nbsp;lambda&nbsp;x:&nbsp;n(lambda&nbsp;g:&nbsp;lambda&nbsp;h:&nbsp;h(g(f)))(lambda&nbsp;u:x)(lambda&nbsp;u:u)</div><div class="line number19 index18 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">SUB=lambda&nbsp;m:&nbsp;lambda&nbsp;n:&nbsp;n(PRED)(m)</div><div class="line number20 index19 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">POW=lambda&nbsp;b:&nbsp;lambda&nbsp;e:&nbsp;e(b)</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">定义完了什么是自然数和自然数的运算子。那么自然数的运算，就可以用lambda演算的方式计算了。</p><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">问题是上面的定义都是抽象的符号演算，我们需要有一个编码器来把上面的抽象的Church numeral符号编码成可以人来阅读的形式，还需把人输入的数字解码成抽象符号。</p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_447179" class="syntaxhighlighter&nbsp;&nbsp;python" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div><div class="line number6 index5 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">6</div><div class="line number7 index6 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">7</div><div class="line number8 index7 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">8</div><div class="line number9 index8 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">9</div><div class="line number10 index9 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">10</div><div class="line number11 index10 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">11</div><div class="line number12 index11 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">12</div><div class="line number13 index12 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">13</div><div class="line number14 index13 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">14</div><div class="line number15 index14 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">15</div><div class="line number16 index15 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">16</div><div class="line number17 index16 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">17</div><div class="line number18 index17 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">18</div><div class="line number19 index18 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">19</div><div class="line number20 index19 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">20</div><div class="line number21 index20 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">21</div><div class="line number22 index21 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">22</div></td><td class="code" style="width: 668px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#create&nbsp;encoder&nbsp;to&nbsp;input/output&nbsp;Church&nbsp;numeral</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">class&nbsp;LambdaEncoding:</div><div class="line number6 index5 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</div><div class="line number7 index6 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;encoding(exp,encoder):</div><div class="line number8 index7 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;encoder().encoding(exp)</div><div class="line number9 index8 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod</div><div class="line number10 index9 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;decoding(s,&nbsp;decoder):</div><div class="line number11 index10 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;decoder().decoding(s)</div><div class="line number12 index11 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line number13 index12 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">class&nbsp;NumEncoder:</div><div class="line number14 index13 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;encoding(self,num):</div><div class="line number15 index14 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f=lambda&nbsp;x:x+1</div><div class="line number16 index15 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str(num(f)(0))</div><div class="line number17 index16 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;decoding(self,s):</div><div class="line number18 index17 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n=int(s)</div><div class="line number19 index18 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num=NUM0</div><div class="line number20 index19 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(n):</div><div class="line number21 index20 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num=SUCC(num)</div><div class="line number22 index21 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;num</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">嗯，有了编码器，就可以方便的来验证了。</p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_589445" class="syntaxhighlighter&nbsp;&nbsp;python " style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div><div class="line number6 index5 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">6</div><div class="line number7 index6 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">7</div><div class="line number8 index7 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">8</div><div class="line number9 index8 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">9</div><div class="line number10 index9 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">10</div><div class="line number11 index10 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">11</div><div class="line number12 index11 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">12</div><div class="line number13 index12 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">13</div><div class="line number14 index13 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">14</div><div class="line number15 index14 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">15</div><div class="line number16 index15 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">16</div><div class="line number17 index16 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">17</div><div class="line number18 index17 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">18</div><div class="line number19 index18 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">19</div><div class="line number20 index19 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">20</div><div class="line number21 index20 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">21</div><div class="line number22 index21 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">22</div><div class="line number23 index22 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">23</div><div class="line number24 index23 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">24</div><div class="line number25 index24 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">25</div><div class="line number26 index25 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">26</div><div class="line number27 index26 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">27</div><div class="line number28 index27 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">28</div><div class="line number29 index28 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">29</div><div class="line number30 index29 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">30</div><div class="line number31 index30 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">31</div><div class="line number32 index31 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">32</div><div class="line number33 index32 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">33</div><div class="line number34 index33 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">34</div><div class="line number35 index34 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">35</div><div class="line number36 index35 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">36</div><div class="line number37 index36 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">37</div><div class="line number38 index37 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">38</div><div class="line number39 index38 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">39</div><div class="line number40 index39 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">40</div></td><td class="code" style="width: 668px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#calculus&nbsp;demo</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">################################################</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">print(&quot;demo&nbsp;number&nbsp;calculus.&#92;n&quot;</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;don't&nbsp;input&nbsp;large&nbsp;number,&quot;</div><div class="line number6 index5 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;it&nbsp;will&nbsp;cause&nbsp;to&nbsp;exceed&nbsp;maximum&nbsp;recursion&nbsp;depth!&#92;n&quot;)</div><div class="line number7 index6 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number8 index7 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">n1=input('input&nbsp;a&nbsp;number:&nbsp;')</div><div class="line number9 index8 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">n2=input('input&nbsp;anohter&nbsp;number:&nbsp;')</div><div class="line number10 index9 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#decode&nbsp;string&nbsp;to&nbsp;Church&nbsp;numeral</div><div class="line number11 index10 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">num1=LambdaEncoding.decoding(n1,NumEncoder)</div><div class="line number12 index11 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">num2=LambdaEncoding.decoding(n2,NumEncoder)</div><div class="line number13 index12 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line number14 index13 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#add</div><div class="line number15 index14 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">result=PLUS(num1)(num2)</div><div class="line number16 index15 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number17 index16 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">print('&#123;0&#125;&nbsp;+&nbsp;&#123;1&#125;&nbsp;=&nbsp;&#123;2&#125;'.format(</div><div class="line number18 index17 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n1,</div><div class="line number19 index18 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n2,</div><div class="line number20 index19 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;LambdaEncoding.encoding(result,&nbsp;NumEncoder)))</div><div class="line number21 index20 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number22 index21 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#mult</div><div class="line number23 index22 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">result=MULT(num1)(num2)</div><div class="line number24 index23 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">print('&#123;0&#125;&nbsp;X&nbsp;&#123;1&#125;&nbsp;=&nbsp;&#123;2&#125;'.format(</div><div class="line number25 index24 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n1,</div><div class="line number26 index25 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n2,</div><div class="line number27 index26 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;LambdaEncoding.encoding(result,&nbsp;NumEncoder)))</div><div class="line number28 index27 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#sub</div><div class="line number29 index28 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">result=SUB(num1)(num2)</div><div class="line number30 index29 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">print('&#123;0&#125;&nbsp;-&nbsp;&#123;1&#125;&nbsp;=&nbsp;&#123;2&#125;'.format(</div><div class="line number31 index30 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n1,</div><div class="line number32 index31 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n2,</div><div class="line number33 index32 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;LambdaEncoding.encoding(result,&nbsp;NumEncoder)))</div><div class="line number34 index33 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number35 index34 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">#POW</div><div class="line number36 index35 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">result=POW(num1)(num2)</div><div class="line number37 index36 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">print('&#123;0&#125;&nbsp;^&nbsp;&#123;1&#125;&nbsp;=&nbsp;&#123;2&#125;'.format(</div><div class="line number38 index37 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n1,</div><div class="line number39 index38 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;n2,</div><div class="line number40 index39 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;&nbsp;&nbsp;&nbsp;LambdaEncoding.encoding(result,&nbsp;NumEncoder)))</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">测试结果如下：<br /></p><div style="padding: 0px; margin: 0px; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体; font-size: 12.5px; line-height: 22.5px"><div id="highlighter_577702" class="syntaxhighlighter&nbsp;&nbsp;shell" style="padding: 0px; width: 704px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important"><div class="toolbar" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: none !important; bottom: auto !important; float: none !important; height: 11px !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: absolute !important; right: 1px !important; top: 1px !important; vertical-align: baseline !important; width: 11px !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 10px !important; min-height: auto !important; z-index: 10 !important; color: white !important; background: #6ce26c !important"><span style="padding: 0px; margin: 0px"><a style="padding: 1px 0px 0px !important; margin: 0px !important; color: white !important; outline: 0px !important; font-size: 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; overflow: visible !important; position: static !important; right: auto !important; text-align: center !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: auto !important; display: block !important; text-decoration: none !important; background: none !important" href="http://my.oschina.net/u/947271/blog/287483#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellspacing="0" cellpadding="0" style="width: 704px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><tbody><tr style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><td class="gutter" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-size: 1em !important; min-height: auto !important; color: #afafaf !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">1</div><div class="line number2 index1 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">2</div><div class="line number3 index2 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">3</div><div class="line number4 index3 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4</div><div class="line number5 index4 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">5</div><div class="line number6 index5 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">6</div><div class="line number7 index6 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">7</div><div class="line number8 index7 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">8</div><div class="line number9 index8 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">9</div><div class="line number10 index9 alt1" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">10</div><div class="line number11 index10 alt2" style="padding: 0px 0.5em 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border-width: 0px 3px 0px 0px !important; border-right-style: solid !important; border-right-color: #6ce26c !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">11</div></td><td class="code" style="width: 668px; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="container" style="padding: 0px !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; background: none !important"><div class="line number1 index0 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&gt;&gt;&gt;&nbsp;</div><div class="line number2 index1 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">demo&nbsp;number&nbsp;calculus.</div><div class="line number3 index2 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">don't&nbsp;input&nbsp;large&nbsp;number,it&nbsp;will&nbsp;cause&nbsp;to&nbsp;exceed&nbsp;maximum&nbsp;recursion&nbsp;depth!</div><div class="line number4 index3 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&nbsp;</div><div class="line number5 index4 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">input&nbsp;a&nbsp;number:&nbsp;4</div><div class="line number6 index5 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">input&nbsp;anohter&nbsp;number:&nbsp;3</div><div class="line number7 index6 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4&nbsp;+&nbsp;3&nbsp;=&nbsp;7</div><div class="line number8 index7 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4&nbsp;X&nbsp;3&nbsp;=&nbsp;12</div><div class="line number9 index8 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4&nbsp;-&nbsp;3&nbsp;=&nbsp;1</div><div class="line number10 index9 alt1" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">4&nbsp;^&nbsp;3&nbsp;=&nbsp;64</div><div class="line number11 index10 alt2" style="padding: 0px 1em !important; margin: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important; background-image: none !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: initial !important; background-repeat: initial !important">&gt;&gt;&gt;</div></div></td></tr></tbody></table></div></div><p style="padding: 0px; margin: 8px 0px; line-height: 22.5px; letter-spacing: 0.5px; font-size: 12.5px; word-wrap: break-word; word-break: break-all; color: #333333; font-family: 'Microsoft YaHei', Verdana, sans-serif, 宋体">神奇吧。</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6978</link>
<title><![CDATA[lambda演算实例]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:44:16 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6978</guid> 
<description>
<![CDATA[ 
	<span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">关于lambda演算的定义和解释的确有点让人迷糊，主要不是因为lambda演算有多复杂，而是一些基本概念没有归入正确位置的原因。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">这里先写一点草稿，在实践中学习和领悟lambda演算到底是个什么东西。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">一：自然数运算：</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">在lambda演算中的邱奇数定义</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">0 = &lambda;f.&lambda;x.x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">1 = &lambda;f.&lambda;x.f x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">2 = &lambda;f.&lambda;x.f (f x)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">3 = &lambda;f.&lambda;x.f (f (f x))</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">SUCC = &lambda;n.&lambda;f.&lambda;x.f(n f x)</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">SUCC是一个有三个自由变量的函数</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">计算</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">SUCC 0</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;n.&lambda;f.&lambda;x.f (n f x)&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; //将0代入n</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (0 f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //0=&lambda;f.&lambda;x.x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (&lambda;f.&lambda;x.x f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&lambda;f.&lambda;x.x f x是将两个参数的函数&lambda;f.&lambda;x.x应用于(f x)这两个值的结果，结果等于x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//正好等于1的邱奇数定义</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">SUCC 1</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;n.&lambda;f.&lambda;x.f (n f x)&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; //将1代入n</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (1 f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //0=&lambda;f.&lambda;x.x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (&lambda;f.&lambda;x.(f x) f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&lambda;f.&lambda;x.(f x) f x是将两个参数的函数&lambda;f.&lambda;x.(f x)应用于(f x)这两个值的结果，结果等于(f x)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//正好等于2的邱奇数定义</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">小节：</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">不妨把lambda演算看做一个自动机，你输入一个式子（一个&lambda;项），它就给你输出一个演算结果，至于输入和输出有什么意义，是我们自己赋予的。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">比如为了计算0的后继，我们只是输入（&lambda;n.&lambda;f.&lambda;x.f(n f x) &lambda;f.&lambda;x.x）给这个机器，这个机器就会给我们输出&lambda;f.&lambda;x.f x。在解释这个输入输出关系时，我们会说，SUCC 0 = 1，这样就赋予这个运算一个意义。这个自动机知道自己在做加1操作吗？其实它什么也不知道。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">为什么邱奇数这样定义？其实不妨把它们看做是被偶然发现的一些&lambda;项，这些&lambda;项的组合项的演算结果恰好能对应于自然数的运算而已。定义自然数还有别的定义方式，邱奇数及对应的运算符只是其中的一种而已。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">比如我们又发现一个&lambda;项PLUS</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">PLUS = &lambda;m.&lambda;n.&lambda;f.&lambda;x.m f (n f x)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">先不要管什么意义，试试下面这个组合起来的&lambda;项</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">PLUS 2 3</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= &lambda;m.&lambda;n.&lambda;f.&lambda;x.m f (n f x)&nbsp;&nbsp;2 3&nbsp;&nbsp; //将3和2应用于m,n这两个自由变量上</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.3 f (2 f x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //(2 f x) = (&lambda;f.&lambda;x.(f (f x)) f x) = f (f x)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.3 f (f (f x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //3=&lambda;f.&lambda;x.f (f (f x))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.(&lambda;f.&lambda;x.f (f (f x)))) f (f (f x))&nbsp;&nbsp;//将f 和 (f (f x)) 应用于f和x这两个自由变量上</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;f.&lambda;x.f (f (f (f (f x))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//我们发现正好等于5的邱奇数定义</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">很奇妙的性质，我们用PLUS(&lambda;m.&lambda;n.&lambda;f.&lambda;x.m f (n f x) )这样的&lambda;项作用于代表2和3的邱奇数时，得到的演算结果恰恰是代表5的邱奇数。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">此外，还可以构造出乘法和除法等各种运算符。</span><br /><br /><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">二、逻辑运算：</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">TRUE := &lambda;x y.x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">FALSE := &lambda;x y.y</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">AND := &lambda;p q.p q FALSE</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">OR := &lambda;p q.p TRUE q</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">NOT := &lambda;p.p FALSE TRUE</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">IFTHENELSE := &lambda;p x y.p x y</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">需要重复加以强调的是，这些&lambda;项都是一些构造，我们构造它们的原因是，这些项的组合所得到的演算结果恰恰符合我们对逻辑运算的认识，所以我们才赋予它们以逻辑运算符的意义，也正因为这些构造，我们才可以让那个演算自动机代替我们去做各种逻辑运算。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">计算：</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">AND TRUE TRUE</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;p q.p q FALSE （TRUE TRUE）//用TRUE和FALSE替换自由变量p和q</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=TRUE TRUE FALSE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //TRUE = &lambda;x y.x</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;x y.x&nbsp;&nbsp;(TRUE FALSE)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//用TRUE和FALSE替换自由变量x和y</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=TRUE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//y没有在函数体中出现，所以等于TRUE</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">三、有序对</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CONS := &lambda;x y.&lambda;p.IF p x y</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CAR := &lambda;x.x TRUE</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CDR := &lambda;x.x FALSE</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">这里很有趣的一点是，和lisp的实现对照，我们发现car和cdr是在lisp的基本运算符中的，但实际上，它们仍然可以用&lambda;项来表示。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">我们先构造一个有序对</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CONS m1 m2</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;x y.&lambda;p.IF p x y&nbsp;&nbsp;(m1 m2)&nbsp;&nbsp;&nbsp;&nbsp;//很简单，用m1和m2替换x和y就行了</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;p.IF p m1 m2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br /><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">然后计算这个有序对的CAR</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CAR (IF p m1 m2)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=&lambda;x.(x TRUE)&nbsp;&nbsp;(&lambda;p.IF p m1 m2)&nbsp;&nbsp;//x用(&lambda;p.IF p m1 m2)替换</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=(&lambda;p.IF p m1 m2) TRUE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//p用TRUE替换</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=IF TRUE m1 m2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//根据IF的含义我们知道结果就是m1</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=m1</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">CDR (IF p m1 m2)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= &lambda;x.x FALSE&nbsp;&nbsp;(&lambda;p.IF p m1 m2)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=(&lambda;p.IF p m1 m2) FALSE</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=IF FALSE m1 m2</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=m2</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">四、Y不动点</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">考虑一下这台&lambda;演算自动机，它再简单不过了，只是按照非常简单的规则应用函数，将值绑定到自由变量，然后继续演算，直到最终结果。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">在开始计算时，我们输入的都是长长的&lambda;项，甚至连SUCC,CDR这些简写都没有，比如要做一个2+3的加法，我们会输入 &lambda;m.&lambda;n.&lambda;f.&lambda;x.m f (n f x)&nbsp;&nbsp;(&lambda;f.&lambda;x.f (f x)) (&lambda;f.&lambda;x.f (f (f x)))，然后这台演算自动机会给我们输出&lambda;f.&lambda;x.f (f (f (f (f x))))这个结果。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">这样问题就来了，如果函数要递归调用自己，那该怎么办呢?在lambda演算中，无法定义包含自身的函数（虽然在lisp中可以）。</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">构造出这样一个Y</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">Y = &lambda;f.(&lambda;x.f(x x)) (&lambda;x.f(x x))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">Y g</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= (&lambda;f.(&lambda;x.f(x x))(&lambda;x.f(x x))) g&nbsp;&nbsp;//用g替换f</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= &lambda;x.g(x x) (&lambda;x.g(x x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//用&lambda;x.g(x x)替换x这个自由变量</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= g (&lambda;x.g (x x) &lambda;x.g (x x))&nbsp;&nbsp; //我们发现&lambda;x.g (x x) &lambda;x.g (x x)恰好等于Y g</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= g (Y g)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">继续</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= g (&lambda;x.g (x x) &lambda;x.g (x x))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= g (g (&lambda;x.g (x x) &lambda;x.g (x x)))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= g (g (g (&lambda;x.g (x x) &lambda;x.g (x x))))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">= ...&nbsp;&nbsp;...</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">这里我们能看出来了，如果给这个演算自动机输入Y g，也就是实际上输入了这样一个&lambda;项(&lambda;f.(&lambda;x.f(x x)) (&lambda;x.f(x x)) g)之后，演算自动机将不会停机，永远递归下去，直到耗尽所有内存。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">从这里可以看出来，虽然lambda演算表面上不能自己调用自己，因为无法给自己起一个名字，但实际上可以构造出这样一个&lambda;项，可以让计算递归下去。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">接下来，看如何利用这一特殊的&lambda;项的性质，来完成一些有用的计算：</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">计算阶乘的数学公式如下：</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">fact(n) = if n=0 then 1 else n * fact(n-1)</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">构造如下的&lambda;项，计算5的阶乘，其中Y=&lambda;f.(&lambda;x.f(x x)) (&lambda;x.f(x x))，而g=&lambda;f n.(ISZERO n 1 MULT n&middot;f(n-1))，都是&lambda;项的形式。</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">(&lambda;n.(ISZERO n 1 （MULT n ((Y g)(n-1)))) 5</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">=</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">(按照维基百科上的计算过程，改写为容易懂的if then else形式)</span><br /><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">if 5 = 0 then 1 else 5&middot;(g(Y g，5-1))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(g(Y g)4)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(&lambda;n.(if n = 0 then 1 else n&middot;((Y g)(n-1))) 4)</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(if 4 = 0 then 1 else 4&middot;(g(Y g，4-1)))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(4&middot;(g(Y g)3))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(4&middot;(&lambda;n.(if n = 0 then 1 else n&middot;((Y g)(n-1))) 3))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(4&middot;(if 3 = 0 then 1 else 3&middot;(g(Y g，3-1))))</span><br /><span style="font-size: 13px; line-height: 21.06px; white-space: pre-wrap; font-family: Arial, Helvetica, sans-serif; color: #111111">5&middot;(4&middot;(3&middot;(g(Y g)2)))</span><br />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6977</link>
<title><![CDATA[lambda演算与函数式编程]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Thu, 10 Dec 2015 12:39:52 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6977</guid> 
<description>
<![CDATA[ 
	<span style="font-size: 14px; line-height: 21px; font-family: simsun; color: #494949; background-color: #eb735a">前几天开始看&lt;程序设计语言概念&gt;（&nbsp;</span><a style="text-decoration: none; color: #99481f; font-family: simsun; font-size: 14px; line-height: 21px; background-color: #eb735a" href="http://www.amazon.com/exec/obidos/ASIN/0521780985/qid=1129186290/sr=11-1/ref=sr_11_1/103-3929732-9947012" target="_blank"><strong>Concepts in Programming Languages</strong></a><span style="font-size: 14px; line-height: 21px; font-family: simsun; color: #494949; background-color: #eb735a">&nbsp;），里面一开始就讲了计算系统，但不是图灵机，而是&lambda;演算。以前看SICP的时候有一题Church计数，既在&lambda;演算中，计算系统用函数的嵌套次数来计数（以及对应的scheme定义）：</span><br /><table border="0" cellspacing="1" cellpadding="1" style="margin: 0px; padding: 0px; color: #494949; font-family: simsun; font-size: 14px; background-color: #eb735a"><tbody><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px"><table border="0" cellspacing="1" cellpadding="1" style="margin: 0px; padding: 0px"><tbody><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small"><strong>0</strong>&nbsp;&equiv;&nbsp;&lambda;f.&lambda;x. x</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">(define&nbsp;zero&nbsp;(lambda&nbsp;(f) (lambda&nbsp;(x)&nbsp;x)))</span></td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small"><strong>1</strong>&nbsp;&equiv;&nbsp;&lambda;f.&lambda;x. f&nbsp;x</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">(define one (lambda (f) (lambda (x) (f x))))</span></td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small"><strong>2</strong>&nbsp;&equiv;&nbsp;&lambda;f.&lambda;x. f (f x)</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">(define two (lambda (f) (lambda (x) ( f (f x)))))</span></td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small"><strong>3</strong>&nbsp;&equiv;&nbsp;&lambda;f.&lambda;x. f (f (f x))</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">(define three (lambda (f) (lambda (x) (f (f (f x))))))</span></td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">...</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">...<br /></span></td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small"><strong>n</strong>&nbsp;&equiv;&nbsp;&lambda;f.&lambda;x. f<sup><em>n</em></sup>&nbsp;x</span></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px; color: #787878"><span style="word-wrap: normal; word-break: normal; line-height: 19.5px; font-size: x-small">...</span></td></tr></tbody></table><br />&nbsp;&nbsp;虽然计数看懂了，但是scheme的实现到现在还是没想通。。有人说对计数的lambda表达式人肉展开，我没展成功- -<br />&nbsp;&nbsp;也就是从那时候起，知道函数式编程的理论基础是&lambda;演算。正好这本书有专门的章节，在恶补了两天之后，终于知道了些皮毛。。。<br />&nbsp;<br />&nbsp;&nbsp;所谓&lambda;演算，是一套用于研究函数定义，函数应用和递归的形式系统。它包括一条变换规则（变量替换）和一条函数定义方式，Lambda演算之通用在于，任何一个可计算函数都能用这种形式来表达和求值。因而，它是等价于<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E6%9C%BA" title="图灵机">图灵机</a>的。尽管如此，Lambda演算强调的是变换规则的运用，而非实现它们的具体机器。可以认为这是一种更接近软件而 非硬件的方式。<br />&nbsp;&nbsp;（书上多次提到Lambda演算的计算能力已被证明等价于图灵机，就冲这点，我势必要把FP学好。。。）<br />&nbsp;&nbsp;对于Lambda演算的描述，wiki的非形式化定义：<br /><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">在lambda演算中，每个表达式都代表一个只有单独参数的函数，这个函数的参数本身也是一个只有单一参数的函数，同时，函数的值是又一个只有单一 参数的函数。函数是通过lambda表达式匿名地定义的，这个表达式说明了此函数将对其参数进行什么操作。例如，&ldquo;加2&rdquo;函数f(x)= x + 2可以用lambda演算表示为&lambda;x.x + 2(&lambda;y.y + 2也是一样的，参数的取名无关紧要)而f(3)的值可以写作(&lambda;x.x + 2) 3。函数的作用（application）是<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/w/index.php?title=%E5%B7%A6%E7%BB%93%E5%90%88&amp;action=edit&amp;redlink=1" title="左结合">左结合</a>的：f x y =(f x) y。考虑这么一个函数：它把一个函数作为参数，这个函数将被作用在3上：&lambda;f.f 3。如果把这个（用函数作参数的）函数作用于我们先前的&ldquo;加2&rdquo;函数上：(&lambda;f.f 3)(&lambda;x.x+2)，则明显地，下述三个表达式：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none; color: #787878"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(&lambda;f.f 3)(&lambda;x.x+2)与 (&lambda;x.x + 2) 3与3 + 2</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">是等价的。有两个参数的函数可以通过lambda演算这么表达：一个单一参数的函数的返回值又是一个单一参数的函数（参见<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/wiki/Currying" title="Currying">Currying</a>）。例如，函数f(x, y) = x - y可以写作&lambda;x.&lambda;y.x - y。下述三个表达式：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none; color: #787878"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(&lambda;x.&lambda;y.x - y) 7 2与 (&lambda;y.7 - y) 2与7 - 2</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">也是等价的。然而这种lambda表达式之间的等价性无法找到一个通用的函数来判定。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">并非所有的lambda表达式都可以规约至上述那样的确定值，考虑</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none; color: #787878"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(&lambda;x.x x)(&lambda;x.x x)</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">或</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none; color: #787878"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(&lambda;x.x x x)(&lambda;x.x x x)</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">然后试图把第一个函数作用在它的参数上。 (&lambda;x.x x)被称为&omega;&nbsp;<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/wiki/%E7%BB%84%E5%90%88%E5%AD%90%E9%80%BB%E8%BE%91" title="组合子逻辑">组合子</a>，((&lambda;x.x x)(&lambda;x.x x))被称为&Omega;，而((&lambda;x.x x x) (&lambda;x.x x x))被称为&Omega;<sub>2</sub>，以此类推。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">若仅形式化函数作用的概念而不允许lambda表达式，就得到了<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/wiki/%E7%BB%84%E5%90%88%E5%AD%90%E9%80%BB%E8%BE%91" title="组合子逻辑">组合子逻辑</a>。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">&nbsp;&nbsp;形式化定义用巴科斯文法描述，我看不懂- -</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">&nbsp;&nbsp;Lambda演算中有几个重要的法则，我的理解，它们分别成为了FP几个特性的理论基础：</p><h3 style="margin: 0px; padding: 0px; border: 0px; list-style: none"><span style="word-wrap: normal; word-break: normal; line-height: 21.06px">1，&alpha;-变换</span></h3><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">Alpha-变换规则表达的是，被绑定变量的名称是不重要的。比如说&lambda;x.x和&lambda;y.y是同一个函数。尽管如此，这条规则并非像它看起来这么简单， 关于被绑定的变量能否由另一个替换有一系列的限制。</p>&nbsp;&nbsp;对应LISP中，函数参数本身的名字对函数没有任何影响，Lambda表达式的定义也很好的说明了这一点。比如以下两个函数是完全等价的。<br />&nbsp;&nbsp;(define (square x) (lambda(x) (* x x)))<br />&nbsp;&nbsp;(define (square y) (lambda(y) (* y y)))<br />&nbsp;&nbsp;另外，alpha变换涉及到变量的自由出现。即被一个函数绑定的变量不能与与另一个函数绑定的变量同时变换。例如&lambda;x.(&lambda;x.x) x这样的表达式将变换为&lambda;y.(&lambda;x.x) y。举个Scheme求平方和的例子~<br />&nbsp;&nbsp;(define (square-sum square x y)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+ (square x) (square y)))<br />&nbsp;&nbsp;square函数在上面定义，其中有变量x，求平方和函数自身也有名为x的变量，但两者显然可以各自变换。并且这个例子用到了高阶函数（&beta;-归约和函数的curry化），下面马上说明。<br /><br /><h3 style="margin: 0px; padding: 0px; border: 0px; list-style: none"><span style="word-wrap: normal; word-break: normal; line-height: 21.06px">2，&beta;-归约</span></h3><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">Beta-归约规则表达的是函数作用的概念。它陈述了若所有的E'的自由出现在E [V:=E']中仍然是自由的情况下，有</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none; color: #787878"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">((&lambda;V.E) E') == E [V:=E']</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">成立。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">&nbsp;&nbsp;<span style="word-wrap: normal; word-break: normal; color: #000000">虽然还是巴科斯文法，不过这个大概能看明白。我觉得beta-变换是Lambda演算最重要的部分，也是函数式编程中最重要概念--<span style="word-wrap: normal; word-break: normal; font-weight: bold">高阶函数</span>的理论基础。由于Lambda演算中，函数可以接受的参数既可以是变量，也可以是另一个函数，因此可以对其进行归约，归约到只接受一个变量的函数（Lambda演算中只定义了一元函数）。举几个例子：</span></p><p style="margin: 0cm 0cm 0pt; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; text-indent: 21pt"><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x.</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y x)(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.u)</span></u>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">&reg;</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.u)</span></p><p style="margin: 0cm 0cm 0pt; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; text-indent: 21pt"><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x x)(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.u)</span></u>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">&reg;</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.u) (</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.u)</span></p><p style="margin: 0cm 0cm 0pt; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; text-indent: 21pt"><span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y a)(<u>(</u></span><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x)(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">u.u) z)</span></u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">)</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">&reg;</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y a)(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">u.u) z)</span></p><p style="margin: 0cm 0cm 0pt; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; text-indent: 21pt"><span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y a)((</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x)(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.<u>(</u></span><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">u.u) z</span></u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">))</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">&reg;</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y a)((</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x)(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z. z))</span></p><span style="word-wrap: normal; word-break: normal; font-family: 宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">y.y a)((</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x)(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.(</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span></u><u><span style="word-wrap: normal; word-break: normal; font-family: 宋体">u.u) z))</span></u>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: symbol">&reg;</span>&nbsp;<span style="word-wrap: normal; word-break: normal; font-family: 宋体">((</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">x. x)(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">z.(</span><span style="word-wrap: normal; word-break: normal; font-family: symbol">l</span><span style="word-wrap: normal; word-break: normal; font-family: 宋体">u.u) z)) a<br /><br />这样的归约计算我到现在还不太适应- -，归约计算的每一步，就是代换，把最右边的函数/变量代入到次右边的参数，同时消去左边相应的</span>&lambda;，直到不能再归约为止。<br />&nbsp;&nbsp;显然，&beta;-归约自身结合Lambda演算的定义就可以自然而然地导出高阶函数的概念。所谓高阶函数，如果一个函数满足：<span style="word-wrap: normal; word-break: normal; color: #787878">1，接受一个或多个函数作为输入；2，输出一个函数。<span style="word-wrap: normal; word-break: normal; color: #000000">那么这就是一个高阶函数。数学中可以举个对应的例子：求导，如果这一过程作为一个函数，那么它就是一个高阶函数。它接受一个函数作为参数，输出了这个函数的导函数。在求平方和的例子中，square-sum接受了求平方函数square，输出了一个求平方和的函数，高阶函数的概念可以在这里体现。<br />&nbsp;&nbsp;另外，Lambda演算中只定义了一元函数，那么多元函数怎么办？<br />&nbsp;&nbsp;为了Lambda系统能更小，Church等人当初只定义了一元函数，并且利用&beta;-归约的定义，将多元函数化为只接受单一参数的函数，这就是<span style="word-wrap: normal; word-break: normal; font-weight: bold">函数的curry化</span>。</span></span><strong>curry化</strong>是把接受多个参数<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/w/index.php?title=%E5%BD%A2%E5%BC%8F%E5%8F%82%E6%95%B0&amp;action=edit&amp;redlink=1" title="形式参数"></a>的函数变 换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。显然，curry化本身就是一个高阶函数，也用到了&beta;-归约。那么curry化如何演算呢？很简单<br />&nbsp;&nbsp;&lambda;xy.N ==&gt; &lambda;x.&lambda;y.N<br />&nbsp;&nbsp;这个文法有点抽象~~比如说有三元函数f(x,y,z)，由于只能接受一个参数，所以对它进行curry化：<br />&nbsp;&nbsp;1，接受x，并固定它，返回二元函数g(y,z)；<br />&nbsp;&nbsp;2，接受y，并固定它，返回一元函数h(z)，这样就把一个三元函数化为一元函数来处理。<br />&nbsp;&nbsp;&beta;-归约与curry化相互组合就能产生出各种复杂的过程，也产生了威力巨大的Lambda演算！<br /><br /><h3 style="margin: 0px; padding: 0px; border: 0px; list-style: none"><span style="word-wrap: normal; word-break: normal; line-height: 21.06px">3，&eta;-变换</span></h3><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">&nbsp;&nbsp;前两条规则之后，还可以加入第三条规则，eta-变换，来形成一个新的等价关系。Eta-变换表达的是<a style="text-decoration: none; color: #99481f" href="http://zh.wikipedia.org/wiki/%E5%A4%96%E5%BB%B6%E6%80%A7" title="外延性">外延性</a>的概念，在这里外延性指的是，两个函数对于所有的参数得到的结果都一致，当且仅当它们是同一个函数。Eta-变换 可以令&lambda;x .f x和f相互转换，只要x不是f中的自由出现。下面说明了为何这条规则和外延性是等价的：</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">若f与g外延地等价，即，f a == g a对所有的lambda表达式a成立，则当取a为在f中不是自由出现的变量x时，我们有f x == g x，因此&lambda;x .f x == &lambda;x .g x，由eta-变换f == g。所以只要eta-变换是有效的，会得到外延性也是有效的。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">相反地，若外延性是有效的，则由beta-归约，对所有的y有(&lambda;x .f x) y == f y，可得&lambda;x .f x == f，即eta-变换也是有效的。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal; color: #787878">&nbsp;&nbsp;<span style="word-wrap: normal; word-break: normal; color: #000000">按照我的理解，eta-变换主要关于函数的等价性，这一点我在Scheme当中感触不深，倒是Python在函数之间可以直接赋值体现得更明显。</span>&nbsp;<br /></p></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;</td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;</td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;</td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;<br />另外FP中的重要概念在Lambda演算中也有坚实的理论基础<br /><br /><span style="word-wrap: normal; word-break: normal; line-height: 27px; font-size: 18px"><span style="word-wrap: normal; word-break: normal; font-weight: bold">递归</span></span><br /></td><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;</td></tr><tr><td style="margin: 0px; padding: 0px; font-size: 12px; font-family: Verdana, 宋体, sans-serif; line-height: 18px">&nbsp;&nbsp;由于纯函数式编程当中没有变量，所以没有循环，类似的过程全部由递归来实现，在Lambda演算中，不能定义包含自身的函数，因此递归通过<span style="word-wrap: normal; word-break: normal; font-weight: bold">不动点组合子</span>来实现。举个例子：<br /><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">为了计算阶乘，可以开始于定义一个函数，这里叫g，它接受一个函数f作 为参数并返回接受n作为参数的另一个函数：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">g&nbsp;:= &lambda;f n.(if n = 0 then 1 else n&middot;f(n-1))。</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">函数g返回要么常量1，要么函数f对n-1的n次应用。函数g可以用lambda演算来定义。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">但是，g自身仍然不是递归的；为了使用g来建立递归函数，作为参数传递给g的f函 数必须有特殊的性质。也就是说，作为参数传递的f函数必须展开为调用带有一个参数的函数g&nbsp;-- 并且这个参数必须再次f函数!</p>换句话说，f必须展开为g(f)。这个到g的调用将接着展开为上面的阶乘函数并计算下至另 一层递归。在这个展开中函数f将再次出现，并将被再次展开为g(f)并继续递归。这种函数，这裡的f = g(f)，叫做g的不动点。<br />&nbsp;&nbsp;在Lambda演算中，最常见最简单的不动点是Y组合子，它的定义为<br />&nbsp;&nbsp;Y = &lambda;g.(&lambda;x.g(x x))(&lambda;x.g(x x))<br />&nbsp;&nbsp;对于任意函数g，有Y g = g(Y g)。（我验算过了，这是真的- -~这是Curry发现的，您就是神）。对于阶乘函数，令n = 5<br /><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(&lambda;n.(if n = 0 then 1 else n&middot;((Y g)(n-1)))) 5</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">if 5 = 0 then 1 else 5&middot;(g(Y g，5-1))</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(g(Y g)4)</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(&lambda;n.(if n = 0 then 1 else n&middot;((Y g)(n-1))) 4)</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(if 4 = 0 then 1 else 4&middot;(g(Y g，4-1)))</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(4&middot;(g(Y g)3))</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(4&middot;(&lambda;n.(if n = 0 then 1 else n&middot;((Y g)(n-1))) 3))</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(4&middot;(if 3 = 0 then 1 else 3&middot;(g(Y g，3-1))))</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">5&middot;(4&middot;(3&middot;(g(Y g)2)))</dd><dt style="margin: 0px; padding: 0px; border: 0px; list-style: none">由于Y组合子的存在，函数反复调用自身，形成了递归。（神一般的存在。。。）</dt></dl>&nbsp;<br /><h2 style="margin: 0px; padding: 0px; border: 0px; list-style: none"><span style="word-wrap: normal; word-break: normal; line-height: 27px">逻辑与谓词</span></h2><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">习惯上，下述两个定义（称为邱奇布尔值）被用作TRUE和FALSE这样的布尔值：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">TRUE&nbsp;:= &lambda;x y.x</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">FALSE&nbsp;:= &lambda;x y.y<dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">(注意FALSE等价于前面定义邱奇数零)</dd></dl></dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">接着，通过这两个&lambda;-项，我们可以定义一些逻辑运算：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">AND&nbsp;:= &lambda;p q.p q FALSE</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">OR&nbsp;:= &lambda;p q.p TRUE q</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">NOT&nbsp;:= &lambda;p.p FALSE TRUE</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">IFTHENELSE&nbsp;:= &lambda;p x y.p x y</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">我们现在可以计算一些逻辑函数，比如：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">AND TRUE FALSE<dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">&equiv;(&lambda;p q.p q FALSE) TRUE FALSE &rarr;<sub>&beta;</sub>&nbsp;TRUE FALSE FALSE</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">&equiv;(&lambda;x y.x) FALSE FALSE &rarr;<sub>&beta;</sub>&nbsp;FALSE</dd></dl></dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">我们见到AND TRUE FALSE等价于FALSE。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">&ldquo;谓词&rdquo;是指返回布尔值的函数。最基本的一个谓词是ISZERO，当且仅当其参数为零时返回真，否则返回假：</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">ISZERO&nbsp;:= &lambda;n.n(&lambda;x.FALSE) TRUE</dd></dl><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">运用谓词与上述TRUE和FALSE的定义，使得&quot;if-then-else&quot;这类语句很容易用lambda 演算写出。FP要以Lambda演算为基础,在这里谓词和逻辑语句也有了相应的Lambda定义.</p><h2 style="margin: 0px; padding: 0px; border: 0px; list-style: none"><span style="word-wrap: normal; word-break: normal; line-height: 27px">有序对</span></h2><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">在逻辑谓词定义的基础上可以轻易的定义出有序对（2-元组）。</p><dl style="margin: 0px; padding: 0px; border: 0px; list-style: none"><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">CONS&nbsp;:= &lambda;x y.&lambda;p.IF p x y</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">CAR&nbsp;:= &lambda;x.x TRUE</dd><dd style="margin: 0px; padding: 0px; border: 0px; list-style: none">CDR&nbsp;:= &lambda;x.x FALSE</dd></dl>对应Scheme程序：<br />(define (cons x y)<br />&nbsp;&nbsp;(define (dispatch m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if m x<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y)))<br />&nbsp;&nbsp;dispatch)<br /><br />(define (car z) (z #t))<br />(define (cdr z) (z #f))<br /><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">链表数据类型可以定义为，要么是为空列表保留的值（e.g.FALSE），要么是CONS一个元素和一个更小的列表。这样,Lambda演算就定义出了LISP中唯一的数据结构.</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal"><br /></p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">&nbsp;&nbsp;LISP开发得非常早，当初完全是建立在Lambda演算的基础上，所以总结的这篇文章这里也看得到Lambda演算与LISP结合得非常紧密，LISP中的各个性质和元素在Lambda演算中都有对应的定义，当初接触Functional Programming的时候，完全没想到在它背后有这么一套简单，强大，完备的理论基础，LISP/Scheme也因此简单却强大。能够深入理解Lambda演算，对FP很有帮助。</p><p style="margin: 0px 0px 5px; padding: 0px; border: 0px; list-style: none; word-wrap: normal; word-break: normal">&nbsp;&nbsp;TT喜欢FP，TT要走的路还很长很长。。。。。</p></td></tr></tbody></table>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6931</link>
<title><![CDATA[怎样写一个解释器]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Sat, 07 Nov 2015 05:57:46 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6931</guid> 
<description>
<![CDATA[ 
	<p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这是一篇解释器的入门教程。虽然我试图从最基本的原理讲起，尽量让这篇文章不依赖于其它知识，但是这篇教程并不是针对编程的入门知识，所以我假设你已经学会了最基本的 Scheme 和函数式编程。我不是很推崇函数式编程，但它里面确实包含了很重要的一些方法。如果你完全不了解这些，可以读一下 SICP 的第一，二章（或者接下去读 The Little Schemer)。当然你也可以继续读这篇文章，有不懂的地方再去查资料。我在这里也会讲递归和模式匹配的原理。如果你已经了解这些东西，这里的内容也许可以加深你的理解。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">解释器是一种简单却又深奥的东西，以至于好多人都不会写，或者自认为会写却又不真正的会写。在这个领域里有一些历史遗留下来的误解，以至于很少有人真正的知道如何写出正确的解释器。很多&ldquo;语言专家&rdquo;或者&ldquo;逻辑学家&rdquo;的解释器代码里面有各种各样的错误，却又以谬传谬，搞得无比复杂。这误解的渊源之深，真是一言难尽。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你必须从最简单的语言开始，逐步增加语言的复杂度，才能构造出正确的解释器。这篇文章就是告诉你如何写出一个最简单的语言 (lambda calculus) 的解释器，并且带有基本的的算术功能，可以作为一个高级计算器来使用。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">一般的程序语言课程往往从语法分析(parsing)开始，折腾 lex 和 yacc 等麻烦却不中用的工具，解决一些根本不需要存在的问题。Parsing 的作用其实只是把字符串解码成程序的语法树（AST）结构。麻烦好久得到了 AST 之后，真正的困难才开始！而很多人在写完 parser 之后就已经倒下了。鉴于这个原因，这里我用所谓的&ldquo;S-expression&rdquo;来表示程序的语法树（AST）结构。S-expression （加上 Lisp 对它发自&ldquo;本能&rdquo;的处理能力）让我们可以直接跳过 parse 的步骤，进入关键的主题：语义(semantics)。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这里用的 Scheme 实现是 Racket。为了让程序简洁，我使用了 Racket 的模式匹配（pattern matching）。我对 Racket 没有特别的好感。但它安装比较方便，而且是免费的。如果你用其它的 Scheme 实现的话，恐怕要自己做一些调整。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">解释器是什么</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">首先我们来谈一下解释器是什么。说白了解释器跟计算器差不多。它们都接受一个&ldquo;表达式&rdquo;，输出一个 &ldquo;结果&rdquo;。比如，得到 '(+ 1 2) 之后就输出 3。不过解释器的表达式要比计算器的表达式复杂一些。解释器接受的表达式叫做&ldquo;程序&rdquo;，而不只是简单的算术表达式。从本质上讲，每个程序都是一台机器的&ldquo;描述&rdquo;，而解释器就是在&ldquo;模拟&rdquo;这台机器的运转，也就是在进行&ldquo;计算&rdquo;。所以从某种意义上讲，解释器就是计算的本质。当然，不同的解释器就会带来不同的计算。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">需要注意的是，我们的解释器接受的参数是一个表达式的&ldquo;数据结构&rdquo;，而不是一个字符串。这里我们用一种叫&ldquo;S-expression&rdquo;的数据结构来表示表达式。比如表达式 '(+ 1 2) 里面的内容是三个符号：'+, '1 和 '2，而不是字符串&ldquo;(+ 1 2)&rdquo;。从结构化的数据里面提取信息很方便，而从字符串里提取信息很麻烦，而且容易出错。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">从广义上讲，解释器是一个通用的概念。计算器实际上是解释器的一种形式，只不过它处理的语言比程序的解释器简单很多。也许你会发现，CPU 和人脑，从本质上来讲也是解释器，因为解释器的本质实际上是&ldquo;任何用于处理语言的机器&rdquo;。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">递归定义 (recursive definition)</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">解释器一般都是&ldquo;递归程序&rdquo;。之所以是递归的原因，在于它处理的数据结构（程序）本身是&ldquo;递归定义&rdquo;的结构。算术表达式就是一个这样的结构，比如：'(* (+ 1 2) (* (- 9 6) 4))。每一个表达式里面可以含有子表达式，子表达式里面还可以有子表达式，如此无穷无尽的嵌套。看似很复杂，其实它的定义不过是：</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">&ldquo;算术表达式&rdquo;有两种形式：</p><ol style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px">一个数</li><li style="margin-left: 10px">一个&nbsp;'(op e1 e2)&nbsp;这样的结构（其中&nbsp;e1&nbsp;和&nbsp;e2&nbsp;是两个&ldquo;算术表达式&rdquo;）</li></ol><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">看出来哪里在&ldquo;递归&rdquo;了吗？我们本来在定义&ldquo;算术表达式&rdquo;这个概念，而它的定义里面用到了&ldquo;算术表达式&rdquo;这个概念本身！这就构造了一个&ldquo;回路&rdquo;，让我们可以生成任意深度的表达式。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">很多其它的数据，包括自然数，都是可以用递归来定义的。比如常见的对自然数的定义是：</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">&ldquo;自然数&rdquo;有两种形式：</p><ol style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px">零</li><li style="margin-left: 10px">某个&ldquo;自然数&rdquo;的后继</li></ol><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">看到了吗？&ldquo;自然数&rdquo;的定义里面出现了它自己！这就是为什么我们有无穷多个自然数。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">所以可以说递归是无所不在的，甚至有人说递归就是自然界的终极原理。递归的数据总是需要递归的程序来处理。虽然递归有时候表现为另外的形式，比如循环(loop)，但是&ldquo;递归&rdquo;这个概念比&ldquo;循环&rdquo;更广泛一些。有很多递归程序不能用循环来表达，比如我们今天要写的解释器就是一个递归程序，它就不能用循环来表达。所以写出正确的递归程序，对于设计任何系统都是至关重要的。其实递归的概念不限于程序设计。在数学证明里面有个概念叫&ldquo;归纳法&rdquo;(induction)，比如&ldquo;数学归纳法&rdquo;(mathematical induction)。其实归纳法跟递归完全是一回事。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">我们今天的解释器就是一个递归程序。它接受一个表达式，递归的调用它自己来处理各个子表达式，然后把各个递归的结果组合在一起，形成最后的结果。这有点像二叉树遍历，只不过我们的数据结构（程序）比二叉树复杂一些。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">模式匹配和递归：一个简单的计算器</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">既然计算器是一种最简单的解释器，那么我们为何不从计算器开始写？下面就是一个计算器，它可以计算四则运算的表达式。这些表达式可以任意的嵌套，比如&nbsp;'(* (+ 1 2) (+ 3 4))。我想从这个简单的例子来讲一下模式匹配(pattern matching) 和递归 (recursion) 的原理。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">下面就是这个计算器的代码。它接受一个表达式，输出一个数字作为结果，正如上一节所示。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(define calc&nbsp;&nbsp; (lambda (exp)&nbsp;&nbsp;&nbsp;&nbsp; (match exp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 匹配表达式的两种情况&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [(? number? x) x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 是数字，直接返回&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [`(,op ,e1 ,e2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 匹配并且提取出操作符 op 和两个操作数 e1, e2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let ([v1 (calc e1)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 递归调用 calc 自己，得到 e1 的值&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[v2 (calc e2)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 递归调用 calc 自己，得到 e2 的值&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(match op&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 分支：处理操作符 op 的 4 种情况&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['+ (+ v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 如果是加号，输出结果为 (+ v1 v2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['- (- v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 如果是减号，乘号，除号，相似的处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['* (* v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['/ (/ v1 v2)]))]))) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这里的 match 语句是一个模式匹配。它的形式是这样：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(match exp&nbsp;&nbsp; [模式 结果]&nbsp;&nbsp; [模式 结果]&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp; ... )&nbsp;&nbsp;&nbsp;&nbsp; </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">它根据表达式 exp 的&ldquo;结构&rdquo;来进行&ldquo;分支&rdquo;操作。每一个分支由两部分组成，左边的是一个&ldquo;模式&rdquo;，右边的是一个结果。左边的模式在匹配之后可能会绑定一些变量，它们可以在右边的表达式里面使用。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">一般说来，数据的&ldquo;定义&rdquo;有多少种情况，用来处理它的&ldquo;模式&rdquo;就有多少情况。比如算术表达式有两种情况，数字或者&nbsp;(op e1 e2)。所以用来处理它的&nbsp;match&nbsp;语句就有两种模式。&ldquo;你所有的情况，我都能处理&rdquo;，这就是&ldquo;穷举法&rdquo;。穷举的思想非常重要，你漏掉的任何一种情况，都非常有可能带来麻烦。所谓的&ldquo;数学归纳法&rdquo;，就是这种穷举法在自然数的递归定义上面的表现。因为你穷举了所有的自然数可能被构造的两种形式，所以你能确保定理对&ldquo;任意自然数&rdquo;成立。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">那么模式是如何工作的呢？比如&nbsp;'(,op ,e1 ,e2)&nbsp;就是一个模式（pattern），它被用来匹配输入的&nbsp;exp。模式匹配基本的原理就是匹配与它&ldquo;结构相同&rdquo;的数据。比如，如果&nbsp;exp&nbsp;是&nbsp;'(+ 1 2)，那么&nbsp;'(,op ,e1 ,e2)&nbsp;就会把&nbsp;op&nbsp;绑定到&nbsp;'+，把e1&nbsp;绑定到&nbsp;'1，把&nbsp;e2&nbsp;绑定到&nbsp;'2。这是因为它们结构相同：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">'(,op ,e1 ,e2) '( +&nbsp;&nbsp; 1&nbsp;&nbsp; 2) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">说白了，模式就是一个可以含有&ldquo;名字&rdquo;（像&nbsp;op,&nbsp;e1&nbsp;和&nbsp;e2）的&ldquo;数据结构&rdquo;，像&nbsp;'(,op ,e1 ,e2)。我们拿这个带有名字的结构去&ldquo;匹配&rdquo;实际的数据（像&nbsp;'(+ 1 2))。当它们一一对应之后，这些名字就自动被绑定到实际数据里相应位置的值。模式里面不但可以含有名字，也可以含有具体的数据。比如你可以构造一个模式&nbsp;'(,op ,e1 42)，用来匹配第二个操作数固定为 42 的那些表达式。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">看见左边的模式，你就像直接&ldquo;看见&rdquo;了输入数据的形态，然后对里面的元素进行操作。它可以让我们一次性的&ldquo;拆散&rdquo;(destruct) 数据结构，把各个部件（域）的值绑定到多个变量，而不需要使用多个访问函数。所以模式匹配是非常直观的编程方式，值得每种语言借鉴。很多函数式语言里都有类似的功能，比如 ML 和 Haskell。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">注意这里&nbsp;e1&nbsp;和&nbsp;e2&nbsp;里面的操作数还不是值，它们是表达式。我们递归的调用&nbsp;interp1&nbsp;自己，分别得到&nbsp;e1&nbsp;和&nbsp;e2&nbsp;的值&nbsp;v1和&nbsp;v2。它们应该是数字。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你注意到我们在什么地方使用了递归吗？如果你再看一下&ldquo;算术表达式&rdquo;的定义：</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">&ldquo;算术表达式&rdquo;有两种形式：</p><ol style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px">一个数</li><li style="margin-left: 10px">一个&nbsp;'(op e1 e2)&nbsp;这样的结构（其中&nbsp;e1&nbsp;和&nbsp;e2&nbsp;是两个&ldquo;算术表达式&rdquo;）</li></ol><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你就会发现这个定义里面&ldquo;递归&rdquo;的地方就是&nbsp;e1&nbsp;和&nbsp;e2，所以&nbsp;calc&nbsp;在&nbsp;e1&nbsp;和&nbsp;e2&nbsp;上面递归的调用自己。如果你在数据定义的每个递归处都进行递归，那么你的递归程序就会穷举所有的情况。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">之后，我们根据操作符&nbsp;op&nbsp;的不同，对这两个值&nbsp;v1&nbsp;和&nbsp;v2&nbsp;分别进行操作。如果&nbsp;op&nbsp;是加号&nbsp;'+，我们就调用 Scheme 的加法操作，作用于&nbsp;v1&nbsp;和&nbsp;v2，并且返回运算所得的值。如果是减号，乘号，除号，我们也进行相应的操作，返回它们的值。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">所以你就可以得到如下的测试结果：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(calc '(+ 1 2)) ;; =&gt; 3&nbsp;&nbsp;(calc '(* 2 3)) ;; =&gt; 6&nbsp;&nbsp;(calc '(* (+ 1 2) (+ 3 4))) ;; =&gt; 21 </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">一个计算器就是这么简单。你可以试试这些例子，然后自己再做一些新的例子。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">什么是 lambda calculus？</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">现在让我们过渡到一种更强大的语言：lambda calculus。它虽然名字看起来很吓人，但是其实非常简单。它的三个元素分别是是：变量，函数，调用。用传统的表达法，它们看起来就是：</p><ul style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px">变量：x</li><li style="margin-left: 10px">函数：&lambda;x.t</li><li style="margin-left: 10px">调用：t1 t2</li></ul><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">每个程序语言里面都有这三个元素，只不过具体的语法不同，所以你其实每天都在使用 lambda calculus。用 Scheme 作为例子，这三个元素看起来就像：</p><ul style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px">变量：x</li><li style="margin-left: 10px">函数：(lambda (x) e)</li><li style="margin-left: 10px">调用：(e1 e2)</li></ul><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">一般的程序语言还有很多其它的结构，可是这三个元素却是缺一不可的。所以构建解释器的最关键步骤就是把这三个东西搞清楚。构造任何一个语言的解释器一般都是从这三个元素开始，在确保它们完全正确之后才慢慢加入其它的元素。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">有一个很简单的思维方式可以让你直接看到这三元素的本质。记得我说过，每个程序都是一个&ldquo;机器的描述&rdquo;吗？所以每个 lambda calculus 的表达式也是一个机器的描述。这种机器跟电子线路非常相似。lambda calculus 的程序和机器有这样的一一对应关系：一个变量就是一根导线。一个函数就是某种电子器件的&ldquo;样板&rdquo;，有它自己的输入和输出端子，自己的逻辑。一个调用都是在设计中插入一个电子器件的&ldquo;实例&rdquo;，把它的输入端子连接到某些已有的导线，这些导线被叫做&ldquo;参数&rdquo;。所以一个 lambda calculus 的解释器实际上就是一个电子线路的模拟器。所以如果你听说有些芯片公司开始用类似 Haskell 的语言（比如 Bluespec System Verilog）来设计硬件，也就不奇怪了。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">需要注意的是，跟一般语言不同，lambda calculus 的函数只有一个参数。这其实不是一个严重的限制，因为 lambda calculus 的函数可以被作为值传递 (这叫 first-class function)，所以你可以用嵌套的函数定义来表示两个以上参数的函数。比如，(lambda (x) (lambda (y) y))&nbsp;就可以表示一个两个参数的函数，它返回第二个参数。不过当它被调用的时候，你需要两层调用，就像这样：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(((lambda (x) (lambda (y) y)) 1) 2) ;; =&gt; 2 </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">虽然看起来丑一点，但是它让我们的解释器达到终极的简单。简单对于设计程序语言的人是至关重要的。一开头就追求复杂的设计，往往导致一堆纠缠不清的问题。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">lambda calculus 不同于普通语言的另外一个特点就是它没有数字等基本的数据类型，所以你不能直接用 lambda calculus 来计算像&nbsp;(+ 1 2)&nbsp;这样的表达式。但是有意思的是，数字却可以被 lambda calculus 的三个基本元素&ldquo;编码&rdquo;(encoding) 出来。这种编码可以用来表示自然数，布尔类型，pair，list，以至于所有的数据结构。它还可以表示 if 条件语句等复杂的语法结构。常见的一种这样的编码叫做 Church encoding。所以 lambda calculus 其实可以产生出几乎所有程序语言的功能。中国的古话&ldquo;三生万物&rdquo;，也许就是这个意思。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">求值顺序，call-by-name, call-by-value</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">当解释一个程序的时候，我们可以有好几种不同的&ldquo;求值顺序&rdquo;(evaluation order)。这有点像遍历二叉树有好几种不同的顺序一样（中序，前序，后序）。只不过这里的顺序更加复杂一些。比如下面的程序：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">((lambda (x) (* x x)) (+ 1 2)) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">我们可以先执行最外层的调用，把 (+ 1 2) 传递进入函数，得到 (* (+ 1 2) (+ 1 2))。所以求值顺序是：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">((lambda (x) (* x x)) (+ 1 2)) =&gt; (* (+ 1 2) (+ 1 2)) =&gt; (* 3 (+ 1 2)) =&gt; (* 3 3) =&gt; 9 </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">但是我们也可以先算出 (+ 1 2) 的结果，然后再把它传进这个函数。所以求值顺序是：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">((lambda (x) (* x x)) (+ 1 2)) =&gt; ((lambda (x) (* x x)) 3) =&gt; (* 3 3) =&gt; 9 </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">我们把第一种方式叫做 call-by-name (CBN)，因为它把参数的&ldquo;名字&rdquo;（也就是表达式自己）传进函数。我们把第二种方式叫做 call-by-value (CBV)，因为它先把参数的名字进行解释，得到它们的&ldquo;值&rdquo;之后，才把它们传进函数。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这两种解释方式的效率是不一样的。从上面的例子，你可以看出 CBN 比 CBV 多出了一步。为什么呢？因为函数(lambda (x) (* x x))&nbsp;里面有两个&nbsp;x，所以&nbsp;(+ 1 2)&nbsp;被传进函数的时候被复制了一份。之后我们需要对它的每一拷贝都进行一次解释，所以&nbsp;(+ 1 2)&nbsp;被计算了两次！</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">鉴于这个原因，几乎所有的程序语言都采用 CBV，而不是 CBN。CBV 常常被叫做&ldquo;strict&rdquo;或者&ldquo;applicative order&rdquo;。虽然 CBN 效率低下，与它等价的一种顺序 call-by-need 却没有这个问题。call-by-need 的基本原理是对 CBN 中被拷贝的表达式进行&ldquo;共享&rdquo;和&ldquo;记忆&rdquo;。当一个表达式的一个拷贝被计算过了之后，其它的拷贝自动得到它的值，从而避免重复求值。call-by-need 也叫&ldquo;lazy evaluation&rdquo;，它是 Haskell 语言所用的语义。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">求值顺序不只停留于 call-by-name, call-by-value, call-by-need。人们还设计了很多种其它的求值顺序，虽然它们大部分都不能像 call-by-value 和 call-by-need 这么实用。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">完整的 lambda calculus 解释器</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">下面是我们今天要完成的解释器，它只有39行（不包括空行和注释）。你可以先留意一下各个部分的注释，它们标注各个部件的名称，并且有少许讲解。这个解释器实现的是 CBV 顺序的 lambda calculus，外加基本的算术。加入基本算术的原因是为了可以让初学者写出比较有趣一点的程序，不至于一开头就被迫去学 Church encoding。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;&nbsp;&nbsp;;;; 以下三个定义 env0, ent-env, lookup 是对环境（environment）的基本操作：&nbsp;&nbsp;;; 空环境 (define env0 '())&nbsp;&nbsp;;; 扩展。对环境 env 进行扩展，把 x 映射到 v，得到一个新的环境 (define ext-env&nbsp;&nbsp; (lambda (x v env)&nbsp;&nbsp;&nbsp;&nbsp; (cons `(,x . ,v) env)))&nbsp;&nbsp;;; 查找。在环境中 env 中查找 x 的值 (define lookup&nbsp;&nbsp; (lambda (x env)&nbsp;&nbsp;&nbsp;&nbsp; (let ([p (assq x env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(not p) x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[else (cdr p)]))))&nbsp;&nbsp;;; 闭包的数据结构定义，包含一个函数定义 f 和它定义时所在的环境 (struct Closure (f env))&nbsp;&nbsp;;; 解释器的递归定义（接受两个参数，表达式 exp 和环境 env） ;; 共 5 种情况（变量，函数，调用，数字，算术表达式） (define interp1&nbsp;&nbsp; (lambda (exp env)&nbsp;&nbsp;&nbsp;&nbsp; (match exp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 模式匹配 exp 的以下情况（分支）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [(? symbol? x) (lookup x env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 变量&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [(? number? x) x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 数字&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [`(lambda (,x) ,e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 函数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Closure exp env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [`(,e1 ,e2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 调用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let ([v1 (interp1 e1 env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[v2 (interp1 e2 env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(match v1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(Closure `(lambda (,x) ,e) env1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (interp1 e (ext-env x v2 env1))]))]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [`(,op ,e1 ,e2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 算术表达式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let ([v1 (interp1 e1 env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[v2 (interp1 e2 env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(match op&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['+ (+ v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['- (- v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['* (* v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['/ (/ v1 v2)]))])))&nbsp;&nbsp;;; 解释器的&ldquo;用户界面&rdquo;函数。它把 interp1 包装起来，掩盖第二个参数，初始值为 env0 (define interp&nbsp;&nbsp; (lambda (exp)&nbsp;&nbsp;&nbsp;&nbsp; (interp1 exp env0)))&nbsp;&nbsp;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; </pre><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">测试例子</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这里有一些测试的例子。你最好先玩一下再继续往下看，或者自己写一些新的例子。学习程序的最好办法就是玩弄这个程序，给它一些输入，观察它的行为。有时候这比任何语言的描述都要直观和清晰。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(interp '(+ 1 2)) ;; =&gt; 3&nbsp;&nbsp;(interp '(* 2 3)) ;; =&gt; 6&nbsp;&nbsp;(interp '(* 2 (+ 3 4))) ;; =&gt; 14&nbsp;&nbsp;(interp '(* (+ 1 2) (+ 3 4))) ;; =&gt; 21&nbsp;&nbsp;(interp '(((lambda (x) (lambda (y) (* x y))) 2) 3)) ;; =&gt; 6&nbsp;&nbsp;(interp '((lambda (x) (* 2 x)) 3)) ;; =&gt; 6&nbsp;&nbsp;(interp '((lambda (y) (((lambda (y) (lambda (x) (* y 2))) 3) 0)) 4)) ;; =&gt; 6&nbsp;&nbsp;;; (interp '(1 2)) ;; =&gt; match: no matching clause for 1 </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">在接下来的几节，我们来看看这个解释器里主要的分支（match）表达式的各种情况。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">对基本算术操作的解释</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">算术操作在解释器里是最简单也是最&ldquo;基础&rdquo;的东西，因为它们不能再被细分为更小的元素了。所以在接触函数，调用等复杂的结构之前，我们来看一看对算术操作的处理。以下就是这个解释器里处理基本算术的部分，它是&nbsp;interp1&nbsp;的最后一个分支。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(match exp&nbsp;&nbsp; ... ...&nbsp;&nbsp; [`(,op ,e1 ,e2)&nbsp;&nbsp;&nbsp;&nbsp;(let ([v1 (interp1 e1 env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 递归调用 interp1 自己，得到 e1 的值&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[v2 (interp1 e2 env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 递归调用 interp1 自己，得到 e2 的值&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(match op&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; 分支：处理操作符 op 的 4 种情况&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['+ (+ v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 如果是加号，输出结果为 (+ v1 v2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['- (- v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 如果是减号，乘号，除号，相似的处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['* (* v1 v2)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['/ (/ v1 v2)]))]) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你可以看到它几乎跟刚才写的计算器一模一样，不过现在&nbsp;interp1&nbsp;的调用多了一个参数&nbsp;env&nbsp;而已。这个&nbsp;env&nbsp;是什么，我们下面很快就讲。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">变量和函数</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">我想用两个小节来简单介绍一下变量，函数和环境。稍后的几节我们再来看它们是如何实现的。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">变量(variable)的产生是数学史上的最大突破之一。因为变量可以被绑定到不同的值，从而使得函数的实现成为可能。比如数学函数&nbsp;f(x) = x*2，其中&nbsp;x&nbsp;是一个变量，它把输入的值传递到函数的主体&nbsp;x*2里面。如果没有变量，函数就不可能实现。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">对变量的最基本的操作是对它的&ldquo;绑定&rdquo;（binding）和&ldquo;取值&rdquo;（evaluate）。什么是绑定呢？拿上面的函数&nbsp;f(x)&nbsp;作为例子吧。当&nbsp;x&nbsp;等于 1 的时候，f(x)&nbsp;的值是 2，而当&nbsp;x&nbsp;等于 2 的时候，f(x)&nbsp;的值是 4。在上面的句子里，我们对&nbsp;x&nbsp;进行了两次绑定。第一次&nbsp;x&nbsp;被绑定到了 1，第二次被绑定到了 2。你可以把&ldquo;绑定&rdquo;理解成这样一个动作，就像当你把插头插进电源插座的那一瞬间。插头的插脚就是&nbsp;f(x)&nbsp;里面的那个&nbsp;x，而&nbsp;x*2&nbsp;里面的&nbsp;x，则是电线的另外一端。所以当你把插头插进插座，电流就通过这根电线到达另外一端。如果电线导电性能良好，两头的电压应该几乎相等。有点跑题了&hellip;&hellip; 反正只要记住一点：绑定就是插进插座的那个&ldquo;动作&rdquo;。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">那么&ldquo;取值&rdquo;呢？再想一下前面的例子，当我们用伏特表测电线另外一端的电压的时候，我们就是在对这个变量进行取值。有时候这种取值的过程不是那么明显，比如电流如果驱动了风扇的电动机。虽然电线的另外一头没有显示电压，其实电流已经作用于电动机的输入端子，进入线圈。所以你也可以说其实是电动机在对变量进行取值。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">环境</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">我们的解释器是一个挺笨的程序，它只能一步一步的做事情。比如，当它需要求&nbsp;f(1)&nbsp;的值的时候，它做以下两步操作：1) 把&nbsp;x&nbsp;绑定到 1; 2) 进入&nbsp;f&nbsp;的函数体对&nbsp;x*2&nbsp;进行求值。这就像一个人做出这两个动作：1)把插头插进插座，2) 走到电线的另外一头测量它的电压，并且把结果乘以 2。在第一步和第二步之间，我们如何记住&nbsp;x&nbsp;的值呢？它必须被传递到那个用来处理函数体的递归解释器里面。这就是为什么我们需要&ldquo;环境&rdquo;，也就是&nbsp;interp1&nbsp;的第二个参数&nbsp;env。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">环境记录变量的值，并且把它们传递到它们的&ldquo;可见区域&rdquo;，用术语说就叫做&ldquo;作用域&rdquo;(scope)。通常作用域是整个函数体，但是有一个例外，就是当函数体内有嵌套的函数定义的时候，内部的那个函数如果有同样的参数名，那么外层的参数名就会被&ldquo;屏蔽&rdquo;（shadow）掉。这样内部的函数体就看不到外层的参数了，只看到它自己的。比如&nbsp;(lambda (x) (lambda (x) (* x 2)))，里面的那个&nbsp;x&nbsp;看到的就是内层函数的&nbsp;x，而不是外层的。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">在我们的解释器里，用于处理环境的主要部件如下：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">;; 空环境 (define env0 '())&nbsp;&nbsp;;; 对环境 env 进行扩展，把 x 映射到 v (define ext-env&nbsp;&nbsp; (lambda (x v env)&nbsp;&nbsp;&nbsp;&nbsp; (cons `(,x . ,v) env)))&nbsp;&nbsp;;; 取值。在环境中 env 中查找 x 的值 (define lookup&nbsp;&nbsp; (lambda (x env)&nbsp;&nbsp;&nbsp;&nbsp; (let ([p (assq x env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(not p) x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[else (cdr p)])))) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">这里我们用的是 Scheme 的 association list 来表示环境。Association list 看起来像这个样子：((x . 1) (y . 2) (z . 5))。也就是一个两元组（pair）的链表，左边的元素是 key，右边的元素是 value。写的直观一点就是：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">((x . 1)&nbsp;&nbsp;(y . 2)&nbsp;&nbsp;(z . 5)) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">查表操作就是从头到尾搜索，如果左边的 key 是要找的变量，就返回整个 pair。简单吧？</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">ext-env&nbsp;扩展一个环境。比如，如果原来的环境是&nbsp;((y . 2) (z . 5))&nbsp;那么&nbsp;(ext-env x 1 ((y . 2) (z . 5)))，就会得到&nbsp;((x . 1) (y . 2) (z . 5))。也就是把&nbsp;(x . 1)&nbsp;放到最前面去。值得注意的一点是，环境被扩展以后其实是形成了一个新的环境，原来的环境并没有被&ldquo;改变&rdquo;。比如上面红色的部分就是原来的数据结构，只不过它被放到另一个更大的结构里面了。这叫做&ldquo;函数式数据结构&rdquo;。这个性质在我们的解释器里是至关重要的，因为当我们扩展了一个环境之后，其它部分的代码仍然可以原封不动的访问扩展前的那个旧的环境。当我们讲到调用的时候也许你就会发现这个性质的用处。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你也可以用另外的，更高效的数据结构（比如 splay tree）来表示环境。你甚至可以用函数来表示环境。唯一的要求就是，它是变量到值的&ldquo;映射&rdquo;(map)。你把&nbsp;x&nbsp;映射到 1，待会儿查询&nbsp;x&nbsp;的值，它应该仍然是 1，而不会消失掉或者别的值。也就是说，这几个函数要满足这样的一种&ldquo;界面约定&rdquo;：如果&nbsp;e&nbsp;是&nbsp;(ext-env 'x 1 env)&nbsp;返回的环境，那么&nbsp;(lookup 'x e)应该返回 1。只要满足这样的界面约定的函数都可以被叫做&nbsp;ext-env&nbsp;和&nbsp;lookup，以至于可以它们用来完全替代这里的函数而不会导致其它代码的修改。这叫做&ldquo;抽象&rdquo;，也就是&ldquo;面向对象语言&rdquo;的精髓所在。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">对变量的解释</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">了解了变量，函数和环境，让我们来看看解释器对变量的操作，也就是&nbsp;interp1&nbsp;的&nbsp;match&nbsp;的第一种情况。它非常简单，就是在环境中查找变量的值。这里的&nbsp;(? symbol? x)&nbsp;是一个特殊的模式，它使用 Scheme 函数&nbsp;symbol?&nbsp;来判断输入是否匹配，如果是的就把它绑定到&nbsp;x，查找它的值，然后返回这个值。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">&nbsp;&nbsp;[(? symbol? x) (lookup x env)] </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">注意由于我们的解释器是递归的，所以这个值也许会被返回到更高层的表达式，比如&nbsp;(* x 2)。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">对数字的解释</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">对数字的解释也很简单。由于在 Scheme 里面名字 '2 就是数字 2（我认为这是 Scheme 设计上的一个小错误），所以我们不需要对数字的名字做特殊的处理，把它们原封不动的返回。</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">[(? number? x) x] </pre><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">对函数的解释</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">对函数的解释是一个比较难说清楚的问题。由于函数体内也许会含有外层函数的参数，比如&nbsp;(lambda (y) (lambda (x) (* y 2)))&nbsp;里面的&nbsp;y&nbsp;是外层函数的参数，却出现在内层函数定义中。如果内层函数被作为值返回，那么&nbsp;(* y 2)&nbsp;就会跑到&nbsp;y&nbsp;的作用域以外。所以我们必须把函数做成&ldquo;闭包&rdquo;(closure)。闭包是一种特殊的数据结构，它由两个元素组成：函数的定义和当前的环境。所以我们对&nbsp;(lambda (x) e)&nbsp;这样一个函数的解释就是这样：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">&nbsp;&nbsp;[`(lambda (,x) ,e)&nbsp;&nbsp;&nbsp;&nbsp;(Closure exp env)] </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">注意这里的&nbsp;exp&nbsp;就是&nbsp;`(lambda (,x) ,e)&nbsp;自己。我们只是把它包装了一下，把它与当前的环境一起放到一个数据结构(闭包)里，并不进行任何复杂的运算。这里我们的闭包用的是一个 Racket 的 struct 结构，也就是一个记录类型(record)。你也可以用其它形式来表示闭包，比如有些解释器教程提倡用函数来表示闭包。其实用什么形式都无所谓，只要能存储exp&nbsp;和&nbsp;env&nbsp;的值。我比较喜欢使用&nbsp;struct，因为它的界面简单清晰。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">为什么需要保存当前的环境呢？因为当这个函数被作为一个值返回的时候，我们必须记住里面的外层函数的参数的绑定。比如，(lambda (y) (lambda (x) (* y 2)))。当它被作用于 1 之后，我们会得到内层的函数&nbsp;(lambda (x) (* y 2))。当这个函数被经过一阵周折之后再被调用的时候，y&nbsp;应该等于几呢？正确的做法应该是等于1。这种把外层参数的值记录在内层函数的闭包里的做法，叫做&ldquo;lexical scoping&rdquo;或者&ldquo;static scoping&rdquo;。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">如果你不做闭包，而是把函数体直接返回，那么在&nbsp;(lambda (x) (* y 2))&nbsp;被调用的位置，你可能会另外找到一个&nbsp;y，从而使用它的值。在调用的时候&ldquo;动态&rdquo;解析变量的做法，叫做&ldquo;dynamic scoping&rdquo;。事实证明 dynamic scoping 的做法是严重错误的，它导致了早期语言里面出现的各种很难发现的bug。很多早期的语言是 dynamic scoping，就是因为它们只保存了函数的代码，而没有保存它定义处的环境。这样要简单一些，但是带来太多的麻烦。早期的 Lisp，现在的 Emacs Lisp 和 TeX 就是使用 dynamic scoping 的语言。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">为了演示 lexical scoping 和 dynamic scoping 的区别。你可以在我们的解释器里执行以下代码：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(interp '((lambda (y) (((lambda (y) (lambda (x) (* y 2))) 3) 0)) 4)) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">其中红色的部分就是上面提到的例子。在这里，(* y 2)&nbsp;里的 y，其实是最里面的那个&nbsp;(lambda (y) ...)&nbsp;里的。当红色部分被作用于 3 之后。&nbsp;(lambda (x) (* y 2))&nbsp;被作为一个值返回。然后它被作用于 0（x&nbsp;被绑定到 0，被忽略），所以(* y 2)&nbsp;应该等于 6。但是如果我们的解释器是 dynamic scoping，那么最后的结果就会等于 8。这是因为最外层的&nbsp;y开头被绑定到了 4，而 dynamic scoping 没有记住内层的&nbsp;y&nbsp;的值，所以使用了外层那个&nbsp;y&nbsp;的值。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">为什么 Lexical scoping 更好呢？你可以从很简单的直觉来理解。当你构造一个&ldquo;内部函数&rdquo;的时候，如果它引用了外面的变量，比如这个例子里的&nbsp;y，那么从外层的&nbsp;y&nbsp;到这个函数的内部，出现了一条&ldquo;信道&rdquo;（channel）。你可以把这个内部函数想象成一个电路元件，它的内部有一个节点&nbsp;y&nbsp;连接到一根从外部来的电线&nbsp;y。当这个元件被返回，就像这个元件被挖出来送到别的地方去用。但是在它被使用的地方（调用），这个&nbsp;y&nbsp;节点应该从哪里得到输入呢？显然你不应该使用调用处的某个&nbsp;y，因为这个&nbsp;y&nbsp;和之前的那个&nbsp;y，虽然都叫&nbsp;y，却不是&ldquo;同一个&nbsp;y&rdquo;，也就是同名异义。它们甚至可以代表不同的类型的东西。所以这个&nbsp;y&nbsp;应该仍然连接原来的那根&nbsp;y&nbsp;电线。当这个内部元件移动的时候，就像这跟电线被无限的延长，但是它始终连接到原来的节点。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">对函数调用的解释</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">好，我们终于到了最后的关头，函数调用。函数调用都是&nbsp;(e1 e2)&nbsp;这样的形式，所以我们需要先分别求出&nbsp;e1&nbsp;和&nbsp;e2&nbsp;的值。这跟基本运算的时候需要先求出两个操作数的值相似。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">函数调用就像把一个电器的插头插进插座，使它开始运转。比如，当&nbsp;(lambda (x) (* x 2))&nbsp;被作用于 1 时，我们把&nbsp;x绑定到 1，然后解释它的函数体&nbsp;(* x 2)。但是这里有一个问题，如果函数体内有未绑定的变量，它应该取什么值呢？从上面闭包的讨论，你已经知道了，其实操作数&nbsp;e1&nbsp;被求值之后应该是一个闭包，所以它的里面应该有未绑定变量的值。所以，我们就把这个闭包中保存的环境(env1)取出来，扩展它，把&nbsp;x&nbsp;绑定到&nbsp;v2，然后用这个扩展后的环境来解释函数体。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">所以函数调用的代码如下：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">&nbsp;&nbsp;[`(,e1 ,e2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let ([v1 (interp1 e1 env)]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[v2 (interp1 e2 env)])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(match v1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(Closure `(lambda (,x) ,e) env1)&nbsp;&nbsp; ; 用模式匹配的方式取出闭包里的各个子结构&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (interp1 e (ext-env x v2 env1))]&nbsp;&nbsp; ; 在闭包的环境中把 x 绑定到 v2，解释函数体&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;))] </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">你可能会奇怪，那么解释器的环境&nbsp;env&nbsp;难道这里就不用了吗？是的。我们通过&nbsp;env&nbsp;来计算&nbsp;e1&nbsp;和&nbsp;e2&nbsp;的值，是因为&nbsp;e1&nbsp;和e2&nbsp;里面的变量存在于&ldquo;当前环境&rdquo;。我们把&nbsp;e1&nbsp;里面的环境&nbsp;env1&nbsp;取出来用于计算函数体，是因为函数体并不是在当前环境定义的，它的代码在别的地方。如果我们用&nbsp;env&nbsp;来解释函数体，那就成了 dynamic scoping。</p><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">实验：你可以把&nbsp;(interp1 e (ext-env x v2 env1))&nbsp;里面的&nbsp;env1&nbsp;改成&nbsp;env，再试试我们之前讨论过的代码，它的输出就会是 8：</p><pre style="font-family: Inconsolata, Consolas, 'DEJA VU SANS MONO', 'DROID SANS MONO', Proggy, monospace; font-size: 13.5px; border: 1px solid #d3d3d3; padding: 5px; line-height: 17.55px; margin-left: 10px; width: 903.922px; background-color: #fffff0">(interp '((lambda (y) (((lambda (y) (lambda (x) (* y 2))) 3) 0)) 4)) </pre><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">另外在这里我们也看到环境用&ldquo;函数式数据结构&rdquo;表示的好处。闭包被调用时它的环境被扩展，但是这并不会影响原来的那个环境，我们得到的是一个新的环境。所以当函数调用返回之后，函数的参数绑定就自动&ldquo;注销&rdquo;了。如果你用一个非函数式的数据结构，在绑定参数时不生成新的环境，而是对已有环境进行赋值，那么这个赋值操作就会永久性的改变原来环境的内容。所以你在函数返回之后必须删除参数的绑定。这样不但麻烦，而且在复杂的情况下几乎不可能有效的控制。每一次当我使用赋值操作来修改环境，最后都会出现意想不到的麻烦。所以在写解释器，编译器的时候，我都只使用函数式数据结构来表示环境。</p><h3 style="font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Helvetica, STKaiti, SimSun, serif; margin-top: 40px; margin-bottom: 30px; border-bottom-width: 1px; border-bottom-color: #d3d3d3; border-bottom-style: solid; width: 932.469px; line-height: 31.59px; color: #666666">下一步</h3><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">在懂得了这里讲述的基本的解释器构造之后，下一步可以做什么呢？其实从这个基本的解释器原型，你可以进一步发展出很多内容，比如：</p><ul style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px"><li style="margin-left: 10px"><p>在这个解释器里加一些构造，比如递归和状态，你就可以得到一个完整的程序语言的解释器，比如 Scheme 或者 Python。</p></li><li style="margin-left: 10px"><p>对这个解释器进行&ldquo;抽象&rdquo;，你就可以对程序进行类型推导。感兴趣的话可以参考我实现的这个 Hindley-Milner系统，或者 Python 类型推导。</p></li><li style="margin-left: 10px"><p>对这个解释器进行一些改变，就可以得到一个非常强大的 online partial evaluator，可以用于编译器优化。</p></li></ul><p style="font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-size: 18px; line-height: 27px">另外需要指出的是，学会这个解释器并不等于理解了程序语言的理论。所以在学会了这些之后，还是要看一些语义学的书。</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6930</link>
<title><![CDATA[Lisp之根源]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Sat, 07 Nov 2015 05:57:07 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6930</guid> 
<description>
<![CDATA[ 
	<p style="font-family: Simsun; font-size: medium">约翰麦卡锡于1960年发表了一篇非凡的论文,他在这篇论文中对编程的贡献有如 欧几里德对几何的贡献.<a name="tex2html1" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot222"><sup>1</sup></a>&nbsp;他向我们展示了,在只给定几个简单的操作符和一个 表示函数的记号的基础上, 如何构造出一个完整的编程语言. 麦卡锡称这种语 言为Lisp, 意为List Processing, 因为他的主要思想之一是用一种简单的数据 结构表(list)来代表代码和数据.</p><p style="font-family: Simsun; font-size: medium">值得注意的是,麦卡锡所作的发现,不仅是计算机史上划时代的大事, 而且是一种 在我们这个时代编程越来越趋向的模式.我认为目前为止只有两种真正干净利落, 始终如一的编程模式:C语言模式和Lisp语言模式.此二者就象两座高地, 在它们 中间是尤如沼泽的低地.随着计算机变得越来越强大,新开发的语言一直在坚定地 趋向于Lisp模式. 二十年来,开发新编程语言的一个流行的秘决是,取C语言的计 算模式,逐渐地往上加Lisp模式的特性,例如运行时类型和无用单元收集.</p><p style="font-family: Simsun; font-size: medium">在这篇文章中我尽可能用最简单的术语来解释约翰麦卡锡所做的发现. 关键是我 们不仅要学习某个人四十年前得出的有趣理论结果, 而且展示编程语言的发展方 向. Lisp的不同寻常之处--也就是它优质的定义--是它能够自己来编写自己. 为了理解约翰麦卡锡所表述的这个特点,我们将追溯他的步伐,并将他的数学标记 转换成能够运行的Common Lisp代码.</p><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00010000000000000000"></a>七个原始操作符</h1><p style="font-family: Simsun; font-size: medium">开始我们先定义<em>表达式</em>.表达式或是一个<em>原子</em>(atom),它是一个字母序列(如 foo),或是一个由零个或多个表达式组成的<em>表</em>(list), 表达式之间用空格分开, 放入一对括号中. 以下是一些表达式:</p><p style="font-family: Simsun; font-size: medium"></p><pre>foo () (foo) (foo bar) (a b (c) d) </pre><span style="font-size: medium; font-family: Simsun">最后一个表达式是由四个元素组成的表, 第三个元素本身是由一个元素组成的表.</span><p style="font-family: Simsun; font-size: medium">在算术中表达式 1 + 1 得出值2. 正确的Lisp表达式也有值. 如果表达式<em>e</em>得出 值<em>v</em>,我们说<em>e</em><em>返回</em><em>v</em>. 下一步我们将定义几种表达式以及它们的返回值.</p><p style="font-family: Simsun; font-size: medium">如果一个表达式是表,我们称第一个元素为<em>操作符</em>,其余的元素为<em>自变量</em>.我们将 定义七个原始(从公理的意义上说)操作符: quote,atom,eq,car,cdr,cons,和 cond.</p><p style="font-family: Simsun; font-size: medium"></p><ol style="font-family: Simsun; font-size: medium"><li>(quote&nbsp;<em>x</em>) 返回<em>x</em>.为了可读性我们把(quote&nbsp;<em>x</em>)简记 为'<em>x</em>.<p>&nbsp;</p><pre>&gt; (quote a) a &gt; 'a a &gt; (quote (a b c)) (a b c) </pre><p>&nbsp;</p></li><li>(atom&nbsp;<em>x</em>)返回原子t如果<em>x</em>的值是一个原子或是空表,否则返回(). 在Lisp中我们 按惯例用原子t表示真, 而用空表表示假.<p>&nbsp;</p><pre>&gt; (atom 'a) t &gt; (atom '(a b c)) () &gt; (atom '()) t </pre><p>既然有了一个自变量需要求值的操作符, 我们可以看一下quote的作用. 通过引 用(quote)一个表,我们避免它被求值. 一个未被引用的表作为自变量传给象 atom这样的操作符将被视为代码:</p><p>&nbsp;</p><pre>&gt; (atom (atom 'a)) t </pre><p>反之一个被引用的表仅被视为表, 在此例中就是有两个元素的表:</p><p>&nbsp;</p><pre>&gt; (atom '(atom 'a)) () </pre><p>这与我们在英语中使用引号的方式一致. Cambridge(剑桥)是一个位于麻萨诸塞 州有90000人口的城镇. 而``Cambridge''是一个由9个字母组成的单词.</p><p>引用看上去可能有点奇怪因为极少有其它语言有类似的概念. 它和Lisp最与众 不同的特征紧密联系:代码和数据由相同的数据结构构成, 而我们用quote操作符 来区分它们.</p><p>&nbsp;</p></li><li>(eq&nbsp;<em>x</em>&nbsp;<em>y</em>)返回t如果<em>x</em>和<em>y</em>的值是同一个原子或都是空表, 否则返回().<p>&nbsp;</p><pre>&gt; (eq 'a 'a) t &gt; (eq 'a 'b) () &gt; (eq '() '()) t </pre><p>&nbsp;</p></li><li>(car&nbsp;<em>x</em>)期望<em>x</em>的值是一个表并且返回<em>x</em>的第一个元素.<p>&nbsp;</p><pre>&gt; (car '(a b c)) a </pre><p>&nbsp;</p></li><li>(cdr&nbsp;<em>x</em>)期望<em>x</em>的值是一个表并且返回<em>x</em>的第一个元素之后的所有元素.<pre>&gt; (cdr '(a b c)) (b c) </pre><p>&nbsp;</p></li><li>(cons&nbsp;<em>x</em>&nbsp;<em>y</em>)期望<em>y</em>的值是一个表并且返回一个新表,它的第一个元素是<em>x</em>的值, 后 面跟着<em>y</em>的值的各个元素.<p>&nbsp;</p><pre>&gt; (cons 'a '(b c)) (a b c) &gt; (cons 'a (cons 'b (cons 'c '()))) (a b c) &gt; (car (cons 'a '(b c))) a &gt; (cdr (cons 'a '(b c))) (b c) </pre></li><li>(cond (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img2.png" border="0" alt="$e_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />) ...(<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img4.png" border="0" alt="$e_&#123;n&#125;$" width="20" height="28" align="MIDDLE" />)) 的求值规则如下.&nbsp;<em>p</em>表达式依次求值直到有一个 返回t. 如果能找到这样的<em>p</em>表达式,相应的<em>e</em>表达式的值作为整个cond表达式的 返回值.<p>&nbsp;</p><pre>&gt; (cond ((eq 'a 'b) 'first)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((atom 'a)&nbsp;&nbsp;'second)) second </pre><p>当表达式以七个原始操作符中的五个开头时,它的自变量总是要求值的.<a name="tex2html2" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot84"><sup>2</sup></a>&nbsp;我们称这样 的操作符为<em>函数</em>.</p></li></ol><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00020000000000000000"></a>函数的表示</h1><span style="font-size: medium; font-family: Simsun">接着我们定义一个记号来描述函数.函数表示为(lambda (</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">...</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">)&nbsp;</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">),其中&nbsp;</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">...</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">是原子(叫做</span><em style="font-family: Simsun; font-size: medium">参数</em><span style="font-size: medium; font-family: Simsun">),</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">是表达式. 如果表达式的第一个元素形式如 上</span><p style="font-family: Simsun; font-size: medium">((lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>)&nbsp;<img src="http://daiyuwen.freeshell.org/gb/rol/img5.png" border="0" alt="$a_&#123;1&#125;$" width="20" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img6.png" border="0" alt="$a_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)</p><p style="font-family: Simsun; font-size: medium">则称为<em>函数调用</em>.它的值计算如下.每一个表达式<img src="http://daiyuwen.freeshell.org/gb/rol/img7.png" border="0" alt="$a_&#123;i&#125;$" width="18" height="28" align="MIDDLE" />先求值,然后<em>e</em>再求值.在<em>e</em>的 求值过程中,每个出现在<em>e</em>中的<img src="http://daiyuwen.freeshell.org/gb/rol/img8.png" border="0" alt="$p_&#123;i&#125;$" width="17" height="28" align="MIDDLE" />的值是相应的<img src="http://daiyuwen.freeshell.org/gb/rol/img7.png" border="0" alt="$a_&#123;i&#125;$" width="18" height="28" align="MIDDLE" />在最近一 次的函数调用中的值.</p><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; ((lambda (x) (cons x '(b))) 'a) (a b) &gt; ((lambda (x y) (cons x (cdr y)))&nbsp;&nbsp;&nbsp;&nbsp;'z&nbsp;&nbsp;&nbsp;&nbsp;'(a b c)) (z b c) </pre><span style="font-size: medium; font-family: Simsun">如果一个表达式的第一个元素</span><em style="font-family: Simsun; font-size: medium">f</em><span style="font-size: medium; font-family: Simsun">是原子且</span><em style="font-family: Simsun; font-size: medium">f</em><span style="font-size: medium; font-family: Simsun">不是原始操作符</span><p style="font-family: Simsun; font-size: medium">(f&nbsp;<img src="http://daiyuwen.freeshell.org/gb/rol/img5.png" border="0" alt="$a_&#123;1&#125;$" width="20" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img6.png" border="0" alt="$a_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)</p><p style="font-family: Simsun; font-size: medium">并且<em>f</em>的值是一个函数(lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)),则以上表达式的值就是</p><p style="font-family: Simsun; font-size: medium">((lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>)&nbsp;<img src="http://daiyuwen.freeshell.org/gb/rol/img5.png" border="0" alt="$a_&#123;1&#125;$" width="20" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img6.png" border="0" alt="$a_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)</p><p style="font-family: Simsun; font-size: medium">的值. 换句话说,参数在表达式中不但可以作为自变量也可以作为操作符使用:</p><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; ((lambda (f) (f '(b c)))&nbsp;&nbsp;&nbsp;&nbsp;'(lambda (x) (cons 'a x))) (a b c) </pre><p style="font-family: Simsun; font-size: medium">有另外一个函数记号使得函数能提及它本身,这样我们就能方便地定义递归函 数.<a name="tex2html3" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot108"><sup>3</sup></a>&nbsp;记号</p><p style="font-family: Simsun; font-size: medium">(label f (lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>))</p><p style="font-family: Simsun; font-size: medium">表示一个象(lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>)那样的函数,加上这样的特性: 任何出现在<em>e</em>中的<em>f</em>将求值为此label表达式, 就好象<em>f</em>是此函数的参数.</p><p style="font-family: Simsun; font-size: medium">假设我们要定义函数(subst&nbsp;<em>x y z</em>), 它取表达式<em>x</em>,原子<em>y</em>和表<em>z</em>做参数,返回一个 象<em>z</em>那样的表, 不过<em>z</em>中出现的<em>y</em>(在任何嵌套层次上)被<em>x</em>代替.</p><pre>&gt; (subst 'm 'b '(a b (a b c) d)) (a m (a m c) d) </pre><span style="font-size: medium; font-family: Simsun">我们可以这样表示此函数</span><pre>(label subst (lambda (x y z)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond ((atom z)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond ((eq z y) x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t z)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t (cons (subst x y (car z))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(subst x y (cdr z))))))) </pre><span style="font-size: medium; font-family: Simsun">我们简记</span><em style="font-family: Simsun; font-size: medium">f</em><span style="font-size: medium; font-family: Simsun">=(label&nbsp;</span><em style="font-family: Simsun; font-size: medium">f</em><span style="font-size: medium; font-family: Simsun">&nbsp;(lambda (</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">...</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">)&nbsp;</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">))为</span><p style="font-family: Simsun; font-size: medium">(defun&nbsp;<em>f</em>&nbsp;(<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>)</p><p style="font-family: Simsun; font-size: medium">于是</p><pre>(defun subst (x y z)&nbsp;&nbsp; (cond ((atom z)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond ((eq z y) x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t z)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (cons (subst x y (car z))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (subst x y (cdr z)))))) </pre><span style="font-size: medium; font-family: Simsun">偶然地我们在这儿看到如何写cond表达式的缺省子句. 第一个元素是't的子句总 是会成功的. 于是</span><p style="font-family: Simsun; font-size: medium">(cond (<em>x y</em>) ('t&nbsp;<em>z</em>))</p><p style="font-family: Simsun; font-size: medium">等同于我们在某些语言中写的</p><p style="font-family: Simsun; font-size: medium">if&nbsp;<em>x</em>&nbsp;then&nbsp;<em>y</em>&nbsp;else&nbsp;<em>z</em></p><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00030000000000000000"></a>一些函数</h1><span style="font-size: medium; font-family: Simsun">既然我们有了表示函数的方法,我们根据七个原始操作符来定义一些新的函数. 为了方便我们引进一些常见模式的简记法. 我们用c</span><em style="font-family: Simsun; font-size: medium">x</em><span style="font-size: medium; font-family: Simsun">r,其中</span><em style="font-family: Simsun; font-size: medium">x</em><span style="font-size: medium; font-family: Simsun">是a或d的序列,来 简记相应的car和cdr的组合. 比如(cadr&nbsp;</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">)是(car (cdr&nbsp;</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">))的简记,它返回</span><em style="font-family: Simsun; font-size: medium">e</em><span style="font-size: medium; font-family: Simsun">的 第二个元素.</span><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; (cadr '((a b) (c d) e)) (c d) &gt; (caddr '((a b) (c d) e)) e &gt; (cdar '((a b) (c d) e)) (b) </pre><span style="font-size: medium; font-family: Simsun">我们还用(list&nbsp;</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img2.png" border="0" alt="$e_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">...</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img4.png" border="0" alt="$e_&#123;n&#125;$" width="20" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">)表示(cons&nbsp;</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img2.png" border="0" alt="$e_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">...(cons&nbsp;</span><img style="font-family: Simsun; font-size: medium" src="http://daiyuwen.freeshell.org/gb/rol/img4.png" border="0" alt="$e_&#123;n&#125;$" width="20" height="28" align="MIDDLE" /><span style="font-size: medium; font-family: Simsun">'()) ...).</span><pre>&gt; (cons 'a (cons 'b (cons 'c '()))) (a b c) &gt; (list 'a 'b 'c) (a b c) </pre><p style="font-family: Simsun; font-size: medium">现在我们定义一些新函数. 我在函数名后面加了点,以区别函数和定义它们的原 始函数,也避免与现存的common Lisp的函数冲突.</p><p style="font-family: Simsun; font-size: medium"></p><ol style="font-family: Simsun; font-size: medium"><li>(null.&nbsp;<em>x</em>)测试它的自变量是否是空表.<p>&nbsp;</p><pre>(defun null. (x)&nbsp;&nbsp; (eq x '()))&nbsp;&nbsp;&gt; (null. 'a) () &gt; (null. '()) t </pre><p>&nbsp;</p></li><li>(and.&nbsp;<em>x y</em>)返回t如果它的两个自变量都是t, 否则返回().<p>&nbsp;</p><pre>(defun and. (x y)&nbsp;&nbsp; (cond (x (cond (y 't) ('t '())))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t '())))&nbsp;&nbsp;&gt; (and. (atom 'a) (eq 'a 'a)) t &gt; (and. (atom 'a) (eq 'a 'b)) () </pre><p>&nbsp;</p></li><li>(not.&nbsp;<em>x</em>)返回t如果它的自变量返回(),返回()如果它的自变量返回t.<p>&nbsp;</p><pre>(defun not. (x)&nbsp;&nbsp; (cond (x '())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t 't)))&nbsp;&nbsp;&gt; (not. (eq 'a 'a)) () &gt; (not. (eq 'a 'b)) t </pre><p>&nbsp;</p></li><li>(append. x y)取两个表并返回它们的连结.<p>&nbsp;</p><pre>(defun append. (x y)&nbsp;&nbsp;&nbsp;&nbsp;(cond ((null. x) y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t (cons (car x) (append. (cdr x) y)))))&nbsp;&nbsp;&gt; (append. '(a b) '(c d)) (a b c d) &gt; (append. '() '(c d)) (c d) </pre><p>&nbsp;</p></li><li>(pair.&nbsp;<em>x y</em>)取两个相同长度的表,返回一个由双元素表构成的表,双元素表是相 应位置的x,y的元素对.<p>&nbsp;</p><pre>(defun pair. (x y)&nbsp;&nbsp; (cond ((and. (null. x) (null. y)) '())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((and. (not. (atom x)) (not. (atom y)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons (list (car x) (car y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(pair. (cdr) (cdr y))))))&nbsp;&nbsp;&gt; (pair. '(x y z) '(a b c)) ((x a) (y b) (z c)) </pre><p>&nbsp;</p></li><li>(assoc.&nbsp;<em>x y</em>)取原子<em>x</em>和形如pair.函数所返回的表<em>y</em>,返回<em>y</em>中第一个符合如下条 件的表的第二个元素:它的第一个元素是<em>x</em>.<p>&nbsp;</p><pre>(defun assoc. (x y)&nbsp;&nbsp; (cond ((eq (caar y) x) (cadar y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (assoc. x (cdr y)))))&nbsp;&nbsp;&gt; (assoc. 'x '((x a) (y b))) a &gt; (assoc. 'x '((x new) (x a) (y b))) new </pre></li></ol><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00040000000000000000"></a>一个惊喜</h1><span style="font-size: medium; font-family: Simsun">因此我们能够定义函数来连接表,替换表达式等等.也许算是一个优美的表示法, 那下一步呢? 现在惊喜来了. 我们可以写一个函数作为我们语言的解释器:此函 数取任意Lisp表达式作自变量并返回它的值. 如下所示:</span><p style="font-family: Simsun; font-size: medium"></p><pre>(defun eval. (e a)&nbsp;&nbsp; (cond&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((atom e) (assoc. e a))&nbsp;&nbsp;&nbsp;&nbsp; ((atom (car e))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((eq (car e) 'quote) (cadr e))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'atom)&nbsp;&nbsp;(atom&nbsp;&nbsp; (eval. (cadr e) a)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'eq)&nbsp;&nbsp;&nbsp;&nbsp;(eq&nbsp;&nbsp;&nbsp;&nbsp; (eval. (cadr e) a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (eval. (caddr e) a)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'car)&nbsp;&nbsp; (car&nbsp;&nbsp;&nbsp;&nbsp;(eval. (cadr e) a)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'cdr)&nbsp;&nbsp; (cdr&nbsp;&nbsp;&nbsp;&nbsp;(eval. (cadr e) a)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'cons)&nbsp;&nbsp;(cons&nbsp;&nbsp; (eval. (cadr e) a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (eval. (caddr e) a)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eq (car e) 'cond)&nbsp;&nbsp;(evcon. (cdr e) a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t (eval. (cons (assoc. (car e) a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cdr e))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a))))&nbsp;&nbsp;&nbsp;&nbsp; ((eq (caar e) 'label)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(eval. (cons (caddar e) (cdr e))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cons (list (cadar e) (car e)) a)))&nbsp;&nbsp;&nbsp;&nbsp; ((eq (caar e) 'lambda)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(eval. (caddar e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (append. (pair. (cadar e) (evlis. (cdr&nbsp;&nbsp;e) a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)))))&nbsp;&nbsp;(defun evcon. (c a)&nbsp;&nbsp; (cond ((eval. (caar c) a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(eval. (cadar c) a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (evcon. (cdr c) a))))&nbsp;&nbsp;(defun evlis. (m a)&nbsp;&nbsp; (cond ((null. m) '())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (cons (eval.&nbsp;&nbsp;(car m) a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (evlis. (cdr m) a))))) </pre><span style="font-size: medium; font-family: Simsun">eval.的定义比我们以前看到的都要长. 让我们考虑它的每一部分是如何工作的.</span><p style="font-family: Simsun; font-size: medium">eval.有两个自变量: e是要求值的表达式, a是由一些赋给原子的值构成的表,这 些值有点象函数调用中的参数. 这个形如pair.的返回值的表叫做<em>环境</em>. 正是 为了构造和搜索这种表我们才写了pair.和assoc..</p><p style="font-family: Simsun; font-size: medium">eval.的骨架是一个有四个子句的cond表达式. 如何对表达式求值取决于它的类 型. 第一个子句处理原子. 如果e是原子, 我们在环境中寻找它的值:</p><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; (eval. 'x '((x a) (y b))) a </pre><p style="font-family: Simsun; font-size: medium">第二个子句是另一个cond, 它处理形如(<em>a</em>&nbsp;...)的表达式, 其中<em>a</em>是原子. 这包 括所有的原始操作符, 每个对应一条子句.</p><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; (eval. '(eq 'a 'a) '()) t &gt; (eval. '(cons x '(b c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((x a) (y b))) (a b c) </pre><span style="font-size: medium; font-family: Simsun">这几个子句(除了quote)都调用eval.来寻找自变量的值.</span><p style="font-family: Simsun; font-size: medium">最后两个子句更复杂些. 为了求cond表达式的值我们调用了一个叫 evcon.的辅助函数. 它递归地对cond子句进行求值,寻找第一个元素返回t的子句. 如果找到 了这样的子句, 它返回此子句的第二个元素.</p><p style="font-family: Simsun; font-size: medium"></p><pre>&gt; (eval. '(cond ((atom x) 'atom)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t 'list))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((x '(a b)))) list </pre><p style="font-family: Simsun; font-size: medium">第二个子句的最后部分处理函数调用. 它把原子替换为它的值(应该是lambda 或label表达式)然后对所得结果表达式求值. 于是</p><p style="font-family: Simsun; font-size: medium"></p><pre>(eval. '(f '(b c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((f (lambda (x) (cons 'a x))))) </pre><span style="font-size: medium; font-family: Simsun">变为</span><pre>(eval. '((lambda (x) (cons 'a x)) '(b c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((f (lambda (x) (cons 'a x))))) </pre><span style="font-size: medium; font-family: Simsun">它返回(a b c).</span><p style="font-family: Simsun; font-size: medium">eval.的最后cond两个子句处理第一个元素是lambda或label的函数调用.为了对label 表达式求值, 先把函数名和函数本身压入环境, 然后调用eval.对一个内部有 lambda的表达式求值. 即:</p><p style="font-family: Simsun; font-size: medium"></p><pre>(eval. '((label firstatom (lambda (x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond ((atom x) x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (firstatom (car x))))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((y ((a b) (c d))))) </pre><span style="font-size: medium; font-family: Simsun">变为</span><pre>(eval. '((lambda (x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond ((atom x) x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t (firstatom (car x)))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '((firstatom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(label firstatom (lambda (x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond ((atom x) x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (firstatom (car x)))))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (y ((a b) (c d))))) </pre><span style="font-size: medium; font-family: Simsun">最终返回a.</span><p style="font-family: Simsun; font-size: medium">最后,对形如((lambda (<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)&nbsp;<em>e</em>)&nbsp;<img src="http://daiyuwen.freeshell.org/gb/rol/img5.png" border="0" alt="$a_&#123;1&#125;$" width="20" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img6.png" border="0" alt="$a_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)的表达式求值,先调用evlis.来 求得自变量(<img src="http://daiyuwen.freeshell.org/gb/rol/img5.png" border="0" alt="$a_&#123;1&#125;$" width="20" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img6.png" border="0" alt="$a_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)对应的值(<img src="http://daiyuwen.freeshell.org/gb/rol/img9.png" border="0" alt="$v_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />...<img src="http://daiyuwen.freeshell.org/gb/rol/img10.png" border="0" alt="$v_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />),把(<img src="http://daiyuwen.freeshell.org/gb/rol/img1.png" border="0" alt="$p_&#123;1&#125;$" width="19" height="28" align="MIDDLE" /><img src="http://daiyuwen.freeshell.org/gb/rol/img9.png" border="0" alt="$v_&#123;1&#125;$" width="19" height="28" align="MIDDLE" />)...(<img src="http://daiyuwen.freeshell.org/gb/rol/img3.png" border="0" alt="$p_&#123;n&#125;$" width="21" height="28" align="MIDDLE" /><img src="http://daiyuwen.freeshell.org/gb/rol/img10.png" border="0" alt="$v_&#123;n&#125;$" width="21" height="28" align="MIDDLE" />)添加到 环境里, 然后对<em>e</em>求值. 于是</p><p style="font-family: Simsun; font-size: medium"></p><pre>(eval. '((lambda (x y) (cons x (cdr y)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(b c d))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'()) </pre><span style="font-size: medium; font-family: Simsun">变为</span><pre>(eval. '(cons x (cdr y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'((x a) (y (b c d)))) </pre><span style="font-size: medium; font-family: Simsun">最终返回(a c d).</span><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00050000000000000000"></a>后果</h1><p style="font-family: Simsun; font-size: medium">既然理解了eval是如何工作的, 让我们回过头考虑一下这意味着什么. 我们在这 儿得到了一个非常优美的计算模型. 仅用quote,atom,eq,car,cdr,cons,和cond, 我们定义了函数eval.,它事实上实现了我们的语言,用它可以定义任何我们想要 的额外的函数.</p><p style="font-family: Simsun; font-size: medium">当然早已有了各种计算模型--最著名的是图灵机. 但是图灵机程序难以读懂. 如果你要一种描述算法的语言, 你可能需要更抽象的, 而这就是约翰麦卡锡定义 Lisp的目标之一.</p><p style="font-family: Simsun; font-size: medium">约翰麦卡锡于1960年定义的语言还缺不少东西. 它没有副作用, 没有连续执行 (它得和副作用在一起才有用), 没有实际可用的数,<a name="tex2html4" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot199"><sup>4</sup></a>&nbsp;没有动态可视域. 但这些限制可 以令人惊讶地用极少的额外代码来补救. Steele和Sussman在一篇叫做``解释器 的艺术''的著名论文中描述了如何做到这点.<a name="tex2html5" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot200"><sup>5</sup></a></p><p style="font-family: Simsun; font-size: medium">如果你理解了约翰麦卡锡的eval, 那你就不仅仅是理解了程序语言历史中的一个 阶段. 这些思想至今仍是Lisp的语义核心. 所以从某种意义上, 学习约翰麦卡 锡的原著向我们展示了Lisp究竟是什么. 与其说Lisp是麦卡锡的设计,不如说是 他的发现. 它不是生来就是一门用于人工智能, 快速原型开发或同等层次任务的 语言. 它是你试图公理化计算的结果(之一).</p><p style="font-family: Simsun; font-size: medium">随着时间的推移, 中级语言, 即被中间层程序员使用的语言, 正一致地向Lisp靠 近. 因此通过理解eval你正在明白将来的主流计算模式会是什么样.</p><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00060000000000000000"></a>注释</h1><span style="font-size: medium; font-family: Simsun">把约翰麦卡锡的记号翻译为代码的过程中我尽可能地少做改动. 我有过让代码 更容易阅读的念头, 但是我还是想保持原汁原味.</span><p style="font-family: Simsun; font-size: medium">在约翰麦卡锡的论文中,假用f来表示, 而不是空表. 我用空表表示假以使例子能 在Common Lisp中运行. (fixme)</p><p style="font-family: Simsun; font-size: medium">我略过了构造dotted pairs, 因为你不需要它来理解eval. 我也没有提apply, 虽然是apply(它的早期形式, 主要作用是引用自变量), 被约翰麦卡锡在1960年 称为普遍函数, eval只是不过是被apply调用的子程序来完成所有的工作.</p><p style="font-family: Simsun; font-size: medium">我定义了list和c<em>x</em>r等作为简记法因为麦卡锡就是这么做的. 实际上 c<em>x</em>r等可以 被定义为普通的函数. List也可以这样, 如果我们修改eval, 这很容易做到, 让 函数可以接受任意数目的自变量.</p><p style="font-family: Simsun; font-size: medium">麦卡锡的论文中只有五个原始操作符. 他使用了cond和quote,但可能把它们作 为他的元语言的一部分. 同样他也没有定义逻辑操作符and和not, 这不是个问题, 因为它们可以被定义成合适的函数.</p><p style="font-family: Simsun; font-size: medium">在eval.的定义中我们调用了其它函数如pair.和assoc.,但任何我们用原始操作 符定义的函数调用都可以用eval.来代替. 即</p><pre>(assoc. (car e) a) </pre><span style="font-size: medium; font-family: Simsun">能写成</span><p style="font-family: Simsun; font-size: medium"></p><pre>(eval. '((label assoc.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (lambda (x y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond ((eq (caar y) x) (cadar y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('t (assoc. x (cdr y))))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(car e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cons (list 'e e) (cons (list 'a a) a))) </pre><p style="font-family: Simsun; font-size: medium">麦卡锡的eval有一个错误. 第16行是(相当于)(evlis. (cdr e) a)而不是(cdr e), 这使得自变量在一个有名函数的调用中被求值两次. 这显示当论文发表的 时候, eval的这种描述还没有用IBM 704机器语言实现. 它还证明了如果不去运 行程序, 要保证不管多短的程序的正确性是多么困难.</p><p style="font-family: Simsun; font-size: medium">我还在麦卡锡的论文中碰到一个问题. 在定义了eval之后, 他继续给出了一些 更高级的函数--接受其它函数作为自变量的函数. 他定义了maplist:</p><p style="font-family: Simsun; font-size: medium"></p><pre>(label maplist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda (x f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond ((null x) '())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;('t (cons (f x) (maplist (cdr x) f)))))) </pre><span style="font-size: medium; font-family: Simsun">然后用它写了一个做微分的简单函数diff. 但是diff传给maplist一个用</span><em style="font-family: Simsun; font-size: medium">x</em><span style="font-size: medium; font-family: Simsun">做参 数的函数, 对它的引用被maplist中的参数x所捕获.</span><a style="font-family: Simsun; font-size: medium" name="tex2html6" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#foot211"><sup>6</sup></a><p style="font-family: Simsun; font-size: medium">这是关于动态可视域危险性的雄辩证据, 即使是最早的更高级函数的例子也因为 它而出错. 可能麦卡锡在1960年还没有充分意识到动态可视域的含意. 动态可 视域令人惊异地在Lisp实现中存在了相当长的时间--直到Sussman和Steele于 1975年开发了Scheme. 词法可视域没使eval的定义复杂多少, 却使编译器更难 写了.</p><p style="font-family: Simsun; font-size: medium"></p><h1 style="font-family: Simsun"><a name="SECTION00070000000000000000"></a>About this document ...</h1><strong style="font-family: Simsun; font-size: medium">Lisp之根源</strong><p style="font-family: Simsun; font-size: medium">This document was generated using the&nbsp;<a href="http://www-texdev.mpce.mq.edu.au/l2h/docs/manual/"><strong>LaTeX</strong>2HTML</a>&nbsp;translator Version 2K.1beta (1.48)</p><p style="font-family: Simsun; font-size: medium">Copyright &copy; 1993, 1994, 1995, 1996,&nbsp;<a href="http://cbl.leeds.ac.uk/nikos/personal.html">Nikos Drakos</a>, Computer Based Learning Unit, University of Leeds.&nbsp;<br />Copyright &copy; 1997, 1998, 1999,&nbsp;<a href="http://www.maths.mq.edu.au/~ross/">Ross Moore</a>, Mathematics Department, Macquarie University, Sydney.</p><p style="font-family: Simsun; font-size: medium">The command line arguments were:&nbsp;<br /><strong>latex2html</strong>&nbsp;-split=0 roots_of_lisp.tex</p><p style="font-family: Simsun; font-size: medium">The translation was initiated by Dai Yuwen on 2003-10-24&nbsp;<br /></p><hr style="font-family: Simsun; font-size: medium" /><h4 style="font-family: Simsun; font-size: medium">Footnotes</h4><dl style="font-family: Simsun; font-size: medium"><dt><a name="foot222"></a>... 欧几里德对几何的贡献.<a name="foot222" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html1"><sup>1</sup></a></dt><dd>``Recursive Functions of Symbolic Expressions and Their Computation by Machine, Part1.''&nbsp;<em>Communication of the ACM</em>&nbsp;3:4, April 1960, pp. 184-195.</dd><dt><a name="foot84"></a>...当表达式以七个原始操作符中的五个开头时,它的自变量总是要求值的.<a name="foot84" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html2"><sup>2</sup></a></dt><dd>以另外两个操作符quote和cond开头的表达式以不同的方式求值. 当 quote表达式求值时, 它的自变量不被求值,而是作为整个表达式的值返回. 在 一个正确的cond表达式中, 只有L形路径上的子表达式会被求值.</dd><dt><a name="foot108"></a>... 数.<a name="foot108" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html3"><sup>3</sup></a></dt><dd>逻辑上我们不需要为了这定义一个新的记号. 在现有的记号中用 一个叫做Y组合器的函数上的函数, 我们可以定义递归函数. 可能麦卡锡在写 这篇论文的时候还不知道Y组合器; 无论如何, label可读性更强.</dd><dt><a name="foot199"></a>... 没有实际可用的数,<a name="foot199" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html4"><sup>4</sup></a></dt><dd>在麦卡锡的1960 年的Lisp中, 做算术是可能的, 比如用一个有n个原子的表表示数n.</dd><dt><a name="foot200"></a>... 的艺术''的著名论文中描述了如何做到这点.<a name="foot200" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html5"><sup>5</sup></a></dt><dd>Guy Lewis Steele, Jr. and Gerald Jay Sussman, ``The Art of the Interpreter, or the Modularity Complex(Parts Zero,One,and Two),'' MIT AL Lab Memo 453, May 1978.</dd><dt><a name="foot211"></a>... 对它的引用被maplist中的参数x所捕获.<a name="foot211" href="http://daiyuwen.freeshell.org/gb/rol/roots_of_lisp.html#tex2html6"><sup>6</sup></a></dt><dd>当代的Lisp程序 员在这儿会用mapcar代替maplist. 这个例子解开了一个谜团: maplist为什 么会在Common Lisp中. 它是最早的映射函数, mapcar是后来增加的.</dd><div><br /></div></dl>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6929</link>
<title><![CDATA[如何写 Lisp 解释器？]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[Erlang、Lisp]]></category>
<pubDate>Sat, 07 Nov 2015 05:56:04 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6929</guid> 
<description>
<![CDATA[ 
	http://www.zhihu.com/question/20115358<br /><br /><span style="font-size: 13px; line-height: 22.1px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #222222">王垠这篇还是写的不错的 ----&nbsp;</span><a style="text-decoration: none; color: #225599; -webkit-tap-highlight-color: rgba(225, 225, 225, 0.498039); margin: 0px 4px 0px 0px; word-break: break-all; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 22.1px" rel="nofollow noreferrer" href="http://www.yinwang.org/blog-cn/2012/08/01/interpreter/" target="_blank" class=" wrap external">怎样写一个解释器</a><br /><span style="font-size: 13px; line-height: 22.1px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #222222">还有就是sicp的第四章了</span><div><span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #222222"><span style="font-size: 13px; line-height: 22.1px"><br /></span></span><div><a style="color: #225599; -webkit-tap-highlight-color: rgba(225, 225, 225, 0.498039); margin: 0px 4px 0px 0px; word-break: break-all; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 22.1px" rel="nofollow noreferrer" href="http://www.buildyourownlisp.com/contents" target="_blank" class=" wrap external">Contents &bull; Build Your Own Lisp</a></div><div><div><br /><div class="zm-editable-content clearfix">还有下面两篇用python实现的一个例子：（非常容易上手）<br /><a rel="nofollow noreferrer" href="http://norvig.com/lispy.html" target="_blank" class=" wrap external">(How to Write a (Lisp) Interpreter (in Python))</a><br /><a rel="nofollow noreferrer" href="http://norvig.com/lispy2.html" target="_blank" class=" wrap external">(An ((Even Better) Lisp) Interpreter (in Python))</a><br /></div></div></div><div><br /><br /><br /><a style="color: #666666; text-decoration: none; font-family: 'Microsoft YaHei'; font-size: 20px; line-height: 30px" href="http://blog.csdn.net/sedgewick/article/details/5928653">(如何写 (Lisp) 解释器 (用Ruby哦))</a><br /><br /><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><a style="color: #ca0000; text-decoration: none" href="http://norvig.com/">Peter Norvig</a>的最新博文<a style="color: #ca0000; text-decoration: none" href="http://norvig.com/lispy.html">(How to Write a (Lisp) Interpreter (in Python))</a>和<a style="color: #ca0000; text-decoration: none" href="http://norvig.com/lispy2.html">(An ((Even Better) Lisp) Interpreter (in Python))</a>用寥寥数笔就勾勒出一个Lisp解释器的轮廓，先膜拜一下Orz</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">Peter大神很喜欢Python，但我不熟，很多看不懂，还好有个哥们写了个<a style="color: #ca0000; text-decoration: none" href="http://stuff.thedeemon.com/rispy/">Ruby版</a>，这就好懂多了。</p><ul style="font-family: Arial; font-size: 14px; line-height: 26px"><li>目标语言，当然是简单而强大的Lisp了。</li><li>解释器工作机制：先把代码作为字符串拆分成token，再分析token序列转换成解析树，最后交给执行单元。</li></ul><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="http://image208.poco.cn/mypoco/myphoto/20101009/21/5488960420101009212632027_640.jpg" border="0" alt="inside interpreter" width="750" height="507" /></p><ul style="font-family: Arial; font-size: 14px; line-height: 26px"><li>还有一个重要的东西，环境(environment)。</li></ul><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="http://image208.poco.cn/mypoco/myphoto/20101010/13/5488960420101010134326010_640.jpg" border="0" alt="Lisp" width="750" height="319" /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">完整实现：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"></p><div class="dp-highlighter bg_ruby" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 936.531px; overflow: hidden; padding-top: 1px; opacity: 0.6; margin: 18px 0px !important; background: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/black/ruby.gif) 100% 0% no-repeat #333333"><div class="bar" style="position: relative; padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999"><strong>[ruby]</strong>&nbsp;<a style="color: #cccccc; text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="http://blog.csdn.net/sedgewick/article/details/5928653#" title="view plain" class="ViewSource">view plain</a><a style="color: #cccccc; text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="http://blog.csdn.net/sedgewick/article/details/5928653#" title="copy" class="CopyToClipboard">copy</a><a style="color: #cccccc; text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="http://blog.csdn.net/sedgewick/article/details/5928653#" title="print" class="PrintSource">print</a><a style="color: #cccccc; text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="http://blog.csdn.net/sedgewick/article/details/5928653#" title="?" class="About">?</a></div></div><ol class="dp-rb" style="padding: 0px; border: none; position: relative; color: #5c5c5c; margin: 0px 0px 1px 45px !important"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">class</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;Env&nbsp;&lt;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Hash</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;initialize(keys=[],&nbsp;vals=[],&nbsp;outer=</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">nil</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #aa7700; background-color: inherit" class="variable">@outer</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&nbsp;outer&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;keys.zip(vals).<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">each</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#123;&#124;p&#124;&nbsp;store(*p)&#125;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;[](name)&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">super</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">(name)&nbsp;&#124;&#124;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #aa7700; background-color: inherit" class="variable">@outer</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">[name]&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;set(name,&nbsp;value)&nbsp;key?(name)&nbsp;?&nbsp;store(name,&nbsp;value)&nbsp;:&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #aa7700; background-color: inherit" class="variable">@outer</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">.set(name,&nbsp;value)&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;add_globals(env)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;ops&nbsp;=&nbsp;[:+,&nbsp;:-,&nbsp;:*,&nbsp;:/,&nbsp;:&gt;,&nbsp;:&lt;,&nbsp;:&gt;=,&nbsp;:&lt;=,&nbsp;:==]&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;ops.<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">each</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#123;&#124;op&#124;&nbsp;&nbsp;env[op]&nbsp;=&nbsp;lambda&#123;&#124;a,&nbsp;b&#124;&nbsp;a.send(op,&nbsp;b)&#125;&#125;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;env.update(&#123;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:length</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x.length&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:cons</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x,&nbsp;y&#124;&nbsp;[x]+y&#125;,&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:car</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x[0]&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:cdr</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x[1..-1]&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:append</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x,y&#124;&nbsp;x+y&#125;,&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:list</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;*xs&#124;&nbsp;xs&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:list</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">?&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x.is_a?&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Array</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:null</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">?&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x==</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">nil</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#125;,&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:symbol</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">?&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;x.is_a?&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Symbol</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:not</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;!x&#125;,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:display</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=&gt;&nbsp;lambda&#123;&#124;x&#124;&nbsp;p&nbsp;x&#125;&#125;)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;eval(x,&nbsp;env)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;env[x]&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;x.is_a?&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Symbol</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;x&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;!x.is_a?&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Array</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">case</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;x[0]&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:quote</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">then</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;x[1..-1]&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_,&nbsp;test,&nbsp;conseq,&nbsp;alt&nbsp;=&nbsp;x&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval(eval(test,&nbsp;env)&nbsp;?&nbsp;conseq&nbsp;:&nbsp;alt,&nbsp;env)&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:set</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">!&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">then</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;env.set(x[1],&nbsp;eval(x[2],&nbsp;env))&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:define</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">then</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;env[x[1]]&nbsp;=&nbsp;eval(x[2],&nbsp;env)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:lambda</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_,&nbsp;vars,&nbsp;exp&nbsp;=&nbsp;x&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; background-color: inherit" class="builtin">Proc</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">.</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&#123;&#124;*args&#124;&nbsp;eval(exp,&nbsp;Env.</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">(vars,&nbsp;args,&nbsp;env))&#125;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:begin</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x[1..-1].inject([<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">nil</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;env])&#123;&#124;val_env,&nbsp;exp&#124;&nbsp;[eval(exp,&nbsp;val_env[1]),&nbsp;val_env[1]]&#125;[0]&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">when</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #aa7700; background-color: inherit" class="symbol">:callcc</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&nbsp;=&nbsp;eval(x[1],&nbsp;env)&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callcc&nbsp;&#123;&#124;cont&#124;&nbsp;f.call(&nbsp;lambda&#123;&#124;x&#124;&nbsp;cont.call(x)&#125;&nbsp;)&nbsp;&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exps&nbsp;=&nbsp;x.map&#123;&#124;exp&#124;&nbsp;eval(exp,&nbsp;env)&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exps[0].call(*exps[1..-1])&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;atom(s)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">&quot;[&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;s==</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'('</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">&quot;]&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;s==</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">')'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;s&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;s&nbsp;=~&nbsp;/^-?/d+$/&nbsp;&#124;&#124;&nbsp;s&nbsp;=~&nbsp;/^-?/d*/./d+$/&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">':'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">+s&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">def</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;parse(src)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;tokens&nbsp;=&nbsp;src.gsub(<span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'('</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'&nbsp;(&nbsp;'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">).gsub(</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">')'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'&nbsp;)&nbsp;'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">).split&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;Kernel.eval(tokens.map&#123;&#124;s&#124;&nbsp;atom(s)&#125;.join(<span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'&nbsp;'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">).gsub(</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'&nbsp;]'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">']'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">).gsub(/([^/[])&nbsp;/,</span><span style="margin: 0px; padding: 0px; border: none; color: #ff9900; background-color: inherit" class="string">'/1,&nbsp;'</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">))&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">end</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">src&nbsp;=&lt;&lt;CODE&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">(<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">begin</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;(define&nbsp;fact&nbsp;(lambda&nbsp;(n)&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;(<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(&lt;=&nbsp;n&nbsp;1)&nbsp;1&nbsp;(*&nbsp;n&nbsp;(fact&nbsp;(-&nbsp;n&nbsp;1))))))&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">&nbsp;(fact&nbsp;5)&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">)&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">CODE&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">p&nbsp;tree&nbsp;=&nbsp;parse(src)&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #cccccc; background-color: inherit" class="comment">#&nbsp;[:begin,&nbsp;[:define,&nbsp;:fact,&nbsp;[:lambda,&nbsp;[:n],&nbsp;[:if,&nbsp;[:&lt;=,&nbsp;:n,&nbsp;1],&nbsp;1,&nbsp;[:*,&nbsp;:n,&nbsp;[:fact,&nbsp;[:-,&nbsp;:n,&nbsp;1]]]]]],&nbsp;[:fact,&nbsp;5]]</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #eeeeee; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important"><span style="margin: 0px; padding: 0px; border: none; color: #ffffff; background-color: inherit">p(eval(tree,&nbsp;add_globals(Env.<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #66ccff; background-color: inherit" class="keyword">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">)))&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: #cccccc; background-color: inherit" class="comment">#&nbsp;120</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li></ol></div>&nbsp;<p>&nbsp;</p></div></div>
]]>
</description>
</item>
</channel>
</rss>