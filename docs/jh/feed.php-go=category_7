<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
<title><![CDATA[流浪的龙－个人知识管理]]></title> 
<link>http://i.renjihe.com/blog/index.php</link> 
<description><![CDATA[]]></description> 
<language>zh-cn</language> 
<copyright><![CDATA[流浪的龙－个人知识管理]]></copyright>
<item>
<link>http://i.renjihe.com/blog/read.php?921</link>
<title><![CDATA[DSP型号和CCS版本之间的匹配关系]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:41:58 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?921</guid> 
<description>
<![CDATA[ 
	<img class="insertimage" src="attachment.php?fid=358" border="0" width="800" height="539" />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?920</link>
<title><![CDATA[献给初学者－DSP入门教程]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:40:07 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?920</guid> 
<description>
<![CDATA[ 
	<strong>前言：此资料也是来源于网络，并不是我们原创，但是希望这些资料能够给初学DSP的朋友们一点帮助，也希望你们能够把这里当成是你们学习DSP技术的一个家园，让我们携手共建，为更多的朋友创造学习的条件～<br /><br /><br /><span style="color: magenta">1、TI DSP的选型</span></strong><br />主要考虑处理速度、功耗、程序存储器和数据存储器的容量、片内的资源，如定时器的数量、I/O口数量、中断数量、DMA通道数等。DSP的主要供应商有TI，ADI，Motorola,Lucent和Zilog等，其中TI占有最大的市场份额。<br />TI公司现在主推四大系列DSP<br />1）C5000系列（定点、低功耗）：C54X，C54XX，C55X 相比其它系列的主要特点是低功耗，所以最适合个人与便携式上网以及无线通信应用，如手机、PDA、GPS等应用。处理速度在80MIPS--400MIPS之间。C54XX和C55XX 一般只具有McBSP同步串口、HPI并行接口、定时器、DMA等外设。值得注意的是C55XX提供了EMIF外部存储器扩展接口，可以直接使用SDRAM，而C54XX则不能直接使用。两个系列的数字IO都只有两条。<br />2）C2000系列（定点、控制器）：C20X，F20X，F24X，F24XX ，C28x该系芯片具有大量外设资源，如：A/D、定时器、各种串口（同步和异步），WATCHDOG、CAN总线/PWM发生器、数字IO脚等。是针对控制应用最佳化的DSP，在TI所有的DSP中，只有C2000有FLASH，也只有该系列有异步串口可以和PC的UART相连。<br />3）C6000系列：C62XX，C67XX，C64X 该系列以高性能著称，最适合宽带网络和数字影像应用。32bit，其中：C62XX和C64X是定点系列，C67XX 是浮点系列。该系列提供EMIF扩展存储器接口。该系列只提供BGA封 装，只能制作多层PCB。且功耗较大。同为浮点系列的C3X中的VC33现在虽非主流产品，但也仍在广泛使用，但其速度较低，最高在150MIPS。<br />4）OMAP系列：OMAP处理器集成ARM的命令及控制功能，另外还提供DSP 的低功耗实时信号处理能力，最适合移动上网设备和多媒体家电。 <br />其他系列的DSP曾经有过风光，但现在都非TI主推产品了，除了C3X系列外，其他基本处于淘汰阶段，如：C3X的浮点系列：C30，C31，C32 C2X和C5X系列：C20，C25，C50<br />每个系列的DSP都有其主要应用领域.<br /><br /><strong><span style="color: magenta">2、设计中如何得到技术参考资料以及如何得到相关源码</span></strong><br />原则是碰到问题就去<a href="http://www.ti.com/" target="_blank">www.ti.com</a><br />1）在TI网站的搜索中用keyword搜索资料，主要要注意的就是Application Notes，user guides 比如不知道怎样进行VC5402的McBSP编程，搜McBSP和VC5402 如果不知道如何设计VC5402和TLV320AIC23的接口以及编程，搜TLV320AIC23和VC5402; 这样可以搜到一堆的资料，这些资料一般均有PDF文档说明和相应的源程序包提供，download后做少许改动即可<br /><span style="color: magenta">2）来DSP交流网，HELLODSP真诚欢迎每一位有需要的朋友</span><br />3）google搜<br />4）再不济，找技术支持，碰运气了<br /><br /><strong><span style="color: magenta">3、如何看待TI DSP庞杂的技术文档</span></strong><br />新手进行DSP开发学习之时，常常感觉技术文档太多，哪本都有用，哪本都想看，无从下手。此时原则是只看入门必须的、只看和芯片相关的。根据经验，如下的资料必看不可:<br />1）讲述DSP的CPU，memory，program memory addressing,data memory addressing的资料都需要看、外设资源的资料可以只看自己用到的部分;<br />2）C和汇编的编程指南需要看<br />3）汇编指令和C语言的运行时间支持库、DSPLIB等资料需要看其他的如：Applications Guide，Optimizing CC++ Compiler User's Guide，Assembly Language Tools User's Guide等资料留待入门之后再去看体会会更深一些。<br /><br /><strong><span style="color: magenta">4、如何高效开始TI DSP的硬件开发</span></strong><br />1）根据应用领域选择TI推荐的DSP类型<br />2）参考选定的DSP之EVM板，DSK等原理图，完成DSP最小系统的搭建（包括外扩内存空间、电源复位系统、各控制信号管脚的连接、JTAG口的连接等）;<br />3）根据具体应用需要，选择外围电路的扩展，一般如语音、视频、控制等领域均有成熟的电路可以从TI网站得到。外围电路与DSP的接口可参看EVM或DSK，以及所选外围电路芯片的典型接口设计原理图；最好外围电路芯片也选择TI的，这样的话不管硬件接口有现成原理图、很多<br />连DSP与其接口的基本控制源码都有。<br />4）地址译码、IO扩展等用CPLD或者FPGA来做，将DSP的地址线、数据线、控制信号线如IS/PS/DS等都引进去有利于调试<br /><br /><strong><span style="color: magenta">5、如何高效开始TI DSP的软件开发 </span></strong><br />如果你不是纯做算法，而是在一个目标版上进行开发，需要使用DSP的片上外设，需要控制片外接口电路，那么建议在写程序前先好好将这个目标版的电路设计搞清楚。最重要的是程序、数据、I/O空间的译码。不管是否纯做算法还是软硬结合，DSP的CPU,memory,program memory addressing, data mem.ory addressing的资料都需要看.<br />1）看CCS的使用指南<br />2）明白CMD文件的编写<br />3）明白中断向量表文件的编写，并定位在正确的地方<br />4）运行一个纯simulator的程序，了解CCS的各个操作<br />5）到TI网站下相关的源码，参考源码的结构进行编程<br />6）不论是C编程还是ASM编程，模块化是必须的<br /><br /><strong><span style="color: magenta">6、选择C还是选择ASM进行编程</span></strong><br />记住一条原则，TI的工程师在不断改进CCS的C程序优化编译器，现在C优化的效率可达到手工汇编的90％甚至更高。当然有的时候如果计算能力和内存资源是瓶颈，ASM还是有优势，比如G.729编解码。但是针对一般的应用开发，C是最好的选择。 <br />新手编程则选择C和汇编混合编程更有利一些<br /><br /><strong><span style="color: magenta">7、选择什么仿真器</span></strong><br />一般来说，买个并口的EPP就够了，价格便宜又稳定，现在用的比较多的是USB接口的仿真器<br /><br /><strong><span style="color: magenta">8、关于TI 54X系列DSP的bootloader过程 </span></strong><br />请详细阅读TI文档SPRA618A、SPRA571，这些文档对boot的机制进行了详细说明同时说明了利用hex500将*.out文件转化为*.hex文件时，需要编写的cmd文件的写法。<br /><br /><strong><span style="color: magenta">9。如何选择外部时钟？ </span></strong><br />DSP的内部指令周期较高，外部晶振的主频不够，因此DSP大多数片内均有PLL。但每个系列不尽相同。 <br />1)TMS320C2000系列： <br />TMS320C20x：PLL可以&divide;2，&times;1，&times;2和&times;4，因此外部时钟可以为5MHz－40MHz。 <br />TMS320F240：PLL可以&divide;2，&times;1，&times;1.5，&times;2，&times;2.5，&times;3，&times;4，&times;4.5，&times;5和&times;9，因此外部时钟可以为2.22MHz－40MHz。 <br />TMS320F241/C242/F243：PLL可以&times;4，因此外部时钟为5MHz。 TMS320LF24xx：PLL可以由RC调节，因此外部时钟为4MHz－20MHz。 <br />TMS320LF24xxA：PLL可以由RC调节，因此外部时钟为4MHz－20MHz。 <br />2)TMS320C3x系列： <br />TMS320C3x：没有PLL，因此外部主频为工作频率的2倍。 <br />TMS320VC33：PLL可以&divide;2，&times;1，&times;5，因此外部主频可以为12MHz－100MHz。 <br />3)TMS320C5000系列： <br />TMS320VC54xx：PLL可以&divide;4，&divide;2，&times;1-32，因此外部主频可以为0.625MHz－50MHz。 <br />TMS320VC55xx：PLL可以&divide;4，&divide;2，&times;1-32，因此外部主频可以为6.25MHz－300MHz。 <br />4)TMS320C6000系列： <br />TMS320C62xx：PLL可以&times;1，&times;4，&times;6，&times;7，&times;8，&times;9，&times;10和&times;11，因此外部主频可以为11.8MHz－300MHz。 <br />TMS320C67xx：PLL可以&times;1和&times;4，因此外部主频可以为12.5MHz－230MHz。 <br />TMS320C64xx：PLL可以&times;1，&times;6和&times;12，因此外部主频可以为30MHz－720MHz<br /><br /><strong><span style="color: magenta">10。软件等待的如何使用？ </span></strong><br />DSP的指令周期较快，访问慢速存储器或外设时需加入等待。等待分硬件等待和软件等待，每一个系列的等待不完全相同。 <br />1)对于C2000系列： 硬件等待信号为READY，高电平时不等待。 软件等待由WSGR寄存器决定，可以加入最多7个等待。其中程序存储器和数据存储器及I/O可以分别设置。 <br />2)对于C3x系列： 硬件等待信号为/RDY，低电平是不等待。 软件等待由总线控制寄存器中的SWW和WTCNY决定，可以加入最多7个等待，但等待是不分段的，除了片内之外全空间有效。 <br />3)对于C5000系列： 硬件等待信号为READY，高电平时不等待。 软件等待由SWWCR和SWWSR寄存器决定，可以加入最多14个等待。其中程序存储器、控制程序存储器和数据存储器及I/O可以分别设置。 <br />4)对于C6000系列（只限于非同步存储器或外设）： 硬件等待信号为ARDY，高电平时不等待。 软件等待由外部存储器接口控制寄存器决定，总线访问外部存储器或设备的时序可以设置，可以方便的同异步的存储器或外设接口。<br /><br /><strong><span style="color: magenta">11。仿真工作正常对于DSP的基本要求 </span></strong><br />1)DSP电源和地连接正确。 2)DSP时钟正确。 3)DSP的主要控制信号，如RS和HOLD信号接高电平。 4)C2000的watchdog关掉。 5)不可屏蔽中断NMI上拉高电平。 <br />CCS或Emurst运行时提示&ldquo;Can't Initialize Target DSP&rdquo; <br />1)仿真器连接是否正常？<br />2)仿真器的I/O设置是否正确？ <br />3)XDSPP仿真器的电源是否正确？ <br />4)目标系统是否正确？ <br />5)仿真器是否正常？<br />6)DSP工作的基本条件是否具备。 <br />建议使用目标板测试。 <br /><br /><strong><span style="color: magenta">12。为什么CCS需要安装Driver？ </span></strong><br />CCS是开放的软件平台，它可以支持不同的硬件接口，因此不同的硬件接口必须通过标准的Driver同CCS连接。 <br />Driver安装的常见问题？ <br />请认真阅读&ldquo;安装手册&rdquo;和Driver盘中的Readme。 1)对于SEED-XDS，安装Readme中的步骤，将I/O口设为240/280/320/340。 2)对于SEED-XDSPP，安装Readme中的步骤，将I/O口设为378或278。3)对于SEED-XDSUSB，必须连接目标板，安装 Readme中的步骤，将I/O口设为A，USB连接后，主机将自动激活相应的Driver。 4)对于SEED-XDSPCI，安装Readme中的步骤，将I/O口设为240，PCI接口板插入主机后，主机将自动激活相应的Driver。 5)对于Simulator，需要选择不同的CFG文件，以模拟不同的DSP。 6)对于C5402 DSK，将I/O口设为请认真阅读&ldquo;安装手册&rdquo;和Driver盘中的Readme。 1)对于SEED-XDS，安装Readme中的步骤，将I/O口设为240/280/320/340。 2)对于SEED-XDSPP，安装Readme中的步骤，将I/O口设为378或278。注意主机BIOS中并口的型式必须同xds510pp.ini 中一致。 3)对于SEED-XDSUSB，必须连接目标板，安装Readme中的步骤，将I/O口设为240/280/320/340，USB连接后，主机将自动激活相应的Driver。 4)对于SEED-XDSPCI，安装Readme中的步骤，将I/O口设为240/280/320/340，PCI接口板插入主机后，主机将自动激活相应的Driver。 5)对于Simulator，需要选择不同的CFG文件，以模拟不同的DSP。 6)对于C5402 DSK，将I/O口设为378或278。 7)对于C6211/6711 DSK，将I/O口设为378或278。 8)对于C6201/C6701 EVM，将I/O口设为0。<br /><br /><strong><span style="color: magenta">13。Link的cmd文件的作用是什么？ </span></strong><br />Link的cmd文件用于DSP代码的定位。由于DSP的编译器的编译结果是未定位的，DSP没有操作系统来定位执行代码，每个客户设计的DSP系统的配置也不尽相同，因此需要用户自己定义代码的安装位置。以C5000为例，基本格式为： <br />-o sample.out <br />-m sample.map <br />-stack 100 <br />sample.obj meminit.obj <br />-l rts.lib <br />MEMORY &#123; <br />PAGE 0: VECT: origin = 0xff80, length 0x80 <br />PAGE 0: PROG: origin = 0x2000, length 0x400 <br />PAGE 1: DATA: origin = 0x800, length 0x400 <br />&#125; <br />SECTIONS &#123; <br />.vectors : &#123;&#125; &gt;PROG PAGE 0 <br />.text : &#123;&#125; &gt;PROG PAGE 0 <br />.data : &#123;&#125; &gt;PROG PAGE 0 <br />.cinit : &#123;&#125; &gt;PROG PAGE 0 <br />.bss : &#123;&#125; &gt;DATA PAGE 1 <br />&#125;<br /><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td id="postmessage_4019" class="t_f"><strong><span style="color: magenta">14。如何将OUT文件转换为16进制的文件格式？ </span></strong><br />DSP 的开发软件集成了一个程序，可以从执行文件OUT转换到编程器可以接受的格式，使得编程器可以用次文件烧写EPROM或Flash。对于C2000的程序为DSPHEX；对于C3x程序为HEX30；对于C54x程序为HEX500；对于C55x程序为HEX55；对于C6x程序为Hex6x。以C32为例基本格式为： <br />sample.out -x <br />-memwidth 8 -bootorg 900000h <br />-iostrb 0h <br />-strb0 03f0000h -strb1 01f0000h -o sample.hex <br />ROMS &#123; <br />EPROM: org = 0x900000,len=0x02000,romwidth=8 <br />&#125; <br />SECTIONS &#123; <br />.text: paddr=boot <br />.data: paddr=boot <br />&#125;<br /><br /><strong><span style="color: magenta">15。为什么CCS需要安装Driver？ </span></strong><br /><br />CCS是开放的软件平台，它可以支持不同的硬件接口，因此不同的硬件接口必须通过标准的Driver同CCS连接。 <br /><br /><strong><span style="color: magenta">16。Link的cmd文件的作用是什么？ </span></strong><br />Link的cmd文件用于DSP代码的定位。由于DSP的编译器的编译结果是未定位的，DSP没有操作系统来定位执行代码，每个客户设计的DSP系统的配置也不尽相同，因此需要用户自己定义代码的安装位置。以C5000为例，基本格式为： <br />-o sample.out <br />-m sample.map <br />-stack 100 <br />sample.obj meminit.obj <br />-l rts.lib <br />MEMORY &#123; <br />&nbsp; &nbsp;PAGE 0: VECT: origin = 0xff80, length 0x80 <br />&nbsp; &nbsp;PAGE 0: PROG: origin = 0x2000, length 0x400 <br />&nbsp; &nbsp;PAGE 1: DATA: origin = 0x800, length 0x400 <br />&#125; <br />SECTIONS &#123; <br />&nbsp; &nbsp;.vectors : &#123;&#125; &gt;PROG PAGE 0 <br />&nbsp; &nbsp;.text : &#123;&#125; &gt;PROG PAGE 0 <br />&nbsp; &nbsp;.data : &#123;&#125; &gt;PROG PAGE 0 <br />&nbsp; &nbsp;.cinit : &#123;&#125; &gt;PROG PAGE 0 <br />&nbsp; &nbsp;.bss : &#123;&#125; &gt;DATA PAGE 1 <br />&#125; <br /><br /><strong><span style="color: magenta">17。DSP的C语言同主机C语言的主要区别？</span></strong> <br />1) DSP的C语言是标准的ANSI C，它不包括同外设联系的扩展部分，如屏幕绘图等。但在CCS中，为了方便调试，可以将数据通过prinf命令虚拟输出到主机的屏幕上。<br />2)DSP的C语言的编译过程为，C编译为ASM，再由ASM编译为OBJ。因此C和ASM的对应关系非常明确，非常便于人工优化。 <br />3)DSP的代码需要绝对定位；主机的C的代码有操作系统定位。 <br />4)DSP的C的效率较高，非常适合于嵌入系统。 <br /><br /><strong><span style="color: magenta">18。为什么在CCS下编译工具工作不正常？ </span></strong><br />在CCS下有部分客户会碰到编译工具工作不正常，常见错误为： <br />1)autoexec.bat的路径&ldquo;out of memory&rdquo;。修改autoexec.bat，清除无用的PATH路径。 <br />2)编译的输出文件（OUT文件）写保护，无法覆盖。删除或修改输出文件的属性。 <br />3)Windows有问题。重新安装windows。 <br />4)Windows下有程序对CCS有影响。建议用一&ldquo;干净&rdquo;的计算机。 <br /><br /><strong><span style="color: magenta">19。在CCS下，如何选择有效的存储器空间？ </span></strong><br />CCS下的存储器空间最好设置同你的硬件，没有的存储器不要有效。这样便于调试，CCS会发现你调入程序时或程序运行时，是否访问了无效地址。 <br />1)在GEL文件中设置。参见CCS中的示例。 <br />2)在Option菜单下，选择Memory Map选项，根据你的硬件设置。注意一定要将Enable Memory Mapping置为使能。 <br /><br /><strong><span style="color: magenta">20。在CCS下，OUT文件加载时提示&ldquo;Data verification failed...&rdquo;的原因？ </span></strong><br />Link的CMD文件分配的地址同GEL或设置的有效地址空间不符。中断向量定位处或其它代码、数据段定位处，没有RAM，无法加载OUT文件。解决方法： <br />1)调整Link的CMD文件，使得定位段处有RAM。 <br />2)调整存储器设置，使得RAM区有效。 <br /><br /><strong><span style="color: magenta">21。为什么要使用BIOS？ </span></strong><br />1)BIOS是Basic I/O System的简称，是基本的输入、输出管理。 <br />2)用于管理任务的调度，程序实时分析，中断管理，跟踪管理和实时数据交换。 <br />3)BIOS是基本的实时系统，使用BIOS可以方便地实现多任务、多进程的时间管理。 <br />4)BIOS是eXpress DSP的标准平台，要使用eXpress DSP技术，必须使用BIOS。 <br /><br /><strong><span style="color: magenta">22。DSP发展动态 </span></strong><br />1.TMS320C2000 TMS320C2000系列包括C24x和C28x系列。C24x系列建议使用LF24xx系列替代C24x系列，LF24xx系列的价格比C24x便宜，性能高于C24x，而且LF24xxA具有加密功能。 C28x系列主要用于大存储设备管理，高性能的控制场合。 <br />2.TMS320C3x TMS320C3x系列包括C3x和VC33，主要推荐使用VC33。C3x系列是TI浮点DSP的基础，不可能停产，但价格不会进一步下调。 <br />3.TMS320C5x TMS320C5x系列已不推荐使用，建议使用C24x或C5000系列替代。 <br />4.TMS320C5000 TMS320C5000系列包括C54x和C55x系列。其中VC54xx还不断有新的器件出现，如：TMS320VC5471（DSP＋ARM7）。 C55x系列是TI的第三代DSP，功耗为VC54xx的1/6，性能为VC54xx的5倍，是一个正在发展的系列。 C5000系列是目前TI DSP的主流DSP，它涵盖了从低档到中高档的应用领域，目前也是用户最多的系列。 <br />5.TMS320C6000 TMS320C6000系列包括C62xx、C67xx和C64xx。此系列是TI的高档DSP系列。其中C62xx系列是定点的DSP，系列芯片种类较丰富，是主要的应用系列。 C67xx系列是浮点的DSP，用于需要高速浮点处理的领域。 C64xx系列是新发展，性能是C62xx的10倍。 <br />6.OMAP系列 是TI专门用于多媒体领域的芯片，它是C55＋ARM9，性能卓越，非常适合于手持设备、Internet终端等多媒体应用。 <br /><br /><strong><span style="color: magenta">23。5V/3.3V如何混接？</span></strong> <br />TI DSP的发展同集成电路的发展一样，新的DSP都是3.3V的，但目前还有许多外围电路是5V的，因此在DSP系统中，经常有5V和3.3V的DSP混接问题。在这些系统中，应注意： <br />1)DSP输出给5V的电路（如D/A），无需加任何缓冲电路，可以直接连接。 <br />2)DSP输入5V的信号（如A/D），由于输入信号的电压&gt;4V，超过了DSP的电源电压，DSP的外部信号没有保护电路，需要加缓冲，如 74LVC245等，将5V信号变换成3.3V的信号。 <br />3)仿真器的JTAG口的信号也必须为3.3V，否则有可能损坏DSP。 <br /><br /><strong><span style="color: magenta">24。为什么要片内RAM大的DSP效率高？ </span></strong><br />目前DSP发展的片内存储器RAM越来越大，要设计高效的DSP系统，就应该选择片内RAM较大的DSP。片内RAM同片外存储器相比，有以下优点： <br />1)片内RAM的速度较快，可以保证DSP无等待运行。<br />2)对于C2000/C3x/C5000系列，部分片内存储器可以在一个指令周期内访问两次，使得指令可以更加高效。 <br />3)片内RAM运行稳定，不受外部的干扰影响，也不会干扰外部。 <br />4)DSP片内多总线，在访问片内RAM时，不会影响其它总线的访问，效率较高。 <br /><br /><strong><span style="color: magenta">25。为什么DSP从5V发展成3.3V？ </span></strong><br />超大规模集成电路的发展从1um，发展到目前的0.1um，芯片的电源电压也随之降低，功耗也随之降低。DSP也同样从5V发展到目前的 3.3V，核心电压发展到1V。目前主流的DSP的外围均已发展为3.3V，5V的DSP的价格和功耗都价格，以逐渐被3.3V的DSP取代。 <br /><br /><strong><span style="color: magenta">26。如何选择DSP的电源芯片？ </span></strong><br />TMS320LF24xx：TPS7333QD，5V变3.3V，最大500mA。 <br />TMS320VC33： TPS73HD318PWP，5V变3.3V和1.8V，最大750mA。 <br />TMS320VC54xx：TPS73HD318PWP，5V变3.3V和1.8V，最大750mA； TPS73HD301PWP，5V变3.3V和可调，最大750mA。 <br />TMS320VC55xx：TPS73HD301PWP，5V变3.3V和可调，最大750mA。 <br />TMS320C6000： PT6931，TPS56000，最大3A。 <br /><br /><strong><span style="color: magenta">27。软件等待的如何使用？ </span></strong><br />DSP的指令周期较快，访问慢速存储器或外设时需加入等待。等待分硬件等待和软件等待，每一个系列的等待不完全相同。 <br />1)对于C2000系列： 硬件等待信号为READY，高电平时不等待。 软件等待由WSGR寄存器决定，可以加入最多7个等待。其中程序存储器和数据存储器及I/O可以分别设置。 <br />2)对于C3x系列： 硬件等待信号为/RDY，低电平是不等待。 软件等待由总线控制寄存器中的SWW和WTCNY决定，可以加入最多7个等待，但等待是不分段的，除了片内之外全空间有效。 <br />3)对于C5000系列： 硬件等待信号为READY，高电平时不等待。 软件等待由SWWCR和SWWSR寄存器决定，可以加入最多14个等待。其中程序存储器、控制程序存储器和数据存储器及I/O可以分别设置。 <br />4)对于C6000系列（只限于非同步存储器或外设）： 硬件等待信号为ARDY，高电平时不等待。 软件等待由外部存储器接口控制寄存器决定，总线访问外部存储器或设备的时序可以设置，可以方便的同异步的存储器或外设接口。 <br /><br /><strong><span style="color: magenta">28。中断向量为什么要重定位？ </span></strong><br />为了方便DSP存储器的配置，一般DSP的中断向量可以重新定位，即可以通过设置寄存器放在存储器空间的任何地方。 注意：C2000的中断向量不能重定位。 <br /><br /><strong><span style="color: magenta">29。DSP的最高主频能从芯片型号中获得吗？ </span></strong><br />TI的DSP最高主频可以从芯片的型号中获得，但每一个系列不一定相同。 <br />1)TMS320C2000系列： <br />TMS320F206－最高主频20MHz。 <br />TMS320C203/C206－最高主频40MHz。 <br />TMS320F24x－最高主频20MHz。 <br />TMS320LF24xx－最高主频30MHz。 <br />TMS320LF24xxA－最高主频40MHz。 <br />TMS320LF28xx－最高主频150MHz。 <br />2)TMS320C3x系列： <br />TMS320C30：最高主频25MHz。 <br />TMS320C31PQL80：最高主频40MHz。 <br />TMS320C32PCM60：最高主频30MHz。 <br />TMS320VC33PGE150：最高主频75MHz。 <br />3)TMS320C5000系列： <br />TMS320VC54xx：最高主频160MHz。 <br />TMS320VC55xx：最高主频300MHz。 <br />4)TMS320C6000系列： <br />TMS320C62xx：最高主频300MHz。 <br />TMS320C67xx：最高主频230MHz。 <br />TMS320C64xx：最高主频720MHz。 <br /><br /><strong><span style="color: magenta">30。DSP可以降频使用吗？</span></strong> <br />可以，DSP的主频均有一定的工作范围，因此DSP均可以降频使用。 <br /><br /><strong><span style="color: magenta">31。如何选择DSP的外部存储器？</span></strong> <br />DSP的速度较快，为了保证DSP的运行速度，外部存储器需要具有一定的速度，否则DSP访问外部存储器时需要加入等待周期。 <br />1)对于C2000系列： C2000系列只能同异步的存储器直接相接。 C2000系列的DSP目前的最高速度为150MHz。建议可以用的存储器有： <br />CY7C199-15：32K&times;8，15ns，5V； <br />CY7C1021-12：64K&times;16，15ns，5V； CY7C1021V33-12：64K&times;16，15ns，3.3V。 <br />2)对于C3x系列： C3x系列只能同异步的存储器直接相接。 C3x系列的DSP的最高速度，5V的为40MHz，3.3V的为75MHz，为保证DSP无等待运行，分别需要外部存储器的速度&lt;25ns和&lt;12ns。建议可以用的存储器有： <br />ROM： AM29F400-70：256K&times;16，70ns，5V，加入一个等待； <br />AM29LV400-55(SST39VF400)：256K&times;16，55ns，3.3V，加入两个等待（目前没有更快的Flash）。 <br />SRAM： CY7C199-15：32K&times;8，15ns，5V； <br />CY7C1021-15：64K&times;16，15ns，5V； <br />CY7C1009-15：128K&times;8，15ns，5V； <br />CY7C1049-15：512K&times;8，15ns，5V； <br />CY7C1021V33-15：64K&times;16，15ns，3.3V； <br />CY7C1009V33-15：128K&times;8，15ns，3.3V； <br />CY7C1041V33-15：256k&times;16，15ns，3.3V。 <br />3)对于C54x系列： C54x系列只能同异步的存储器直接相接。 C54x系列的DSP的速度为100MHz或160MHz，为保证DSP无等待运行，需要外部存储器的速度&lt;10ns或&lt;6ns。建议可以用的存储器有： <br />ROM： AM29LV400-55(SST39VF400)：256K&times;16，55ns，3.3V，加入5或9个等待（目前没有更快的Flash）。 <br />SRAM： CY7C1021V33-12：64K&times;16，12ns，3.3V，加入一个等待； <br />CY7C1009V33-12：128K&times;8，12ns，3.3V，加入一个等待。 <br />4)对于C55x和C6000系列： TI的DSP中只有C55x和C6000可以同同步的存储器相连，同步存储器可以保证系统的数据交换效率更高。 <br />ROM： AM29LV400-55(SST39VF400)：256K&times;16，55ns，3.3V。 <br />SDRAM： HY57V651620BTC-10S：64M，10ns。 <br />SBSRAM： CY7C1329-133AC，64k&times;32； <br />CY7C1339-133AC，128k&times;32。 <br />FIFO：CY7C42x5V-10ASC，32k/64k&times;18。</td></tr></tbody></table><strong><span style="color: #ff00ff">32。DSP芯片有多大的驱动能力？ <br /></span></strong>DSP的驱动能力较强，可以不加驱动，连接8个以上标准TTL门。 <br /><br /><strong><span style="color: magenta">33。调试TMS320C2000系列的常见问题？ <br /></span></strong><br />1)单步可以运行，连续运行时总回0地址： Watchdog没有关，连续运行复位DSP回到0地址。 <br />2)OUT文件不能load到片内flash中： Flash不是RAM，不能用简单的写指令写入，需要专门的程序写入。CCS和C Source Debuggerload命令，不能对flash写入。 OUT文件只能load到片内RAM，或片外RAM中。 <br />3)在flash中如何加入断点： 在flash中可以用单步调试，也可以用硬件断点的方法在flash中加入断点，软件断点是不能加在ROM中的。硬件断点，设置存储器的地址，当访问该地址时产生中断。 <br />4)中断向量： C2000的中断向量不可重定位，因此中断向量必须放在0地址开始的flash内。在调试系统时，代码放在RAM中，中断向量也必须放在flash内。 <br /><br /><strong><span style="color: magenta">34。调试TMS320C3x系列的常见问题？ </span></strong><br />1)TMS320C32的存储器配置： TMS320C32的程序存储器可以配置为16位或32位；数据存储器可以配置为8位、16位或32位。 <br />2)TMS320VC33的PLL控制： TMS320VC33的PLL控制端只能接1.8V，不能接3.3V或5V。 <br /><br /><strong><span style="color: magenta">35。如何调试多片DSP？ </span></strong><br />对于有MPSD仿真口的DSP（TMS320C30/C31/C32），不能用一套仿真器同时调试，每次只能调试其中的一个DSP；对于有JTAG仿真口的DSP，可以将JTAG串接在一起，用一套仿真器同时调试多个DSP，每个DSP可以用不同的名字，在不同的窗口中调试。注意：如果在JTAG和DSP间加入驱动，一定要用快速的门电路，不能使用如LS的慢速门电路。 <br /><br /><strong><span style="color: magenta">36。在DSP系统中为什么要使用CPLD？ </span></strong><br />DSP的速度较快，要求译码的速度也必须较快。利用小规模逻辑器件译码的方式，已不能满足DSP系统的要求。同时，DSP系统中也经常需要外部快速部件的配合，这些部件往往是专门的电路，有可编程器件实现。 CPLD的时序严格，速度较快，可编程性好，非常适合于实现译码和专门电路。 <br /><br /><strong><span style="color: magenta">37。DSP系统构成的常用芯片有哪些？ </span></strong><br />1)电源： TPS73HD3xx，TPS7333，TPS56100，PT64xx... <br />2)Flash： AM29F400，AM29LV400，SST39VF400... <br />3)SRAM： CY7C1021，CY7C1009，CY7C1049... <br />4)FIFO: CY7C425，CY7C42x5... <br />5)Dual port： CY7C136，CY7C133，CY7C1342... <br />6)SBSRAM： CY7C1329，CY7C1339... <br />7)SDRAM： HY57V651620BTC... <br />8)CPLD： CY37000系列，CY38000系列，CY39000系列... <br />9)PCI： PCI2040，CY7C09449... <br />10)USB： AN21xx，CY7C68xxx... <br />11)Codec：TLV320AIC23，TLV320AIC10... <br />12)A/D,D/A：ADS7805，TLV2543... <br /><br /><strong><span style="color: magenta">38。什么是boot loader？ </span></strong><br />DSP的速度尽快，EPROM或flash的速度较慢，而DSP片内的RAM很快，片外的RAM也较快。为了使DSP充分发挥它的能力，必须将程序代码放在RAM中运行。为了方便的将代码从ROM中搬到RAM中，在不带flash的DSP中，TI在出厂时固化了一段程序，在上电后完成从ROM或外设将代码搬到用户指定的RAM中。此段程序称为&ldquo;boot loader&rdquo;。 <br /><br /><strong><span style="color: magenta">38。TMS320C3x如何boot？ </span></strong><br />在MC/MP管脚为高时，C3x进入boot状态。C3x的boot loader在reset时，判断外部中断管脚的电平。根据中断配置决定boot的方式为存储器加载还是串口加载，其中ROM的地址可以为三个中的一个，ROM可以为8位。 <br /><br /><strong><span style="color: magenta">39。Boot有问题如何解决？ </span></strong><br />1)仔细检查boot的控制字是否正确。 <br />2)仔细检查外部管脚设置是否正确。 <br />3)仔细检查hex文件是否转换正确。 <br />4)用仿真器跟踪boot过程，分析错误原因。 <br /><br /><strong><span style="color: magenta">40。DSP为什么要初始化？</span></strong> <br />DSP在RESET后，许多的寄存器的初值一般同用户的要求不一致，例如：等待寄存器，SP，中断定位寄存器等，需要通过初始化程序设置为用户要求的数值。 初始化程序的主要作用： <br />1)设置寄存器初值。 <br />2)建立中断向量表。 <br />3)外围部件初始化。 <br /><br /><strong><span style="color: magenta">41。DSP有哪些数学库及其它应用软件？ </span></strong><br />TI公司为了方便客户开发DSP，在它的网站上提供了许多程序的示例和应用程序，如MATH库，FFT，FIR/IIR等，可以在TI的网页免费下载。 <br /><br /><strong><span style="color: magenta">42。如何获得DSP专用算法？ </span></strong><br />TI有许多的Third Party可以通过DSP上的多种算法软件。可以通过TI的网页搜索你所需的算法，找到通过算法的公司，同相应的公司联系。注意这些算法都是要付费的。 <br /><br /><strong><span style="color: magenta">43。eXpressDSP是什么？</span></strong> <br />eXpressDSP是一种实时DSP软件技术，它是一种DSP编程的标准，利用它可以加快你开发DSP软件的速度。以往DSP软件的开发没有任何标准，不同的人写的程序一般无法连接在一起。DSP软件的调试工具也非常不方便。使得DSP软件的开发往往滞后于硬件的开发。 eXpressDSP集成了CCS(Code Composer Studio)开发平台，DSP BIOS实时软件平台，DSP算法标准和第三方支持四部分。利用该技术，可以使你的软件调试，软件进程管理，软件的互通及算法的获得，都便的容易。这样就可以加快你的软件开发进程。 <br />1)CCS是eXpressDSP的基础，因此你必须首先拥有CCS软件。 <br />2)DSP BIOS是eXpressDSP的基本平台，你必须学会所有DSP BIOS。 <br />3)DSP算法标准可以保证你的程序可以方便的同其它利用eXpressDSP技术的程序连接在一起。同时也保证你的程序的延续性。 <br /><br /><strong><span style="color: magenta">44。为什么要用DSP？ </span></strong><br />3G技术和internate的发展，要求处理器的速度越来越高，体积越来越小，DSP的发展正好能满足这一发展的要求。因为，传统的其它处理器都有不同的缺陷。MCU的速度较慢；CPU体积较大，功耗较高；嵌入CPU的成本较高。 DSP的发展，使得在许多速度要求较高，算法较复杂的场合，取代MCU或其它处理器，而成本有可能更低。 <br /><br /><strong><span style="color: magenta">45。如何选择DSP？ </span></strong><br />选择DSP可以根据以下几方面决定： <br />1)速度： DSP速度一般用MIPS或FLOPS表示，即百万次/秒钟。根据您对处理速度的要求选择适合的器件。一般选择处理速度不要过高，速度高的DSP，系统实现也较困难。 <br />2)精度： DSP芯片分为定点、浮点处理器，对于运算精度要求很高的处理，可选择浮点处理器。定点处理器也可完成浮点运算，但精度和速度会有影响。 <br />3)寻址空间： 不同系列DSP程序、数据、I/O空间大小不一，与普通MCU不同，DSP在一个指令周期内能完成多个操作，所以DSP的指令效率很高，程序空间一般不会有问题，关键是数据空间是否满足。数据空间的大小可以通过DMA的帮助，借助程序空间扩大。 <br />4)成本： 一般定点DSP的成本会比浮点DSP的要低，速度也较快。要获得低成本的DSP系统，尽量用定点算法，用定点DSP。 <br />5)实现方便： 浮点DSP的结构实现DSP系统较容易，不用考虑寻址空间的问题，指令对C语言支持的效率也较高。 <br />6)内部部件：根据应用要求，选择具有特殊部件的DSP。如：C2000适合于电机控制；OMAP适合于多媒体等。 <br /><br /><strong><span style="color: magenta">46。DSP同MCU相比的特点？</span></strong> <br />1)DSP的速度比MCU快，主频较高。 <br />2)DSP适合于数据处理，数据处理的指令效率较高。 <br />3)DSP均为16位以上的处理器，不适合于低档的场合。 <br />4)DSP可以同时处理的事件较多，系统级成本有可能较低。 <br />5)DSP的灵活性较好，大多数算法都可以软件实现。 <br />6)DSP的集成度较高，可靠性较好。 <br /><br /><strong><span style="color: magenta">47。DSP同嵌入CPU相比的特点？ </span></strong><br />1)DSP是单片机，构成系统简单。 <br />2)DSP的速度快。 <br />3)DSP的成本较低。 <br />4)DSP的性能高，可以处理较多的任务。 <br /><br /><strong><span style="color: magenta">48。如何编写C2000片内Flash？ </span></strong><br />DSP中的Flash的编写方法有三中： <br />1.通过仿真器编写：在我们的网页上有相关的软件，在销售仿真器时我们也提供相关软件。其中 LF240x的编写可以在CCS中加入一个插件，F24x的编写需要在windows98下的DOS窗中进行。具体步骤见软件中的readme。有几点需要注意： a.必须为MC方式； b.F206的工作频率必须为20MHz； c.F240需要根据PLL修改C240_CFG.I文件。建议外部时钟为20MHz。 d.LF240x也需要根据PLL修改文件。 d.如果编写有问题，可以用BFLWx.BAT修复。 <br />2.提供串口编写：TI的网页上有相关软件。注意只能编写一次，因为编写程序会破坏串口通信程序。 <br />3.在你的程序中编写：TI的网页上有相关资料。 <br /><br /><strong><span style="color: magenta">49。如何编写DSP外部的Flash？ </span></strong><br />DSP的外部Flash编写方法： <br />1.通过编程器编写：将OUT文件通过HEX转换程序转换为编程器可以接受的格式，再由编程器编写。 <br />2.通过DSP软件编写：您需要根据Flash的说明，编写Flash的编写程序，将应用程序和编写Flash的程序分别load到RAM中，运行编写程序编写。 <br /><br /><strong><span style="color: magenta">50。对于C5000，大于48K的程序如何BOOT？</span></strong> <br />对于C5000，片内的BOOT程序在上电后将数据区的内容，搬移到程序区的RAM中，因此FLASH必须在RESET后放在数据区。由于C5000，数据区的空间有限，一次BOOT的程序不能对于48K。解决的方法如下： <br />1.在RESET后，将FLASH译码在数据区，RAM放在程序区，片内BOOT程序将程序BOOT到RAM中。 <br />2.用户初试化程序发出一个I/O命令（如XF），将FLASH译码到程序区的高地址。开放数据区用于其它的RAM。 <br />3.用户初试化程序中包括第二次BOOT程序（此程序必须用户自己编写），将FLASH中没有BOOT的其它代码搬移到RAM中。 <br />4.开始运行用户处理程序。 <br /><br /><strong><span style="color: magenta">51。DSP外接存储器的控制方式 </span></strong><br />对于一般的存储器具有RD、WR和CS等控制信号，许多DSP（C3x、C5000）都没有控制信号直接连接存储器，一般采用的方式如下： <br />1.CS有地址线和PS、DS或STRB译码产生； <br />2./RD=/STRB+/R/W； 3./WR=/STRB+R/W。 <br /><br /><strong><span style="color: magenta">52。GEL文件的功能？ </span></strong><br />GEL文件的功能同emuinit.cmd的功能基本相同，用于初始化DSP。但它的功能比emuinit的功能有所增强，GEL在CCS下有一个菜单，可以根据DSP的对象不同，设置不同的初始化程序。以TMS320LF2407为例： <br />#define SCSR1 0x7018 ；定义scsr1寄存器 <br />#define SCSR2 0X7019 ；定义scsr2寄存器 <br />#define WDKEY 0x7025 ；定义wdkey寄存器 <br />#define WDNTR 0x7029 ；定义wdntr寄存器 <br />StartUp() ; 开始函数 <br />&#123; <br />GEL_MapReset(); ; 存储空间复位 GEL_MapAdd(0x0000,0,0x7fff,1,1); 定义程序空间从0000－7fff 可读写 <br />GEL_MapAdd(0x8000,0,0x7000,1,1); 定义程序空间从8000－f000 可读写 <br />GEL_MapAdd(0x0000,1,0x10000,1,1); 定义数据空间从0000－10000可读写 <br />GEL_MapAdd(0xffff,2,1,1,1); 定义i/o 空间0xffff可读写 <br />GEL_MapOn(); 存储空间打开 <br />GEL_MemoryFill(0xffff,2,1,0x40); 在i/o空间添入数值40h <br />*(int *)SCSR1=0x0200; 给scsr1寄存器赋值 <br />*(int *)SCSR2=0x000C; 给scsr2寄存器赋值，在这里可以进行mp/mc方式的转换 <br />*(int *)WDNTR=0x006f; 给wdntr寄存器赋值 <br />*(int *)WDKEY=0x055; 给wdkey寄存器赋值 <br />*(int *)WDKEY=0x0AA; 给wdkey寄存器赋值 <br />&#125; <br /><br /><strong><span style="color: magenta">53。使用TI公司模拟器件与DSP结合使用的好处。</span></strong> <br />1)在使用TI公司的DSP的同时，使用TI公司的模拟可以和DSP进行无缝连接。器件与器件之间不需要任何的连接或转接器件。这样即减少了板卡的尺寸，也降低了开发难度。 <br />2)同为TI公司的产品，很多器件可以固定搭配使用。少了器件选型的烦恼 <br />3)TI在CCS中提供插件，可以用于DSP和模拟器件的开发，非常方便。 <br /><br /><strong><span style="color: magenta">54。C语言中可以嵌套汇编语言？ </span></strong><br />可以。在ANSI C标准中的标准用法就是用C语言编写主程序，用汇编语言编写子程序，中断服务程序，一些算法，然后用C语言调用这些汇编程序，这样效率会相对比较高，在定点DSP系统中可否实现浮点运算。<br />当然可以，因为DSP都可以用C,只要是可以使用c语言的场合都可以实现浮点运算。 <br />JTAG头的使用会遇到哪些情况<br />1)DSP的CLKOUT没有输出，工作不正常。 <br />2)Emu0，Emu1需要上拉。 <br />3)TCK的频率应该为10M。 <br />4)在3.3V DSP中，PD脚为3.3V 供电，但是仿真器上需要5V电压供电，所以PP仿真器盒上需要单独供电。 <br />4)仿真多片DSP。在使用菊花链的时候，第一片DSP的TDO接到第二片DSP的TDI即可。注意当串联DSP比较多的时候，信号线要适当的增加驱动。 <br /><br /><strong><span style="color: magenta">55。include头文件（.h)的主要作用 </span></strong><br />头文件，一般用于定义程序中的函数、参数、变量和一些宏单元，同库函数配合使用。因此，在使用库时，必须用相应的头文件说明。 <br />DSP中断向量的位置 <br />1)2000系列dsp的中断向量只能从0000H处开始。所以在我们调试程序的时候，要把DSP选择为MP（微处理器方式），把片内的Flash屏蔽掉，免去每次更改程序都要重新烧写Flash工作。 <br />2)3x系列dsp的中断向量也只能在固定的地址。 <br />3)5000，6000系列dsp的中断向量可以重新定位。但是它只能被重新定位到Page0范围内的任何空间。 <br /><br /><strong><span style="color: magenta">56。有源晶振与晶体的区别，应用范围及用法 </span></strong><br />1)晶体需要用DSP片内的振荡器，在datasheet上有建议的连接方法。晶体没有电压的问题，可以适应于任何DSP，建议用晶体。 <br />2)有源晶振不需要DSP的内部振荡器，信号比较稳定。有源晶振用法：一脚悬空，二脚接地，三脚接输出，四脚接电压。 <br /><br /><strong><span style="color: magenta">57。程序经常跑飞的原因 </span></strong><br />1)程序没有结尾或不是循环的程序。 <br />2)nmi管脚没有上拉。 <br />3)在看门狗动作的时候程序会经常跑飞。 <br />4)程序编制不当也会引起程序跑飞。 <br />5)硬件系统有问题。 <br /><br /><strong><span style="color: magenta">58。并行FLASH引导的一点经验-阿哲</span></strong> <br />最近BBS上关于FLASH和BOOT的讨论很活跃，我也多次来此请教。前几天自制的DSP板引导成功，早就打算写写这方面的东西。我用的 DSP是5416，以其为核心，做了一个相对独立的子系统（硬件、软件、算法），目前都已基本做好。下面把在FLASH引导方面做的工作向大家汇报一下，希望能对大家有所帮助。本人经验和文笔都有限，写的不好请大家谅解。 硬件环境： <br />DSP：TMS320VC5416PGE160 <br />FLASH：SST39VF400A-70-4C-EK 都是贴片的，FLASH映射在DSP数据空间的0x8000-0xFFFF <br />软件环境： CCS v2.12.01 <br />主程序（要烧入FLASH的程序）： DEBUG版，程序占用空间0x28000-0x2FFFF（片内SARAM），中断向量表在0x0080-0x00FF（片内DARAM），数据空间使用0x0100-0x7FFF（片内DARAM）。因为FLASH是贴片的，所以需要自己编一个数据搬移程序，把要主程序搬移到FLASH中。在写入FLASH数据时，还应写入引导表的格式数据。最后在数据空间的0xFFFF处写入引导表的起始地址（这里为0x8000）。 <br />搬移程序： DEBUG版，程序空间0x38000-0x3FFFF（片内SARAM），中断向量表在0x7800-0x78FF（片内DARAM），数据空间使用 0x5000-0x77FF（片内DARAM）。 搬移程序不能使用与主程序的程序空间和中断向量表重合的物理空间，以免覆盖。烧写时，同时打开主程序和搬移程序的PROJECT，先LOAD主程序，再LOAD搬移程序，然后执行搬移程序，烧写OK! 附：搬移程序（仅供参考） <br />volatile unsigned int *pTemp=(unsigned int *)0x7e00; unsigned int iFlashAddr; <br />int iLoop; /* 在引导表头存放并行引导关键字 */ <br />iFlashAddr=0x8000; <br />WriteFlash(iFlashAddr,0x10aa); <br />iFlashAddr++; /* 初始化SWWSR值 */ <br />WriteFlash(iFlashAddr,0x7e00); <br />iFlashAddr++; /* 初始化BSCR值 */ <br />WriteFlash(iFlashAddr,0x8006); <br />iFlashAddr++; /* 程序执行的入口地址 */ <br />WriteFlash(iFlashAddr,0x0002); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x8085); <br />iFlashAddr++; /* 程序长度 */ <br />WriteFlash(iFlashAddr,0x7f00); <br />iFlashAddr++; /* 程序要装载到的地址 */ <br />WriteFlash(iFlashAddr,0x0002); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x8000); <br />iFlashAddr++; <br />for (iLoop=0;iLoop&lt;0x7f00;iLoop++) <br />&#123; /* 从程序空间读数据，放到暂存单元 */ <br />asm(&quot; pshm al&quot;); <br />asm(&quot; pshm ah&quot;); <br />asm(&quot; rsbx cpl&quot;); <br />asm(&quot; ld #00fch,dp&quot;); <br />asm(&quot; stm #0000h, ah&quot;); <br />asm(&quot; MVDM _iLoop, al&quot;); <br />asm(&quot; add #2800h,4,a&quot;); <br />asm(&quot; reada 0h&quot;); <br />asm(&quot; popm ah&quot;); <br />asm(&quot; popm al&quot;); <br />asm(&quot; ssbx cpl&quot;); /* 把暂存单元内容写入FLASH */ <br />WriteFlash(iFlashAddr,*pTemp); <br />iFlashAddr++; &#125; /* 中断向量表长度 */ <br />WriteFlash(iFlashAddr,0x0080); <br />iFlashAddr++; /* 中断向量表装载地址 */ <br />WriteFlash(iFlashAddr,0x0000); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x0080); <br />iFlashAddr++; <br />for (iLoop=0;iLoop&lt;0x0080;iLoop++) &#123; /* 从程序空间读数据，放到暂存单元 */ <br />asm(&quot; pshm al&quot;); <br />asm(&quot; pshm ah&quot;); <br />asm(&quot; rsbx cpl&quot;); <br />asm(&quot; ld #00fch,dp&quot;); <br />asm(&quot; stm #0000h, ah&quot;); <br />asm(&quot; MVDM _iLoop, al&quot;); <br />asm(&quot; add #0080h,0,a&quot;); <br />asm(&quot; reada 0h&quot;); <br />asm(&quot; popm ah&quot;); <br />asm(&quot; popm al&quot;); <br />asm(&quot; ssbx cpl&quot;); /* 把暂存单元内容写入FLASH */ <br />WriteFlash(iFlashAddr,*pTemp); <br />iFlashAddr++; <br />&#125; /* 写入引导表结束标志 */ <br />WriteFlash(iFlashAddr,0x0000); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x0000); /* 在数据空间的0xFFFF写入引导表起始地址 */ <br />iFlashAddr=0xffff; <br />WriteFlash(iFlashAddr,0x8000); <br /><br /><strong><span style="color: magenta">59。关于LF2407A的FLASH烧写问题的几点说明 </span></strong><br />TI现在关于LF24x写入FLASH的工具最新为c2000flashprogsw_v112。可以支持LF2407、LF2407a、 LF2401及相关的LF240x系列。建议使用此版本。在http: //focus.ti.com/docs/tool/toolfolder.jhtml?PartNumber=C24XSOFTWARE上可以下载到这个工具。我们仿真器自带的光盘中也有此烧写程序。 在使用这个工具时注意： <br />一,先解压，再执行setup.exe。 <br />二、进入cc中，在tools图标下有烧写工具； <br />1、关于FLASH时钟的选择，此烧写工具默认最高频率进行FLASH的操作。根据目标系统的工作主频重新要进行PLL设置。方法：先在advance options下面的View Config file中修改倍频。存盘后，在相应的目录下（tic2xx&#92;algos&#92;相应目录）运行buildall.bat就可以完成修改了。再进行相应的操作即可。 <br />2、若是你所选的频率不是最高频率，还需要设定你自已的timings.xx来代替系统默认的最高频率的timings.xx。例如 LF2407a的默认文件是timings.40。Timings.xx可以利用include&#92;timings.xls的excel工作表来生成。然后在advance options下面的View Config file中修改相应的位置。存盘后，在相应的目录下运行buildall.bat就可以完成修改了。 <br />3、对于TMS320LF240XA系列，还要注意：由于这些DSP的FLASH具有加密功能，加密地址为程序空间的0x40-0X43H，程序禁止写入此空间，如果写了，此空间的数据被认为是加密位，断电后进入保护FLASH状态，使FLASH不可重新操作，从而使DSP报废，烧写完毕后一定要进行Program passwords的操作，如果不做加密操作就默认最后一次写入加密位的数据作为密码。 <br />4、2407A不能用DOS下的烧写软件烧写，必须用c2000flashprogsw_v112软件烧写； <br />5、建议如下： <br />&nbsp; &nbsp;1)、一般调试时，在RAM中进行； <br />&nbsp; &nbsp;2)、程序烧写时，避开程序空间0x40-0x43H加密区，程序最好小于32k； <br />&nbsp; &nbsp;3)、每次程序烧写完后，将word0，word1,word2，word3分别输入自己的密码，再点击 Program password，如果加密成功，提示Program is arrayed，如果0x40－0x43h中写入的是ffff，认为处于调试状态，flash不会加密； <br />&nbsp; &nbsp;4)、断电后，下次重新烧写时需要往word0～word3输入已设的密码，再unlock，成功后可以重新烧写了； <br />6、VCPP管脚接在＋5V上，是应直接接的，中间不要加电阻。 <br />7、具体事宜请阅读相应目录下的readme1,readme2帮助文件。 <br />8.注意*.cmd文件的编写时应该避开40-43H单元，好多客户由于没有注意到这里而把FALSH加密。 <br /><br /><strong><span style="color: magenta">60。如何设置硬件断点？</span></strong><br />在profiler －&gt;profile point -&gt; break point <br />c54x的外部中断是电平响应还是沿响应？<br />是沿响应，准确的说，它要检测到100(一个clk的高和两个clk的低)的变化才可以。 <br />参考程序，里面好象都要 disable wachdog,不知道为什么?<br />watchdog是一个计数器，溢出时会复位你的DSP，不disable的话，你的系统会动不动就reset。 <br /><br /><strong><span style="color: magenta">61。时钟电路选择原则</span></strong><br />1,系统中要求多个不同频率的时钟信号时，首选可编程时钟芯片; <br />2,单一时钟信号时，选择晶体时钟电路; <br />3,多个同频时钟信号时，选择晶振; <br />4,尽量使用DSP片内的PLL，降低片外时钟频率，提高系统的稳定性; <br />5,C6000、C5510、C5409A、C5416、C5420、C5421和C5441等DSP片内无振荡电路，不能用晶体时钟电路; <br />6,VC5401、VC5402、VC5409和F281x等DSP时钟信号的电平为1.8V，建议采用晶体时钟电路 <br /><br /><strong><span style="color: magenta">62。C程序的代码和数据如何定位</span></strong><br />1,系统定义: <br />.cinit&nbsp;&nbsp;存放C程序中的变量初值和常量; <br />.const 存放C程序中的字符常量、浮点常量和用const声明的常量; <br />.switch 存放C程序中switch语句的跳针表; <br />.text&nbsp;&nbsp;存放C程序的代码; <br />.bss&nbsp;&nbsp;为C程序中的全局和静态变量保留存储空间; <br />.far&nbsp;&nbsp;为C程序中用far声明的全局和静态变量保留空间; <br />.stack 为C程序系统堆栈保留存储空间，用于保存返回地址、函数间的参数传递、存储局部变量和保存中间结果; <br />.sysmem 用于C程序中malloc、calloc和realloc函数动态分配存储空间 <br />2,用户定义: <br />#pragma CODE_SECTION (symbol, &quot;section name&quot;); <br />#pragma DATA_SECTION (symbol, &quot;section name&quot;) <br />cmd文件<br />由3部分组成： <br />1)输入／输出定义：.obj文件：链接器要链接的目标文件;.lib文件：链接器要链接的库文件;.map文件：链接器生成的交叉索引文件;.out文件：链接器生成的可执行代码;链接器选项 <br />2)MEMORY命令：描述系统实际的硬件资源 <br />3)SECTIONS命令：描述&ldquo;段&rdquo;如何定位 <br /><br /><strong><span style="color: magenta">63。为什么要设计CSL?</span></strong><br /><br />1,DSP片上外设种类及其应用日趋复杂 <br />2,提供一组标准的方法用于访问和控制片上外设 <br />3,免除用户编写配置和控制片上外设所必需的定义和代码 <br /><br /><strong><span style="color: magenta">64。什么是CSL?</span></strong><br />1,用于配置、控制和管理DSP片上外设 <br />2,已为C6000和C5000系列DSP设计了各自的CSL库 <br />3,CSL库函数大多数是用C语言编写的，并已对代码的大小和速度进行了优化 <br />4,CSL库是可裁剪的：即只有被使用的CSL模块才会包含进应用程序中 <br />5,CSL库是可扩展的：每个片上外设的API相互独立，增加新的API，对其他片上外设没有影响 <br /><strong><span style="color: magenta"><br />65。CSL的特点</span></strong><br />1,片上外设编程的标准协议：定义一组标准的APIs：函数、数据类型、宏; <br />2,对硬件进行抽象，提取符号化的片上外设描述:定义一组宏，用于访问和建立寄存器及其域值 <br />3,基本的资源管理:对多资源的片上外设进行管理; <br />4,已集成到DSP/BIOS中:通过图形用户接口GUI对CSL进行配置; <br />5,使片上外设容易使用:缩短开发时间，增加可移植. <br /><br /><strong><span style="color: magenta">66。为什么需要电平变换?</span></strong><br />1)DSP系统中难免存在5V/3.3V混合供电现象; <br />2)I/O为3.3V供电的DSP，其输入信号电平不允许超过电源电压3.3V; <br />3)5V器件输出信号高电平可达4.4V; <br />4)长时间超常工作会损坏DSP器件; <br />5)输出信号电平一般无需变换 <br /><br /><strong><span style="color: magenta">67。电平变换的方法</span></strong><br />1,总线收发器（Bus Transceiver）： <br />常用器件： SN74LVTH245A（8位）、SN74LVTH16245A（16位） <br />特点：3.3V供电，需进行方向控制， <br />延迟：3.5ns，驱动：-32/64mA， <br />输入容限：5V <br />应用：数据、地址和控制总线的驱动 <br />2,总线开关（Bus Switch） <br />常用器件：SN74CBTD3384（10位）、SN74CBTD16210（20位） <br />特点：5V供电，无需方向控制 <br />延迟：0.25ns，驱动能力不增加 <br />应用：适用于信号方向灵活、且负载单一的应用，如McBSP等外设信号的电平变换 <br />3,2选1切换器（1 of 2 Multiplexer） <br />常用器件：SN74CBT3257（4位）、SN74CBT16292（12位） <br />特点：实现2选1，5V供电，无需方向控制 <br />延迟：0.25ns，驱动能力不增加 <br />应用：适用于多路切换信号、且要进行电平变换的应用，如双路复用的McBSP <br />4,CPLD <br />3.3V供电，但输入容限为5V，并且延迟较大：＞7ns，适用于少量的对延迟要求不高的输入信号 <br />5,电阻分压 <br />10K&Omega;和20K&Omega;串联分压，5V&times;20&divide;（10＋20）&asymp;3.3V <br /><br /><strong><span style="color: magenta">68。未用的输入／输出引脚的处理</span></strong><br />1,未用的输入引脚不能悬空不接，而应将它们上拉活下拉为固定的电平 <br />1)关键的控制输入引脚，如Ready、Hold等，应固定接为适当的状态,Ready引脚应固定接为有效状态,Hold引脚应固定接为无效状态 <br />2)无连接（NC）和保留（RSV）引脚,NC 引脚：除非特殊说明，这些引脚悬空不接,RSV引脚：应根据数据手册具体决定接还是不接 <br />3)非关键的输入引脚,将它们上拉或下拉为固定的电平，以降低功耗 <br />2,未用的输出引脚可以悬空不接 <br />3,未用的I/O引脚:如果确省状态为输入引脚，则作为非关键的输入引脚处理，上拉或下拉为固定的电平;如果确省状态为输出引脚，则可以悬空不接
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?919</link>
<title><![CDATA[ 做DSP最应该懂得57个问题]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:38:32 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?919</guid> 
<description>
<![CDATA[ 
	<strong><span style="color: #ff00ff">二.DSP的C语言同主机C语言的主要区别？<br /></span></strong>1)DSP的C语言是标准的ANSI C,它不包括同外设联系的扩展部分,如屏幕绘图等。但在CCS中,为了方便调试,可以将数据通过prinf命令虚拟输出到主机的屏幕上。 <br />2)DSP的C语言的编译过程为,C编译为ASM,再由ASM编译为OBJ。因此C和ASM的对应关系非常明确,非常便于人工优化。 <br />3)DSP的代码需要绝对定位;主机的C的代码有操作系统定位。 <br />4)DSP的C的效率较高,非常适合于嵌入系统。 <br /><br /><strong><span style="color: magenta">三.DSP发展动态</span></strong><br />1.TMS320C2000 TMS320C2000系列包括C24x和C28x系列。C24x系列建议使用LF24xx系列替代C24x系列,LF24xx系列的价格比C24x便宜,性能高于C24x,而且LF24xxA具有加密功能。 C28x系列主要用于大存储设备管理,高性能的控制场合。 <br />2.TMS320C3x TMS320C3x系列包括C3x和VC33,主要推荐使用VC33。C3x系列是TI浮点DSP的基础,不可能停产,但价格不会进一步下调。 <br />3.TMS320C5x TMS320C5x系列已不推荐使用,建议使用C24x或C5000系列替代。 <br />4.TMS320C5000 TMS320C5000系列包括C54x和C55x系列。 其中VC54xx还不断有新的器件出现,如：TMS320VC5471（DSP＋ARM7）。 C55x系列是TI的第三代DSP,功耗为VC54xx的1/6,性能为VC54xx的5倍,是一个正在发展的系列。 C5000系列是目前TI DSP的主流DSP,它涵盖了从低档到中高档的应用领域,目前也是用户最多的系列。 <br />5.TMS320C6000 TMS320C6000系列包括C62xx、C67xx和C64xx。此系列是TI的高档DSP系列。 其中C62xx系列是定点的DSP,系列芯片种类较丰富,是主要的应用系列。 C67xx系列是浮点的DSP,用于需要高速浮点处理的领域。 C64xx系列是新发展,性能是C62xx的10倍。 <br />6.OMAP系列 是TI专门用于多媒体领域的芯片,它是C55＋ARM9,性能卓越,非常适合于手持设备、Internet终端等多媒体应用。<br /><br /><strong><span style="color: red"><span style="color: magenta">四.5V/3.3V如何混接？</span></span></strong><br />TI DSP的发展同集成电路的发展一样,新的DSP都是3.3V的,但目前还有许多外围电路是5V的,因此在DSP系统中,经常有5V和3.3V的DSP混接问题。在这些系统中,应注意： 1)DSP输出给5V的电路（如D/A）,无需加任何缓冲电路,可以直接连接。 2)DSP输入5V的信号（如A/D）,由于输入信号的电压&gt;4V,超过了DSP的电源电压,DSP的外部信号没有保护电路,需要加缓冲,如74LVC245等,将5V信号变换成3.3V的信号。 3)仿真器的JTAG口的信号也必须为3.3V,否则有可能损坏DSP。 <br /><br /><strong><span style="color: magenta">五.为什么要片内RAM大的DSP效率高？</span></strong><br />目前DSP发展的片内存储器RAM越来越大,要设计高效的DSP系统,就应该选择片内RAM较大的DSP。片内RAM同片外存储器相比,有以下优点： 1)片内RAM的速度较快,可以保证DSP无等待运行。 2)对于C2000/C3x/C5000系列,部分片内存储器可以在一个指令周期内访问两次,使得指令可以更加高效。 3)片内RAM运行稳定,不受外部的干扰影响,也不会干扰外部。 4)DSP片内多总线,在访问片内RAM时,不会影响其它总线的访问,效率较高。<br /><br /><strong><span style="color: magenta">六.为什么DSP从5V发展成3.3V？</span></strong><br />超大规模集成电路的发展从1um,发展到目前的0.1um,芯片的电源电压也随之降低,功耗也随之降低。DSP也同样从5V发展到目前的3.3V,核心电压发展到1V。目前主流的DSP的外围均已发展为3.3V,5V的DSP的价格和功耗都价格,以逐渐被3.3V的DSP取代。 <br /><br /><strong><span style="color: magenta">七如何选择DSP的电源芯片？</span></strong><br />TMS320LF24xx：TPS7333QD,5V变3.3V,最大500mA。 <br />TMS320VC33： TPS73HD318PWP,5V变3.3V和1.8V,最大750mA。 <br />TMS320VC54xx：TPS73HD318PWP,5V变3.3V和1.8V,最大750mA; TPS73HD301PWP,5V变3.3V和可调,最大750mA。 <br />TMS320VC55xx：TPS73HD301PWP,5V变3.3V和可调,最大750mA。 <br />TMS320C6000： PT6931,TPS56000,最大3A。 <br /><br /><strong><span style="color: magenta">八.软件等待的如何使用？</span></strong><br />DSP的指令周期较快,访问慢速存储器或外设时需加入等待。等待分硬件等待和软件等待,每一个系列的等待不完全相同。 <br />1)对于C2000系列： 硬件等待信号为READY,高电平时不等待。 软件等待由WSGR寄存器决定,可以加入最多7个等待。其中程序存储器和数据存储器及I/O可以分别设置。 <br />2)对于C3x系列： 硬件等待信号为/RDY,低电平是不等待。 软件等待由总线控制寄存器中的SWW和WTCNY决定,可以加入最多7个等待,但等待是不分段的,除了片内之外全空间有效。 <br />3)对于C5000系列： 硬件等待信号为READY,高电平时不等待。 软件等待由SWWCR和SWWSR寄存器决定,可以加入最多14个等待。其中程序存储器、控制程序存储器和数据存储器及I/O可以分别设置。 <br />4)对于C6000系列（只限于非同步存储器或外设）： 硬件等待信号为ARDY,高电平时不等待。 软件等待由外部存储器接口控制寄存器决定,总线访问外部存储器或设备的时序可以设置,可以方便的同异步的存储器或外设接口。 <br /><br /><strong><span style="color: magenta">九.中断向量为什么要重定位？</span></strong><br />为了方便DSP存储器的配置,一般DSP的中断向量可以重新定位,即可以通过设置寄存器放在存储器空间的任何地方。 注意：C2000的中断向量不能重定位。 <br /><br /><strong><span style="color: magenta">十.DSP的最高主频能从芯片型号中获得吗？</span></strong><br />TI的DSP最高主频可以从芯片的型号中获得,但每一个系列不一定相同。 <br />1)TMS320C2000系列： <br />TMS320F206－最高主频20MHz。 <br />TMS320C203/C206－最高主频40MHz。 <br />TMS320F24x－最高主频20MHz。 <br />TMS320LF24xx－最高主频30MHz。 <br />TMS320LF24xxA－最高主频40MHz。 <br />TMS320LF28xx－最高主频150MHz。 <br />2)TMS320C3x系列： <br />TMS320C30：最高主频25MHz。 <br />TMS320C31PQL80：最高主频40MHz。 <br />TMS320C32PCM60：最高主频30MHz。 <br />TMS320VC33PGE150：最高主频75MHz。 <br />3)TMS320C5000系列： <br />TMS320VC54xx：最高主频160MHz。 <br />TMS320VC55xx：最高主频300MHz。 <br />4)TMS320C6000系列： <br />TMS320C62xx：最高主频300MHz。 <br />TMS320C67xx：最高主频230MHz。 <br />TMS320C64xx：最高主频720MHz。 <br /><br /><strong><span style="color: magenta">十一.DSP可以降频使用吗？</span></strong><br />可以,DSP的主频均有一定的工作范围,因此DSP均可以降频使用。 <br /><br /><strong><span style="color: magenta">十二.如何选择外部时钟？</span></strong><br />DSP的内部指令周期较高,外部晶振的主频不够,因此DSP大多数片内均有PLL。但每个系列不尽相同。 <br />1)TMS320C2000系列： <br />TMS320C20x：PLL可以&divide;2,&times;1,&times;2和&times;4,因此外部时钟可以为5MHz－40MHz。 <br />TMS320F240：PLL可以&divide;2,&times;1,&times;1.5,&times;2,&times;2.5,&times;3,&times;4,&times;4.5,&times;5和&times;9,因此外部时钟可以为2.22MHz－40MHz。 <br />TMS320F241/C242/F243：PLL可以&times;4,因此外部时钟为5MHz。 TMS320LF24xx：PLL可以由RC调节,因此外部时钟为4MHz－20MHz。 <br />TMS320LF24xxA：PLL可以由RC调节,因此外部时钟为4MHz－20MHz。 <br />2)TMS320C3x系列： <br />TMS320C3x：没有PLL,因此外部主频为工作频率的2倍。 <br />TMS320VC33：PLL可以&divide;2,&times;1,&times;5,因此外部主频可以为12MHz－100MHz。 <br />3)TMS320C5000系列： <br />TMS320VC54xx：PLL可以&divide;4,&divide;2,&times;1-32,因此外部主频可以为0.625MHz－50MHz。 <br />TMS320VC55xx：PLL可以&divide;4,&divide;2,&times;1-32,因此外部主频可以为6.25MHz－300MHz。 <br />4)TMS320C6000系列： <br />TMS320C62xx：PLL可以&times;1,&times;4,&times;6,&times;7,&times;8,&times;9,&times;10和&times;11,因此外部主频可以为11.8MHz－300MHz。 <br />TMS320C67xx：PLL可以&times;1和&times;4,因此外部主频可以为12.5MHz－230MHz。 <br />TMS320C64xx：PLL可以&times;1,&times;6和&times;12,因此外部主频可以为30MHz－720MHz<br /><strong><span style="color: magenta"><br />十三.如何选择DSP的外部存储器？</span></strong><br />DSP的速度较快,为了保证DSP的运行速度,外部存储器需要具有一定的速度,否则DSP访问外部存储器时需要加入等待周期。 <br />1)对于C2000系列： C2000系列只能同异步的存储器直接相接。 C2000系列的DSP目前的最高速度为150MHz。建议可以用的存储器有： <br />CY7C199-15：32K&times;8,15ns,5V; <br />CY7C1021-12：64K&times;16,15ns,5V; CY7C1021V33-12：64K&times;16,15ns,3.3V。 <br />2)对于C3x系列： C3x系列只能同异步的存储器直接相接。 C3x系列的DSP的最高速度,5V的为40MHz,3.3V的为75MHz,为保证DSP无等待运行,分别需要外部存储器的速度&lt;25ns和&lt;12ns。建议可以用的存储器有： <br />ROM： AM29F400-70：256K&times;16,70ns,5V,加入一个等待; <br />AM29LV400-55(SST39VF400)：256K&times;16,55ns,3.3V,加入两个等待（目前没有更快的Flash）。 <br />SRAM： CY7C199-15：32K&times;8,15ns,5V; <br />CY7C1021-15：64K&times;16,15ns,5V; <br />CY7C1009-15：128K&times;8,15ns,5V; <br />CY7C1049-15：512K&times;8,15ns,5V; <br />CY7C1021V33-15：64K&times;16,15ns,3.3V; <br />CY7C1009V33-15：128K&times;8,15ns,3.3V; <br />CY7C1041V33-15：256k&times;16,15ns,3.3V。 <br />3)对于C54x系列： C54x系列只能同异步的存储器直接相接。 C54x系列的DSP的速度为100MHz或160MHz,为保证DSP无等待运行,需要外部存储器的速度&lt;10ns或&lt;6ns。建议可以用的存储器有： <br />ROM： AM29LV400-55(SST39VF400)：256K&times;16,55ns,3.3V,加入5或9个等待（目前没有更快的Flash）。 <br />SRAM： CY7C1021V33-12：64K&times;16,12ns,3.3V,加入一个等待; <br />CY7C1009V33-12：128K&times;8,12ns,3.3V,加入一个等待。 <br />4)对于C55x和C6000系列： TI的DSP中只有C55x和C6000可以同同步的存储器相连,同步存储器可以保证系统的数据交换效率更高。 <br />ROM： AM29LV400-55(SST39VF400)：256K&times;16,55ns,3.3V。 <br />SDRAM： HY57V651620BTC-10S：64M,10ns。 <br />SBSRAM： CY7C1329-133AC,64k&times;32; <br />CY7C1339-133AC,128k&times;32。 <br />FIFO：CY7C42x5V-10ASC,32k/64k&times;18。 <br /><br /><strong><span style="color: magenta">十四.DSP芯片有多大的驱动能力？</span></strong><br />DSP的驱动能力较强,可以不加驱动,连接8个以上标准TTL门。 <br /><br /><strong><span style="color: magenta">十五.调试TMS320C2000系列的常见问题？</span></strong><br />1)单步可以运行,连续运行时总回0地址： Watchdog没有关,连续运行复位DSP回到0地址。 <br />2)OUT文件不能load到片内flash中： Flash不是RAM,不能用简单的写指令写入,需要专门的程序写入。CCS和C Source Debugger中的load命令,不能对flash写入。 OUT文件只能load到片内RAM,或片外RAM中。 <br />3)在flash中如何加入断点： 在flash中可以用单步调试,也可以用硬件断点的方法在flash中加入断点,软件断点是不能加在ROM中的。硬件断点,设置存储器的地址,当访问该地址时产生中断。 <br />4)中断向量： C2000的中断向量不可重定位,因此中断向量必须放在0地址开始的flash内。在调试系统时,代码放在RAM中,中断向量也必须放在flash内。 <br /><br /><strong><span style="color: magenta">十六.调试TMS320C3x系列的常见问题？</span></strong><br />1)TMS320C32的存储器配置： TMS320C32的程序存储器可以配置为16位或32位;数据存储器可以配置为8位、16位或32位。 <br />2)TMS320VC33的PLL控制： TMS320VC33的PLL控制端只能接1.8V,不能接3.3V或5V。 <br /><br /><strong><span style="color: magenta">十七.如何调试多片DSP？</span></strong><br />对于有MPSD仿真口的DSP（TMS320C30/C31/C32）,不能用一套仿真器同时调试,每次只能调试其中的一个DSP; 对于有JTAG仿真口的DSP,可以将JTAG串接在一起,用一套仿真器同时调试多个DSP,每个DSP可以用不同的名字,在不同的窗口中调试。 注意：如果在JTAG和DSP间加入驱动,一定要用快速的门电路,不能使用如LS的慢速门电路。 <br /><br /><strong><span style="color: magenta">十八.在DSP系统中为什么要使用CPLD？</span></strong><br />DSP的速度较快,要求译码的速度也必须较快。利用小规模逻辑器件译码的方式,已不能满足DSP系统的要求。 同时,DSP系统中也经常需要外部快速部件的配合,这些部件往往是专门的电路,有可编程器件实现。 CPLD的时序严格,速度较快,可编程性好,非常适合于实现译码和专门电路。 <br /><br /><strong><span style="color: magenta">十九.DSP系统构成的常用芯片有哪些？</span></strong><br />1)电源： TPS73HD3xx,TPS7333,TPS56100,PT64xx... <br />2)Flash： AM29F400,AM29LV400,SST39VF400... <br />3)SRAM： CY7C1021,CY7C1009,CY7C1049... <br />4)FIF CY7C425,CY7C42x5... <br />5)Dual port： CY7C136,CY7C133,CY7C1342... <br />6)SBSRAM： CY7C1329,CY7C1339... <br />7)SDRAM： HY57V651620BTC... <br />8)CPLD： CY37000系列,CY38000系列,CY39000系列... <br />9)PCI： PCI2040,CY7C09449... <br />10)USB： AN21xx,CY7C68xxx... <br />11)Codec：TLV320AIC23,TLV320AIC10... <br />12)A/D,D/A：ADS7805,TLV2543... <br />具体资料见<a href="http://www.ti.com/" target="_blank">www.ti.com</a>,<a href="http://www.cypress.com/" target="_blank">www.cypress.com</a> <br /><br /><strong><span style="color: magenta">二十.什么是boot loader？</span></strong><br />DSP的速度尽快,EPROM或flash的速度较慢,而DSP片内的RAM很快,片外的RAM也较快。为了使DSP充分发挥它的能力,必须将程序代码放在RAM中运行。为了方便的将代码从ROM中搬到RAM中,在不带flash的DSP中,TI在出厂时固化了一段程序,在上电后完成从ROM或外设将代码搬到用户指定的RAM中。此段程序称为&quot;boot loader&quot;。 <br /><br /><strong><span style="color: magenta">二十一.TMS320C3x如何boot？</span></strong><br />在MC/MP管脚为高时,C3x进入boot状态。C3x的boot loader在reset时,判断外部中断管脚的电平。根据中断配置决定boot的方式为存储器加载还是串口加载,其中ROM的地址可以为三个中的一个,ROM可以为8位。 <br /><br /><strong><span style="color: magenta">二十二.Boot有问题如何解决？</span></strong><br />1)仔细检查boot的控制字是否正确。 <br />2)仔细检查外部管脚设置是否正确。 <br />3)仔细检查hex文件是否转换正确。 <br />4)用仿真器跟踪boot过程,分析错误原因。 <br /><br /><strong><span style="color: magenta">二十三.DSP为什么要初始化？</span></strong><br />DSP在RESET后,许多的寄存器的初值一般同用户的要求不一致,例如：等待寄存器,SP,中断定位寄存器等,需要通过初始化程序设置为用户要求的数值。 初始化程序的主要作用： 1)设置寄存器初值。 2)建立中断向量表。 3)外围部件初始化。 <br /><br /><strong><span style="color: magenta">二十四.DSP有哪些数学库及其它应用软件？</span></strong><br />TI公司为了方便客户开发DSP,在它的网站上提供了许多程序的示例和应用程序,如MATH库,FFT,FIR/IIR等,可以在TI的网页免费下载。 <br /><br /><strong><span style="color: magenta">二十五.如何获得DSP专用算法？</span></strong><br />TI有许多的Third Party可以通过DSP上的多种算法软件。可以通过TI的网页搜索你所需的算法,找到通过算法的公司,同相应的公司联系。注意这些算法都是要付费的。<br /><br /><strong><span style="color: magenta">二十六.eXpressDSP是什么？</span></strong><br />eXpressDSP是一种实时DSP软件技术,它是一种DSP编程的标准,利用它可以加快你开发DSP软件的速度。 以往DSP软件的开发没有任何标准,不同的人写的程序一般无法连接在一起。DSP软件的调试工具也非常不方便。使得DSP软件的开发往往滞后于硬件的开发。 eXpressDSP集成了CCS(Code Composer Studio)开发平台,DSP BIOS实时软件平台,DSP算法标准和第三方支持四部分。利用该技术,可以使你的软件调试,软件进程管理,软件的互通及算法的获得,都便的容易。这样就可以加快你的软件开发进程。 <br />1)CCS是eXpressDSP的基础,因此你必须首先拥有CCS软件。 <br />2)DSP BIOS是eXpressDSP的基本平台,你必须学会所有DSP BIOS。 <br />3)DSP算法标准可以保证你的程序可以方便的同其它利用eXpressDSP技术的程序连接在一起。同时也保证你的程序的延续性。 <br /><br /><strong><span style="color: magenta">二十七.为什么要用DSP？</span></strong><br />3G技术和internate的发展,要求处理器的速度越来越高,体积越来越小,DSP的发展正好能满足这一发展的要求。因为,传统的其它处理器都有不同的缺陷。MCU的速度较慢;CPU体积较大,功耗较高;嵌入CPU的成本较高。 DSP的发展,使得在许多速度要求较高,算法较复杂的场合,取代MCU或其它处理器,而成本有可能更低。 <br /><br /><strong><span style="color: magenta">二十八.如何选择DSP？</span></strong><br />选择DSP可以根据以下几方面决定： <br />1)速度： DSP速度一般用MIPS或FLOPS表示,即百万次/秒钟。根据您对处理速度的要求选择适合的器件。一般选择处理速度不要过高,速度高的DSP,系统实现也较困难。 <br />2)精度： DSP芯片分为定点、浮点处理器,对于运算精度要求很高的处理,可选择浮点处理器。定点处理器也可完成浮点运算,但精度和速度会有影响。 <br />3)寻址空间： 不同系列DSP程序、数据、I/O空间大小不一,与普通MCU不同,DSP在一个指令周期内能完成多个操作,所以DSP的指令效率很高,程序空间一般不会有问题,关键是数据空间是否满足。数据空间的大小可以通过DMA的帮助,借助程序空间扩大。 <br />4)成本： 一般定点DSP的成本会比浮点DSP的要低,速度也较快。要获得低成本的DSP系统,尽量用定点算法,用定点DSP。 <br />5)实现方便： 浮点DSP的结构实现DSP系统较容易,不用考虑寻址空间的问题,指令对C语言支持的效率也较高。 <br />6)内部部件：根据应用要求,选择具有特殊部件的DSP。如：C2000适合于电机控制;OMAP适合于多媒体等。 <br /><br /><strong><span style="color: magenta">二十九.DSP同MCU相比的特点？</span></strong><br />1)DSP的速度比MCU快,主频较高。 <br />2)DSP适合于数据处理,数据处理的指令效率较高。 <br />3)DSP均为16位以上的处理器,不适合于低档的场合。 <br />4)DSP可以同时处理的事件较多,系统级成本有可能较低。 <br />5)DSP的灵活性较好,大多数算法都可以软件实现。 <br />6)DSP的集成度较高,可靠性较好。 <br /><br /><strong><span style="color: magenta">三十.DSP同嵌入CPU相比的特点？</span></strong><br />1)DSP是单片机,构成系统简单。 2)DSP的速度快。 3)DSP的成本较低。 4)DSP的性能高,可以处理较多的任务。 <br /><br /><strong><span style="color: magenta">三十一.如何编写C2000片内Flash？</span></strong><br />DSP中的Flash的编写方法有三中： <br />1.通过仿真器编写：在我们的网页上有相关的软件,在销售仿真器时我们也提供相关软件。其中LF240x的编写可以在CCS中加入一个插件,F24x的编写需要在windows98下的DOS窗中进行。具体步骤见软件中的readme。有几点需要注意： a.必须为MC方式; b.F206的工作频率必须为20MHz; c.F240需要根据PLL修改C240_CFG.I文件。建议外部时钟为20MHz。 d.LF240x也需要根据PLL修改文件。 d.如果编写有问题,可以用BFLWx.BAT修复。 <br />2.提供串口编写：TI的网页上有相关软件。注意只能编写一次,因为编写程序会破坏串口通信程序。 <br />3.在你的程序中编写：TI的网页上有相关资料。 <br /><br /><strong><span style="color: magenta">三十二.如何编写DSP外部的Flash？</span></strong><br />DSP的外部Flash编写方法： <br />1.通过编程器编写：将OUT文件通过HEX转换程序转换为编程器可以接受的格式,再由编程器编写。 <br />2.通过DSP软件编写：您需要根据Flash的说明,编写Flash的编写程序,将应用程序和编写Flash的程序分别load到RAM中,运行编写程序编写。 <br /><br /><strong><span style="color: magenta">三十三.对于C5000,大于48K的程序如何BOOT？</span></strong><br />对于C5000,片内的BOOT程序在上电后将数据区的内容,搬移到程序区的RAM中,因此FLASH必须在RESET后放在数据区。由于C5000,数据区的空间有限,一次BOOT的程序不能对于48K。解决的方法如下： <br />1.在RESET后,将FLASH译码在数据区,RAM放在程序区,片内BOOT程序将程序BOOT到RAM中。 <br />2.用户初试化程序发出一个I/O命令（如XF）,将FLASH译码到程序区的高地址。开放数据区用于其它的RAM。 <br />3.用户初试化程序中包括第二次BOOT程序（此程序必须用户自己编写）,将FLASH中没有BOOT的其它代码搬移到RAM中。 <br />4.开始运行用户处理程序。 <br /><br /><strong><span style="color: magenta">三十四.DSP外接存储器的控制方式</span></strong><br />对于一般的存储器具有RD、WR和CS等控制信号,许多DSP（C3x、C5000）都没有控制信号直接连接存储器,一般采用的方式如下： <br />1.CS有地址线和PS、DS或STRB译码产生; <br />2./RD=/STRB+/R/W; 3./WR=/STRB+R/W。<br /><br /><strong><span style="color: magenta">三十五.GEL文件的功能？</span></strong><br />GEL文件的功能同emuinit.cmd的功能基本相同,用于初始化DSP。但它的功能比emuinit的功能有所增强,GEL在CCS下有一个菜单,可以根据DSP的对象不同,设置不同的初始化程序。以TMS320LF2407为例： <br />#define SCSR1 0x7018 ;定义scsr1寄存器 <br />#define SCSR2 0X7019 ;定义scsr2寄存器 <br />#define WDKEY 0x7025 ;定义wdkey寄存器 <br />#define WDNTR 0x7029 ;定义wdntr寄存器 <br />StartUp() ; 开始函数 <br />&#123; <br />GEL_MapReset(); ; 存储空间复位 GEL_MapAdd(0x0000,0,0x7fff,1,1); 定义程序空间从0000－7fff 可读写 <br />GEL_MapAdd(0x8000,0,0x7000,1,1); 定义程序空间从8000－f000 可读写 <br />GEL_MapAdd(0x0000,1,0x10000,1,1); 定义数据空间从0000－10000可读写 <br />GEL_MapAdd(0xffff,2,1,1,1); 定义i/o 空间0xffff可读写 <br />GEL_MapOn(); 存储空间打开 <br />GEL_MemoryFill(0xffff,2,1,0x40); 在i/o空间添入数值40h <br />*(int *)SCSR1=0x0200; 给scsr1寄存器赋值 <br />*(int *)SCSR2=0x000C; 给scsr2寄存器赋值,在这里可以进行mp/mc方式的转换 <br />*(int *)WDNTR=0x006f; 给wdntr寄存器赋值 <br />*(int *)WDKEY=0x055; 给wdkey寄存器赋值 <br />*(int *)WDKEY=0x0AA; 给wdkey寄存器赋值 <br />&#125; <br /><br /><strong><span style="color: magenta">三十六.使用TI公司模拟器件与DSP结合使用的好处。</span></strong><br />1)在使用TI公司的DSP的同时,使用TI公司的模拟可以和DSP进行无缝连接。器件与器件之间不需要任何的连接或转接器件。这样即减少了板卡的尺寸,也降低了开发难度。 <br />2)同为TI公司的产品,很多器件可以固定搭配使用。少了器件选型的烦恼 <br />3)TI在CCS中提供插件,可以用于DSP和模拟器件的开发,非常方便。 <br /><br /><strong><span style="color: magenta">三十七.C语言中可以嵌套汇编语言？</span></strong><br />可以。在ANSI C标准中的标准用法就是用C语言编写主程序,用汇编语言编写子程序,中断服务程序,一些算法,然后用C语言调用这些汇编程序,这样效率会相对比较高<br /><br /><strong><span style="color: magenta">三十八.在定点DSP系统中可否实现浮点运算？</span></strong><br />当然可以,因为DSP都可以用C,只要是可以使用c语言的场合都可以实现浮点运算。<br /><br /><strong><span style="color: magenta">三十九.JTAG头的使用会遇到哪些情况？</span></strong><br />1)DSP的CLKOUT没有输出,工作不正常。 <br />2)Emu0,Emu1需要上拉。 <br />3)TCK的频率应该为10M。 <br />4)在3.3V DSP中,PD脚为3.3V 供电,但是仿真器上需要5V电压供电,所以PP仿真器盒上需要单独供电。 <br />4)仿真多片DSP。在使用菊花链的时候,第一片DSP的TDO接到第二片DSP的TDI即可。注意当串联DSP比较多的时候,信号线要适当的增加驱动。 <br /><br /><strong><span style="color: magenta">四十.include头文件（.h)的主要作用</span></strong><br />头文件,一般用于定义程序中的函数、参数、变量和一些宏单元,同库函数配合使用。因此,在使用库时,必须用相应的头文件说明。 <br /><strong><span style="color: magenta"><br />四十一.DSP中断向量的位置</span></strong><br />1)2000系列dsp的中断向量只能从0000H处开始。所以在我们调试程序的时候,要把DSP选择为MP（微处理器方式）,把片内的Flash屏蔽掉,免去每次更改程序都要重新烧写Flash工作。 <br />2)3x系列dsp的中断向量也只能在固定的地址。 <br />3)5000,6000系列dsp的中断向量可以重新定位。但是它只能被重新定位到Page0范围内的任何空间。<br /><br /><strong><span style="color: magenta">四十二.有源晶振与晶体的区别,应用范围及用法</span></strong><br />1)晶体需要用DSP片内的振荡器,在datasheet上有建议的连接方法。晶体没有电压的问题,可以适应于任何DSP,建议用晶体。 <br />2)有源晶振不需要DSP的内部振荡器,信号比较稳定。有源晶振用法：一脚悬空,二脚接地,三脚接输出,四脚接电压。<br /><br /><strong><span style="color: #ff00ff">四十三.程序经常跑飞的原因<br /></span></strong>1)程序没有结尾或不是循环的程序。 <br />2)nmi管脚没有上拉。 <br />3)在看门狗动作的时候程序会经常跑飞。 <br />4)程序编制不当也会引起程序跑飞。 <br />5)硬件系统有问题。 <br /><br /><strong><span style="color: magenta">四十四.并行FLASH引导的一点经验</span></strong><br />最近BBS上关于FLASH和BOOT的讨论很活跃,我也多次来此请教。前几天自制的DSP板引导成功,早就打算写写这方面的东西。我用的DSP是5416,以其为核心,做了一个相对独立的子系统（硬件、软件、算法）,目前都已基本做好。 下面把在FLASH引导方面做的工作向大家汇报一下,希望能对大家有所帮助。本人经验和文笔都有限,写的不好请大家谅解。 <br />硬件环境： <br />DSP：TMS320VC5416PGE160 <br />FLASH：SST39VF400A-70-4C-EK 都是贴片的,FLASH映射在DSP数据空间的0x8000-0xFFFF <br />软件环境： CCS v2.12.01 <br />主程序（要烧入FLASH的程序）： DEBUG版,程序占用空间0x28000-0x2FFFF（片内SARAM）,中断向量表在0x0080-0x00FF（片内DARAM）,数据空间使用0x0100-0x7FFF（片内DARAM）。 因为FLASH是贴片的,所以需要自己编一个数据搬移程序,把要主程序搬移到FLASH中。在写入FLASH数据时,还应写入引导表的格式数据。最后在数据空间的0xFFFF处写入引导表的起始地址（这里为0x8000）。 <br />搬移程序： DEBUG版,程序空间0x38000-0x3FFFF（片内SARAM）,中断向量表在0x7800-0x78FF（片内DARAM）,数据空间使用0x5000-0x77FF（片内DARAM）。 搬移程序不能使用与主程序的程序空间和中断向量表重合的物理空间,以免覆盖。 烧写时,同时打开主程序和搬移程序的PROJECT,先LOAD主程序,再LOAD搬移程序,然后执行搬移程序,烧写OK! 附：搬移程序（仅供参考） <br />volatile unsigned int *pTemp=(unsigned int *)0x7e00; unsigned int iFlashAddr; <br />int iLoop; /* 在引导表头存放并行引导关键字 */ <br />iFlashAddr=0x8000; <br />WriteFlash(iFlashAddr,0x10aa); <br />iFlashAddr++; /* 初始化SWWSR值 */ <br />WriteFlash(iFlashAddr,0x7e00); <br />iFlashAddr++; /* 初始化BSCR值 */ <br />WriteFlash(iFlashAddr,0x8006); <br />iFlashAddr++; /* 程序执行的入口地址 */ <br />WriteFlash(iFlashAddr,0x0002); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x8085); <br />iFlashAddr++; /* 程序长度 */ <br />WriteFlash(iFlashAddr,0x7f00); <br />iFlashAddr++; /* 程序要装载到的地址 */ <br />WriteFlash(iFlashAddr,0x0002); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x8000); <br />iFlashAddr++; <br />for (iLoop=0;iLoop&lt;0x7f00;iLoop++) <br />&#123; /* 从程序空间读数据,放到暂存单元 */ <br />asm(&quot; pshm al&quot;); <br />asm(&quot; pshm ah&quot;); <br />asm(&quot; rsbx cpl&quot;); <br />asm(&quot; ld #00fch,dp&quot;); <br />asm(&quot; stm #0000h, ah&quot;); <br />asm(&quot; MVDM _iLoop, al&quot;); <br />asm(&quot; add #2800h,4,a&quot;); <br />asm(&quot; reada 0h&quot;); <br />asm(&quot; popm ah&quot;); <br />asm(&quot; popm al&quot;); <br />asm(&quot; ssbx cpl&quot;); /* 把暂存单元内容写入FLASH */ <br />WriteFlash(iFlashAddr,*pTemp); <br />iFlashAddr++; &#125; /* 中断向量表长度 */ <br />WriteFlash(iFlashAddr,0x0080); <br />iFlashAddr++; /* 中断向量表装载地址 */ <br />WriteFlash(iFlashAddr,0x0000); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x0080); <br />iFlashAddr++; <br />for (iLoop=0;iLoop&lt;0x0080;iLoop++) &#123; /* 从程序空间读数据,放到暂存单元 */ <br />asm(&quot; pshm al&quot;); <br />asm(&quot; pshm ah&quot;); <br />asm(&quot; rsbx cpl&quot;); <br />asm(&quot; ld #00fch,dp&quot;); <br />asm(&quot; stm #0000h, ah&quot;); <br />asm(&quot; MVDM _iLoop, al&quot;); <br />asm(&quot; add #0080h,0,a&quot;); <br />asm(&quot; reada 0h&quot;); <br />asm(&quot; popm ah&quot;); <br />asm(&quot; popm al&quot;); <br />asm(&quot; ssbx cpl&quot;); /* 把暂存单元内容写入FLASH */ <br />WriteFlash(iFlashAddr,*pTemp); <br />iFlashAddr++; <br />&#125; /* 写入引导表结束标志 */ <br />WriteFlash(iFlashAddr,0x0000); <br />iFlashAddr++; <br />WriteFlash(iFlashAddr,0x0000); /* 在数据空间的0xFFFF写入引导表起始地址 */ <br />iFlashAddr=0xffff; <br />WriteFlash(iFlashAddr,0x8000); <br /><br /><strong><span style="color: magenta">四十五.关于LF2407A的FLASH烧写问题的几点说明</span></strong><br />TI现在关于LF24x写入FLASH的工具最新为c2000flashprogsw_v112。可以支持LF2407、LF2407a、LF2401及相关的LF240x系列。建议使用此版本。在<a href="http://focus.ti.com/docs/tool/toolf..." target="_blank">http://focus.ti.com/docs/tool/toolf...</a>灿写松招闯绦颉?/a&gt; 在使用这个工具时注意： <br />一,先解压,再执行setup.exe。 <br /><br />二、进入cc中,在tools图标下有烧写工具; <br />1、关于FLASH时钟的选择,此烧写工具默认最高频率进行FLASH的操作。根据目标系统的工作主频重新要进行PLL设置。方法：先在advance options下面的View Config file中修改倍频。存盘后,在相应的目录下（tic2xx&#92;&#92;algos&#92;&#92;相应目录）运行buildall.bat就可以完成修改了。再进行相应的操作即可。 <br />2、若是你所选的频率不是最高频率,还需要设定你自已的timings.xx来代替系统默认的最高频率的timings.xx。例如LF2407a的默认文件是timings.40。Timings.xx可以利用include&#92;&#92;timings.xls的excel工作表来生成。然后在advance options下面的View Config file中修改相应的位置。存盘后,在相应的目录下运行buildall.bat就可以完成修改了。 <br />3、对于TMS320LF240XA系列,还要注意：由于这些DSP的FLASH具有加密功能,加密地址为程序空间的0x40-0X43H,程序禁止写入此空间,如果写了,此空间的数据被认为是加密位,断电后进入保护FLASH状态,使FLASH不可重新操作,从而使DSP报废,烧写完毕后一定要进行Program passwords的操作,如果不做加密操作就默认最后一次写入加密位的数据作为密码。 <br />4、2407A不能用DOS下的烧写软件烧写,必须用c2000flashprogsw_v112软件烧写; <br />5、建议如下： <br />1)、一般调试时,在RAM中进行; <br />2)、程序烧写时,避开程序空间0x40-0x43H加密区,程序最好小于32k; <br />3)、每次程序烧写完后,将word0,word1,word2,word3分别输入自己的密码,再点击 Program password,如果加密成功,提示Program is arrayed,如果0x40－0x43h中写入的是ffff,认为处于调试状态,flash不会加密; <br />4)、断电后,下次重新烧写时需要往word0～word3输入已设的密码,再unlock,成功后可以重新烧写了; <br />6、VCPP管脚接在＋5V上,是应直接接的,中间不要加电阻。 <br />7、具体事宜请阅读相应目录下的readme1,readme2帮助文件。 <br />8.注意*.cmd文件的编写时应该避开40-43H单元,好多客户由于没有注意到这里而把FALSH加密。 <br /><br /><strong><span style="color: magenta">四十六.如何设置硬件断点？</span></strong><br />在profiler －&gt;profile point -&gt; break point <br /><br /><strong><span style="color: magenta">四十七.c54x的外部中断是电平响应还是沿响应？</span></strong><br />是沿响应,准确的说,它要检测到100(一个clk的高和两个clk的低)的变化才可以。<br /><br /><strong><span style="color: magenta">四十八。参考程序,里面好象都要 disable wachdog,不知道为什么?</span></strong><br />watchdog是一个计数器,溢出时会复位你的DSP,不disable的话,你的系统会动不动就reset。<br /><br /><strong><span style="color: magenta">四十九。DSP系统设计100问</span></strong><br />一、时钟和电源<br />问：DSP的电源设计和时钟设计应该特别注意哪些方面？外接晶振选用有源的好还是无源的好？<br />答：时钟一般使用晶体,电源可用TI的配套电源。外接晶振用无源的好。<br />问：TMS320LF2407的A/D转换精度保证措施。<br />答：参考电源和模拟电源要求干净。<br />问：系统调试时发现纹波太大,主要是哪方面的问题？<br />答：如果是电源纹波大,加大电容滤波。<br />问：请问我用5V供电的有源晶振为DSP提供时钟,是否可以将其用两个电阻进行分压后再接到DSP的时钟输入端,这样做的话,时钟工作是否稳定？<br />答：这样做不好,建议使用晶体。<br />问：一个多DSP电路板的时钟,如何选择比较好？DSP电路板的硬件设计和系统调试时的时序问题？<br />答：建议使用时钟芯片,以保证同步。硬件设计要根据DSP芯片的时序,选择外围芯片,根据时序设定等待和硬件逻辑。<br />二．干扰与板的布局<br />问：器件布局应重点考虑哪些因素？例如在集中抄表系统中？<br />答：可用TMS320VC5402,成本不是很高。器件布局重点应是存贮器与DSP的接口。<br />问：在设计DSP的PCB板时应注意哪些问题？<br />答：1.电源的布置;2.时钟的布置;3.电容的布置;4.终端电路;5.数字同模拟的布置。<br />问：请问DSP在与前向通道(比如说AD)接口的时候,布线过程中要注意哪些问题,以保证AD采样的稳定性？<br />答：模拟地和数字地分开,但在一点接地。<br />问：DSP主板设计的一般步骤是什么？需要特别注意的问题有哪些？<br />答：1.选择芯片;2.设计时序;3.设计PCB。最重要的是时序和布线。<br />问：在硬件设计阶段如何消除信号干扰（包括模拟信号及高频信号）？应该从那些方面着<br />手？<br />答：1.模拟和数字分开;2.多层板;3.电容滤波。<br />问：在电路板的设计上,如何很好的解决静电干扰问题。<br />答：一般情况下,机壳接大地,即能满足要求。特殊情况下,电源输入、数字量输入串接<br />专用的防静电器件。<br />问：DSP板的电磁兼容（EMC）设计应特别注意哪些问题?<br />答：正确处理电源、地平面,高速的、关键的信号在源端串接端接电阻,避免信号反射。<br />问：用电感来隔离模拟电源和数字电源,其电感量如何决定？是由供电电流或噪音要求来<br />决定吗？有没有计算公式？<br />答：电感或磁珠相当于一个低通滤波器,直流电源可以通过,而高频噪声被滤除。所以电<br />感的选择主要决定于电源中高频噪声的成分。<br />问：讲座上的材料多是电源干扰问题,能否介绍板上高频信号布局（Layout）时要注意的<br />问题以及数字信号对模拟信号的影响问题？<br />答：数字信号对模拟信号的干扰主要是串扰,在布局时模拟器件应尽量远离高速数字器件,高速数字信号尽量远离模拟部分,并且应保证它们不穿越模拟地平面。<br />问：能否介绍PCB布线对模拟信号失真和串音的影响,如何降低和克服？<br />答：有2个方面,1. 模拟信号与模拟信号之间的干扰：布线时模拟信号尽量走粗一些,如果有条件,2个模拟信号之间用地线间隔。2. 数字信号对模拟信号的干扰：数字信号尽量远离模拟信号,数字信号不能穿越模拟地。<br />三．DSP性能<br />问：1.我要设计生物图像处理系统,选用那种型号较好（高性能和低价格）？2.如果选定<br />TI DSP,需要什么开发工具？<br />答：1.你可采用C54x 或 C55x平台,如果你需要更高性能的,可采用C6x系列。2.需要EVM<br />s和XDS510仿真器。<br />问：请介绍一种专门用于快速富利叶变换（FFT）, 数字滤波,卷积,相关等算法的DSP,<br />最好集成12bit以上的ADC功能。<br />答：如果你的系统是马达/能量控制的,我建议你用TMS320LF240x。详情请参阅DSP选择指南：<a href="http://www.dspvillage.ti.com/dspguide" target="_blank">http://www.dspvillage.ti.com/dspguide</a>。<br />问：有些资料说DSP比单片机好,但单片机用的比DSP广。请问这两个在使用上有何区别？<br />答：单片机一般用于要求低的场合,如4/8位的单片机。DSP适合于要求较高的场合。<br />问：我想了解在信号处理方面DSP比FPGA的优点。<br />答：DSP是通用的信号处理器,用软件实现数据处理;FPGA用硬件实现数据处理。DSP的成本便宜,算法灵活,功能强;FPGA的实时性好,成本较高。<br />问：请问减小电路功耗的主要途径有哪些？<br />答：1.选择低功耗的芯片;2.减少芯片的数量;3.尽量使用IDLE。<br />问：用C55设计一个低功耗图像压缩/解压和无线传输的产品,同时双向传输遥控指令和其<br />他信息,要求图像30帧/秒,TFT显示320*240,不知道能否实现？若能,怎样确定性能？选择周边元器件？确定最小的传输速率？能否提供开发的解决方案？软件核？<br />答：1.有可能,要看你的算法。2.建议先在模拟器上模拟。<br />问：用DSP开发MP3,比较专用MP3解码芯片如何,比如成本、难度、周期？谢谢。<br />答：1.DSP的功能强,可以实现附加的功能,如ebook等;2.DSP的性能价格比高;3.难度较大,需要算法,因此周期较长,但TI有现成的方案。<br />问：用DSP开发的系统跟用普通单片机开发的系统相比,有何优势？DSP一般适用于开发什么样的系统？其开发周期、资金投入、开发成本如何？与DSP的接口电路是否还得用专门的芯片？<br />答：1.性能高;2.适合于速度要求高的场合;3.开发周期一般6个月,投入一般要一万元左<br />右;4.不一定,但需要速度较高的芯片。<br />问：DSP会对原来的模拟电路产生什么样的影响？<br />答：一方面DSP用数字处理的方法可以代替原来用模拟电路实现的一些功能;另一方面,DSP的高速性对模拟电路产生较大的干扰,设计时应尽量使DSP远离模拟电路部分。<br />问：请问支持MPEG-4芯片型号是什么？<br />答：C55x或 C6000 或DSC2x<br />问：DSP内的计算速度是快的,但是它的I/O口的交换速度有多快呢？<br />答：主频的1/4左右。<br />四．技术性问题<br />问：我有二个关于C2000的问题：1、C240或C2407的RS复位引脚既可输入,也可输出,直接用CMOS门电路（如74ACT04）驱动是否合适,还是应该用OC门（集电极开路）驱动？2、大程序有时运行异常,但加一两条空指令就正常,是何原因？<br />答：1、OC门（集电极开路）驱动。2、是流水线的问题。<br />问：1.DSP芯片内是否有单个的随机函数指令？2．DSP内的计算速度是快的,但是它的I/O<br />口的交换速度有多快呢？SP如何配合EPLD或FPGA工作呢？<br />答：1.没有。2.取决于你所用的I/O。对于HPI,传输速率（字节）大约为CPU的1/4,对McBSP,位速率（kbps）大约为CPU的1/2。3.你可以级联仿真接口和一个EPLD/FPGA在一起。请参考下面的应用手册： <a href="http://www.ti.com/sc/docs/psheets/abstract/apps/spra439a.htm" target="_blank">http://www.ti.com/sc/docs/psheets/abstract/apps/spra439a.htm</a><br />问：设计DSP系统时,我用C6000系列。DSP引脚的要上拉,或者下拉的原则是怎样的？我经常在设计时为某一管脚是否要设置上/下拉电阻而犹豫不定。<br />答：C6000系列的输入引脚内部一般都有弱的上拉或者下拉电阻,一般不需要考虑外部加上<br />拉或者下拉电阻,特殊情况根据需要配置。<br />问：我正在使用TMS320VC5402,通过HPI下载代码,但C5402的内部只提供16K字的存储区,请问我能通过HPI把代码下载到它的外部扩展存储区运行吗？<br />答：不行,只能下载到片内。<br />问：电路中用到DSP,有时当复位信号为低时,电压也属于正常范围,但DSP加载程序不成功。电流也偏大,有时时钟也有输出。不知为什么？<br />答：复位时无法加载程序。<br />问：DSP和单片机相连组成主从系统时,需要注意哪些问题？<br />答：建议使用HPI接口,或者通过DPRAM连接。<br />问：原来的DSP的程序需放在EPROM中,但EPROM的速度难以和DSP匹配。现在是如何解决此问题的？<br />答：用BootLoad方法解决。<br />问：我在使用5402DSK时,一上电,不接MIC,只接耳机,不运行任何程序,耳机中有比较明显的一定频率的噪声出现。有时上电后没有出现,但接MIC,运行范例中的CODEC程序时,又会出现这种噪声。上述情况通常都在DSK工作一段时间后自动消失。我在DSP论坛上发现别人用DSK时也碰到过这种情况,我自己参照5402DSK做了一块板,所用器件基本一样,也是这现象,请问怎么回事？如何解决？<br />答：开始时没有有效的程序代码,所以上电后是随机状态,出现这种情况是正常的。<br />问：我使用的是TMS320LF2407,但是仿真时不能保证每次都能GO MAIN。我想详细咨询一下,CMD文件的设置用法,还有VECTOR的定义。<br />答：可能看门狗有问题,关掉看门狗。有关CMD文件配置请参考《汇编语言工具》第二章。<br />问：我设计的TMS320VC5402板子在调试软件时会经常出现存储器错误报告,排除是映射的问题,是不是板子不稳定的因素？还是DSP工作不正常的问题？如何判别？<br />答：你可以利用Memoryfill功能,填入一些数值,然后刷新一下,看是不是在变,如果是<br />在变化,则Memory 是有问题。<br />问：如何解决Flash编程的问题:可不可以先用仿真器下载到外程序存储RAM中,然后程序代码将程序代码自己从外程序存储RAM写到F240的内部Flash ROM中,如何写?<br />答：如果你用F240,你可以用下载TI做的工具。其它的可以这样做。<br />问：C5510芯片如何接入E1信号？在接入时有什么需要注意的地方？<br />答：通过McBSP同步串口接入。注意信号电平必须满足要求。<br />问：请问如何通过仿真器把.HEX程序直接烧到FLASH中去?所用DSP为5402是否需要自己另外编写一个烧写程序, 如何实现?谢谢!!<br />答：直接写.OUT。是DSP中写一段程序,把主程序写到FLASH中。<br />问：DSP的硬件设计和其他的电路板有什么不同的地方？<br />答：1.要考虑时序要求;2.要考虑EMI的要求;3.要考虑高速的要求;4.要考虑电源的要求。<br />问：ADS7811,ADS7815,ADS8320,ADS8325,ADS8341,ADS8343,ADS8344,ADS8345中,哪个可以较方便地与VC33连接,完成10个模拟信号的AD转换（要求16bit,1毫秒内完成10个信号的采样,当然也要考虑价格）？<br />答：作选择有下列几点需要考虑1. 总的采样率：1ms、10个通道,总采样率为100K ,所有A/D均能满足要求。2. A/D与VC33的接口类型：并行、串行。前2种A/D为并行接口,后几种均为串行接口。3. 接口电平的匹配。前2种A/D为5V电平,与VC33不能接口;后几种均可为3.3V电平,可与VC33直接接口。<br />问：DSP的电路板有时调试成功率低于50%,连接和底板均无问题,如何解决？有时DSP同CPLD产生不明原因的冲突,如何避免？<br />答：看来你的硬件设计可能有问题,不应该这么小的成功率。我们的板的成功率为95%以上。<br />问：我们的工程有两人参与开发,由于事先没有考虑周全,一人使用的是助记符方式编写<br />汇编代码,另一人使用的是代数符号方式编写汇编代码,请问CCS5000中这二种编写方式如何嵌在一起调试？<br />答：我没有这样用过,我想可以用下面的办法解决：将一种方式的程序先单独编译为.obj<br />文件,在创建工程时,将这些.obj文件和另一种方式的程序一起加进工程中,二者即可一<br />起编译调试了。<br />问：DSP数据缓冲,能否用SDRAM代替FIFO？<br />答：不行<br />问：ADC或DAC和DSP相连接时,要注意什么问题？比如匹配问题,以保证A/D采样稳定或D/A码不丢失。<br />答：1. 接口方式：并行／串行;2. 接口电平,必须保证二者一致。<br />问：用F240经常发生外部中断丢失现象,甚至在实际环境中只有在程序刚开始时能产生中<br />断,几分钟后就不能产生中断。有时只能采取查询的方式,请问有何有效的解决方法？改<br />为F2407是不是要好些？<br />答：应该同DSP无关。建议你将中断服务程序简化看一下。 <br /><strong><span style="color: magenta"><br />四十九.时钟电路选择原则</span></strong><br />1,系统中要求多个不同频率的时钟信号时,首选可编程时钟芯片; <br />2,单一时钟信号时,选择晶体时钟电路; <br />3,多个同频时钟信号时,选择晶振; <br />4,尽量使用DSP片内的PLL,降低片外时钟频率,提高系统的稳定性; <br />5,C6000、C5510、C5409A、C5416、C5420、C5421和C5441等DSP片内无振荡电路,不能用晶体时钟电路; <br />6,VC5401、VC5402、VC5409和F281x等DSP时钟信号的电平为1.8V,建议采用晶体时钟电路 <br /><br /><strong><span style="color: magenta">五十.C程序的代码和数据如何定位</span></strong><br />1,系统定义: <br />.cinit 存放C程序中的变量初值和常量; <br />.const 存放C程序中的字符常量、浮点常量和用const声明的常量; <br />tch 存放C程序tch语句的跳针表; <br />.text 存放C程序的代码; <br />.bss 为C程序中的全局和静态变量保留存储空间; <br />.far 为C程序中用far声明的全局和静态变量保留空间; <br />.stack 为C程序系统堆栈保留存储空间,用于保存返回地址、函数间的参数传递、存储局部变量和保存中间结果; <br />.sysmem 用于C程序中malloc、calloc和realloc函数动态分配存储空间 <br />2,用户定义: <br />#pragma CODE_SECTION (symbol, &quot;section name&quot;); <br />#pragma DATA_SECTION (symbol, &quot;section name&quot;) <br /><br /><strong><span style="color: magenta">五十一.cmd文件</span></strong><br />由3部分组成： <br />1)输入／输出定义：.obj文件：链接器要链接的目标文件;.lib文件：链接器要链接的库文件;.map文件：链接器生成的交叉索引文件;.out文件：链接器生成的可执行代码;链接器选项 <br />2)MEMORY命令：描述系统实际的硬件资源 <br />3)SECTIONS命令：描述&quot;段&quot;如何定位 <br /><br /><strong><span style="color: magenta">五十二.为什么要设计CSL?</span></strong><br />1,DSP片上外设种类及其应用日趋复杂 <br />2,提供一组标准的方法用于访问和控制片上外设 <br />3,免除用户编写配置和控制片上外设所必需的定义和代码 <br /><br /><strong><span style="color: magenta">五十三.什么是CSL?</span></strong><br />1,用于配置、控制和管理DSP片上外设 <br />2,已为C6000和C5000系列DSP设计了各自的CSL库 <br />3,CSL库函数大多数是用C语言编写的,并已对代码的大小和速度进行了优化 <br />4,CSL库是可裁剪的：即只有被使用的CSL模块才会包含进应用程序中 <br />5,CSL库是可扩展的：每个片上外设的API相互独立,增加新的API,对其他片上外设没有影响 <br /><br /><strong><span style="color: magenta">五十四.CSL的特点</span></strong><br />1,片上外设编程的标准协议：定义一组标准的APIs：函数、数据类型、宏; <br />2,对硬件进行抽象,提取符号化的片上外设描述:定义一组宏,用于访问和建立寄存器及其域值 <br />3,基本的资源管理:对多资源的片上外设进行管理; <br />4,已集成到DSP/BIOS中:通过图形用户接口GUI对CSL进行配置; <br />5,使片上外设容易使用:缩短开发时间,增加可移植. <br /><br /><strong><span style="color: magenta">五十五.为什么需要电平变换?</span></strong><br />1)DSP系统中难免存在5V/3.3V混合供电现象; <br />2)I/O为3.3V供电的DSP,其输入信号电平不允许超过电源电压3.3V; <br />3)5V器件输出信号高电平可达4.4V; <br />4)长时间超常工作会损坏DSP器件; <br />5)输出信号电平一般无需变换 <br /><br /><strong><span style="color: magenta">五十六.电平变换的方法</span></strong><br />1,总线收发器（Bus Transceiver）： <br />常用器件： SN74LVTH245A（8位）、SN74LVTH16245A（16位） <br />特点：3.3V供电,需进行方向控制, <br />延迟：3.5ns,驱动：-32/64mA, <br />输入容限：5V <br />应用：数据、地址和控制总线的驱动 <br />2,总线开关（Bustch） <br />常用器件：SN74CBTD3384（10位）、SN74CBTD16210（20位） <br />特点：5V供电,无需方向控制 <br />延迟：0.25ns,驱动能力不增加 <br />应用：适用于信号方向灵活、且负载单一的应用,如McBSP等外设信号的电平变换 <br />3,2选1切换器（1 of 2 Multiplexer） <br />常用器件：SN74CBT3257（4位）、SN74CBT16292（12位） <br />特点：实现2选1,5V供电,无需方向控制 <br />延迟：0.25ns,驱动能力不增加 <br />应用：适用于多路切换信号、且要进行电平变换的应用,如双路复用的McBSP <br />4,CPLD <br />3.3V供电,但输入容限为5V,并且延迟较大：＞7ns,适用于少量的对延迟要求不高的输入信号 <br />5,电阻分压 <br />10K&Omega;和20K&Omega;串联分压,5V&times;20&divide;（10＋20）&asymp;3.3V <br /><br /><strong><span style="color: magenta">五十七.未用的输入／输出引脚的处理</span></strong><br />1,未用的输入引脚不能悬空不接,而应将它们上拉活下拉为固定的电平 <br />1)关键的控制输入引脚,如Ready、Hold等,应固定接为适当的状态,Ready引脚应固定接为有效状态,Hold引脚应固定接为无效状态 <br />2)无连接（NC）和保留（RSV）引脚,NC 引脚：除非特殊说明,这些引脚悬空不接,RSV引脚：应根据数据手册具体决定接还是不接 <br />3)非关键的输入引脚,将它们上拉或下拉为固定的电平,以降低功耗 <br />2,未用的输出引脚可以悬空不接 <br />3,未用的I/O引脚:如果确省状态为输入引脚,则作为非关键的输入引脚处理,上拉或下拉为固定的电平;如果确省状态为输出引脚,则可以悬空不接<br />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?918</link>
<title><![CDATA[DSP基础知识集锦之六 当前DSP产品的主要特点 ]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:37:21 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?918</guid> 
<description>
<![CDATA[ 
	为了适应数字信号处理的需要，当前的DSP都设置了硬件乘法／累加器、大都能在半个指令周期内完成乘法／累加运算。当前的水平已达到每秒数千万次乃至数十亿次定点运算或浮点运算的速度。<br />&nbsp; &nbsp; 为了满足FFT、卷积等数字信号处理的特殊要求，当前的DSP大多在指令系统中设置了&ldquo;循环寻址&rdquo;(Circular addressing)及&ldquo;位倒序&rdquo;(bit-reversed)指令和其他特殊指令，使得在作这些运算时寻址、排序及计算速度大大提高。单片DSP作1024点复数FFT所得时间已降到微秒量级。<br />&nbsp; &nbsp; 高速数据传输能力是DSP作高速实时处理的关键之一。新型的DSP大多设置了单独的DMA总线及其控制器，在不影响或基本不影响DSP处理速度的情况下，作并行的数据传送，传送速率可以达到每秒数百兆字节、主要受到片外存储器速度的限制。<br />&nbsp; &nbsp; 随着应用的日益广泛，DSP已经成为了许多高级设计不可或缺的组成部分。其结果，使DSP厂商的投资集小于DSP体系结构、智能化程度更高的编译程序、更好的查错工具、以及更多的支持软件。<br />&nbsp; &nbsp; 最明显的结构改进在于提高&ldquo;并行性&rdquo;，即在一个指令周期内，DSP所能完成的操作的数量。一个突出例子是德克萨斯仪器公司(T1)1997年推出的带有8个功能单元，使用超长指令字(VLIW，Very Long Instruction Word)的DSP TMS320C6x，其结构如下图所示。这种32bit定点运算DSP在每个周期内可以完成8个操作，其运算速度达到了每秒执行20亿条指令(2000MIPS)；如果片外存储器能够支持，其DMA的数据传输能力可以达到每秒800MByte。 <br />&nbsp; &nbsp; 尽管当前的DSP已达到较高的水平，但在一些实时性要求很高的场合，单片DSP的处理和能力还不能满足要求。因而，多处理器系统就成为提高应用性能的重要途径之一。许多算法，例如数字滤波、FFT、矩阵运算等，都包含有建立和-积形式的数列,或者是对矩阵一类规则结构作有序处理。在许多情况下，都可以将算法分解为若干级，用串行或并行来加快处理速度。因此，新型DSP的发展方向，是在提高单片DSP性能的同时，十分注重在结构设计上为多处理器的应用提供方便。例如，TI的TMS320C40，设置了6个8bit的通信口，既可以作级联，也可以作并行连接。每个口都有DMA能力。这就是专门为多处理器应用而设计的。<br />&nbsp; &nbsp; DSP系统设计和软件开发是一个重要而困难的问题，往往需要相当规模的仿真调试系统，包括在线仿真器、许多电缆、逻辑分析仪以及其他的测试设备。在多处理器系统中、这个问题尤为突出。为了方便用户的设计与调试，许多DSP在片上设置了仿真模块或仿真调试接口。&nbsp; &nbsp;<br />&nbsp;&nbsp;Motorola在其DSP片上设置了一个onCE(on-Chip Emulation)功能块，用特定的电路和引脚，使用户可以检查片内的寄存器、存储器及外设，用单步运行、设置断点、跟踪等方式控制与调试程序。<br />&nbsp; &nbsp; TI则在其TMS320系列芯片上设置了符合IEEE1149标准JTAG(Joint Test Action Group)标准测试接口及相应的控制器，从而不但能控制和观察多处理器系统中每一个处理器的运行，测试每一块芯片，还可以用这个接口来装入程序。在PC机上插入一块调试插板，接通JTAG接口，就可以在PC上运行一个软件去控制它。PC机上有多个窗口显示，每个窗口观察多个处理器中的一个，这就极大地简化了多处理器系统开发的复杂性。在TMS320中，和JTAG测试口同时工作的还有一个分析模块，它支持断点的设置和程序存储器、数据存储器、DMA的访问、程序的单步运行和跟踪，以及程序的分支和外部中断的计数等。<br />&nbsp; &nbsp; DSP的处理速度越来越高，功能越来越强，但随之而付出的代价是功耗也越来越大。而且，随着钟频的提高，功耗急速加大。尽管生产厂家几乎没有例外地都采用了CMOS工艺等技术手段来降低功耗，但有的单片DSP的功耗已达10w以上。随着DSP的大量使用，特别是在用电池供电的便携式设备中的大量使用，例如便携式计算机、移动通信设备和便携式测试仪器等，迫切要求DSP在保持与提高工作性能的同时，降低工作电压，减小功耗。为此，各DSP生产厂家正积极研制并陆续推出低电压片种。在降低功耗方面，有的片种设置了IDLE或WAIT状态，在等待中断到来期间，片内除时钟和外设以外的电路都停止工作；有的片种设置了STOP状态，它比WAlT状态更进一步，连内部时钟也停止工作，但保留了堆栈和外设的状态。总之，低工作电压和低功耗已成为DSP性能表征的重要技术指标之一。<br />&nbsp; &nbsp; 随着专用集成电路(ASIC，Application Specific Integrated Circuit)的广泛使用，迫切要求将DSP的功能集成到ASlC中。例如，在磁盘／光盘驱动器、调制解调器(Modem)、移动通信设备和个人数字助理(PDA，Personal Digital Assistant)等应用中，这种要求来得相当突出。为了顺应这种发展并更加深入地开拓DSP市场，各DSP生产厂家相继提出了DSP核(DSP core)的概念并推出了相应的产品。一般说来，DSP核是通用DSP器件中的CPU部分，再配以按照客户的需要所选择的存储器(包括Cache、RAM；ROM、flash、EPROM等以及固化的用户软件)和外设(包括串口、并口、主机接口、DMA、定时器等)，组成用户的ASIC。DSP核概念的提出与技术的发展，使用户得以将自己的设计，通过DSP厂家的专业技术来加以实现，从而提高ASlC的水准，并大大缩短产品的上市时间。DSP核的一个典型的应用是U．S．Robotis公司利用TI的DSP核技术所开发的X2芯片，最早成功地将56kbps的Modem推向了市场。除开TI公司的TMS320系列DSP核之外，Motorola公司的DSP66xx系列和AD公司的ADSP21000系列等，也都是得到成功应用的DSP核。<br />&nbsp; &nbsp; 在DSP硬件结构和性能不断改善的同时、其开发环境和支持软件，也得到了迅速的发展与不断的完善。&nbsp; &nbsp;<br />&nbsp; &nbsp; 各公司出品的DSP都有各自的汇编语言指令系统。使用汇编语言来编制DSP应用软件是一件繁琐与困难的工作。随着DSP处理速度的加快与功能的增强，其寻址空间越来越大，目标程序的规模也越来越大，从而使得用高级语言来对DSP编程成为必须而且紧迫的任务。各公司陆续推出厂适用于DSP的高级语言编译器，主要是C语言编译器，也有Ada，Pascal等编译器。它们能将高级语言编写的程序，编译成相应的DSP汇编源程序。程序员可在这里对DSP源程序作修改与优化，尤其是对实时处理要求很苛刻的部分作优化，然后汇编与连接，成为DSP的目标代码。<br />&nbsp; &nbsp; 在应用软件开发与调试环境方面，除开传统的，在硬件或软件仿真器上用Debug来调试之外，各厂家陆续推出厂一些针对DSP的操作系统(例如TI的Code Composer/Code Composer Studio)。<br />&nbsp; &nbsp; 这些操作系统运行在IBM-PC或其他的主机上为DSP应用软件的开发提供良好的集成开发环境:用C语言等高级语言编写的程序的调试，用针对DSP的C语言等编译器将其编译成相应的DSP汇编源程序，进一步的修改、调试与检查，最后汇编与连接成DSP可执行目标代码。这些操作系统的适用范围正在扩大。<br />&nbsp; &nbsp; DSP的生产厂家和一些其他的软件公司，为DSP应用软件的开发准备了一些适用的函数库与软件工具包，如针对数字滤波器和各种数字信号处理算法的子程序。以及各种接口程序等。这些经过优化的子程序为用户提供了极大的方便。<br />&nbsp; &nbsp; 随着专用集成电路(ASIC)技术的发展和DSP应用范围的迅速扩大，一些EDA公司也将DSP的硬件和软件的开发纳入了EDA工作站的工作范畴，陆续推出了一些大型软件包，为用户自行设计所需要的DSP芯片和软件提供了更为良好的环境。
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?917</link>
<title><![CDATA[DSP基础知识集锦之五 数字信号处理的方方面面 ]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:36:38 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?917</guid> 
<description>
<![CDATA[ 
	数字信号处理器(DSP)主要针对代表连续信号的数字进行数学运算，以得到相应的处理结果。这种数学运算是以快速叶变换(FFT)为基础，对数字信号进行实时处理。近二十年来，由于集成电路技术的高速发展，使得用硬件来实现各种数字滤波和快速傅立叶变换成为可能，从而使DSP得到了极其迅速的发展和广泛的应用。在数字化的世界和互联网的时代，DSP变得越来越重要，可以说是无处不在。 <br /><br />　　DSP最基本的特征是： <br />　　1）能够在一个指令周期内实现一次或多次乘法累加（MAC）运算。所以，在DSP中集成了多个乘法累加运算单元，可以进行并行乘法累加运算。 <br /><br />　　2）能够在一个指令周期内完成对存储器的多次读取。所以，在DSP中集成了多个片内总线和多端口片内存储器。 <br /><br />　　3）为了加快处理器中的运算，在DSP中集成了多个地址产生单元，以支持循环寻址和位翻转寻址。 <br /><br />　　4）处理器中的运算大多是重复的运算，为了方便使用，大部分DSP都支持这种重复运算，而不用额外编写重复运算的指令。 <br /><br />　　5）大部分DSP都提供多个串行或并行I/O接口，以及特别I/O接口来处理特殊的数据，以降低成本和提高输出/输入性能。 <br /><br />　　虽然应用于不同领域的DSP有不同的型号，但其内部结构大同小异，都具有哈佛（Harvard）结构的特征。它包括处理器内核，指令缓冲器，数据存储器和程序存储器，I/O接口控制器，程序地址总线和程序数据总线，直接读取的地址总线和数据总线等单元，其中最核心的是处理器内核。它的性能好坏直接决定了DSP的性能和使用范围。Analog Device公司的TigerSHARC处理器内核就具有典型的哈佛结构特征。它于1998年10月问世，具有特大指令字组（VLIW）的结构，一个周期可执行四条32位指令，可以工作于多种数据宽度，支持定点和浮点两种格式, 支持两种单指令多重数据(SIMD)运算，一个周期可执行四条16x16位定点乘法，支持六种不同的数据：（8位，16位，32位，64位）定点、32位IEEE-754浮点和40位扩展精度浮点。有此处理器内核的ADSP-TSOxx可广泛应用于通信工业，如无线基站，VoN/VoP集线器，线缆调制解调器，xDSL，数据加密，3G无线等以及高性能信号处理市场如图像、CAT扫描、MRI、超声波、雷达和声呐等特别适合需要多处理器的领域。 <br /><br />　　比较箸名的处理器内核还有： <br />　　1）TI公司 的T320C2xLP 是16位 定点DSP 内核。它有544x16位双读写RAM,可在一个指令周期进行读和写的运算，使得数据存储器带宽达到80个16位百万字／秒。 <br /><br />　　2）Infineon公司的Carmel是16位定点DSP内核,1998年上市。它有两组特大指令字组（VLIW），可以同时执行两条预先设定的指令组和用户自定义的可配置长指令组（CLIW），该指令组可有六条指令。它可应用于无线通信、xDSL、机顶盒和互联网等领域。 <br /><br />　　3）LSI Logic公司的ZSP DSP Core为软件工程师、系统设计师和ASIC开发人员提供了一种开发高性能可编程DSP的方法。它可以提供64K字的程序和数据存储器，支持片内指令和数据缓冲，于1998年问世。它采用基于16位定点的RISC超标量内核结构，支持双精度（32位）和单精度（16位）运算。ZSP Core有一条16位定点数据通路，而数据通路有16个通用寄存器组成，其中包括两个16位运算单元和一个乘法累加单元。它还有一个流水控制单元，负责提取指令和控制程序流程和两个地址产生单元和指令及数据单元。外围元件很容易和ZSP内核接口,从而构成复杂的系统。它在2.5V时工作在200MHz，可应用于通信设备如调制解调器、互联网网关和移动电话基站等。 <br /><br />　　4）Motorola和Lucent共同开发的StarCore SC140是16位定点VLIW　DSP内核，可工作在300MHz，1999年4月推出。它是第一个低功耗高性能具有特大指令字组（VLIW）的结构的DSP内核。SC140有四条16位数据通路，每一条有一个组合的ALU／MAC位资料栏单元（BFU），每一个BFU包含40位柱式移位器。所有的数据通路是相同的，共享一组16个40位源和目的寄存器，可以在一个周期内进行16x16位的乘法或利用四条数据通路并行进行四次乘法。SC140的VLIW结构能并行执行六条指令。 <br />　　SC140有两条32位地址总线和两条64位数据总线，用来传输数据。128位程序总线能在一个周期内检索八条16位指令。 SC140内核提供地址产生单元（AGU），但是不包括外围元件。Lucent 和Motorola公司在以SC140为内核的数字信号处理器MSC8101中集成了外围元件，包括通信处理模块（CPM）、Power PC总线接口、可编程存储器控制器、控制器、增强滤波器协处理器和16位并行主端口，功能十分强大。 <br /><br />　　如何选择数字信号处理器 <br />　　与CPU不同，DSP种类如此众多。作为一个用户，如何选择数字信号处理器？根椐资料的介绍，有以下几条原则，综述如下： <br /><br />　　1）算法格式　定点算法动态范围较小，如16位的定点算法，动态范围只有96dB，容易出现溢出问题，但是成本低，功耗低。所以大多数的数字信号处理器都是定点的，约占67%。浮点算法动态范围较大，如32位的浮点算法，动态范围有1536dB，处理速度大大高于定点的，总线宽度也比定点的宽，容易编程，但是成本较高，功耗也较大。浮点数字信号处理器大都用在高档产品上。 <br /><br />　　2）数据宽度　所有的浮点DSP都是32位宽度的，而定点DSP大多数是16位宽度的，也有24位的，如Motorola的DSP563xx系列；而Zoran 公司的ZR3800系列，则是20位的。数据宽度直接影响到DSP芯片的大小、封装管脚的数量和外围存储器的容量，因此也直接影响到DSP的成本。 <br /><br />　　3）速度　速度是选用DSP最重要的考虑因素。DSP的速度通常是指令周期的时间，也有指进行核心功能如FIR或 IIR滤波器的运算时间。有些DSP采用特大指令字组（VLIW）的结构，在一个周期内可执行多条指令。它和时钟的工作频率有密切关系。 <br /><br />　　4）存储器结构　存储器结构，包括总线结构对DSP的性能有很大的影响。一方面，在进行运算时如何读取数据和指令，不同的方法有不同的速度。在一个指令周期内读取一条指令和两条数据以便进行快速MAC运算。这种结构可以是多端口存储器、指令和数据分离存储器或指令缓冲器。另一方面，存储器结构也包括片内和片外支持的存储器的大小。大多数定点DSP瞄准嵌入式系统市场，因此它的存储器较小。而一些浮点DSP虽然片内存储器很小，但是需要很大外围的存储器，如TI公司的TMS320C30。 <br /><br />　　5）功耗　很多DSP用在手提式设备中，如手机、PDA、手提式声音播放机等。功耗是这些产品主要考虑的一个问题。很多处理器供应商降低工作电压，比如3.3V、2.5V、 1.8V, 同时增加电源电压管理功能，比如增加&quot;睡眠模式，在不用时切断大部分电源和不用的外围设备，以降低能量消耗。 <br /><br />　　6）编程容易　DSP的应用对象主要是工程技术人员和工程师。早期的数字信号处理器使用汇编语言来编程，后来的产品可以用C语言来编写，但是要经过C编译器编译成汇编语言源程序，进行优化，以减少运算时间。数字信号处理器供应商一般都提供开发工具。但是不同公司的DSP产品在软件编程方面有很大不同。所以用户应该选用自己比较熟悉的开发工具。这些工具包括软件工具，如汇编语言程序、连接器、仿真器、调试器、编译器、代码库、实时操作系统等; 硬件工具如开发板、仿真器等。一般来讲，高级语言编译器较适用于浮点处理器。 <br /><br />　　7）性能价格比　成本在大量生产时也是一个重要的考虑因素。器件封装对芯片的成本也有影响，柵格阵列（PGA）封装比塑料封装PQFP和TQEP要贵。 <br /><br />　　8）是否支持多处理器　在要求运算速度特别快的地方，可以应用多个处理器并行工作。这时，各个处理器的内部连接可能是一个重要的问题。Analog Devices公司的ADSP-2106x提供特殊用途的硬件，有双向地址总线和数据总线，和六条双向总线相配合，很容易把多达六个处理器通过共同的外部总线连接成一个系统。
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?916</link>
<title><![CDATA[DSP基础知识集锦之四 数字信号处理 ]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:36:08 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?916</guid> 
<description>
<![CDATA[ 
	数字信号处理（DSP）是一门涉及许多学科而又广泛应用于许多领域的新兴学科。在通常的实时信号处理中，它具有可程控、可预见性、精度高、稳定性好、可靠性和可重复性好、易于实现自适应算法、大规模集成等优点，这都是模拟系统所不及的。 <br />DSP的发展大致分为三个阶段： <br />&nbsp;&nbsp;<br />&nbsp; &nbsp;在数字信号处理技术发展的初期（二十世纪 50～60年代），人们只能在微处理器上完成数字信号的处理。直到70年代，有人才提出了DSP的理论和算法基础。一般认为，世界上第一个单片 DSP 芯片应当是1978年AMI公司发布的S2811。1979年美国Intel公司发布的商用可编程器件2920是DSP 芯片的一个主要里程碑。这两种芯片内部都没有现代DSP芯片所必须有的单周期乘法器。1980 年，日本 NEC 公司推出的mP D7720是第一个具有硬件乘法器的商用 DSP 芯片，从而被认为是第一块单片DSP器件。 <br /><br />&nbsp;&nbsp;随着大规模集成电路技术的发展，1982年美国德州仪器公司推出世界上第一代DSP芯片TMS32010及其系列产品，标志着实时数字信号处理领域的重大突破。TI公司之后不久相继推出了第二代DSP芯片TMS32020、TMS320C25/C26/C28、第三代DSP芯片TMS320C30/C31/C32。90年代DSP发展最快，TI公司相继推出第四代DSP芯片 TMS320C40/C44、第五代DSP芯片TMS320C5X/C54X、第二代DSP芯片的改进型TMS320C2XX、集多片DSP芯片于一体的高性能DSP芯片TMS320C8X以及目前速度最快的第六代DSP芯片 TMS320C62X/C67X等。 <br /><br />&nbsp;&nbsp;随着CMOS技术的进步与发展，日本的Hitachi 公司在1982年推出第一个基于CMOS工艺的浮点DSP芯片，1983年日本Fujitsu公司推出的 MB8764，其指令周期为120ns，且具有双内部总线，从而使处理吞吐量发生了一个大的飞跃。而第一个高性能浮点DSP芯片应是AT&amp;T公司于1984年推出的DSP32。 <br /><br />&nbsp;&nbsp;与其他公司相比，Motorola公司在推出 DSP 芯片方面相对较晚。1986年，该公司推出了定点处理器MC56001。1990年，推出了与IEEE浮点格式兼容的浮点DSP芯片MC96002。 <br /><br />&nbsp;&nbsp;美国模拟器件公司（AD）在DSP芯片市场上也占有一定的份额，相继推出了一系列具有自己特点的DSP芯片，其定点DSP芯片有ADSP2101/2103/ 2105、ASDP2111/2115、ADSP2161/2162/2164以及ADSP2171/2181，浮点DSP芯片有ADSP21000/ 21020、ADSP21060/21062等。 <br /><br />&nbsp;&nbsp;自1980年以来，DSP芯片得到了突飞猛进的发展，DSP芯片的应用越来越广泛，并逐渐成为电子产品更新换代的决定因素。从运算速度来看， MAC（一次乘法和一次加法）时间已经从20世纪80年代初的400ns（如TMS32010）降低到10ns以下（如TMS320C54X、TMS320C62X/67X等），处理能力提高了几十倍。DSP芯片内部关键的乘法器部件从1980年占模片区（die area）的40%左右下降到5%以下，片内RAM数量增加一个数量级以上。DSP芯片的引脚数量从1980年的最多64个增加到现在的200个以上，引脚数量的增加，意味着结构灵活性的增加，如外部存储器的扩展和处理器间的通信等。 <br />2 DSP系统构成及其特点 <br />2.1 DSP系统构成 <br /><br />&nbsp;&nbsp;数字信号处理器是利用计算机或专用处理设备，在模拟信号变换成数字信号以后，以数字形式对信号进行采集、变换、滤波、估值、增强、压缩、识别等高速实时处理的专用处理器，其处理速度比最快的CPU还快10～50倍。图1所示为一个典型的DSP系统。 <br /><br />&nbsp;&nbsp;输入信号首先进行带限滤波和抽样，然后进行A/D变换将信号变换成数字比特流。DSP芯片的输入是A/D变换后得到的以抽样形式表示的数字信号，DSP芯片对输入的数字信号进行某种形式的处理，如进行一系列的乘累加操作（MAC）。最后，经过处理后的数字样值再经D/A（Digital to Analog）变换转换为模拟样值，之后再进行内插和平滑滤波就可得到连续的模拟波形。 <br /><br />&nbsp;&nbsp;必须指出的是，上面给出的DSP系统模型是一个典型模型，但并不是所有的DSP系统都必须具有模型中的所有部件。 <br /><br />2.2 DSP系统的特点[1] <br /><br />&nbsp;&nbsp;数字信号处理系统是以数字信号处理为基础，因此具有数字处理的全部优点： <br />&nbsp;&nbsp;（1）接口和编程方便。DSP系统与其他以现代数字技术为基础的系统或设备都是相互兼容的，与这样的系统接口以实现某种功能要比模拟系统与这些系统接口容易得多；另外，DSP系统中的可编程DSP芯片可使设计人员在开发过程中灵活方便地对软件进行修改和升级。 <br />&nbsp;&nbsp;（2）稳定性和可重复性好。DSP系统以数字处理为基础，受环境温度、湿度、噪声、电磁场的干扰和影响较小，可靠性高；数字系统的性能基本不受元器件参数性能变化的影响，因此数字系统便于测试、调试和大规模生产。 <br />&nbsp;&nbsp;（3）精度高。16位数字系统可以达到10 -5的精度。 <br />&nbsp;&nbsp;（4）特殊应用。有些应用只有数字系统才能实现，例如信息无失真压缩、V型滤波器、线性相位滤波器等等。 <br />&nbsp;&nbsp;（5）集成方便。DSP系统中的数字部件有高度的规范性，便于大规模集成。 <br /><br />&nbsp;&nbsp;当然，数字信号处理在高频信号处理上也存在一定的缺点。DSP系统中的高速时钟可能带来高频干扰和电磁泄漏等问题，而且DSP系统消耗的功率也较大。此外，DSP技术更新的速度快，数学知识要求多，开发和调试工具还不尽完善。 <br />2.3 数字信号处理器与通用微处理器的比较[3,4] <br /><br />表1列出了二者的主要不同之处： <br />&nbsp;&nbsp;此外，DSP处理器往往都支持专门的寻址模式，它们对通常的信号处理操作和算法是很有用的。例如，模块（循环）寻址（对实现数字滤波器延时线很有用）、位倒序寻址（对快速傅立叶变换很有用）。这些非常专门的寻址模式在GPP中是不常使用的，只有用软件来实现。在执行时间的预测上，DSP对高性能GPP的优势在于，即便是使用了高速缓存的DSP，哪些指令会放进去也是由程序员（而不是处理器）来决定的；DSP一般不使用动态特性，如转移预测和推理执行等。因此，由一段给定的代码来预测所要求的执行时间是完全直截了当的，从而使程序员得以确定芯片的性能限制。 <br /><br />3DSP芯片的应用 <br />3.1 DSP的应用领域 <br /><br />&nbsp;&nbsp;在近20多年时间里，DSP芯片的应用已经从军事、航空航天领域扩大到信号处理、通信、雷达、消费等许多领域 [2]。主要应用有：信号处理、通信、语音、图形/图像、军事、仪器仪表、自动控制、医疗、家用电器等。 <br />&nbsp;&nbsp;DSP主要应用市场为3C领域，合占整个市场需求的90%。 数字蜂窝电话是DSP最为重要的应用领域之一。由于DSP具有强大的计算能力，使得移动通信的蜂窝电话重新崛起，并创造了一批诸如GSM、CDMA等全数字蜂窝电话网。 在Modem器件中，DSP更是成效卓著，不仅大幅度提高了传输速率，且具有接收动态图像能力。另外，可编程多媒体DSP是PC领域的主流产品。以XDSL Mo dem为代表的高速通信技术与MPEG图像技术相结合，使得高品位的音频和视频形式的计算机数据有可能实现实时交换。目前的硬盘空间相当大，这主要得益于CDSP（可定制DSP）的巨大作用。预计在今后的PC机中，一个DSP即可完成全部所需的多媒体处理功能。DSP也是消费类电子产品中的关键器件。由于DSP的广泛应用，数字音响设备的更新换代周期变得非常短暂。用于图像处理的DSP，一种用于JPEG标准的静态图像数据处理；另一种用于动态图像数据处理。 <br />3.2 DSP的市场规模 <br /><br />&nbsp;&nbsp;从80年代开始起步的DSP市场，目前正处于高速成长的阶段。在数字化、个人化和网络化的推动下，1997年世界DSP市场营销额超过32亿美元，预计未来的年均增长率高达40%，按照这一增长速度，至2007年，世界DSP市场营销额将突破500 亿美元。 <br />在全球DSP产品市场中，TI公司独占鳌头，占世界市场45%的份额，其次是朗讯（28%）、ADI（12%）、摩托罗拉（12%）、其他公司（3%）。 <br />4 DSP的发展前景 <br />4.1 DSP的技术展望[2,6] <br /><br />&nbsp;&nbsp;（1）努力向系统级集成DSP迈进。缩小DSP 芯片尺寸始终是DSP的技术发展方向。当前的DSP多数基于RISC（精简指令集计算）结构，这种结构的优点是尺寸小、功耗低、性能高。各DSP厂商纷纷采用新工艺，改进DSP芯核，并将几个DSP 芯核、MPU芯核、专用处理单元、外围电路单元、存储单元统统集成在一个芯片上，成为DSP系统级集成电路。这样的集成缩小了整机的体积，缩短了产品上市的时间，是一个重要的发展趋势。 <br />&nbsp;&nbsp;（2）DSP的内核结构进一步改善。DSP的结构主要是针对应用，并根据应用优化DSP设计以极大改进产品的性能。多通道结构和单指令多重数据（SIMD）、超长指令字结构（VLIM）、超标量结构、超流水结构、多处理、多线程及可并行扩展的超级哈佛结构(SHARC)在新的高性能处理器中将占据主导地位 [2]。 <br />&nbsp;&nbsp;（3）可编程DSP是主导产品。可编程DSP给生产厂商提供了很大的灵活性。生产厂商可在同一个DSP平台上开发出各种不同型号的系列产品，以满足不同用户的需求。同时，可编程DSP也为广大用户提供了易于升级的良好途径。人们已经发现，许多微控制器能做的事情，使用可编程DSP将做得更好更便宜。 <br />&nbsp;&nbsp;（4）追求更高的运算速度和进一步降低功耗和几何尺寸[7]。由于电子设备适配器的个人化和客户化趋势，DSP必须追求更高更快的运算速度，才能跟上电子设备的更新步伐。同时由于DSP的应用范围已扩大到人们工作生活的各个领域，特别是便携式手持产品对于低功耗和尺寸的要求很高，所以DSP有待于进一步降低功耗。按照CMOS的发展趋势，依靠新工艺改进芯片结构，DSP运算速度的提高和功耗尺寸的降低是完全可能的。 <br />&nbsp;&nbsp;（5）定点DSP是主流。虽然浮点DSP的运算精度更高，动态范围更大，但定点DSP器件的成本较低，对存储器的要求也较低，而且耗电较省。因此，定点运算的可编程DSP器件仍是市场上的主流产品。据统计，目前销售的DSP器件中的80%以上属于16位定点可编程DSP器件，预计今后的比重将逐渐增大。 <br />&nbsp;&nbsp;（6）与可编程器件结合。DSP的许多新应用需要比传统DSP处理器更加强大的数字信号处理能力，设计者往往会借助PLD和FPGA来满足他们日益提高的信号处理需求[8]。与常规DSP器件相比， FPGA器件配合传统的DSP器件可以处理更多信道，可在基站中用来实现高速实时处理功能，满足无线通信、多媒体等领域多功能和高性能的需要。 <br />&nbsp;&nbsp;（7）DSP嵌入式系统[9]。DSP嵌入式系统是 DSP系统嵌入到应用电子系统中的一种通用系统[4] 。这种系统既具有DSP器件在数据处理方面的优势，又具有应用目标所需要的技术特征。在许多嵌入式应用领域，既需要在数据处理方面具有独特优势的DSP，也需要在智能控制方面技高一筹的微处理器(MCU)。因此，将DSP与MCU融合在一起的双核平台，将成为DSP技术发展的一种新潮流。 <br /><br />4.2 我国DSP市场前景 <br /><br />&nbsp;&nbsp;目前，国外众多厂商涉足我国DSP产品市场，我国的DSP应用已有了相当的基础，有10多家集成电路设计企业从事数字信号处理系统(DSP)及相关产品的开发与应用。从应用范围来说，数字信号处理器市场前景看好。DSP不仅成为手机、个人数字助理等快速增长产品中的关键元件，而且它正在向数码相机和电机控制等领域挺进。 <br />&nbsp;&nbsp;随着DSP芯片的品种和技术档次不断提高以及向多功能化、高性能化、低功耗化放向发展，DSP日益进入人们的生活，在未来相当长的一段时间，我国DSP市场将蓬勃发展，今后几年市场销售额仍将保持40％以上的增长率，具有良好的市场前景。<br />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?915</link>
<title><![CDATA[DSP基础知识集锦之三 DSP芯片的定点运算]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:35:45 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?915</guid> 
<description>
<![CDATA[ 
	第3章&nbsp;&nbsp;DSP芯片的定点运算<br />3.1&nbsp;&nbsp;数 的 定 标<br />在定点DSP芯片中，采用定点数进行数值运算，其操作数一般采用整型数来表示。一个整型数的最大表示范围取决于DSP芯片所给定的字长，一般为16位或24位。显然，字长越长，所能表示的数的范围越大，精度也越高。如无特别说明，本书均以16位字长为例。<br />DSP芯片的数以2的补码形式表示。每个16位数用一个符号位来表示数的正负，0表示数值为正，1则表示数值为负。其余15位表示数值的大小。因此<br />二进制数0010000000000011b＝8195<br />二进制数1111111111111100b＝-4<br />对DSP芯片而言，参与数值运算的数就是16位的整型数。但在许多情况下，数学运算过程中的数不一定都是整数。那么，DSP芯片是如何处理小数的呢？应该说，DSP芯片本身无能为力。那么是不是说DSP芯片就不能处理各种小数呢？当然不是。这其中的关键就是由程序员来确定一个数的小数点处于16位中的哪一位。这就是数的定标。<br />通过设定小数点在16位数中的不同位置，就可以表示不同大小和不同精度的小数了。数的定标有Q表示法和S表示法两种。表3.1列出了一个16位数的16种Q表示、S表示及它们所能表示的十进制数值范围。<br />从表3.1可以看出，同样一个16位数，若小数点设定的位置不同，它所表示的数也就不同。例如：<br />16进制数2000H＝8192，用Q0表示<br />16进制数2000H＝0.25，用Q15表示<br />但对于DSP芯片来说，处理方法是完全相同的。<br />从表3.1还可以看出，不同的Q所表示的数不仅范围不同，而且精度也不相同。Q越大，数值范围越小，但精度越高；相反，Q越小，数值范围越大，但精度就越低。例如，Q0的数值范围是-32768到+32767，其精度为1，而Q15的数值范围为-1到0.9999695，精度为 1/32768 = 0.00003051。因此，对定点数而言，数值范围与精度是一对矛盾，一个变量要想能够表示比较大的数值范围，必须以牺牲精度为代价；而想提高精度，则数的表示范围就相应地减小。在实际的定点算法中，为了达到最佳的性能，必须充分考虑到这一点。<br />浮点数与定点数的转换关系可表示为：<br />浮点数(x)转换为定点数( )： <br />定点数( )转换为浮点数(x)： <br />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?914</link>
<title><![CDATA[DSP基础知识集锦之二 DSP芯片的基本结构和特征]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:35:00 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?914</guid> 
<description>
<![CDATA[ 
	第2章&nbsp;&nbsp;DSP芯片的基本结构和特征<br />2.1&nbsp;&nbsp;引&nbsp; &nbsp; 言<br />可编程DSP芯片是一种具有特殊结构的微处理器，为了达到快速进行数字信号处理的目的，DSP芯片一般都具有程序和数据分开的总线结构、流水线操作功能、单周期完成乘法的硬件乘法器以及一套适合数字信号处理的指令集。本章将首先介绍DSP芯片的基本结构，然后介绍TI公司的各种DSP芯片的特征，最后简要介绍其他公司的DSP芯片的特点。<br />2.2&nbsp;&nbsp;DSP芯片的基本结构<br />为了快速地实现数字信号处理运算，DSP芯片一般都采用特殊的软硬件结构。下面以TMS320系列为例介绍DSP芯片的基本结构。<br />TMS320系列DSP芯片的基本结构包括：（1）哈佛结构；（2）流水线操作；（3）专用的硬件乘法器；（4）特殊的DSP指令；（5）快速的指令周期。<br />这些特点使得TMS320系列DSP芯片可以实现快速的DSP运算，并使大部分运算（例如乘法）能够在一个指令周期内完成。由于TMS320系列DSP芯片是软件可编程器件，因此具有通用微处理器具有的方便灵活的特点。下面分别介绍这些特点是如何在TMS320系列DSP芯片中应用并使得芯片的功能得到加强的。<br />
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?913</link>
<title><![CDATA[DSP基础知识集锦之一 DSP概述 ]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Fri, 02 Dec 2011 01:34:11 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?913</guid> 
<description>
<![CDATA[ 
	<span style="font-size: large"><span style="font-family: 黑体">第一章 概述</span><br /></span><span style="font-family: 宋体 "><span style="font-size: medium"><span style="font-size: large">1.1引</span><br /><span style="font-family: 宋体 ">言</span></span></span><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 数字信号处理（</span>DigitalSignal Processing<span style="font-family: 宋体 ">，简称</span>DSP<span style="font-family: 宋体 ">）是一门涉及许多学科而又广泛应用于许多领域的新兴学科。</span>20<span style="font-family: 宋体 ">世纪</span>60<span style="font-family: 宋体 ">年代以来，随着计算机和信息技术的飞速发展，数字信号处理技术应运而生并得到迅速的发展。在过去的二十多年时间里，数字信号处理已经在通信等领域得到极为广泛的应用。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 数字信号处理是利用计算机或专用处理设备，以数字形式对信号进行采集、变换、滤波、估值、增强、压缩、识别等处理，以得到符合人们需要的信号形式。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 数字信号处理是围绕着数字信号处理的理论、实现和应用等几个方面发展起来的。数字信号处理在理论上的发展推动了数字信号处理应用的发展。反过来，数字信号处理的应用又促进了数字信号处理理论的提高。而数字信号处理的实现则是理论和应用之间的桥梁。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 数字信号处理是以众多学科为理论基础的，它所涉及的范围极其广泛。例如，在数学领域，微积分、概率统计、随机过程、数值分析等都是数字信号处理的基本工具，与网络理论、信号与系统、控制论、通信理论、故障诊断等也密切相关。近来新兴的一些学科，如人工智能、模式识别、神经网络等，都与数字信号处理密不可分。可以说，数字信号处理是把许多经典的理论体系作为自己的理论基础，同时又使自己成为一系列新兴学科的理论基础。</span><br /><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 数字信号处理的实现方法一般有以下几种：</span><br />&nbsp; &nbsp;&nbsp; &nbsp;(1) <span style="font-family: 宋体 ">在通用的计算机（如</span>PC<span style="font-family: 宋体 ">机）上用软件（如</span>Fortran<span style="font-family: 宋体 ">、</span>C<span style="font-family: 宋体 ">语言）实现；</span><br />&nbsp; &nbsp;&nbsp; &nbsp;(2) <span style="font-family: 宋体 ">在通用计算机系统中加上专用的加速处理机实现；</span><br />&nbsp; &nbsp;&nbsp; &nbsp;(3) <span style="font-family: 宋体 ">用通用的单片机（如</span>MCS-51<span style="font-family: 宋体 ">、</span>96<span style="font-family: 宋体 ">系列等）实现，这种方法可用于一些不太复杂的数字信号处理，如数字控制等；</span><br />&nbsp; &nbsp;&nbsp; &nbsp;(4) <span style="font-family: 宋体 ">用通用的可编程</span>DSP<span style="font-family: 宋体 ">芯片实现。与单片机相比，</span>DSP<span style="font-family: 宋体 ">芯片具有更加适合于数字信号处理的软件和硬件资源，可用于 复杂的数字信号处理算法；</span><br />&nbsp; &nbsp;&nbsp; &nbsp;(5) <span style="font-family: 宋体 ">用专用的</span>DSP<span style="font-family: 宋体 ">芯片实现。在一些特殊的场合，要求的信号处理速度极高，用通用</span>DSP<span style="font-family: 宋体 ">芯片很难实现，例如专用于</span>&nbsp; &nbsp; FFT<span style="font-family: 宋体 ">、数字滤波、卷积、相关等算法的</span>DSP<span style="font-family: 宋体 ">芯片，这种芯片将相应的信号处理算法在芯片内部用硬件实现，无需进行编程。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 在上述几种方法中，第</span>1<span style="font-family: 宋体 ">种方法的缺点是速度较慢，一般可用于</span>DSP<span style="font-family: 宋体 ">算法的模拟；第</span>2<span style="font-family: 宋体 ">种和第</span>5<span style="font-family: 宋体 ">种方法专用性强，应用受到很大的限制，第</span>2<span style="font-family: 宋体 ">种方法也不便于系统的独立运行；第</span>3<span style="font-family: 宋体 ">种方法只适用于实现简单的</span>DSP<span style="font-family: 宋体 ">算法；只有第</span>4<span style="font-family: 宋体 ">种方法才使数字信号处理的应用打开了新的局面。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; <span style="font-family: 宋体 "><span style="font-size: 10.5pt">虽然数字信号处理的理论发展迅速，但在</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">20</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">世纪</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">80</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">年代以前，由于实现方法的限制，数字信号处理的理论还得不到广泛的应用。直到</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">20</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">世纪</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">70</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">年代末</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">80</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">年代初世界上第一片单片可编程</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">DSP</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">芯片的诞生，才将理论研究结果广泛应用到低成本的实际系统中，并且推动了新的理论和应用领域的发展。可以毫不夸张地说，</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">DSP</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">芯片的诞生及发展对近</span></span><span style="font-family: &amp;quot "><span style="font-size: 10.5pt">20</span></span><span style="font-family: 宋体 "><span style="font-size: 10.5pt">年来通信、计算机、控制等领域的技术发展起到十分重要的作用。</span></span><br /><span style="font-size: medium">1.2<br />DSP<span style="font-family: 宋体 ">系统</span><br /><br /></span>1.2.1<br />DSP<span style="font-family: 黑体 ">系统构成</span><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 图</span>1.1<span style="font-family: 宋体 ">所示为一个典型的</span>DSP<span style="font-family: 宋体 ">系统。图中的输入信号可以有各种各样的形式。例如，它可以是麦克风输出的语音信号或是电话线来的已调数据信号，可以是编码后在数字链路上传输或存储在计算机里的摄像机图像信号等。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 输入信号首先进行带限滤波和抽样，然后进行</span>A/D<span style="font-family: 宋体 ">（</span>Analog toDigital<span style="font-family: 宋体 ">）变换将信号变换成数字比特流。根据奈奎斯特抽样定理，为保证信息不丢失，抽样频率至少必须是输入带限信号最高频率的</span>2<span style="font-family: 宋体 ">倍。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; DSP<span style="font-family: 宋体 ">芯片的输入是</span>A/D<span style="font-family: 宋体 ">变换后得到的以抽样形式表示的数字信号，</span>DSP<span style="font-family: 宋体 ">芯片对输入的数字信号进行某种形式的处理，如进行一系列的乘累加操作（</span>MAC<span style="font-family: 宋体 ">）。数字处理是</span>DSP<span style="font-family: 宋体 ">的关键，这与其他系统（如电话交换系统）有很大的不同，在交换&nbsp; &nbsp; 系统中，处理器的作用是进行路由选择，它并不对输入数据进行修改。因此虽然两者都是实时系统，但两者的实时约束条件却有很大的不同。最后，经过处理后的数字样值再经</span>D/A<span style="font-family: 宋体 ">（</span>Digital toAnalog<span style="font-family: 宋体 ">）变换转换为模拟样值，之后再进行内插和平滑滤波就可得到连续的模拟波形。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 必须指出的是，上面给出的</span>DSP<span style="font-family: 宋体 ">系统模型是一个典型模型，但并不是所有的</span>DSP<span style="font-family: 宋体 ">系统都必须具有模型中的所有部件。如语音识别系统在输出端并不是连续的波形，而是识别结果，如数字、文字等；有些输入信号本身就是数字信号（如</span>CD<span style="font-family: 宋体 ">：</span>Compact Disk<span style="font-family: 宋体 ">），因此就不必进行模数变换了。</span><br /><br /><br />1.2.2 <br />DSP<span style="font-family: 黑体 ">系统的特点</span><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;数字信号处理系统是以数字信号处理为基础，因此具有数字处理的全部优点：</span><br />(1) <span style="font-family: 宋体 ">接口方便。</span>DSP<span style="font-family: 宋体 ">系统与其他以现代数字技术为基础的系统或设备都是相互兼容的，与这样的系统接口以实现某种功能要比模拟系统与这些系统接口要容易得多；</span><br />(2) <span style="font-family: 宋体 ">编程方便。</span>DSP<span style="font-family: 宋体 ">系统中的可编程</span>DSP<span style="font-family: 宋体 ">芯片可使设计人员在开发过程中灵活方便地对软件进行修改和升级；</span><br />(3) <span style="font-family: 宋体 ">稳定性好。</span>DSP<span style="font-family: 宋体 ">系统以数字处理为基础，受环境温度以及噪声的影响较小，可靠性高；</span><br />(4) <span style="font-family: 宋体 ">精度高。</span>16<span style="font-family: 宋体 ">位数字系统可以达到</span><br /><span style="font-family: 宋体 ">10^(-5)的精度；</span><br />(5) <span style="font-family: 宋体 ">可重复性好。模拟系统的性能受元器件参数性能变化比较大，而数字系统基本不受影响，因此数字系统便于测试、调试和大规模生产；</span><br />(6) <span style="font-family: 宋体 ">集成方便。</span>DSP<span style="font-family: 宋体 ">系统中的数字部件有高度的规范性，便于大规模集成。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 当然，数字信号处理也存在一定的缺点。例如，对于简单的信号处理任务，如与模拟交换线的电话接口，若采用</span>DSP<span style="font-family: 宋体 ">则使成本增加。</span>DSP<span style="font-family: 宋体 ">系统中的高速时钟可能带来高频干扰和电磁泄漏等问题，而且</span>DSP<span style="font-family: 宋体 ">系统消耗的功率也较大。此外，</span>D SP<span style="font-family: 宋体 ">技术更新的速度快，数学知识要求多，开发和调试工具还不尽完善。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 虽然</span>DSP<span style="font-family: 宋体 ">系统存在着一些缺点，但其突出的优点已经使之在通信、语音、图像、雷达、生物医学、工业控制、仪器仪表等许多领域得到越来越广泛的应用。</span><br /><br /><br />1.2.3 <br />DSP<span style="font-family: 黑体 ">系统的设计过程</span><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 总的来说，</span>DSP<span style="font-family: 宋体 ">系统的设计还没有非常好的正规设计方法。图</span>1.2<span style="font-family: 宋体 ">所示是</span>DSP<span style="font-family: 宋体 ">系统设计的一般过程。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 在设计</span> DSP <span style="font-family: 宋体 ">系统之前，首先必须根据应用系统的目标确定系统的性能指标、信号处理的要求，通常可用数据流程图、数学运算序列、正式的符号或自然语言来描述。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 第二步是根据系统的要求进行高级语言的模拟。一般来说，为了实现系统的最终目标，需要对输入的信号进行适当的处理，而处理方法的不同会导致不同的系统性能，要得到最佳的系统性能，就必须在这一步确定最佳的处理方法，即数字信号处理的算法（</span>Algorithm<span style="font-family: 宋体 ">），因此这一步也称算法模拟阶段。例如，语音压缩编码算法就是要在确定的压缩比条件下，获得最佳的合成语音。算法模拟所用的输入数据是实际信号经采集而获得的，通常以计算机文件的形式存储为数据文件。如语音压缩编码算法模拟时所用的语音信号就是实际采集而获得并存储为计算机文件形式的语音数据文件。有些算法模拟时所用的输入数据并不一定要是实际采集的信号数据，只要能够验证算法的可行性，输入假设的数据也是可以的。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 在完成第二步之后，接下来就可以设计实时</span>DSP<span style="font-family: 宋体 ">系统，实时</span>DSP<span style="font-family: 宋体 ">系统的设计包括硬件设计和软件设计两个方面。硬件设计首先要根据系统运算量的大小、对运算精度的要求、系统成本限制以及体积、功耗等要求选择合适的</span>DSP<span style="font-family: 宋体 ">芯片。然后设计</span>DSP<span style="font-family: 宋体 ">芯片的外围电路及其他电路。软件设计和编程主要根据系统要求和所选的</span>DSP<span style="font-family: 宋体 ">芯片编写相应的</span>DSP<span style="font-family: 宋体 ">汇编程序，若系统运算量不大且有高级语言编译器支持，也可用高级语言（如</span>C<span style="font-family: 宋体 ">语言）编程。由于现有的高级语言编译器的效率还比不上手工编写汇编语言的效率，因此在实际应用系统中常常采用高级语言和汇编语言的混合编程方法，即在算法运算量大的地方，用手工编写的方法编写汇编语言，而运算量不大的地方则采用高级语言。采用这种方法，既可缩短软件开发的周期，提高程序的可读性和可移植性，又能满足系统实时运算的要求。</span><br />&nbsp; &nbsp;&nbsp; &nbsp;DSP<span style="font-family: 宋体 ">硬件和软件设计完成后，就需要进行硬件和软件的调试。软件的调试一般借助于</span>DSP<span style="font-family: 宋体 ">开发工具，如软件模拟器、</span>DSP<span style="font-family: 宋体 ">开发系统或仿真器等。调试</span>DSP<span style="font-family: 宋体 ">算法时一般采用比较实时结果与模拟结果的方法，如果实时程序和模拟程序的输入相同，则两者的输出应该一致。应用系统的其他软件可以根据实际情况进行调试。硬件调试一般采用硬件仿真器进行调试，如果没有相应的硬件仿真器，且硬件系统不是十分复杂，也可以借助于一般的工具进行调试。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 系统的软件和硬件分别调试完成后，就可以将软件脱离开发系统而直接在应用系统上运行。当然，</span>DSP<span style="font-family: 宋体 ">系统的开发，特别是软件开发是一个需要反复进行的过程，虽然通过算法模拟基本上可以知道实时系统的性能，但实际上模拟环境不可能做到与实时系统环境完全一致，而且将模拟算法移植到实时系统时必须考虑算法是否能够实时运行的问题。如果算法运算量太大不能在硬件上实时运行，则必须重新修改或简化算法。</span><br /><span style="font-size: medium"><span style="color: #ff0000"><span style="font-family: 宋体">1.3可编程</span>DSP<span style="font-family: 宋体 ">芯片</span><br /><br /><br /></span></span>1.3.1<br /><span style="font-family: 黑体 ">什么是</span>DSP<span style="font-family: 黑体 ">芯片</span><br /><br /><br />&nbsp; &nbsp;&nbsp; &nbsp; DSP<span style="font-family: 宋体 ">芯片，也称数字信号处理器，是一种特别适合于进行数字信号处理运算的微处理器，其主要应用是实时快速地实现各种数字信号处理算法。根据数字信号处理的要求，</span>DSP<span style="font-family: 宋体 ">芯片一般具有如下主要特点：</span><br />(1)<span style="font-family: 宋体 ">在一个指令周期内可完成一次乘法和一次加法；</span><br />(2)<span style="font-family: 宋体 ">程序和数据空间分开，可以同时访问指令和数据；</span><br />(3)<span style="font-family: 宋体 ">片内具有快速</span> RAM<span style="font-family: 宋体 ">，通常可通过独立的数据总线在两块中同时访问；</span><br />(4)<span style="font-family: 宋体 ">具有低开销或无开销循环及跳转的硬件支持；</span><br />(5)<span style="font-family: 宋体 ">快速的中断处理和硬件</span>I/O<span style="font-family: 宋体 ">支持；</span><br />(6)<span style="font-family: 宋体 ">具有在单周期内操作的多个硬件地址产生器；</span><br />(7)<span style="font-family: 宋体 ">可以并行执行多个操作；</span><br />(8)<span style="font-family: 宋体 ">支持流水线操作，使取指、译码和执行等操作可以重叠执行。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;当然，与通用微处理器相比，</span>DSP<span style="font-family: 宋体 ">芯片的其他通用功能相对较弱些。</span><br /><br /><br />1.3.2<br />DSP<span style="font-family: 黑体 ">芯片的</span><span style="font-family: 黑体 ">发展</span><br /><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;世界上第一个单片</span> DSP <span style="font-family: 宋体 ">芯片应当是</span>1978<span style="font-family: 宋体 ">年</span> AMI<span style="font-family: 宋体 ">公司发布的</span> S2811<span style="font-family: 宋体 ">，</span>1979<span style="font-family: 宋体 ">年美国</span>Intel<span style="font-family: 宋体 ">公司发布的商用可编程器件</span>2920<span style="font-family: 宋体 ">是</span>DSP<span style="font-family: 宋体 ">芯片的一个主要里程碑。这两种芯片内部都没有现代</span>DSP<span style="font-family: 宋体 ">芯片所必须有的单周期乘法器。</span>1980<span style="font-family: 宋体 ">年，日本</span> NEC <span style="font-family: 宋体 ">公司推出的</span><span style="font-family: 宋体 ">&mu;</span>P D7720<span style="font-family: 宋体 ">是第一个具有乘法器的商用</span> DSP <span style="font-family: 宋体 ">芯片。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;在这之后，最成功的</span>DSP <span style="font-family: 宋体 ">芯片当数美国德州仪器公司（</span>Texas Instruments<span style="font-family: 宋体 ">，简称</span>TI<span style="font-family: 宋体 ">）的一系列产品。</span>TI <span style="font-family: 宋体 ">公司在</span>1982<span style="font-family: 宋体 ">年成功推出其第一代</span> DSP <span style="font-family: 宋体 ">芯片</span> TMS32010<span style="font-family: 宋体 ">及其系列产品</span>TMS32011<span style="font-family: 宋体 ">、</span>TMS320C10/C14/C15/C16/C17<span style="font-family: 宋体 ">等，之后相继推出了第二代</span>DSP<span style="font-family: 宋体 ">芯片</span>TMS32020<span style="font-family: 宋体 ">、</span>TMS320C25/C26/C28<span style="font-family: 宋体 ">，第三代</span>DSP<span style="font-family: 宋体 ">芯片</span>TMS320C30/C31/C32<span style="font-family: 宋体 ">，第四代</span>DSP<span style="font-family: 宋体 ">芯片</span>TMS320C40/C44<span style="font-family: 宋体 ">，第五代</span> DSP <span style="font-family: 宋体 ">芯片</span>TMS320C5X/C54X<span style="font-family: 宋体 ">，第二代</span>DSP<span style="font-family: 宋体 ">芯片的改进型</span>TMS320C2XX<span style="font-family: 宋体 ">，集多片</span>DSP<span style="font-family: 宋体 ">芯片于一体的高性能</span>DSP<span style="font-family: 宋体 ">芯片</span>TMS320C8X<span style="font-family: 宋体 ">以及目前速度最快的第六代</span>DSP<span style="font-family: 宋体 ">芯片</span>TMS320C62X/C67X<span style="font-family: 宋体 ">等。</span>TI<span style="font-family: 宋体 ">将常用的</span>DSP<span style="font-family: 宋体 ">芯片归纳为三大系列，即：</span>TMS320C2000<span style="font-family: 宋体 ">系列（包括</span>TMS320C2X/C2XX<span style="font-family: 宋体 ">）、</span>TMS320C5000<span style="font-family: 宋体 ">系列（包括</span>TMS320C5X/C54X/C55X<span style="font-family: 宋体 ">）、</span>TMS320C6000<span style="font-family: 宋体 ">系列（</span>TMS320C62X/C67X<span style="font-family: 宋体 ">）。如今，</span>TI<span style="font-family: 宋体 ">公司的一系列</span>DSP<span style="font-family: 宋体 ">产品已经成为当今世界上最有影响的</span>DSP<span style="font-family: 宋体 ">芯片。</span>TI<span style="font-family: 宋体 ">公司也成为世界上最大的</span> DSP <span style="font-family: 宋体 ">芯片供应商，其</span>DSP<span style="font-family: 宋体 ">市场份额占全世界份额近</span> 50<span style="font-family: 宋体 ">％。</span><br /><span style="font-family: 宋体 ">第一个采用</span>CMOS<span style="font-family: 宋体 ">工艺生产浮点</span>DSP<span style="font-family: 宋体 ">芯片的是日本的</span> Hitachi <span style="font-family: 宋体 ">公司，它于</span>1982<span style="font-family: 宋体 ">年推出了浮点</span>DSP<span style="font-family: 宋体 ">芯片。</span>1983 <span style="font-family: 宋体 ">年</span> <span style="font-family: 宋体 ">日本</span>Fujitsu <span style="font-family: 宋体 ">公司推出的</span>MB8764<span style="font-family: 宋体 ">，其指令周期为</span> 120ns<span style="font-family: 宋体 ">，且具有双内部总线，从而使处理吞吐量发生了一个大的飞跃。而第一个高性能浮点</span>DSP<span style="font-family: 宋体 ">芯片应是</span> AT&amp;T <span style="font-family: 宋体 ">公司于</span>1984 <span style="font-family: 宋体 ">年推出的</span>DSP32<span style="font-family: 宋体 ">。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 与其他公司相比，</span>Motorola<span style="font-family: 宋体 ">公司在推出</span> DSP <span style="font-family: 宋体 ">芯片方面相对较晚。</span>1986<span style="font-family: 宋体 ">年，该公司推出了定点处理器</span>MC56001<span style="font-family: 宋体 ">。</span>1990<span style="font-family: 宋体 ">年，推出了与</span>IEEE <span style="font-family: 宋体 ">浮点格式兼容的浮点</span> DSP <span style="font-family: 宋体 ">芯片</span> MC96002<span style="font-family: 宋体 ">。</span><br /><span style="font-family: 宋体 ">美国模拟器件公司（</span>AnalogDevices<span style="font-family: 宋体 ">，简称</span>AD<span style="font-family: 宋体 ">）在</span>DSP<span style="font-family: 宋体 ">芯片市场上也占有一定的份额，相继推出了一系列具有自己特点的</span>DSP<span style="font-family: 宋体 ">芯片，其定点</span>DSP<span style="font-family: 宋体 ">芯片有</span>ADSP2101/2103/2105<span style="font-family: 宋体 ">、</span>ASDP2111/2115<span style="font-family: 宋体 ">、</span>ADSP2161/2162/2164<span style="font-family: 宋体 ">以及</span>ADSP2171/2181<span style="font-family: 宋体 ">，浮点</span>DSP<span style="font-family: 宋体 ">芯片有</span>ADSP21000/21020<span style="font-family: 宋体 ">、</span>ADSP21060/21062<span style="font-family: 宋体 ">等。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;&nbsp;&nbsp;自</span>1980<span style="font-family: 宋体 ">年以来，</span>DSP<span style="font-family: 宋体 ">芯片得到了突飞猛进的发展，</span>DSP<span style="font-family: 宋体 ">芯片的应用越来越广泛。从运算速度来看，</span>MAC<span style="font-family: 宋体 ">（一次乘法和一次加法）时间已经从</span>20<span style="font-family: 宋体 ">世纪</span>80<span style="font-family: 宋体 ">年代初的</span>400ns<span style="font-family: 宋体 ">（如</span>TMS32010<span style="font-family: 宋体 ">）降低到</span>10ns<span style="font-family: 宋体 ">以下（如</span>TMS320C54X<span style="font-family: 宋体 ">、</span>TMS320C62X/67X<span style="font-family: 宋体 ">等），处理能力提高了几十倍。</span>DSP<span style="font-family: 宋体 ">芯片内部关键的乘法器部件从</span>1980<span style="font-family: 宋体 ">年的占模片区（</span>diearea<span style="font-family: 宋体 ">）的</span>40%<span style="font-family: 宋体 ">左右</span><span style="font-family: 宋体 ">下降到</span>5%<span style="font-family: 宋体 ">以下，片内</span>RAM<span style="font-family: 宋体 ">数量增加一个数量级以上。从制造工艺来看，</span>1980<span style="font-family: 宋体 ">年采用</span>4<span style="font-family: 宋体 ">&mu;</span>m<br /><span style="font-family: 宋体 ">的</span> N<span style="font-family: 宋体 ">沟道</span>MOS<span style="font-family: 宋体 ">（</span>NMOS<span style="font-family: 宋体 ">）工艺，而现在则普遍采用亚微米（</span>Micron<span style="font-family: 宋体 ">）</span>CMOS<span style="font-family: 宋体 ">工艺。</span>DSP<span style="font-family: 宋体 ">芯片的引脚数量从</span>1980<span style="font-family: 宋体 ">年的最多</span>64<span style="font-family: 宋体 ">个增加到现在的</span>200<span style="font-family: 宋体 ">个以上，引脚数量的增加，意味着结构灵活性的增加，如外部存储器的扩展和处理器间的通信等。此外，</span>DSP<span style="font-family: 宋体 ">芯片的发展使</span>DSP<span style="font-family: 宋体 ">系统的成本、体积、重量和功耗都有很大程度的下降。表</span>1.1 <span style="font-family: 宋体 ">是</span>TI<span style="font-family: 宋体 ">公司</span>DSP<span style="font-family: 宋体 ">芯片</span>1982<span style="font-family: 宋体 ">年、</span>1992<span style="font-family: 宋体 ">年、</span>1999<span style="font-family: 宋体 ">年的比较表。表</span>1.2<span style="font-family: 宋体 ">则是世界上主要</span>DSP<span style="font-family: 宋体 ">芯片供应商的代表芯片的一些数据。</span><br />1.3.3 <br />DSP<span style="font-family: 黑体 ">芯片的分类</span><br /><br />&nbsp; &nbsp;&nbsp; &nbsp;DSP<span style="font-family: 宋体 ">芯片可以按照下列三种方式进行分类。</span><br />&nbsp; &nbsp;&nbsp; &nbsp;1<span style="font-family: 宋体 ">．按基础特性分</span><br /><span style="font-family: 宋体 ">这是根据</span>DSP<span style="font-family: 宋体 ">芯片的工作时钟和指令类型来分类的。如果在某时钟频率范围内的任何时钟频率上，</span>DSP<span style="font-family: 宋体 ">芯片都能正常工作，除计算速度有变化外，没有性能的下降，这类</span>DSP<span style="font-family: 宋体 ">芯片一般称为静态</span>DSP<span style="font-family: 宋体 ">芯片。例如，日本</span>OKI <span style="font-family: 宋体 ">电气公司的</span>DSP<span style="font-family: 宋体 ">芯片、</span>TI<span style="font-family: 宋体 ">公司的</span>TMS320C2XX<span style="font-family: 宋体 ">系列芯片属于这一类。</span><br /><span style="font-family: 宋体 ">如果有两种或两种以上的</span>DSP<span style="font-family: 宋体 ">芯片，它们的指令集和相应的机器代码机管脚结构相互兼容，则这类</span>DSP<span style="font-family: 宋体 ">芯片称为一致性</span>DSP<span style="font-family: 宋体 ">芯片。例如，美国</span>TI<span style="font-family: 宋体 ">公司的</span>TMS320C54X<span style="font-family: 宋体 ">就属于这一类。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 2<span style="font-family: 宋体 ">．按数据格式分</span><br /><span style="font-family: 宋体 ">这是根据</span>DSP<span style="font-family: 宋体 ">芯片工作的数据格式来分类的。数据以定点格式工作的</span>DSP<span style="font-family: 宋体 ">芯片称为定点</span>DSP<span style="font-family: 宋体 ">芯片，如</span>TI<span style="font-family: 宋体 ">公司的</span>TMS320C1X/C2X<span style="font-family: 宋体 ">、</span>TMS320C2XX/C5X<span style="font-family: 宋体 ">、</span>TMS320C54X/C62XX<span style="font-family: 宋体 ">系列，</span>AD<span style="font-family: 宋体 ">公司的</span>ADSP21XX<span style="font-family: 宋体 ">系列，</span>AT&amp;T<span style="font-family: 宋体 ">公司的</span>DSP16/16A<span style="font-family: 宋体 ">，</span>Motolora<span style="font-family: 宋体 ">公司的</span>MC56000<span style="font-family: 宋体 ">等。以浮点格式工作的称为浮点</span>DSP<span style="font-family: 宋体 ">芯片，如</span>TI<span style="font-family: 宋体 ">公司的</span>TMS320C3X/C4X/C8X<span style="font-family: 宋体 ">，</span>AD<span style="font-family: 宋体 ">公司的</span>ADSP21XXX<span style="font-family: 宋体 ">系列，</span>AT&amp;T<span style="font-family: 宋体 ">公司的</span>DSP32/32C<span style="font-family: 宋体 ">，</span>Motolora<span style="font-family: 宋体 ">公司的</span>MC96002<span style="font-family: 宋体 ">等。</span><br /><span style="font-family: 宋体 ">不同浮点</span>DSP<span style="font-family: 宋体 ">芯片所采用的浮点格式不完全一样，有的</span>DSP<span style="font-family: 宋体 ">芯片采用自定义的浮点格式，如</span>TMS320C3X<span style="font-family: 宋体 ">，而有的</span>DSP<span style="font-family: 宋体 ">芯片则采用</span>IEEE<span style="font-family: 宋体 ">的标准浮点格式，如</span>Motorola<span style="font-family: 宋体 ">公司的</span>MC96002<span style="font-family: 宋体 ">、</span>FUJITSU<span style="font-family: 宋体 ">公司的</span>MB86232<span style="font-family: 宋体 ">和</span>ZORAN<span style="font-family: 宋体 ">公司的</span>ZR35325<span style="font-family: 宋体 ">等。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 3<span style="font-family: 宋体 ">．按用途分</span><br /><span style="font-family: 宋体 ">按照</span>DSP<span style="font-family: 宋体 ">的用途来分，可分为通用型</span>DSP<span style="font-family: 宋体 ">芯片和专用型</span>DSP<span style="font-family: 宋体 ">芯片。通用型</span>DSP<span style="font-family: 宋体 ">芯片适合普通的</span>DSP<span style="font-family: 宋体 ">应用，如</span>TI<span style="font-family: 宋体 ">公司的一系列</span>DSP<span style="font-family: 宋体 ">芯片属于通用型</span>DSP<span style="font-family: 宋体 ">芯片。专用</span>DSP<span style="font-family: 宋体 ">芯片是为特定的</span>DSP<span style="font-family: 宋体 ">运算而设计的，更适合特殊的运算，如数字滤波、卷积和</span>FFT<span style="font-family: 宋体 ">，如</span>Motorola<span style="font-family: 宋体 ">公司的</span>DSP56200<span style="font-family: 宋体 ">，</span>Zoran<span style="font-family: 宋体 ">公司的</span>ZR34881<span style="font-family: 宋体 ">，</span>Inmos<span style="font-family: 宋体 ">公司的</span>IMSA100<span style="font-family: 宋体 ">等就属于专用型</span>DSP<span style="font-family: 宋体 ">芯片。</span><br /><span style="font-family: 宋体 ">本书主要讨论通用型</span>DSP<span style="font-family: 宋体 ">芯片。</span><br /><br /><br /><br />&nbsp; &nbsp;&nbsp; &nbsp;1.3.4 <br />DSP<span style="font-family: 黑体 ">芯片的选择</span><span style="font-family: 宋体 ">&nbsp; &nbsp; 设计</span>DSP<span style="font-family: 宋体 ">应用系统，选择</span>DSP<span style="font-family: 宋体 ">芯片是非常重要的一个环节。只有选定了</span>DSP<span style="font-family: 宋体 ">芯片，才能进一步设计其外围电路及系统的其他电路。总的来说，</span>DSP<span style="font-family: 宋体 ">芯片的选择应根据实际的应用系统需要而确定。不同的</span>DSP<span style="font-family: 宋体 ">应用系统由于应用场合、应用目的等不尽相同，对</span>DSP<span style="font-family: 宋体 ">芯片的选择也是不同的。一般来说，选择</span>DSP<span style="font-family: 宋体 ">芯片时应考虑到如下诸多因素。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 1<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的运算速度。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 运算速度是</span>DSP<span style="font-family: 宋体 ">芯片的一个最重要的性能指标，也是选择</span>DSP<span style="font-family: 宋体 ">芯片时所需要考虑的一个主要因素。</span>DSP<span style="font-family: 宋体 ">芯片的运算速度可以用以下几种性能指标来衡量：</span><br />(1) <span style="font-family: 宋体 ">指令周期：即执行一条指令所需的时间，通常以</span>ns<span style="font-family: 宋体 ">（纳秒）为单位。如</span>TMS320LC549-80<span style="font-family: 宋体 ">在主频为</span>80MHz<span style="font-family: 宋体 ">时的指令周期为</span>12.5ns<span style="font-family: 宋体 ">；</span><br />(2) MAC<span style="font-family: 宋体 ">时间：即一次乘法加上一次加法的时间。大部分</span>DSP<span style="font-family: 宋体 ">芯片可在一个指令周期内完成一次乘法和加法操作，如</span>TMS320LC549-80<span style="font-family: 宋体 ">的</span>MAC<span style="font-family: 宋体 ">时间就是</span>12.5ns<span style="font-family: 宋体 ">；</span><br />(3) FFT<span style="font-family: 宋体 ">执行时间：即运行一个</span>N<span style="font-family: 宋体 ">点</span>FFT<span style="font-family: 宋体 ">程序所需的时间。由于</span>FFT<span style="font-family: 宋体 ">运算涉及的运算在数字信号处理中很有代表性，因此</span>FFT<span style="font-family: 宋体 ">运算时间常作为衡量</span>DSP<span style="font-family: 宋体 ">芯片运算能力的一个指标；</span><br />(4) MIPS<span style="font-family: 宋体 ">：即每秒执行百万条指令。如</span>TMS320LC549-80<span style="font-family: 宋体 ">的处理能力为</span>80 MIPS<span style="font-family: 宋体 ">，即每秒可执行八千万条指令；</span><br />(5)<br />MOPS<span style="font-family: 宋体 ">：即每秒执行百万次操作。如</span>TMS320C40<span style="font-family: 宋体 ">的运算能力为</span>275 MOPS<span style="font-family: 宋体 ">；</span><br />(6) MFLOPS<span style="font-family: 宋体 ">：即每秒执行百万次浮点操作。如</span>TMS320C31<span style="font-family: 宋体 ">在主频为</span>40MHz<span style="font-family: 宋体 ">时的处理能力为</span>40 MFLOPS<span style="font-family: 宋体 ">；</span><br />(7)<br />BOPS<span style="font-family: 宋体 ">：即每秒执行十亿次操作。如</span>TMS320C80<span style="font-family: 宋体 ">的处理能力为</span>2 BOPS<span style="font-family: 宋体 ">。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 2<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的价格。</span><br /><br />&nbsp; &nbsp;&nbsp; &nbsp; DSP<span style="font-family: 宋体 ">芯片的价格也是选择</span>DSP<span style="font-family: 宋体 ">芯片所需考虑的一个重要因素。如果采用价格昂贵的</span>DSP<span style="font-family: 宋体 ">芯片，即使性能再高，其应用范围肯定会受到一定的限制，尤其是民用产品。因此根据实际系统的应用情况，需确定一个价格适中的</span>DSP<span style="font-family: 宋体 ">芯片。当然，由于</span>DSP<span style="font-family: 宋体 ">芯片发展迅速，</span>DSP<span style="font-family: 宋体 ">芯片的价格往往下降较快，因此在开发阶段选用某种价格稍贵的</span>DSP<span style="font-family: 宋体 ">芯片，等到系统开发完毕，其价格可能已经下降一半甚至更多。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 3<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的硬件资源。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 不同的</span>DSP<span style="font-family: 宋体 ">芯片所提供的硬件资源是不相同的，如片内</span>RAM<span style="font-family: 宋体 ">、</span>ROM<span style="font-family: 宋体 ">的数量，外部可扩展的程序和数据空间，总线接口，</span>I/O<span style="font-family: 宋体 ">接口等。即使是同一系列的</span>DSP<span style="font-family: 宋体 ">芯片（如</span>TI<span style="font-family: 宋体 ">的</span>TMS320C54X<span style="font-family: 宋体 ">系列），系列中不同</span>DSP<span style="font-family: 宋体 ">芯片也具有不同的内部硬件资源，可以适应不同的需要。</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;4<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的运算精度。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;&nbsp;&nbsp;一般的定点</span>DSP<span style="font-family: 宋体 ">芯片的字长为</span>16<span style="font-family: 宋体 ">位，如</span>TMS320<span style="font-family: 宋体 ">系列。但有的公司的定点芯片为</span>24<span style="font-family: 宋体 ">位，如</span>Motorola<span style="font-family: 宋体 ">公司的</span>MC56001<span style="font-family: 宋体 ">等。浮点芯片的字长一般为</span>32<span style="font-family: 宋体 ">位，累加器为</span>40<span style="font-family: 宋体 ">位。</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;5<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的开发工具。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 在</span>DSP<span style="font-family: 宋体 ">系统的开发过程中，开发工具是必不可少的。如果没有开发工具的支持，要想开发一个复杂的</span>DSP<span style="font-family: 宋体 ">系统几乎是不可能的。如果有功能强大的开发工具的支持，如</span>C<span style="font-family: 宋体 ">语言支持，则开发的时间就会大大缩短。所以，在选择</span>DSP<span style="font-family: 宋体 ">芯片的同时必须注意其开发工具的支持情况，包括软件和硬件的开发工具。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 6<span style="font-family: 宋体 ">．</span>DSP<span style="font-family: 宋体 ">芯片的功耗。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 在某些</span>DSP<span style="font-family: 宋体 ">应用场合，功耗也是一个需要特别注意的问题。如便携式的</span>DSP<span style="font-family: 宋体 ">设备、手持设备、野外应用的</span>DSP<span style="font-family: 宋体 ">设备等都对功耗有特殊的要求。目前，</span>3.3V<span style="font-family: 宋体 ">供电的低功耗高速</span>DSP<span style="font-family: 宋体 ">芯片已大量使用。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; 7<span style="font-family: 宋体 ">．其他。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 除了上述因素外，选择</span>DSP<span style="font-family: 宋体 ">芯片还应考虑到封装的形式、质量标准、供货情况、生命周期等。有的</span>DSP<span style="font-family: 宋体 ">芯片可能有</span>DIP<span style="font-family: 宋体 ">、</span>PGA<span style="font-family: 宋体 ">、</span>PLCC<span style="font-family: 宋体 ">、</span>PQFP<span style="font-family: 宋体 ">等多种封装形式。有些</span>DSP<span style="font-family: 宋体 ">系统可能最终要求的是工业级或军用级标准，在选择时就需要注意到所选的芯片是否有工业级或军用级的同类产品。如果所设计的</span>DSP<span style="font-family: 宋体 ">系统不仅仅是一个实验系统，而是需要批量生产并可能有几年甚至十几年的生命周期，那么需要考虑所选的</span>DSP<span style="font-family: 宋体 ">芯片供货情况如何，是否也有同样甚至更长的生命周期等。</span><br /><span style="font-family: 宋体 ">在上述诸多因素中，一般而言，定点</span>DSP<span style="font-family: 宋体 ">芯片的价格较便宜，功耗较低，但运算精度稍低。而浮点</span>DSP<span style="font-family: 宋体 ">芯片的优点是运算精度高，且</span>C<span style="font-family: 宋体 ">语言编程调试方便，但价格稍贵，功耗也较大。例如</span>TI<span style="font-family: 宋体 ">的</span>TMS320C2XX/C54X<span style="font-family: 宋体 ">系列属于定点</span>DSP<span style="font-family: 宋体 ">芯片，低功耗和低成本是其主要的特点。而</span>TMS320C3X/C4X/C67X<span style="font-family: 宋体 ">属于浮点</span>DSP<span style="font-family: 宋体 ">芯片，运算精度高，用</span>C<span style="font-family: 宋体 ">语言编程方便，开发周期短，但同时其价格和功耗也相对较高。</span><br />&nbsp; &nbsp;&nbsp; &nbsp; DSP<span style="font-family: 宋体 ">应用系统的运算量是确定选用处理能力为多大的</span>DSP<span style="font-family: 宋体 ">芯片的基础。运算量小则可以选用处理能力不是很强的</span>DSP<span style="font-family: 宋体 ">芯片，从而可以降低系统成本。相反，运算量大的</span>DSP<span style="font-family: 宋体 ">系统则必须选用处理能力强的</span>DSP<span style="font-family: 宋体 ">芯片，如果</span>DSP<span style="font-family: 宋体 ">芯片的处理能力达不到系统要求，则必须用多个</span>DSP<span style="font-family: 宋体 ">芯片并行处理。那么如何确定</span>DSP<span style="font-family: 宋体 ">系统的运算量以选择</span>DSP<span style="font-family: 宋体 ">芯片呢？下面我们来考虑两种情况。</span><br />1<span style="font-family: 宋体 ">．按样点处理</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp; 所谓按样点处理就是</span>DSP<span style="font-family: 宋体 ">算法对每一个输入样点循环一次。数字滤波就是这种情况。在数字滤波器中，通常需要对每一个输入样点计算一次。例如，一个采用</span>LMS<span style="font-family: 宋体 ">算法的</span>256 <span style="font-family: 宋体 ">抽头的自适应</span>FIR<span style="font-family: 宋体 ">滤波器，假定每个抽头的计算需要</span>3<span style="font-family: 宋体 ">个</span>MAC<span style="font-family: 宋体 ">周期，则</span>256<span style="font-family: 宋体 ">抽头计算需要</span>256<span style="font-family: 宋体 ">&times;</span>3<span style="font-family: 宋体 ">＝</span>768<span style="font-family: 宋体 ">个</span>MAC<span style="font-family: 宋体 ">周期。如果采样频率为</span>8kHz<span style="font-family: 宋体 ">，即样点之间的间隔为</span>125<span style="font-family: Symbol ">m</span>s<span style="font-family: 宋体 ">，</span>DSP<span style="font-family: 宋体 ">芯片的</span>MAC<span style="font-family: 宋体 ">周期为</span>200ns<span style="font-family: 宋体 ">，则</span>768<span style="font-family: 宋体 ">个</span>MAC<span style="font-family: 宋体 ">周期需要</span>153.6<span style="font-family: Symbol ">m</span>s<span style="font-family: 宋体 ">的时间，显然无法实时处理，需要选用速度更高的</span>DSP<span style="font-family: 宋体 ">芯片。表</span>1.3<span style="font-family: 宋体 ">示出了两种信号带宽对三种</span> DSP <span style="font-family: 宋体 ">芯片的处理要求，三种</span>DSP<span style="font-family: 宋体 ">芯片的</span>MAC<span style="font-family: 宋体 ">周期分别为</span>200ns<span style="font-family: 宋体 ">、</span>50ns<span style="font-family: 宋体 ">和</span>25ns<span style="font-family: 宋体 ">。从表中可以看出，对话带的应用，后两种</span>DSP<span style="font-family: 宋体 ">芯片可以实时实现，对声频应用，只有第三种</span>DSP<span style="font-family: 宋体 ">芯片能够实时处理。当然，在这个例子中，没有考虑其他的运算量。<br />2<span style="font-family: 宋体 ">．按帧处理</span><span style="font-family: 宋体 ">&nbsp; &nbsp;有些数字信号处理算法不是每个输入样点循环一次，而是每隔一定的时间间隔（通常称为帧）循环一次。例如，中低速语音编码算法通常以</span>10ms<span style="font-family: 宋体 ">或</span>20ms<span style="font-family: 宋体 ">为一帧，每隔</span>10ms<span style="font-family: 宋体 ">或</span>20ms<span style="font-family: 宋体 ">语音编码算法循环一次。所以，选择</span>DSP<span style="font-family: 宋体 ">芯片时应该比较一帧内</span>DSP<span style="font-family: 宋体 ">芯片的处理能力和</span>DSP<span style="font-family: 宋体 ">算法的运算量。假设</span>DSP<span style="font-family: 宋体 ">芯片的指令周期为</span> p<span style="font-family: 宋体 ">（</span>ns<span style="font-family: 宋体 ">），一帧的时间为</span><span style="font-family: Symbol ">D</span><span style="font-family: Symbol ">t</span><br /><span style="font-family: 宋体 ">（</span>ns<span style="font-family: 宋体 ">），则该</span>DSP<span style="font-family: 宋体 ">芯片在一帧内所能提供的最大运算量为</span> <span style="font-family: Symbol ">D</span><span style="font-family: Symbol ">t</span>/p<span style="font-family: 宋体 ">条指令。例如</span>TMS320LC549-80<span style="font-family: 宋体 ">的指令周期为</span>12.5ns<span style="font-family: 宋体 ">，设帧长为</span>20ms<span style="font-family: 宋体 ">，则一帧内</span>TMS320LC549-80<span style="font-family: 宋体 ">所能提供的最大运算量为</span>160<span style="font-family: 宋体 ">万条指令。因此，只要语音编码算法的运算量不超过</span>160<span style="font-family: 宋体 ">万条指令，就可以在</span>TMS320LC549-80<span style="font-family: 宋体 ">上实时运行。</span><br /><br /><br /><br />1.3.5 <br />DSP<span style="font-family: 黑体 ">芯片的应用</span><span style="font-family: 宋体 ">&nbsp; &nbsp; 自从</span>20<span style="font-family: 宋体 ">世纪</span>70<span style="font-family: 宋体 ">年代末</span>80<span style="font-family: 宋体 ">年代初</span>DSP<span style="font-family: 宋体 ">芯片诞生以来，</span>DSP<span style="font-family: 宋体 ">芯片得到了飞速的发展。</span>DSP<span style="font-family: 宋体 ">芯片的高速发展，一方面得益于集成电路技术的发展，另一方面也得益于巨大的市场。在近</span>20<span style="font-family: 宋体 ">年时间里，</span>DSP<span style="font-family: 宋体 ">芯片已经在信号处理、通信、雷达等许多领域得到广泛的应用。目前，</span>DSP<span style="font-family: 宋体 ">芯片的价格越来越低，性能价格比日益提高，具有巨大的应用潜力。</span>DSP<span style="font-family: 宋体 ">芯片的应用主要有：</span><br />(1) <span style="font-family: 宋体 ">信号处理&mdash;&mdash;如数字滤波、自适应滤波、快速傅立叶变换、相关运算、谱分析、卷积、模式匹配、加窗、波形产生等；</span><br />(2) <span style="font-family: 宋体 ">通信&mdash;&mdash;如调制解调器、自适应均衡、数据加密、数据压缩、回波抵消、多路复用、传真、扩频通信、纠错编码、可视电话等；</span><br />(3) <span style="font-family: 宋体 ">语音&mdash;&mdash;如语音编码、语音合成、语音识别、语音增强、说话人辨认、说话人确认、语音邮件、语音存储等；</span><br />(4) <span style="font-family: 宋体 ">图形</span>/<span style="font-family: 宋体 ">图像&mdash;&mdash;如二维和三维图形处理、图像压缩与传输、图像增强、动画、机器人视觉等；</span><br />(5) <span style="font-family: 宋体 ">军事&mdash;&mdash;如保密通信、雷达处理、声纳处理、导航、导弹制导等；</span><br />(6) <span style="font-family: 宋体 ">仪器仪表&mdash;&mdash;如频谱分析、函数发生、锁相环、地震处理等；</span><br />(7) <span style="font-family: 宋体 ">自动控制&mdash;&mdash;如引擎控制、声控、自动驾驶、机器人控制、磁盘控制等；</span><br />(8) <span style="font-family: 宋体 ">医疗&mdash;&mdash;如助听、超声设备、诊断工具、病人监护等；</span><br />(9) <span style="font-family: 宋体 ">家用电器&mdash;&mdash;如高保真音响、音乐合成、音调控制、玩具与游戏、数字电话</span>/<span style="font-family: 宋体 ">电视等。</span><br /><span style="font-family: 宋体 ">&nbsp; &nbsp;随着</span>DSP<span style="font-family: 宋体 ">芯片性能价格比的不断提高，可以预见</span>DSP<span style="font-family: 宋体 ">芯片将会在更多的领域内得到更为广泛的应用。</span></span>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?790</link>
<title><![CDATA[双核处理器ARM+DSP如何实现协同工作 ]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[DSP]]></category>
<pubDate>Thu, 24 Nov 2011 01:54:44 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?790</guid> 
<description>
<![CDATA[ 
	<span style="font-size: medium">针对当前应用的复杂性，SOC芯片更好能能满足应用和媒体的需求，集成众多接口，用ARM做为应用处理器进行多样化的应用开发和用户界面和接口，利用DSP进行算法加速，特别是媒体的编解码算法加速，既能够保持算法的灵活性，又能提供强大的处理能力。德州仪器（TI）继第一系列Davinci芯片DM644x之后，又陆续推出了DM643x，DM35x/36x，DM6467，OMAP35x，OMAPLx等一系列ARM＋DSP或ARM＋视频协处理器的多媒体处理器平台。众多有很强DSP开发经验的工程师，以及应用处理开发经验的工程师都转到使用达芬奇或OMAP平台上开发视频监控、视频会议及便携式多媒体终端等产品。基于ARM+DSP的芯片架构，如何进行开发实现做期望的嵌入式应用呢？</span> <p><span style="font-size: 18px">&nbsp; &nbsp; &nbsp; 传统的芯片，基本是一个处理器内核，或者是通用处理器如ARM，或者是DSP。对于控制和用户接口，一般用通用处理器实现，算法处理或者媒体处理则依赖于DSP或者硬件芯片，很多系统都是双芯片的架构。开发模式也比较单纯，比如ARM芯片，有ARM的的仿真工具，基于OS之上进行应用开发；DSP有DSP的开发工具，如TI的CCS以及510、560的仿真器，可以进行算法的移植、优化、跟踪、调试等。这时，所需要的经验也比较单一。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp;&nbsp; 基于ARM+DSP的双核架构，很多工程师不知道如何入手进行开发，提出了很多的疑问，比如对ARM工程师，很困惑的是<strong>如何使用DSP的资源？如何进行数据的交互？如何保持双核之间的同步？</strong>对DSP工程师，则问到<strong>如何进行ARM调试？如何启动DSP？如果进行媒体加速，如何操作外设获取或发送数据等</strong>。基于不同的开发经验和基础，ARM工程师和DSP工程师会从完全不同的角度来看SOC的芯片，以至于拿到SOC的芯片根本不知道如何入手，这里就本人的经验与大家分享一下。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp; &nbsp;首先ARM+DSP的芯片，他是一个双核的，对应ARM和DSP分别是不同的指令集和编译器，可以把SOC的芯片看成是两个单芯片的合成，需要两套不同的开发工具，CCS3.3可以进行芯片级的调试和仿真，但是对应ARM和DSP需要选择不同的平台。一般来说，ARM上面跑操作系统，比如Linux，Wince等，在ARM上的开发，除了bootloader以外，基本都是基于OS的开发，比如驱动，内核裁减，以及上层应用等，需要的调试和仿真主要<strong>靠log或者OS提供的调试器</strong>，如KGDB，Platform Builder等。基于DSP核的开发和传统单核DSP一样，需要用<strong>CCS+仿真器</strong>来进行开发调试。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp;&nbsp; 其次，对于芯片的外设接口，ARM核和DSP核都可以访问，典型的情况是<strong>ARM控制所有的外设</strong>，通过OS上的驱动去控制和管理，这部分和传统的ARM芯片类似；<strong>DSP主要是进行算法加速，只是和memory打交道</strong>，为了保持芯片的资源管理的一致性，<strong>尽量避免由DSP去访问外设</strong>。当然，根据具体的应用需求，DSP也是可以控制外设接口进行数据的收发，这时，需要做好系统的管理，避免双核操作的冲突。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp; 对memory的使用，非易失的存储空间，比如NAND、NORFlash，基本也是由ARM访问，DSP的算法代码作为ARM端OS文件系统的一个文件存在，通过应用程序进行DSP程序的下载和DSP芯片的控制。外部RAM空间，即DDR存储区，是ARM和DSP共享存在的，但是在系统设计的时候，<strong>需要把ARM和DSP使用的内存严格物理地址分开，以及预留出一部分用来交互的内存空间</strong>。一般情况，<strong>ARM是用低端地址，DSP通过CMD文件分配高端地址，中间预留部分空间用来做数据交互</strong>，比如在OMAP3的Linux下的DVSDK中，128MB的DDR空间被分成三部分，低端地址从0x8000000到0x85800000-1的88MB空间给Linux内核使用；从0x85800000到0x86800000-1的16MB给CMEM的驱动，用来做ARM和DSP的大块数据交互，从0x86800000到0x88000000-1的24MB是DSP的代码和数据空间。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 芯片的启动也是需要重点考虑的问题，一般情况下，是<strong>ARM启动</strong>，和传统的单核ARM一样，支持不同的启动方式，比如可以支持NAND，NOR，UART，SPI，USB，PCI等接口启动。<strong>DSP默认处于复位状态，只有通过ARM的应用下载代码并且解除复位以后，DSP才能跑起来</strong>。有些应用场景，需要DSP直接从外部上电就自启动，有些芯片也是支持这种模式的。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp; 最后，关于芯片的通信和同步，这个是困扰很多工程师的问题，为了便于客户的开发和使用，<strong>TI提供了DSPLINK</strong>，CODECENGINE的DVSDK开发套件，基于DVSDK可以很方便的进行ARM+DSP的应用开发，下面对DVSDK的软件架构，各个软件模块的功能等做简要介绍。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp; &nbsp;DVSDK是多个软件模块的集成，包括纯DSP端的软件模块，ARM的软件模块和双核交互的软件模块。DVSDK的软件包都是基于实时软件模块（Real-Time-Software-Component：RTSC）的，还需要安装RTSC的工具XDC，XDC是TI开源的一个工具，可以支持跨平台的开发，能够最大程度的代码重用；如果需要进行纯ARM的开发，还需要ARM的编译工具以及Linux内核或者Wince的BSP；如果需要进行DSP的算法开发或者DSP端开执行代码生成，还需要安装DSP的编译器cgtools和DSP/BIOS；为了便于配置生成DSP端的可执行代码，通过向导生成Codec的RTSC包和可执行代码，还可以选装ceutils和cg_xml。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp; DVSDK的核心是CodecEngine，所有的其他软件模块基本都是围绕Codec Engine的。Codec Engine是连接ARM和DSP的桥梁，是介于应用层（ARM侧的应用程序）和信号处理层（DSP侧的算法）之间的软件模块，在编译DSP端可执行代码和ARM端应用程序时，都需要Codec Engine的支持。Codec Engine主要有两部分：</span></p><p><span style="font-size: 18px"> ARM端应用适配层，提供了精简的API和对应的库给应用层使用。</span></p><p><span style="font-size: 18px"> DSP的算法调用层，提供了DSP算法的接口封装规范，是的所有的算法通过简单的配置就可以编译到DSP的可执行程序中。</span></p><p><span style="font-size: 18px">最终的应用程序需要通过Codec Engine的API接口来下载DSP代码，调用DSP端的封装好的算法，以及进行ARM和DSP的通信。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp; 关于CodecEngine的介绍，可以参考《帮您快速入门Codec Engine》。</span></p><p><span style="font-size: 18px">&nbsp;&nbsp;&nbsp; <strong>Codec Engine底层ARM和DSP的通信是建立在DSP/BIOSLink之上</strong>的，DSP/BIOSLink真正实现ARM和DSP交互的软件模块。由于DSP/BIOS Link是跨平台的，也是有ARM部分和DSP部分组成，其中在ARM端，包括基于OS的驱动和供应用调用的库文件，DSP端，必须要用DSP/BIOS，<strong>DSP的可执行代码需要包含DSP/BIOSLink的库文件</strong>。DSP/BIOSLink常用的主要有如下几部分的软件模块：</span></p><p><span style="font-size: 18px"> &nbsp;&nbsp;PROC相关的，主要是用来做<strong>DSP芯片的控制</strong>，比如启动，停止等，下载DSP的可执行代码，以及<strong>直接读写DSP端的memory空间</strong>等</span></p><p><span style="font-size: 18px"> &nbsp;&nbsp;MSGQ相关，ARM和DSP的通信是基于MSGQ的，MSGQ有<strong>轮询等待</strong>的方式或者<strong>中断</strong>的方式，MSG是基于<strong>共享内存池</strong>的方式。Codec Engine通过<strong>MSGQ交互一些关键数据，比如控制，和一些大块数据的地址指针等</strong>。<strong>大量的数据交互需要通过cmem实现</strong>。</span></p><p><span style="font-size: 18px">在ARM端，配合CodecEngine使用的软件模块有LinuxUtils或者WinceUtils，包含cmem，SDMA等，cmem是用来在OS之外分配连续物理内存空间，进行物理地址到虚地址，以及虚地址到物理地址空间转化的。为了避免数据的多次复制，需要开辟一块ARM和DSP共享的数据空间，ARM和DSP都可以直接访问，这部分空间需要通过CMEM管理。对ARM来说，CMEM是OS上的一个驱动程序，需要<strong>通过IOCTL来实现内存分配或者地址空间转化</strong>。由于<strong>DSP可以访问任何物理地址空间，通过ARM传给DSP的指针必须是物理地址</strong>。</span></p><p><span style="font-size: 18px">&nbsp; &nbsp;&nbsp;为了适配一些播放器的接口，DVSDK还提供了DMAI（Digital Media Application Interface），DMAI提供了更为精简的媒体接口和基于OS的音视频捕捉、回放等接口，在Linux下的gstreamer和Wince下的dshow filter都是基于DMAI的。并且DMAI也提供了最基本的测试应用例子，可以很方便的进行修改和测试。</span></p><p><span style="font-size: 18px">如果只是调用现成的或者第三方的算法库，可以只了解ARM端的软件模块，Codec Engine或者DMAI已经提供了丰富的应用接口，DSP可以认为是个单纯的媒体加速器，把ARM+DSP的芯片当作ASIC一样使用。如果要充分发挥DSP的性能，就需要对DSP进行开发了。Codec Engine对DSP的算法只是规范了接口，以便于和Codec Engine一起生成DSP的可执行程序。</span></p><p><span style="font-size: 18px">&nbsp; &nbsp;&nbsp;开发DSP算法的工程师，和传统的单核的DSP开发模式类似，只需要操作DSP核，基于CCS进行算法开发，最后封装成xDM的接口就可以了。具体如何进行DSP的打包，如何生成DSP的可执行程序，在后续的文章继续讨论。</span></p>
]]>
</description>
</item>
</channel>
</rss>