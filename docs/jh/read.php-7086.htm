<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>关于AI的目标导向型行动计划 - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-7085.htm" tppabs="http://i.renjihe.com/blog/read.php?7085" title="上一篇 斯坦福大学学生整理的游戏"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>斯坦福大学学生整理的游戏</a></div>
	<div class="next-article"><a href="read.php-7087.htm" tppabs="http://i.renjihe.com/blog/read.php?7087" title="下一篇 游戏人工智能开发之6种决"><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>游戏人工智能开发之6种决</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jan</span>
	<span class="textbox-calendar-day">24</span>
	</div>
	<div class="textbox-title">
		<h4>
		关于AI的目标导向型行动计划 <span id="starid7086"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 19:46 , <a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="查看分类： 理论">理论</a> &raquo; <a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="查看分类： 算法">算法</a> , <a href="read.php-7086.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?7086#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb7086");'>引用(0)</a> , <a href="read.php-7086.htm" tppabs="http://i.renjihe.com/blog/read.php?7086">阅读(1)</a> ,  Via 本站原创 <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="字体大小" border='0'/> <a href="javascript: doZoom(16);">大</a> | <a href="javascript: doZoom(14);">中</a> | <a href="javascript: doZoom(12);">小</a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?523  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?523'" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_7086"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="订阅本文" border='0'/></a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?522  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?522'" tppabs="http://i.renjihe.com/blog/read.php?save_7086"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="保存本文为文本文档" border='0'/></a></span>
		</div>
	</div>
	<div id="tb7086" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	<p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">目标导向型行动计划（简称GOAP）是一种能够轻松呈现给你的代理选择的AI系统，也是帮助你可以无需维持一个庞大且复杂的有限状态机而做出明智的决策的机器。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>演示版本</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">在这一演示版本中存在4种角色类别，每种类别使用的工具会在使用后一段时间被弄坏：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">矿工：在岩石上挖矿。需要一个工具的帮忙。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">樵夫：砍树去创造原木。需要一个工具的帮忙。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">伐木工：将树切割成可使用的木头。需要一个工具的帮忙。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">铁匠：在铁工厂锻造工具。每个人都要使用他所创造的工具。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">每种类别将能够自动识别（使用模板导向型行动计划）自己需要采取怎样的行动去实现目标。如果他们的工具坏掉了，他们将前往提供铁匠所创造的工具的供应处。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>什么是GOAP？</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">目标导向型行动计划是代理的一种人工智能系统，让你能够计划一系列行动去满足一个特殊的模板。特殊的行动序列不仅依靠于目标，同时也依靠于世界和代理当前的状态。这意味着如果同意的模板是针对于不同的代理或世界状态，你变回获得一个完全不同的行动序列，浙江能够让AI变得更加东太后且显示。让我们着眼于一个例子，即上述演示中所看到的内容。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">我们拥有一个代理，他是伐木工，将把原木砍成木柴。这时候斧头将带着MakeFirewood的目标，并具有ChopLog，GetAxe和CollectBranches的行动。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">ChopLog行动将把一根原木变成木柴，但前提是伐木工人拥有一把斧头。GetAxe行动将提供给伐木工人一把斧头。最后，CollectBranches行动将创造出木柴，并且不需要斧头，但是木柴的质量将不是很高。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">当我们提供给代理MakeFirewood目标时，我们将看到两种不同的行动序列：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">需要木柴&ndash;&gt;GetAxe&ndash;&gt;ChopLog&ndash;创造出木柴</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">需要木柴&ndash;&gt;CollectBranches&ndash;创造出木柴</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">如果代理可以获得斧头，他们便会通过砍伐原木将其变成木柴。但如果他们不能获得斧头，他们便可以选择去收集树枝。每种序列都将完成MakeFirewood这个目标。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP能够基于可行的先决条件去选择最佳序列。如果手边没有斧头，那么伐木工便不得不去寻找树枝。而这么做需要花费较长时间并只能获得一些低质量的木柴，所以我们不希望这种情况一致持续下去。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>GOAP是针对于谁</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">到目前为止你可能熟悉有限状态机（FSM），但如果你并不熟悉，那么着眼于这个教程。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">关于你的一些FSM代理，你可能遇到过某种较为复杂的状态，你可能会不想要添加新行为，因为它们会在AI中引起过多副作用和缺口。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP会将如下状态：</p><div id="attachment_83624" class="wp-caption aligncenter" style="padding: 0px; margin: 0px auto; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; width: 510px"><a style="text-decoration: none; color: #769e01" href="javascript:if(confirm('http://gamerboom.com/wp-content/uploads/2014/04/read.php?521  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamerboom.com/wp-content/uploads/2014/04/read.php?521'" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/fsm_statesfrom-gamedevelopment.jpg"><img style="display: block; border: 1px solid #e1dfdf; padding: 4px; background: #f3f3f3" class="size-full wp-image-83624" src="read-1.php-521" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/fsm_statesfrom-gamedevelopment.jpg" border="0" alt="fsm_states(from gamedevelopment)" title="fsm_states(from gamedevelopment)" width="500" height="227" /></a><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; text-align: center" class="wp-caption-text">fsm_states(from gamedevelopment)</p></div><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">变成这样：</p><div id="attachment_83623" class="wp-caption aligncenter" style="padding: 0px; margin: 0px auto; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; width: 510px"><a style="text-decoration: none; color: #769e01" href="javascript:if(confirm('http://gamerboom.com/wp-content/uploads/2014/04/read.php?520  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamerboom.com/wp-content/uploads/2014/04/read.php?520'" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/goap_statesfrom-gamedevelopment.jpg"><img style="display: block; border: 1px solid #e1dfdf; padding: 4px; background: #f3f3f3" class="size-full wp-image-83623" src="read-1.php-520" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/goap_statesfrom-gamedevelopment.jpg" border="0" alt="goap_states(from gamedevelopment)" title="goap_states(from gamedevelopment)" width="500" height="227" /></a><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; text-align: center" class="wp-caption-text">goap_states(from gamedevelopment)</p></div><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">通过减弱每个行动，现在我们可以单独专注于每个行动。这会让代码趋于模块化，变得更容易进行测试与维持。如果你想要往另一个行动添加新内容，你便可以直接做，而无需改变任何其它行动。尝试着基于一个FSM去做到这些！</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">同样地，你可以在运行中添加或删除行动去改变一个代理的行为从而让他们变得更加东太后。拥有一个食人魔会突然开始咆哮？那就提供给它们一个全新的&ldquo;咆哮攻击&rdquo;行动，并在它们平静下来时将其删除。你需要做的只是添加行动到行动列表上：GOAP计划者将负责剩下的内容。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">如果你发现你的代理拥有一个非常复杂的FSM，你就应该够尝试下GOAP。你的FSM变得过于复杂的一个标志便是当所有的状态拥有大量条件语句并会测试它们接下来将变成何种状态，同时添加新的状态，这一切都会让你深深叹息。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">如果你拥有一个非常简单的代理，只是执行1,2种任务的话，那么GOAP可能有点太过棘手，FSM便足够了。然而，你还是可以着眼于这里的相关理念并看看它们是否足够简单并能够应用于你的代理中。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>行动</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">行动是代理做的事。通常情况下它只是以动画和声音呈现出来，并且会改变一些状态（游戏邦注：例如添加木柴）。打开一扇门与捡起铅笔是完全不同的行动（和动画）。行动与行动间是相互独立的，并不需要去担心其它行动是什么。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">为了帮助GOAP决定我们想要使用怎样的行动，每个行动都会被赋予一个成本。在较低成本的行动中将不能选择较高成本的行动。当我们将行动排列在一起时，我们将合计成本，然后选择带有最低成本的序列。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">让我们为行动分配一些成本：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe的成本：2</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">ChopLog的成本：4</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches的成本：8</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">如果我们再次着眼于行动序列并合计总成本，我们将看到最便宜的序列是：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">需要木柴&ndash;&gt;GetAxe（2）&ndash;&gt;ChopLog（4）=创造木柴（总共是6）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">需要木柴&ndash;&gt;CollectBranches（8）=创造木柴（总共是8）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">获得一把斧头并砍断原木创造木柴是基于较低成本6，而收集树枝创造木柴则是基于较高的成本8。所以我们的代理选择获得一把斧头去砍断树木。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">但是是否将永远运行着同样的序列？如果我们引进先决条件的话会怎样？</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>先决条件和效果</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">行动拥有先决条件和效果。先决条件是行动运行所必须的状态，而效果则是行动运行后所发生的状态改变。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">例如，ChopLog行动要求代理获得手边的斧头。如果代理并未拥有斧头，它便需要找到另外一个能够满足先决条件的行动，从而让ChopLog能够运行起来。幸运的是，GetAxe行动能够做到这点&mdash;-这是行动的效果。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>GOAP计划者</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP计划者是段着眼于行动的先决条件和效果的代码，它将创造能够满足目标的序列。代理将朝着该目标前进，并伴随着一个世界状态以及代理能够执行的一列行动。基于这一信息，GOAP计划者能够排列行动，明确哪些是可运行的哪些不能，然后决定哪个行动是最突出的。幸运的是，我已经为你写好了这一代码，你无需再为此多花时间了。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">为了进行设置，让我们添加先决条件和效果到伐木工的行动中：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe的成本：2。先决条件：&ldquo;存在斧头，&rdquo;&ldquo;并未拥有斧头。&rdquo;效果：&ldquo;拥有一把斧头。&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">ChopLog的成本：4。先决条件：&ldquo;拥有一把斧头。&rdquo;效果：&ldquo;创造木柴。&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches的成本：8。先决条件：（没有）。效果：&ldquo;创造木柴。&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">现在GOAP计划者拥有排列行动序列所需的信息去创造木柴（我们的目标）。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">我们开始基于当前世界的状态和代理的状态执行GOAP计划者。这一组合的世界状态是：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;并未拥有斧头&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;存在斧头&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;阳光很耀眼&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">着眼于我们当前可行的行动，唯一与它们相关的状态是&ldquo;并未拥有斧头&rdquo;和&ldquo;存在斧头&rdquo;状态；另外一个可能是用于使用其它行动的其它代理身上。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">现在，我们拥有当前的世界状态，行动（带有自己的先决条件和效果）以及目标。让我们进行计划吧！</p><blockquote style="padding: 20px; margin: 0px 0px 20px; height: 100px; width: 534px; overflow: auto; border: 1px solid #cccccc; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; background: #f7f7f7"><p style="padding: 0px; margin: 0px 0px 20px">GOAL: &ldquo;make firewood&rdquo;<br />Current State: &ldquo;doesn&rsquo;t have an axe&rdquo;, &ldquo;an axe is available&rdquo;<br />Can action ChopLog run?<br />NO &ndash; requires precondition &ldquo;has an axe&rdquo;<br />Cannot use it now, try another action.<br />Can action GetAxe run?<br />YES, preconditions &ldquo;an axe is available&rdquo; and &ldquo;doesn&rsquo;t have an axe&rdquo; are true.<br />PUSH action onto queue, update state with action&rsquo;s effect<br />New State<br />&ldquo;has an axe&rdquo;<br />Remove state &ldquo;an axe is available&rdquo; because we just took one.<br />Can action ChopLog run?<br />YES, precondition &ldquo;has an axe&rdquo; is true<br />PUSH action onto queue, update state with action&rsquo;s effect<br />New State<br />&ldquo;has an axe&rdquo;, &ldquo;makes firewood&rdquo;<br />We have reached our GOAL of&nbsp; &ldquo;makes firewood&rdquo;<br />Action sequence: GetAxe -&gt; ChopLog</p></blockquote><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">计划者将贯穿其它行动而运行，当它发现目标的解决方法时也不会停下来。如果另外一个序列拥有较低的成本的话要怎么办？它将贯穿所有可能性去寻找最佳解决方法。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">当它在计划时，它将创造一棵树。每当行动得到落实，它将离开可行行动的列表，如此我们将不具有紧紧相连的50个GetAxe行动。状态是随着行动的效果发生改变。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">计划者所创造的树如下：</p><div id="attachment_83626" class="wp-caption aligncenter" style="padding: 0px; margin: 0px auto; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; width: 510px"><a style="text-decoration: none; color: #769e01" href="javascript:if(confirm('http://gamerboom.com/wp-content/uploads/2014/04/read.php?519  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamerboom.com/wp-content/uploads/2014/04/read.php?519'" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/freemindfrom-gamedevelopment.jpg"><img style="display: block; border: 1px solid #e1dfdf; padding: 4px; background: #f3f3f3" class="size-full wp-image-83626" src="read-1.php-519" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/freemindfrom-gamedevelopment.jpg" border="0" alt="freemind(from gamedevelopment)" title="freemind(from gamedevelopment)" width="500" height="103" /></a><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; text-align: center" class="wp-caption-text">freemind(from gamedevelopment)</p></div><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">我们可以看到它会找到3种通向目标的方法：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe&ndash;&gt;ChopLog（总成本是6）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe&ndash;&gt;CollectBranches（总成本是10）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches（总成本是8）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">尽管GetAxe&ndash;&gt;CollectBranches是可行的，但是最便宜的方法应该是GetAxe&ndash;&gt;ChopLog。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">先决条件和效果在代码中是怎样的？这是取决于你，但我发现将其作为键值对进行储存是最简单的，即在此键始终是一串字符，而值则是一个对象或基本类型（float，int，Boolean之类的）。在C#中是这样的：</p><blockquote style="padding: 20px; margin: 0px 0px 20px; height: 100px; width: 551px; overflow: auto; border: 1px solid #cccccc; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; background: #f7f7f7"><p style="padding: 0px; margin: 0px 0px 20px">HashSet&lt; KeyValuePair&lt;string,object&gt; &gt; preconditions;</p><p style="padding: 0px; margin: 0px 0px 20px">HashSet&lt; KeyValuePair&lt;string,object&gt; &gt; effects;</p></blockquote><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">当行动在执行时，这些效果是怎样的，它们将做什么？其实它们什么也不需要做&mdash;-它们只是用于计划，在真正运行前并不会对代理的状态产生影响。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">这是值得强调的：计划行动与运行它们并不相同。当一个代理执行GetAxe行动时，可能在它周围就有许多工具，将播放弯腰捡东西的动画，然后再把斧头装进它的背包中。这改变了代理的状态。但是，在GOAP计划期间，状态改变只是暂时的，所以计划者可以明确最佳解决方法。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>程序上的先决条件</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">有时候，行动需要做更多事去决定它们是否可以运行。例如，GetAxe行动拥有&ldquo;存在斧头&rdquo;这样的先决条件即需要去探索世界，以判断是否存在代理可以使用的斧头。它将决定最近的斧头是很遥远或者藏在敌人背后，并将传达它不能运行的信息。这一先决条件便是程序上的，并需要运行一些代码；这并不只是我们能够触发的简单的Boolean操作符。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">显然，这些程序上的先决条件需要花些时间才能运行，并且将执行于渲染线程以外的内容，最理想的便是背景线程或作为Coroutines（在Unity中）。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">你也将拥有程序效果，如果你希望的话。如果你想要引进更加动态化的结果模拟将能够在运行过程中改变行动成本！</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP和状态</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">我们的GOAP系统将需要呈现在一个小型的有限状态机中，因为在许多游戏中，行动需要为了执行而接近一个目标。我们最终拥有3种状态：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Idle</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">MoveTo</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">PerformAction</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">当出现idle时，代理将明确他们想要完成的目标。这一部分是在GOAP外部进行处理；GOAP将只是告诉你能够执行目标的行动。当选择好目标时，它将被转移到GOAP计划者中，并伴随着世界和代理的开始状态，计划者将传回一个行动列表（游戏邦注：如果它可以实现目标的话）。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">当计划者完成任务而代理拥有一个行动列表时，它将尝试着执行第一个行动。所有的行动需要明确它们是否需要处在目标范围内。如果它们这么做，那么FSM将推动下一种状态：MoveTo。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">MoveTo状态将告诉代理它需要移向特定的目标。代理将作出移动（播放行走的动画），然后让FSM知道它何时是处于目标的范围内。这一状态之后将被删除，从而行动将能够执行。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">PerformAction状态将在GOAP计划者所传回的行动序列中运行下一个行动。行动可以是即时的或者持续好几帧，但当它完成后将离开列表，然后下一个行动便可以开始执行（再一次地，需要在一个对象范围内检查下一个行动是否需要被执行）。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">这些内容将一直重复着直到不再有行动可以执行，那时候我们将回到Idle状态，获得一个新目标并再次进行计划。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>真正的代码例子</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">是时候着眼于真正的例子了！别担心；这并不复杂，我提供了Unity和C#中的一份工作副本能够帮助你进行尝试。我将在此简单地进行阐述，从而让你可以进行探索。代码使用了之前提到的WoodChopper例子。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">如果你想做的更好，先在此获得代码：http://github.com/sploreg/goap</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">我们拥有4种劳工：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">铁匠：将铁矿石变成工具。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">樵夫：使用一种工具将树砍成木头。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">矿工：使用一种工具去挖矿石而创造铁矿石。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">伐木工：使用一种工具将木头砍成木柴。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">工具将随着时间的流逝而磨损，并需要被替换。幸运的是，铁匠能够创造工具。但他们需要铁矿石才能创造工具，这时候便需要矿工的帮忙（他同样也需要工具）。伐木工需要木头，而这些是源自樵夫；他们都需要工具。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">工具和资源被储存在供应处。代理将从供应处收集他所需要的材料或工具，同时在这里放下他们所创造的产品。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">代码具有6种主要的GOAP类别：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAgent：了解状态并使用FSM和GoapPlanner去操作。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAction：代理能够执行的行动。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapPlanner：计划GoapAgent的行动。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">FSM：有限的状态机。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">FSMState：FSM中的一种状态。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">IGoap：我们的劳工演员所使用的界面。与GOAP和FSM的事件相关联。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">让我们着眼于GoapAction类别，因为这是你需要划入子集的内容：</p><blockquote style="padding: 20px; margin: 0px 0px 20px; height: 100px; width: 534px; overflow: auto; border: 1px solid #cccccc; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; background: #f7f7f7"><p style="padding: 0px; margin: 0px 0px 20px">public abstract class GoapAction : MonoBehaviour &#123;</p><p style="padding: 0px; margin: 0px 0px 20px">private HashSet&lt;KeyValuePair&lt;string,object&gt;&gt; preconditions;<br />private HashSet&lt;KeyValuePair&lt;string,object&gt;&gt; effects;</p><p style="padding: 0px; margin: 0px 0px 20px">private bool inRange = false;</p><p style="padding: 0px; margin: 0px 0px 20px">/* The cost of performing the action.<br />* Figure out a weight that suits the action.<br />* Changing it will affect what actions are chosen during planning.*/<br />public float cost = 1f;</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* An action often has to perform on an object. This is that object. Can be null. */<br />public GameObject target;</p><p style="padding: 0px; margin: 0px 0px 20px">public GoapAction() &#123;<br />preconditions = new HashSet&lt;KeyValuePair&lt;string, object&gt;&gt; ();<br />effects = new HashSet&lt;KeyValuePair&lt;string, object&gt;&gt; ();<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void doReset() &#123;<br />inRange = false;<br />target = null;<br />reset ();<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Reset any variables that need to be reset before planning happens again.<br />*/<br />public abstract void reset();</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Is the action done?<br />*/<br />public abstract bool isDone();</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Procedurally check if this action can run. Not all actions<br />* will need this, but some might.<br />*/<br />public abstract bool checkProceduralPrecondition(GameObject agent);</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Run the action.<br />* Returns True if the action performed successfully or false<br />* if something happened and it can no longer perform. In this case<br />* the action queue should clear out and the goal cannot be reached.<br />*/<br />public abstract bool perform(GameObject agent);</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Does this action need to be within range of a target game object?<br />* If not then the moveTo state will not need to run for this action.<br />*/<br />public abstract bool requiresInRange ();</p><p style="padding: 0px; margin: 0px 0px 20px">/**<br />* Are we in range of the target?<br />* The MoveTo state will set this and it gets reset each time this action is performed.<br />*/<br />public bool isInRange () &#123;<br />return inRange;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void setInRange(bool inRange) &#123;<br />this.inRange = inRange;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void addPrecondition(string key, object value) &#123;<br />preconditions.Add (new KeyValuePair&lt;string, object&gt;(key, value) );<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void removePrecondition(string key) &#123;<br />KeyValuePair&lt;string, object&gt; remove = default(KeyValuePair&lt;string,object&gt;);<br />foreach (KeyValuePair&lt;string, object&gt; kvp in preconditions) &#123;<br />if (kvp.Key.Equals (key))<br />remove = kvp;<br />&#125;<br />if ( !default(KeyValuePair&lt;string,object&gt;).Equals(remove) )<br />preconditions.Remove (remove);<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void addEffect(string key, object value) &#123;<br />effects.Add (new KeyValuePair&lt;string, object&gt;(key, value) );<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public void removeEffect(string key) &#123;<br />KeyValuePair&lt;string, object&gt; remove = default(KeyValuePair&lt;string,object&gt;);<br />foreach (KeyValuePair&lt;string, object&gt; kvp in effects) &#123;<br />if (kvp.Key.Equals (key))<br />remove = kvp;<br />&#125;<br />if ( !default(KeyValuePair&lt;string,object&gt;).Equals(remove) )<br />effects.Remove (remove);<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public HashSet&lt;KeyValuePair&lt;string, object&gt;&gt; Preconditions &#123;<br />get &#123;<br />return preconditions;<br />&#125;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public HashSet&lt;KeyValuePair&lt;string, object&gt;&gt; Effects &#123;<br />get &#123;<br />return effects;<br />&#125;<br />&#125;<br />&#125;</p></blockquote><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">这里没什么特别的内容：它储存了先决条件和效果。它同样也知道它是否必须处于目标范围内，如果这样的话，FSM便知道在需要的时候推动MoveTo状态。它也知道它是何时完成的；这是由执行行动类别所决定。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">以下是其中的一种行动：</p><blockquote style="padding: 20px; margin: 0px 0px 20px; height: 100px; width: 534px; overflow: auto; border: 1px solid #cccccc; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; background: #f7f7f7"><p style="padding: 0px; margin: 0px 0px 20px">public class MineOreAction : GoapAction<br />&#123;<br />private bool mined = false;<br />private IronRockComponent targetRock; // where we get the ore from</p><p style="padding: 0px; margin: 0px 0px 20px">private float startTime = 0;<br />public float miningDuration = 2; // seconds</p><p style="padding: 0px; margin: 0px 0px 20px">public MineOreAction () &#123;<br />addPrecondition (&ldquo;hasTool&rdquo;, true); // we need a tool to do this<br />addPrecondition (&ldquo;hasOre&rdquo;, false); // if we have ore we don&rsquo;t want more<br />addEffect (&ldquo;hasOre&rdquo;, true);<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public override void reset ()<br />&#123;<br />mined = false;<br />targetRock = null;<br />startTime = 0;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public override bool isDone ()<br />&#123;<br />return mined;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public override bool requiresInRange ()<br />&#123;<br />return true; // yes we need to be near a rock<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public override bool checkProceduralPrecondition (GameObject agent)<br />&#123;<br />// find the nearest rock that we can mine<br />IronRockComponent[] rocks = FindObjectsOfType ( typeof(IronRockComponent) ) as IronRockComponent[];<br />IronRockComponent closest = null;<br />float closestDist = 0;</p><p style="padding: 0px; margin: 0px 0px 20px">foreach (IronRockComponent rock in rocks) &#123;<br />if (closest == null) &#123;<br />// first one, so choose it for now<br />closest = rock;<br />closestDist = (rock.gameObject.transform.position &ndash; agent.transform.position).magnitude;<br />&#125; else &#123;<br />// is this one closer than the last?<br />float dist = (rock.gameObject.transform.position &ndash; agent.transform.position).magnitude;<br />if (dist &lt; closestDist) &#123;<br />// we found a closer one, use it<br />closest = rock;<br />closestDist = dist;<br />&#125;<br />&#125;<br />&#125;<br />targetRock = closest;<br />target = targetRock.gameObject;</p><p style="padding: 0px; margin: 0px 0px 20px">return closest != null;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">public override bool perform (GameObject agent)<br />&#123;<br />if (startTime == 0)<br />startTime = Time.time;</p><p style="padding: 0px; margin: 0px 0px 20px">if (Time.time &ndash; startTime &gt; miningDuration) &#123;<br />// finished mining<br />BackpackComponent backpack = (BackpackComponent)agent.GetComponent(typeof(BackpackComponent));<br />backpack.numOre += 2;<br />mined = true;<br />ToolComponent tool = backpack.tool.GetComponent(typeof(ToolComponent)) as ToolComponent;<br />tool.use(0.5f);<br />if (tool.destroyed()) &#123;<br />Destroy(backpack.tool);<br />backpack.tool = null;<br />&#125;<br />&#125;<br />return true;<br />&#125;</p><p style="padding: 0px; margin: 0px 0px 20px">&#125;</p></blockquote><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">最大的行动部分是checkProceduralPreconditions方法。它是伴随着IronRockComponent在寻找最近的游戏对象，并保存这一目标演示。然后当它开始执行的时候，它将保存目标岩石并基于它去执行行动。当行动被再次使用时，它的所有领域都将被重置，从而让它们能够再次得到计算。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">这是在Unity中添加到矿工实体对象的所有组件：</p><div id="attachment_83627" class="wp-caption aligncenter" style="padding: 0px; margin: 0px auto; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px; width: 510px"><a style="text-decoration: none; color: #769e01" href="javascript:if(confirm('http://gamerboom.com/wp-content/uploads/2014/04/read.php?518  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamerboom.com/wp-content/uploads/2014/04/read.php?518'" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/componentsfrom-gamedevelopment.jpg"><img style="display: block; border: 1px solid #e1dfdf; padding: 4px; background: #f3f3f3" class="size-full wp-image-83627" src="read-1.php-518" tppabs="http://gamerboom.com/wp-content/uploads/2014/04/componentsfrom-gamedevelopment.jpg" border="0" alt="components(from gamedevelopment)" title="components(from gamedevelopment)" width="500" height="188" /></a><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; text-align: center" class="wp-caption-text">components(from gamedevelopment)</p></div><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">为了让你的代理能够运行，你必须添加如下组件：</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAgent。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">执行IGoap的一种类别（也就是上述例子中的Miner.cs）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">一些行动。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">一个背包（只是因为行动在使用它；这与GOAP不相关）。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">你可以添加自己想要的任何行动，这将改变代理的行为。你甚至可以提供给它所有的行动，从而让它可以挖矿石，锻造工具并砍伐树木。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">每个劳工将走向他们需要行动的目标（树，岩石，砧板等待）去执行行动。铁匠将保持等待直至供应处出现铁矿石（来自矿工）。然后铁匠将去创造工具，并将工具放到离自己最近的供应处。当劳工的工具破损时，他们将前往铁匠附近的供应处获取新工具。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">你可以在此获取新代码：http://github.com/sploreg/goap</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px"><strong>结论</strong></p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">基于GOAP，你可以无需烦恼伴随着有限状态机出现的连通状态而创造出许多行动系列。你可以从代理手上添加或删除行动去创造出动态结果，同时也能够让你理智地维持代码的运行。你最终将获得一个灵活，机智且动态的AI。</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">（<span style="color: #ff0000">本文为游戏邦/gamerboom.com编译，拒绝任何不保留版权的转载，如需转载请联系：游戏邦</span>）</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Goal Oriented Action Planning for a Smarter AI</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">by Brent Owens</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Goal Oriented Action Planning (GOAP) is an AI system that will easily give your agents choices and the tools to make smart decisions without having to maintain a large and complex finite state machine.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">View the Demo</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">In this demo, there are four character classes, each using tools that break after being used for a while:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Miner: Mines ore at rocks. Needs a tool to work.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Logger: Chops trees to produce logs. Needs a tool to work.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Wood Cutter: Cuts up trees into usable wood. Needs a tool to work.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Blacksmith: Forges tools at the forge. Everyone uses these tools.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Each class will figure out automatically, using goal oriented action planning, what actions they need to perform to reach their goals. If their tool breaks, they will go to a supply pile that has one made by the blacksmith.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">What is GOAP?</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Goal oriented action planning is an artificial intelligence system for agents that allows them to plan a sequence of actions to satisfy a particular goal. The particular sequence of actions depends not only on the goal but also on the current state of the world and the agent. This means that if the same goal is supplied for different agents or world states, you can get a completely different sequence of actions., which makes the AI more dynamic and realistic. Lets look at an example, as seen in the demo above.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">We have an agent, a wood chopper, that takes logs and chops them up into firewood. The chopper can be supplied with the goal MakeFirewood, and has the actions ChopLog, GetAxe, and CollectBranches.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The ChopLog action will turn a log into firewood, but only if the wood cutter has an axe. The GetAxe action will give the wood cutter an axe. Finally, the CollectBranches action will produce firewood as well, without requiring an axe, but the firewood will not be as high in quality.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">When we give the agent the MakeFirewood goal, we get these two different action sequences:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Needs firewood -&gt; GetAxe -&gt; ChopLog = makes firewood</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Needs firewood -&gt; CollectBranches = makes firewood</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">If the agent can get an axe, then they can chop a log to make firewood. But maybe they cannot get an axe; then, they can just go and collect branches. Each of these sequences will fulfill the goal of MakeFirewood.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP can choose the best sequence based on what preconditions are available. If there is no axe handy, then the wood cutter has to resort to picking up branches. Picking up branches can take a really long time and yield poor quality firewood, so we don&rsquo;t want it to run all the time, only when it has to.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Who GOAP is For</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">You are, by now, probably familiar with Finite State Machines (FSM), but if not, then take a look at this terrific tutorial.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">You might have run into very large and complex states for some of your FSM agents, where you eventually get to a point where you do not want to add new behaviours because they cause too many side effects and gaps in the AI.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP turns this:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">into this:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Finite State Machine states: connected everywhere.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Into this:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP: nice and manageable.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">By decoupling the actions from each other, we can now focus on each action individually. This makes the code modular, and easy to test and to maintain. If you want to add in another action, you can just plunk it in, and no other actions have to be changed. Try doing that with an FSM!</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Also, you can add or remove actions on the fly to change the behaviour of an agent to make them even more dynamic. Have an ogre that suddenly started raging? Give them a new &ldquo;rage attack&rdquo; action that gets removed when they calm down. Simply adding the action to the list of actions is all you have to do; the GOAP planner will take care of the rest.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">If you find you have a very complex FSM for your agents, then you should give GOAP a try. One sign your FSM is getting too complex is when every state has a myriad of if-else statements testing what state they should go to next, and adding in a new state makes you groan at all the implications it might have.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">If you have a very simple agent that just performs one or two tasks, then GOAP might be a little heavy-handed and an FSM will suffice. However, it is worth looking at the concepts here and seeing whether they would be easy enough for you to plug into your agent.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Actions</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">An action is something that the agent does. Usually it is just playing an animation and a sound, and changing a little bit of state (for instance, adding firewood). Opening a door is a different action (and animation) than picking up a pencil. An action is encapsulated, and should not have to worry about what the other actions are.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">To help GOAP determine what actions we want to use, each action is given a cost. A high cost action will not be chosen over a lower cost action. When we sequence the actions together, we add up the costs and then choose the sequence with the lowest cost.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Lets assign some costs to the actions:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe Cost: 2</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">ChopLog Cost: 4</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches Cost: 8</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">If we look at the sequence of actions again and add up the total costs, we will see what the cheapest sequence is:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Needs firewood -&gt; GetAxe (2) -&gt; ChopLog (4) = makes firewood (total: 6)</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Needs firewood -&gt; CollectBranches (8) = makes firewood (total: 8)</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Getting an axe and chopping a log produces firewood at the lower cost of 6, while collecting the branches produces wood at the higher cost of 8. So, our agent chooses to get an axe and chop wood.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">But won&rsquo;t this same sequence run all the time? Not if we introduce preconditions&hellip;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Preconditions and Effects</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Actions have preconditions and effects. A precondition is the state that is required for the action to run, and the effects are the change to the state after the action has run.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">For example, the ChopLog action requires the agent to have an axe handy. If the agent does not have an axe, it needs to find another action that can fulfill that precondition in order to let the ChopLog action run. Luckily, the GetAxe action does that&mdash;this is the effect of the action.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The GOAP Planner</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The GOAP planner is a piece of code that looks at actions&rsquo; preconditions and effects, and creates queues of actions that will fulfill a goal. That goal is supplied by the agent, along with a world state, and a list of actions the agent can perform. With this information the GOAP planner can order the actions, see which can run and which can&rsquo;t, and then decide which actions are the best to perform. Luckily for you, I&rsquo;ve written this code, so you don&rsquo;t have to.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">To set this up, lets add preconditions and effects to our wood chopper&rsquo;s actions:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe Cost: 2. Preconditions: &ldquo;an axe is available&rdquo;, &ldquo;doesn&rsquo;t have an axe&rdquo;. Effect: &ldquo;has an axe&rdquo;.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">ChopLog Cost: 4. Preconditions: &ldquo;has an axe&rdquo;. Effect: &ldquo;make firewood&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches Cost: 8. Preconditions: (none). Effect: &ldquo;make firewood&rdquo;.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The GOAP planner now has the information needed to order the sequence of actions to make firewood (our goal).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">We start by supplying the GOAP Planner with the current state of the world and the state of the agent. This combined world state is:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;doesn&rsquo;t have an axe&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;an axe is available&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">&ldquo;the sun is shining&rdquo;</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Looking at our current available actions, the only part of the states that are relevant to them is the &ldquo;doesn&rsquo;t have an axe&rdquo; and the &ldquo;an axe is available&rdquo; states; the other one might be used for other agents with other actions.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Okay, we have our current world state, our actions (with their preconditions and effects), and the goal. Let&rsquo;s plan!</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The planner will run through the other actions, too, and it won&rsquo;t just stop when it finds a solution to the goal. What if another sequence has a lower cost? It will run through all possibilities to find the best solution.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">When it plans, it builds up a tree. Every time an action is applied, it is popped off the list of available actions, so we don&rsquo;t have a string of 50 GetAxe actions back-to-back. The state is changed with that action&rsquo;s effect.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The tree that the planner builds up looks like this:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">We can see that it will actually find three paths to the goal with their total costs:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe -&gt; ChopLog (total: 6)</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GetAxe -&gt; CollectBranches (total: 10)</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">CollectBranches (total: 8)</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Although GetAxe -&gt; CollectBranches works, the cheapest path is GetAxe -&gt; ChopLog, so this one is returned.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">What do preconditions and effects actually look like in code? Well, that&rsquo;s up to you, but I have found it easiest to store them as a key-value pair, where the key is always a String and the value is an object or primitive type (float, int, Boolean, or similar). In C#, that could look like this:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">When the action is performing, what do these effects actually look like and what do they do? Well, they don&rsquo;t have to do anything&mdash;they are really just used for planning, and don&rsquo;t affect the real agent&rsquo;s state until they run for real.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">This is worth emphasising: planning actions is not the same as running them. When an agent performs the GetAxe action, it will probably be near a pile of tools, play a bend-down-and-pick-up animation, and then store an axe object in its backpack. This changes the state of the agent. But, during GOAP planning, the state change is just temporary, so that the planner can figure out the optimal solution.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Procedural Preconditions</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Sometimes, actions need to do a little more to determine whether they can run. For instance, the GetAxe action has the precondition of &ldquo;an axe is available&rdquo; that will need to search the world, or the immediate vicinity, to see whether there is an axe the agent can take. It might determine that the nearest axe is just too far away or behind enemy lines, and will say that it cannot run. This precondition is procedural and needs to run some code; it&rsquo;s not a simple Boolean operator that we can just toggle.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Obviously, some of these procedural preconditions can take a while to run, and should be performed on something other than the render thread, ideally as a background thread or as Coroutines (in Unity).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">You could have procedural effects too, if you so desire. And if you want to introduce even more dynamic results, you can change the cost of actions on the fly!</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GOAP and State</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Our GOAP system will need to live in a small Finite State Machine (FSM), for the sole reason that, in many games, actions will need to be close to a target in order to perform. We end up with three states:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Idle</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">MoveTo</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">PerformAction</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">When idle, the agent will figure out which goal they want to fulfill. This part is handled outside of GOAP; GOAP will just tell you which actions you can run to perform that goal. When a goal is chosen it is passed to the GOAP Planner, along with the world and agent starting state, and the planner will return a list of actions (if it can fulfill that goal).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">When the planner is done and the agent has its list of actions, it will try to perform the first action. All actions will need to know if they must be in range of a target. If they do, then the FSM will push on the next state: MoveTo.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The MoveTo state will tell the agent that it needs to move to a specific target. The agent will do the moving (and play the walk animation), and then let the FSM know when it is within range of the target. This state is then popped off, and the action can perform.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The PerformAction state will run the next action in the queue of actions returned by the GOAP Planner. The action can be instantaneous or last over many frames, but when it is done it gets popped off and then the next action is performed (again, after checking whether that next action needs to be performed within range of an object).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">This all repeats until there are no actions left to perform, at which point we go back to the Idle state, get a new goal, and plan again.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">A Real Code Example</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">It&rsquo;s time to take a look at a real example! Don&rsquo;t worry; it isn&rsquo;t that complicated, and I have provided a working copy in Unity and C# for you to try out. I will just talk about it briefly here so you get a feel for the architecture. The code uses some of the same WoodChopper examples as above.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">If you want to dig right in, head here for the code: http://github.com/sploreg/goap</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">We have four labourers:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Blacksmith: turns iron ore into tools.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Logger: uses a tool to chop down trees to produce logs.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Miner: mines rocks with a tool to produce iron ore.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Wood cutter: uses a tool to chop logs to produce firewood.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Tools wear out over time and will need to be replaced. Fortunately, the Blacksmith makes tools. But iron ore is needed to make tools; that&rsquo;s where the Miner comes in (who also needs tools). The Wood Cutter needs logs, and those come from the Logger; both need tools as well.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Tools and resources are stored on supply piles. The agents will collect the materials or tools they need from the piles, and also drop off their product at them.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The code has six main GOAP classes:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAgent: understands state and uses the FSM and GoapPlanner to operate.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAction: actions that agents can perform.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapPlanner: plans the actions for the GoapAgent.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">FSM: the finite state machine.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">FSMState: a state in the FSM.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">IGoap: the interface that our real Labourer actors use. Ties into events for GOAP and the FSM.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Lets look at the GoapAction class, since that is the one you will subclass:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Nothing too fancy here: it stores preconditions and effects. It also knows whether it must be in range of a target, and, if so, then the FSM knows to push the MoveTo state when needed. It knows when it is done, too; that is determined by the implementing action class.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Here is one of the actions:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">The largest part of the action is the checkProceduralPreconditions method. It looks for the nearest game object with an IronRockComponent, and saves this target rock. Then, when it performs, it gets that saved target rock and will perform the action on it. When the action is re-used in planning again, all of its fields are reset so that they can be calculated again.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">These are all components that are added to the Miner entity object in Unity:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">In order for your agent to work, you must add the following components to it:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">GoapAgent.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">A class that implements IGoap (in the above example, that&rsquo;s Miner.cs).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Some actions.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">A backpack (only because the actions use it; it is unrelated to GOAP).</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">You can add whatever actions you want, and this would change how the agent behaves. You could even give it all actions so it can mine ore, forge tools, and chop wood.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Here is the demo in action again:</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Each labourer goes to the target that they need to fulfill their action (tree, rock, chopping block, or whatever), performs the action, and often returns to the supply pile to drop off their goods. The Blacksmith will wait a little while until there is iron ore in one of the supply piles (added to by the Miner). The Blacksmith then goes off and makes tools, and will drop off the tools at the supply pile nearest him. When a labourer&rsquo;s tool breaks they will head off to the supply pile near the Blacksmith where the new tools are.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">You can grab the code and the full app here: http://github.com/sploreg/goap.</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">Conclusion</p><p style="padding: 0px; margin: 0px 0px 20px; text-indent: 2em; color: #666666; font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 24px">With GOAP, you can create a large series of actions without the headache of interconnected states that often comes with a Finite State Machine. Actions can be added and removed from an agent to produce dynamic results, as well as to keep you sane when maintaining the code. You will end up with a flexible, smart, and dynamic AI.(sourcr:<a style="text-decoration: none; color: #769e01" href="javascript:if(confirm('http://gamedevelopment.tutsplus.com/tutorials/index.php?go=category_29&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamedevelopment.tutsplus.com/tutorials/index.php?go=category_29&mode=2&page=1'" tppabs="http://gamedevelopment.tutsplus.com/tutorials/goal-oriented-action-planning-for-a-smarter-ai--cms-20793">gamedevelop.tutsplus</a>)</p> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 88 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>