<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>学习笔记：使用 OpenCV 识别 QRCode - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-7423.htm" tppabs="http://i.renjihe.com/blog/read.php?7423" title="上一篇 AR 开发小记"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>AR 开发小记</a></div>
	<div class="next-article"><a href="read.php-7425.htm" tppabs="http://i.renjihe.com/blog/read.php?7425" title="下一篇 实例亲授：教你如何创建A"><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>实例亲授：教你如何创建A</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">27</span>
	</div>
	<div class="textbox-title">
		<h4>
		学习笔记：使用 OpenCV 识别 QRCode <span id="starid7424"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 14:36 , <a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="查看分类： 理论">理论</a> &raquo; <a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="查看分类： AR&amp;AI&amp;模式识别">AR&amp;AI&amp;模式识别</a> , <a href="read.php-7424.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?7424#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb7424");'>引用(0)</a> , <a href="read.php-7424.htm" tppabs="http://i.renjihe.com/blog/read.php?7424">阅读(0)</a> ,  Via 本站原创 <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="字体大小" border='0'/> <a href="javascript: doZoom(16);">大</a> | <a href="javascript: doZoom(14);">中</a> | <a href="javascript: doZoom(12);">小</a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/50544545  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/50544545'" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_7424"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="订阅本文" border='0'/></a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/feed.php?go=entry_7007  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/feed.php?go=entry_7007'" tppabs="http://i.renjihe.com/blog/read.php?save_7424"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="保存本文为文本文档" border='0'/></a></span>
		</div>
	</div>
	<div id="tb7424" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/<br /><br /><h2 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 20px; color: #555555; text-align: justify">背景</h2><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">识别二维码的项目数不胜数，每次都是开箱即用，方便得很。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">这次想用 OpenCV 从零识别二维码，主要是温习一下图像处理方面的基础概念，熟悉 OpenCV 的常见操作，以及了解二维码识别和编码的基本原理。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">作者本人在图像处理方面还是一名新手，采用的方法大多原始粗暴，如果有更好的解决方案欢迎指教。</p><h2 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 20px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#QRCode'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#QRCode" title="QRCode" class="headerlink"></a>QRCode</h2><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">二维码有很多种，这里我选择的是比较常见的 QRCode 作为探索对象。QRCode 全名是 Quick Response Code，是一种可以快速识别的二维码。</p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#尺寸'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#尺寸" title="尺寸" class="headerlink"></a>尺寸</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">QRCode 有不同的 Version ，不同的 Version 对应着不同的尺寸。将最小单位的黑白块称为 module ，则 QRCode 尺寸的公式如下：</p><blockquote style="margin: 0px; padding: 0px 15px; color: #666666; border-left-width: 4px; border-left-style: solid; border-left-color: #dddddd; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><p style="margin: 0px 0px 25px">Version V = ((V-1)*4 + 21) ^ 2 modules</p></blockquote><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">常见的 QRCode 一共有40种尺寸：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">Version 1 : 21 * 21 modules</li><li style="list-style: circle">Version 2 : 25 * 25 modules</li><li style="list-style: circle">&hellip;</li><li style="list-style: circle">Version 40: 177 * 177 modules</li></ul><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#分类'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#分类" title="分类" class="headerlink"></a>分类</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">QRCode 分为 Model 1、Model 2、Micro QR 三类：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">Model 1 ：是 Model 2 和 Micro QR 的原型，有 Version 1 到 Version 14 共14种尺寸。</li><li style="list-style: circle">Model 2 ：是 Model 1 的改良版本，添加了对齐标记，有 Version 1 到 Version 40 共40种尺寸。</li><li style="list-style: circle">Micro QR ：只有一个定位标记，最小尺寸是 11*11 modules 。</li></ul><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#组成'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#组成" title="组成" class="headerlink"></a>组成</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/read.php?save_7007  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/read.php?save_7007'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f33jbzaxkxj21e00xcq5b.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-save_7007" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f33jbzaxkxj21e00xcq5b.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">QRCode 主要由以下部分组成：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">1 - Position Detection Pattern：位于三个角落，可以快速检测二维码位置。</li><li style="list-style: circle">2 - Separators：一个单位宽的分割线，提高二维码位置检测的效率。</li><li style="list-style: circle">3 - Timing Pattern：黑白相间，用于修正坐标系。</li><li style="list-style: circle">4 - Alignment Patterns：提高二维码在失真情况下的识别率。</li><li style="list-style: circle">5 - Format Information：格式信息，包含了错误修正级别和掩码图案。</li><li style="list-style: circle">6 - Data：真正的数据部分。</li><li style="list-style: circle">7 - Error Correction：用于错误修正，和 Data 部分格式相同。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">具体的生成原理和识别细节可以阅读文末的参考文献，比如耗子叔的这篇《<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://coolshell.cn/articles/feed.php?go=entry_6961  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://coolshell.cn/articles/feed.php?go=entry_6961'" tppabs="http://coolshell.cn/articles/10590.html" target="_blank">二维码的生成细节和原理</a>》。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">由于二维码的解码步骤比较复杂，而本次学习重点是数字图像处理相关的内容，所以本文主要是解决二维码的识别定位问题，数据解码的工作交给第三方库（比如&nbsp;<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://github.com/ZBar/read.php?6878  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/ZBar/read.php?6878'" tppabs="https://github.com/ZBar/ZBar" target="_blank">ZBAR</a>）完成。</p><h2 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 20px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#OpenCV'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#OpenCV" title="OpenCV" class="headerlink"></a>OpenCV</h2><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">在开始识别二维码之前，还需要补补课，了解一些图像处理相关的基本概念。</p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#contours'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#contours" title="contours" class="headerlink"></a>contours</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">轮廓（contour）可以简单理解为一段连续的像素点。比如一个长方形的边，比如一条线，比如一个点，都属于轮廓。而轮廓之间有一定的层级关系，以下图为例：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/read.php?save_6961  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/read.php?save_6961'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f341rc2qogj21e00xcgms.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-save_6961" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f341rc2qogj21e00xcgms.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">主要说明以下概念：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">external &amp; internal：对于最大的包围盒而言，2 是外部轮廓（external），2a 是内部轮廓（internal）。</li><li style="list-style: circle">parent &amp; child：2 是 2a 的父轮廓（parent），2a 是 2 的子轮廓（child），3 是 2a 的子轮廓，同理，3a 是 3 的子轮廓，4 和 5 都是 3a 的子轮廓。</li><li style="list-style: circle">external &#124; outermost：0、1、2 都属于最外围轮廓（outermost）。</li><li style="list-style: circle">hierarchy level：0、1、2 是同一层级（same hierarchy），都属于 hierarchy-0 ，它们的第一层子轮廓属于 hierarchy-1 。</li><li style="list-style: circle">first child：4 是 3a 的第一个子轮廓（first child）。实际上 5 也可以，这个看个人喜好了。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">在 OpenCV 中，通过一个数组表达轮廓的层级关系：</p><blockquote style="margin: 0px; padding: 0px 15px; color: #666666; border-left-width: 4px; border-left-style: solid; border-left-color: #dddddd; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><p style="margin: 0px 0px 25px">[Next, Previous, First_Child, Parent]</p></blockquote><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">Next：同一层级的下一个轮廓。在上图中， 0 的 Next 就是 1 ，1 的 Next 就是 2 ，2 的 Next 是 -1 ，表示没有下一个同级轮廓。</li><li style="list-style: circle">Previous：同一层级的上一个轮廓。比如 5 的 Previous 是 4， 1 的 Previous 就是 0 ，0 的 Previous 是 -1 。</li><li style="list-style: circle">First_Child：第一个子轮廓，比如 2 的 First_Child 就是 2a ，像 3a 这种有两个 Child ，只取第一个，比如选择 4 作为 First_Child 。</li><li style="list-style: circle">Parent：父轮廓，比如 4 和 5 的 Parent 都是 3a ，3a 的 Parent 是 3 。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">关于轮廓层级的问题，参考阅读：《<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://docs.opencv.org/3.1.0/d9/d8b/128390756.jpg  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://docs.opencv.org/3.1.0/d9/d8b/128390756.jpg'" tppabs="http://docs.opencv.org/3.1.0/d9/d8b/tutorial_py_contours_hierarchy.html" target="_blank">Tutorial: Contours Hierarchy</a>》</p><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#findContours'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#findContours" title="findContours" class="headerlink"></a>findContours</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">了解了 contour 相关的基础概念之后，接下来就是在 OpenCV 里的具体代码了。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">findContours&nbsp;是寻找轮廓的函数，函数定义如下：</p><blockquote style="margin: 0px; padding: 0px 15px; color: #666666; border-left-width: 4px; border-left-style: solid; border-left-color: #dddddd; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><p style="margin: 0px 0px 25px">cv2.findContours(image, mode, method) &rarr; image, contours, hierarchy</p></blockquote><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">其中：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">image：资源图片，8 bit 单通道，一般需要将普通的 BGR 图片通过 cvtColor 函数转换。</li><li style="list-style: circle">mode：边缘检测的模式，包括：<ul style="list-style: none"><li style="list-style: circle">CV_RETR_EXTERNAL：只检索最大的外部轮廓（extreme outer），没有层级关系，只取根节点的轮廓。</li><li style="list-style: circle">CV_RETR_LIST：检索所有轮廓，但是没有 Parent 和 Child 的层级关系，所有轮廓都是同级的。</li><li style="list-style: circle">CV_RETR_CCOMP：检索所有轮廓，并且按照二级结构组织：外轮廓和内轮廓。以前面的大图为例，0、1、2、3、4、5 都属于第0层，2a 和 3a 都属于第1层。</li><li style="list-style: circle">CV_RETR_TREE：检索所有轮廓，并且按照嵌套关系组织层级。以前面的大图为例，0、1、2 属于第0层，2a 属于第1层，3 属于第2层，3a 属于第3层，4、5 属于第4层。</li></ul></li><li style="list-style: circle">method：边缘近似的方法，包括：<ul style="list-style: none"><li style="list-style: circle">CV_CHAIN_APPROX_NONE：严格存储所有边缘点，即：序列中任意两个点的距离均为1。</li><li style="list-style: circle">CV_CHAIN_APPROX_SIMPLE：压缩边缘，通过顶点绘制轮廓。</li></ul></li></ul><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#drawContours'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#drawContours" title="drawContours" class="headerlink"></a>drawContours</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">drawContours&nbsp;是绘制边缘的函数，可以传入&nbsp;findContours&nbsp;函数返回的轮廓结果，在目标图像上绘制轮廓。函数定义如下：</p><blockquote style="margin: 0px; padding: 0px 15px; color: #666666; border-left-width: 4px; border-left-style: solid; border-left-color: #dddddd; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><p style="margin: 0px 0px 25px">Python: cv2.drawContours(image, contours, contourIdx, color) &rarr; image</p></blockquote><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">其中：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">image：目标图像，直接修改目标的像素点，实现绘制。</li><li style="list-style: circle">contours：需要绘制的边缘数组。</li><li style="list-style: circle">contourIdx：需要绘制的边缘索引，如果全部绘制则为 -1。</li><li style="list-style: circle">color：绘制的颜色，为 BGR 格式的 Scalar 。</li><li style="list-style: circle">thickness：可选，绘制的密度，即描绘轮廓时所用的画笔粗细。</li><li style="list-style: circle">lineType: 可选，连线类型，分为以下几种：<ul style="list-style: none"><li style="list-style: circle">LINE_4：4-connected line，只有相邻的点可以连接成线，一个点有四个相邻的坑位。</li><li style="list-style: circle">LINE_8：8-connected line，相邻的点或者斜对角相邻的点可以连接成线，一个点有四个相邻的坑位和四个斜对角相邻的坑位，所以一共有8个坑位。</li><li style="list-style: circle">LINE_AA：antialiased line，抗锯齿连线。</li></ul></li><li style="list-style: circle">hierarchy：可选，如果需要绘制某些层级的轮廓时作为层级关系传入。</li><li style="list-style: circle">maxLevel：可选，需要绘制的层级中的最大级别。如果为1，则只绘制最外层轮廓，如果为2，绘制最外层和第二层轮廓，以此类推。</li></ul><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#moments'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#moments" title="moments" class="headerlink"></a>moments</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">矩（moment）起源于物理学的力矩，最早由阿基米德提出，后来发展到统计学，再后来到数学进行归纳。本质上来讲，物理学和统计学的矩都是数学上矩的特例。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">物理学中的矩表示作用力促使物体绕着支点旋转的趋向，通俗理解就像是拧螺丝时用的扭转的力，由矢量和作用力组成。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">数学中的矩用来描述数据分布特征的一类数字特征，例如：算术平均数、方差、标准差、平均差，这些值都是矩。在实数域上的实函数 f(x) 相对于值 c 的 n 阶矩为：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('https://upload.wikimedia.org/math/9/0/f/list2015116102022.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://upload.wikimedia.org/math/9/0/f/list2015116102022.htm'" tppabs="https://upload.wikimedia.org/math/9/0/f/90ffd165ffed509a09057c505a660c66.png" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="list2015116102022.htm" tppabs="https://upload.wikimedia.org/math/9/0/f/90ffd165ffed509a09057c505a660c66.png" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">常用的矩有两类：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">原点矩（raw moment）：相对原点的矩，即当 c 为 0 的时候。1阶原点矩为期望，也成为中心。</li><li style="list-style: circle">中心矩（central moment）：相对于中心点的矩，即当 c 为 E(x) 的时候。1阶中心矩为0，2阶中心矩为方差。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">到了图像处理领域，对于灰度图（单通道，每个像素点由一个数值来表示）而言，把坐标看成二维变量 (X, Y)，那么图像可以用二维灰度密度函数 I(x, y) 来表示。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">简单来讲，图像的矩就是图像的像素相对于某个点的分布情况统计，是图像的一种特征描述。</p><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#raw-moment'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#raw-moment" title="raw moment" class="headerlink"></a>raw moment</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">图像的原点矩（raw moment）是相对于原点的矩，公式为：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('https://upload.wikimedia.org/math/2/2/e/1255558614  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://upload.wikimedia.org/math/2/2/e/1255558614'" tppabs="https://upload.wikimedia.org/math/2/2/e/22ebb2a58ea6d43753b1f5885530c114.png" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="1255558614" tppabs="https://upload.wikimedia.org/math/2/2/e/22ebb2a58ea6d43753b1f5885530c114.png" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">对于图像的原点矩而言：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">00</span>&nbsp;相当于权重系数为 1 。将所有 I(x, y) 相加，对于二值图像而言，相当于将每个点记为 1 然后求和，也就是图像的面积；对于灰度图像而言，则是图像的灰度值的和。</li><li style="list-style: circle">M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">10</span>&nbsp;相当于权重为 x 。对二值图像而言，相当于将所有的 x 坐标相加。</li><li style="list-style: circle">M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">01</span>&nbsp;相当于权重为 y 。对二值图像而言，相当于将所有的 y 坐标相加。</li><li style="list-style: circle">图像的几何中心（centroid）等于 (M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">10</span>&nbsp;/ M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">00</span>&nbsp;, M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">01</span>&nbsp;/ M<span style="font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em">00</span>)。</li></ul><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#central-moment'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#central-moment" title="central moment" class="headerlink"></a>central moment</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">图像的中心矩（central moment）是相对于几何中心的矩，公式为：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('https://upload.wikimedia.org/math/0/7/e/128390830.jpg  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://upload.wikimedia.org/math/0/7/e/128390830.jpg'" tppabs="https://upload.wikimedia.org/math/0/7/e/07ee9a5a28d49bda17ea47ff4499b2fb.png" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="128390830-1.jpg" tppabs="https://upload.wikimedia.org/math/0/7/e/07ee9a5a28d49bda17ea47ff4499b2fb.png" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">可以看到，中心矩表现的是图像相对于几何中心的分布情况。一个通用的描述中心矩和原点矩关系的公式是：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('https://upload.wikimedia.org/math/1/0/0/feed.php?go=entry_6894  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://upload.wikimedia.org/math/1/0/0/feed.php?go=entry_6894'" tppabs="https://upload.wikimedia.org/math/1/0/0/100a93ef0d9f869abe36164a0369f9fa.png" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="feed-1.php-go=entry_6894" tppabs="https://upload.wikimedia.org/math/1/0/0/100a93ef0d9f869abe36164a0369f9fa.png" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">中心矩在图像处理中的一个应用便是寻找不变矩（invariant moments），这是一个高度浓缩的图像特征。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">所谓的不变性有三种，分别对应图像处理中的三种仿射变换：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">平移不变性（translation invariants）：中心矩本身就具有平移不变性，因为它是相对于自身的中心的分布统计，相当于是采用了相对坐标系，而平移改变的是整体坐标。</li><li style="list-style: circle">缩放不变性（scale invariants）：为了实现缩放不变性，可以构造一个规格化的中心矩，即将中心矩除以 (1+(i+j)/2) 阶的0阶中心矩，具体公式见 《<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?save_6894  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?save_6894#Scale_invariants'" tppabs="https://en.wikipedia.org/wiki/Image_moment#Scale_invariants" target="_blank">Wiki: scale invariants</a>》。</li><li style="list-style: circle">旋转不变性（rotation invariants）：通过2阶和3阶的规格化中心矩可以构建7个不变矩组，构成的特征量具有旋转不变性。具体可以看 《<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?save_6894  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?save_6894#Rotation_invariants'" tppabs="https://en.wikipedia.org/wiki/Image_moment#Rotation_invariants" target="_blank">Wiki: rotation invariants</a>》。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">Hu moment 和 Zernike moment 之类的内容就不继续展开了，感兴趣的可以翻阅相关文章。</p><h2 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 20px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#OpenCV-QRCode'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#OpenCV-QRCode" title="OpenCV + QRCode" class="headerlink"></a>OpenCV + QRCode</h2><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来就是将 QRCode 和 OpenCV 结合起来的具体使用了。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">初步构想的识别步骤如下：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">加载图像，并且进行一些预处理，比如通过高斯模糊去噪。</li><li style="list-style: circle">通过 Canny 边缘检测算法，找出图像中的边缘</li><li style="list-style: circle">寻找边缘中的轮廓，将嵌套层数大于 4 的边缘找出，得到 Position Detection Pattern 。</li><li style="list-style: circle">如果上一步得到的结果不为 3 ，则通过 Timing Pattern 去除错误答案。</li><li style="list-style: circle">计算定位标记的最小矩形包围盒，获得三个最外围顶点，算出第四个顶点，从而确定二维码的区域。</li><li style="list-style: circle">计算定位标记的几何中心，连线组成三角形，从而修正坐标，得到仿射变换前的 QRCode 。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">在接下来的内容里，将会尝试用 OpenCV 识别下图中的二维码：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/feed.php?go=entry_6888  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/feed.php?go=entry_6888'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35ewx12r0j20zk0qo41q.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="feed-1.php-go=entry_6888" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35ewx12r0j20zk0qo41q.jpg" border="0" /></a></p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#加载图像'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#加载图像" title="加载图像" class="headerlink"></a>加载图像</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">首先加载图像，并通过&nbsp;matplotlib&nbsp;显示图像查看效果：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">%matplotlib inline</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">import</span> cv2</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">from</span> matplotlib <span style="color: #8959a8" class="keyword">import</span> pyplot <span style="color: #8959a8" class="keyword">as</span> plt</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">import</span> numpy <span style="color: #8959a8" class="keyword">as</span> np</div><div class="line" style="height: 20px"><span style="color: #4271ae" class="function"><span style="color: #8959a8" class="keyword">def</span> <span style="color: #3e999f" class="title">show</span><span style="color: #f5871f" class="params">(img, code=cv2.COLOR_BGR2RGB)</span>:</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;cv_rgb = cv2.cvtColor(img, code)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;fig, ax = plt.subplots(figsize=(<span style="color: #718c00" class="number">16</span>, <span style="color: #718c00" class="number">10</span>))</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;ax.imshow(cv_rgb)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;fig.show()</div><div class="line" style="height: 20px">img = cv2.imread(<span style="color: #718c00" class="string">'1.jpg'</span>)</div><div class="line" style="height: 20px">show(img)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">OpenCV 中默认是 BGR 通道，通过&nbsp;cvtColor&nbsp;函数将原图转换成灰度图：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</div></pre></td></tr></tbody></table><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#边缘检测'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#边缘检测" title="边缘检测" class="headerlink"></a>边缘检测</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">有了灰度图之后，接下来用 Canny 边缘检测算法检测边缘。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">Canny 边缘检测算法主要是以下几个步骤：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">用高斯滤波器平滑图像去除噪声干扰（低通滤波器消除高频噪声）。</li><li style="list-style: circle">生成每个点的亮度梯度图（intensity gradients），以及亮度梯度的方向。</li><li style="list-style: circle">通过非极大值抑制（non-maximum suppression）缩小边缘宽度。非极大值抑制的意思是，只保留梯度方向上的极大值，删除其他非极大值，从而实现锐化的效果。</li><li style="list-style: circle">通过双阈值法（double threshold）寻找潜在边缘。大于高阈值为强边缘（strong edge），保留；小于低阈值则删除；不大不小的为弱边缘（weak edge），待定。</li><li style="list-style: circle">通过迟滞现象（Hysteresis）处理待定边缘。弱边缘有可能是边缘，也可能是噪音，判断标准是：如果一个弱边缘点附近的八个相邻点中，存在一个强边缘，则此弱边缘为强边缘，否则排除。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">在 OpenCV 中可以直接使用&nbsp;Canny&nbsp;函数，不过在那之前要先用&nbsp;GaussianBlur&nbsp;函数进行高斯模糊：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">img_gb = cv2.GaussianBlur(img_gray, (<span style="color: #718c00" class="number">5</span>, <span style="color: #718c00" class="number">5</span>), <span style="color: #718c00" class="number">0</span>)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来使用&nbsp;Canny&nbsp;函数检测边缘，选择 100 和 200 作为高低阈值：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">edges = cv2.Canny(img_gray, <span style="color: #718c00" class="number">100</span> , <span style="color: #718c00" class="number">200</span>)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">执行结果如下：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/read.php?save_6888  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/read.php?save_6888'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35lyz7rmtj20lp0gfwgz.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-save_6888" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35lyz7rmtj20lp0gfwgz.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">可以看到图像中的很多噪音都被处理掉了，只剩下了边缘部分。</p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#寻找定位标记'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#寻找定位标记" title="寻找定位标记" class="headerlink"></a>寻找定位标记</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">有了边缘之后，接下来就是通过轮廓定位图像中的二维码。二维码的 Position Detection Pattern 在寻找轮廓之后，应该是有6层（因为一条边缘会被识别出两个轮廓，外轮廓和内轮廓）：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/2015_10_18_01.jpg  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/2015_10_18_01.jpg'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35n5f1l1qj218g0xcaei.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="2015_10_18_01-1.jpg" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35n5f1l1qj218g0xcaei.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">所以，如果简单处理的话，只要遍历图像的层级关系，然后嵌套层数大于等于5的取出来就可以了：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">img_fc, contours, hierarchy = cv2.findContours(edges, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)</div><div class="line" style="height: 20px">hierarchy = hierarchy[<span style="color: #718c00" class="number">0</span>]</div><div class="line" style="height: 20px">found = []</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> range(len(contours)):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;k = i</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;c = <span style="color: #718c00" class="number">0</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">while</span> hierarchy[k][<span style="color: #718c00" class="number">2</span>] != <span style="color: #718c00" class="number">-1</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k = hierarchy[k][<span style="color: #718c00" class="number">2</span>]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c = c + <span style="color: #718c00" class="number">1</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> c &gt;= <span style="color: #718c00" class="number">5</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;found.append(i)</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> found:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;img_dc = img.copy()</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;cv2.drawContours(img_dc, contours, i, (<span style="color: #718c00" class="number">0</span>, <span style="color: #718c00" class="number">255</span>, <span style="color: #718c00" class="number">0</span>), <span style="color: #718c00" class="number">3</span>)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;show(img_dc)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">绘制结果如下：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww2.sinaimg.cn/large/feed.php?go=entry_6895  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww2.sinaimg.cn/large/feed.php?go=entry_6895'" tppabs="http://ww2.sinaimg.cn/large/61d238c7jw1f35new9doej20lp0gfgpp.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="feed-1.php-go=entry_6895" tppabs="http://ww2.sinaimg.cn/large/61d238c7jw1f35new9doej20lp0gfgpp.jpg" border="0" /></a><br /><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww4.sinaimg.cn/large/read.php?save_6895  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww4.sinaimg.cn/large/read.php?save_6895'" tppabs="http://ww4.sinaimg.cn/large/61d238c7jw1f35nf2m0d4j20lp0gfae5.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-save_6895" tppabs="http://ww4.sinaimg.cn/large/61d238c7jw1f35nf2m0d4j20lp0gfae5.jpg" border="0" /></a><br /><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww2.sinaimg.cn/large/index.php?go=category_38&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww2.sinaimg.cn/large/index.php?go=category_38&mode=2&page=1'" tppabs="http://ww2.sinaimg.cn/large/61d238c7jw1f35nf83semj20lp0gfn19.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="index-1.php-go=category_38&mode=2&page=1" tppabs="http://ww2.sinaimg.cn/large/61d238c7jw1f35nf83semj20lp0gfn19.jpg" border="0" /></a><br /><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/index.php?go=category_38&mode=1&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/index.php?go=category_38&mode=1&page=1'" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35nfczlvmj20lp0gf78d.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="index-1.php-go=category_38&mode=1&page=1" tppabs="http://ww1.sinaimg.cn/large/61d238c7jw1f35nfczlvmj20lp0gf78d.jpg" border="0" /></a></p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#定位筛选'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#定位筛选" title="定位筛选" class="headerlink"></a>定位筛选</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来就是把所有找到的定位标记进行筛选。如果刚好找到三个那就可以直接跳过这一步了。然而，因为这张图比较特殊，找出了四个定位标记，所以需要排除一个错误答案。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">讲真，如果只靠三个 Position Detection Pattern 组成的直角三角形，是没办法从这四个当中排除错误答案的。因为，一方面会有形变的影响，比如斜躺着的二维码，本身三个顶点连线就不是直角三角形；另一方面，极端情况下，多余的那个标记如果位置比较凑巧的话，完全和正确结果一模一样，比如下面这种情况：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww4.sinaimg.cn/large/read.php?6235  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww4.sinaimg.cn/large/read.php?6235'" tppabs="http://ww4.sinaimg.cn/large/61d238c7gw1f36r76ershj214l0l3abg.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-6235" tppabs="http://ww4.sinaimg.cn/large/61d238c7gw1f36r76ershj214l0l3abg.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">所以我们需要 Timing Pattern 的帮助，也就是定位标记之间的黑白相间的那两条黑白相间的线。解决思路大致如下：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">将4个定位标记两两配对</li><li style="list-style: circle">将他们的4个顶点两两连线，选出最短的那两根</li><li style="list-style: circle">如果两根线都不符合 Timing Pattern 的特征，则出局</li></ul><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#寻找定位标记的顶点'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#寻找定位标记的顶点" title="寻找定位标记的顶点" class="headerlink"></a>寻找定位标记的顶点</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">找的的定位标记是一个轮廓结果，由许多像素点组成。如果想找到定位标记的顶点，则需要找到定位标记的矩形包围盒。先通过minAreaRect&nbsp;函数将检查到的轮廓转换成最小矩形包围盒，并且绘制出来：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">draw_img = img.copy()</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> found:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;rect = cv2.minAreaRect(contours[i])</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;box = cv2.boxPoints(rect)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;box = np.int0(box)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;cv2.drawContours(draw_img,[box], <span style="color: #718c00" class="number">0</span>, (<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">255</span>), <span style="color: #718c00" class="number">2</span>)</div><div class="line" style="height: 20px">show(draw_img)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">绘制如下：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww2.sinaimg.cn/large/read.php?6230  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww2.sinaimg.cn/large/read.php?6230'" tppabs="http://ww2.sinaimg.cn/large/61d238c7gw1f35tm4ybi3j20lp0gfdk1.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-6230" tppabs="http://ww2.sinaimg.cn/large/61d238c7gw1f35tm4ybi3j20lp0gfdk1.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">这个矩形包围盒的四个坐标点就是顶点，将它存储在 boxes 中：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">boxes = []</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> found:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;rect = cv2.minAreaRect(contours[i])</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;box = cv2.boxPoints(rect)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;box = np.int0(box)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;box = map(tuple, box)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;boxes.append(box)</div></pre></td></tr></tbody></table><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#定位标记的顶点连线'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#定位标记的顶点连线" title="定位标记的顶点连线" class="headerlink"></a>定位标记的顶点连线</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来先遍历所有顶点连线，然后从中选择最短的两根，并将它们绘制出来：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px"><span style="color: #4271ae" class="function"><span style="color: #8959a8" class="keyword">def</span> <span style="color: #3e999f" class="title">cv_distance</span><span style="color: #f5871f" class="params">(P, Q)</span>:</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">return</span> int(math.sqrt(pow((P[<span style="color: #718c00" class="number">0</span>] - Q[<span style="color: #718c00" class="number">0</span>]), <span style="color: #718c00" class="number">2</span>) + pow((P[<span style="color: #718c00" class="number">1</span>] - Q[<span style="color: #718c00" class="number">1</span>]),<span style="color: #718c00" class="number">2</span>)))</div><div class="line" style="height: 20px"><span style="color: #4271ae" class="function"><span style="color: #8959a8" class="keyword">def</span> <span style="color: #3e999f" class="title">check</span><span style="color: #f5871f" class="params">(a, b)</span>:</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 存储 ab 数组里最短的两点的组合</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;s1_ab = ()</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;s2_ab = ()</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 存储 ab 数组里最短的两点的距离，用于比较</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;s1 = np.iinfo(<span style="color: #718c00" class="string">'i'</span>).max</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;s2 = s1</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> ai <span style="color: #8959a8" class="keyword">in</span> a:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> bi <span style="color: #8959a8" class="keyword">in</span> b:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d = cv_distance(ai, bi)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> d &lt; s2:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> d &lt; s1:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1_ab, s2_ab = (ai, bi), s1_ab</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1, s2 = d, s1</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">else</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s2_ab = (ai, bi)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s2 = d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;a1, a2 = s1_ab[<span style="color: #718c00" class="number">0</span>], s2_ab[<span style="color: #718c00" class="number">0</span>]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;b1, b2 = s1_ab[<span style="color: #718c00" class="number">1</span>], s2_ab[<span style="color: #718c00" class="number">1</span>]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 将最短的两个线画出来</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;cv2.line(draw_img, a1, b1, (<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">255</span>), <span style="color: #718c00" class="number">3</span>)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;cv2.line(draw_img, a2, b2, (<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">0</span>,<span style="color: #718c00" class="number">255</span>), <span style="color: #718c00" class="number">3</span>)</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> range(len(boxes)):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> j <span style="color: #8959a8" class="keyword">in</span> range(i+<span style="color: #718c00" class="number">1</span>, len(boxes)):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check(boxes[i], boxes[j])</div><div class="line" style="height: 20px">show(draw_img)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">绘制结果如下：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/read.php?5929  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/read.php?5929'" tppabs="http://ww1.sinaimg.cn/large/61d238c7gw1f36hijarwkj20lp0gf439.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-5929" tppabs="http://ww1.sinaimg.cn/large/61d238c7gw1f36hijarwkj20lp0gf439.jpg" border="0" /></a></p><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#获取连线上的像素值'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#获取连线上的像素值" title="获取连线上的像素值" class="headerlink"></a>获取连线上的像素值</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">有了端点连线，接下来需要获取连线上的像素值，以便后面判断是否是 Timing Pattern 。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">在这之前，为了更方便的判断黑白相间的情况，先对图像进行二值化：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">th, bi_img = cv2.threshold(img_gray, <span style="color: #718c00" class="number">100</span>, <span style="color: #718c00" class="number">255</span>, cv2.THRESH_BINARY)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来是获取连线像素值。由于 OpenCV3 的 Python 库中没有&nbsp;LineIterator&nbsp;，只好自己写一个。在《<a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://stackoverflow.com/a/32857432/read.php?5915  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://stackoverflow.com/a/32857432/read.php?5915'" tppabs="http://stackoverflow.com/a/32857432/3812779" target="_blank">OpenCV 3.0 Python LineIterator</a>》这个问答里找到了可用的直线遍历函数，可以直接使用。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">以一条 Timing Pattern 为例：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww1.sinaimg.cn/large/read.php?5590  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww1.sinaimg.cn/large/read.php?5590'" tppabs="http://ww1.sinaimg.cn/large/61d238c7gw1f36laln556j20lp0gfdjw.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-5590" tppabs="http://ww1.sinaimg.cn/large/61d238c7gw1f36laln556j20lp0gfdjw.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">打印其像素点看下结果：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">[ <span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>]</div></pre></td></tr></tbody></table><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#修正端点位置'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#修正端点位置" title="修正端点位置" class="headerlink"></a>修正端点位置</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">照理说， Timing Pattern 的连线，像素值应该是黑白均匀相间才对，为什么是上面的这种一连一大片的结果呢？</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">仔细看下截图可以发现，由于取的是定位标记的外部包围盒的顶点，所以因为误差会超出定位标记的范围，导致没能正确定位到 Timing Pattern ，而是相邻的 Data 部分的像素点。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">为了修正这部分误差，我们可以对端点坐标进行调整。因为 Position Detection Pattern 的大小是固定的，是一个 1-1-3-1-1 的黑白黑白黑相间的正方形，识别 Timing Pattern 的最佳端点应该是最靠里的黑色区域的中心位置，也就是图中的绿色虚线部分：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww2.sinaimg.cn/large/read.php?5458  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww2.sinaimg.cn/large/read.php?5458'" tppabs="http://ww2.sinaimg.cn/large/61d238c7gw1f36lht551bj214l0l3jto.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-5458" tppabs="http://ww2.sinaimg.cn/large/61d238c7gw1f36lht551bj214l0l3jto.jpg" border="0" /></a></p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">所以我们需要对端点坐标进行调整。调整方式是，将一个端点的 x 和 y 值向另一个端点的 x 和 y 值靠近 1/14 个单位距离，代码如下：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">a1 = (a1[<span style="color: #718c00" class="number">0</span>] + (a2[<span style="color: #718c00" class="number">0</span>]-a1[<span style="color: #718c00" class="number">0</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>, a1[<span style="color: #718c00" class="number">1</span>] + (a2[<span style="color: #718c00" class="number">1</span>]-a1[<span style="color: #718c00" class="number">1</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>)</div><div class="line" style="height: 20px">b1 = (b1[<span style="color: #718c00" class="number">0</span>] + (b2[<span style="color: #718c00" class="number">0</span>]-b1[<span style="color: #718c00" class="number">0</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>, b1[<span style="color: #718c00" class="number">1</span>] + (b2[<span style="color: #718c00" class="number">1</span>]-b1[<span style="color: #718c00" class="number">1</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>)</div><div class="line" style="height: 20px">a2 = (a2[<span style="color: #718c00" class="number">0</span>] + (a1[<span style="color: #718c00" class="number">0</span>]-a2[<span style="color: #718c00" class="number">0</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>, a2[<span style="color: #718c00" class="number">1</span>] + (a1[<span style="color: #718c00" class="number">1</span>]-a2[<span style="color: #718c00" class="number">1</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>)</div><div class="line" style="height: 20px">b2 = (b2[<span style="color: #718c00" class="number">0</span>] + (b1[<span style="color: #718c00" class="number">0</span>]-b2[<span style="color: #718c00" class="number">0</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>, b2[<span style="color: #718c00" class="number">1</span>] + (b1[<span style="color: #718c00" class="number">1</span>]-b2[<span style="color: #718c00" class="number">1</span>])*<span style="color: #718c00" class="number">1</span>/<span style="color: #718c00" class="number">14</span>)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">调整之后的像素值就是正确的 Timing Pattern 了：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">[ <span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #718c00" class="number">0.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>&nbsp;&nbsp;<span style="color: #718c00" class="number">255.</span>]</div></pre></td></tr></tbody></table><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#验证是否是-Timing-Pattern'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#验证是否是-Timing-Pattern" title="验证是否是 Timing Pattern" class="headerlink"></a>验证是否是 Timing Pattern</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">像素序列拿到了，接下来就是判断它是否是 Timing Pattern 了。 Timing Pattern 的特征是黑白均匀相间，所以每段同色区域的计数结果应该相同，而且旋转拉伸平移都不会影响这个特征。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">于是，验证方案是：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle">先除去数组中开头和结尾处连续的白色像素点。</li><li style="list-style: circle">对数组中的元素进行计数，相邻的元素如果值相同则合并到计数结果中。比如 [0,1,1,1,0,0] 的计数结果就是 [1,3,2] 。</li><li style="list-style: circle">计数数组的长度如果小于 5 ，则不是 Timing Pattern 。</li><li style="list-style: circle">计算计数数组的方差，看看分布是否离散，如果方差大于阈值，则不是 Timing Pattern 。</li></ul><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">代码如下：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px"><span style="color: #4271ae" class="function"><span style="color: #8959a8" class="keyword">def</span> <span style="color: #3e999f" class="title">isTimingPattern</span><span style="color: #f5871f" class="params">(line)</span>:</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 除去开头结尾的白色像素点</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">while</span> line[<span style="color: #718c00" class="number">0</span>] != <span style="color: #718c00" class="number">0</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line = line[<span style="color: #718c00" class="number">1</span>:]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">while</span> line[<span style="color: #718c00" class="number">-1</span>] != <span style="color: #718c00" class="number">0</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line = line[:<span style="color: #718c00" class="number">-1</span>]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 计数连续的黑白像素点</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;c = []</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;count = <span style="color: #718c00" class="number">1</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;l = line[<span style="color: #718c00" class="number">0</span>]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> p <span style="color: #8959a8" class="keyword">in</span> line[<span style="color: #718c00" class="number">1</span>:]:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> p == l:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count = count + <span style="color: #718c00" class="number">1</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">else</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.append(count)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count = <span style="color: #718c00" class="number">1</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = p</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;c.append(count)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 如果黑白间隔太少，直接排除</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> len(c) &lt; <span style="color: #718c00" class="number">5</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">return</span> <span style="color: #8959a8" class="keyword">False</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8e908c" class="comment"># 计算方差，根据离散程度判断是否是 Timing Pattern</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;threshold = <span style="color: #718c00" class="number">5</span></div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">return</span> np.var(c) &lt; threshold</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">对前面的那条连线检测一下，计数数组为：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">[<span style="color: #718c00" class="number">11</span>, <span style="color: #718c00" class="number">12</span>, <span style="color: #718c00" class="number">11</span>, <span style="color: #718c00" class="number">12</span>, <span style="color: #718c00" class="number">11</span>, <span style="color: #718c00" class="number">12</span>, <span style="color: #718c00" class="number">11</span>, <span style="color: #718c00" class="number">13</span>, <span style="color: #718c00" class="number">11</span>]</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">方差为 0.47 。其他非 Timing Pattern 的连线方差均大于 10 。</p><h4 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#找出错误的定位标记'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#找出错误的定位标记" title="找出错误的定位标记" class="headerlink"></a>找出错误的定位标记</h4><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">接下来就是利用前面的结果除去错误的定位标记了，只要两个定位标记的端点连线中能找到 Timing Pattern ，则这两个定位标记有效，把它们存进 set 里：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">valid = set()</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">for</span> i <span style="color: #8959a8" class="keyword">in</span> range(len(boxes)):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> j <span style="color: #8959a8" class="keyword">in</span> range(i+<span style="color: #718c00" class="number">1</span>, len(boxes)):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">if</span> check(boxes[i], boxes[j]):</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid.add(i)</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid.add(j)</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">print</span> valid</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">结果是：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">set([<span style="color: #718c00" class="number">1</span>, <span style="color: #718c00" class="number">2</span>, <span style="color: #718c00" class="number">3</span>])</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">好了，它们中出了一个叛徒，0、1、2、3 四个定位标记，0是无效的，1、2、3 才是需要识别的 QRCode 的定位标记。</p><h3 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 18px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#找出二维码'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#找出二维码" title="找出二维码" class="headerlink"></a>找出二维码</h3><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">有了定位标记之后，找出二维码就轻而易举了。只要找出三个定位标记轮廓的最小矩形包围盒，那就是二维码的位置了：</p><table border="0" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; width: auto; border: none; font-size: 14px; table-layout: fixed"><tbody><tr style="background-color: #f9f9f9"><td class="code" style="padding: 0px; vertical-align: middle; border: none"><pre style="overflow: auto; font-family: consolas, Menlo, 'PingFang SC', 'Microsoft YaHei', monospace; font-size: 13px; margin-top: 0px; margin-bottom: 0px; padding: 1px; color: #4d4d4c; line-height: 1.6; border: none; background: #f7f7f7"><div class="line" style="height: 20px">contour_all = np.array([])</div><div class="line" style="height: 20px"><span style="color: #8959a8" class="keyword">while</span> len(valid) &gt; <span style="color: #718c00" class="number">0</span>:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;c = found[valid.pop()]</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> sublist <span style="color: #8959a8" class="keyword">in</span> c:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8959a8" class="keyword">for</span> p <span style="color: #8959a8" class="keyword">in</span> sublist:</div><div class="line" style="height: 20px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contour_all.append(p)</div><div class="line" style="height: 20px">rect = cv2.minAreaRect(contour_ALL)</div><div class="line" style="height: 20px">box = cv2.boxPoints(rect)</div><div class="line" style="height: 20px">box = np.array(box)</div><div class="line" style="height: 20px">draw_img = img.copy()</div><div class="line" style="height: 20px">cv2.polylines(draw_img, np.int32([box]), <span style="color: #8959a8" class="keyword">True</span>, (<span style="color: #718c00" class="number">0</span>, <span style="color: #718c00" class="number">0</span>, <span style="color: #718c00" class="number">255</span>), <span style="color: #718c00" class="number">10</span>)</div><div class="line" style="height: 20px">show(draw_img)</div></pre></td></tr></tbody></table><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">绘制结果如下：</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="group" href="javascript:if(confirm('http://ww4.sinaimg.cn/large/read.php?5279  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ww4.sinaimg.cn/large/read.php?5279'" tppabs="http://ww4.sinaimg.cn/large/61d238c7gw1f36q0l76joj20lp0gf0wz.jpg" class="fancybox"><img style="border: 1px solid #dddddd; margin: 0px auto; max-width: 100%; height: auto; cursor: -webkit-zoom-in; box-sizing: border-box; padding: 3px; display: block !important" src="read-1.php-5279" tppabs="http://ww4.sinaimg.cn/large/61d238c7gw1f36q0l76joj20lp0gf0wz.jpg" border="0" /></a></p><h2 style="margin: 20px 0px 15px; padding: 10px 0px 0px; line-height: 1.5; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 20px; color: #555555; text-align: justify"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" href="javascript:if(confirm('http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#小结'" tppabs="http://blog.callmewhy.com/2016/04/23/opencv-find-qrcode-position/#小结" title="小结" class="headerlink"></a>小结</h2><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">后面仿射变换后坐标修正的问题实在是写不动了，这篇就先到这里吧。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">回头看看，是不是感觉绕了个大圈子？</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">『费了半天劲，只是为了告诉我第0个定位标记是无效的，我看图也看出来了啊！』</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">是的，不过代码里能看到的只是像素值和它们的坐标，为了排除这个错误答案确实花了不少功夫。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">不过这也是我喜欢做数字图像处理的原因之一：可用函数数不胜数，专业概念层出不穷，同样的一个问题，不同的人去解决，就有着不同的答案，交流的过程便是学习的过程。</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">啊对了，如果有更好的解决方案，欢迎在评论里指出！</p><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">以及，文章里有一个红包彩蛋，你找到了吗 =。=</p><blockquote style="margin: 0px; padding: 0px 15px; color: #666666; border-left-width: 4px; border-left-style: solid; border-left-color: #dddddd; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><p style="margin: 0px 0px 25px">财富！名誉！地位！穷得叮当响的海贼汪，哥尔&middot;D&middot;汪海，他在临睡前的一句话让人们趋之若鹜奔向博客：『想要我的红包吗？想要的话可以全部给你，去找吧！我把所有红包都放在那里！』</p></blockquote><hr style="box-sizing: content-box; height: 3px; margin: 40px 0px; border: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify; background-image: repeating-linear-gradient(-45deg, rgb(255, 255, 255), rgb(255, 255, 255) 4px, transparent 4px, transparent 8px); background-color: #dddddd" /><p style="margin: 0px 0px 25px; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify">参考文献：</p><ul style="list-style: none; color: #555555; font-family: Lato, 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 16px; line-height: 32px; text-align: justify"><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://coolshell.cn/articles/feed.php?go=entry_6961  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://coolshell.cn/articles/feed.php?go=entry_6961'" tppabs="http://coolshell.cn/articles/10590.html" target="_blank">二维码的生成细节和原理</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.keyence.com/ss/products/auto_id/barcode_lecture/basic_2d/qr/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.keyence.com/ss/products/auto_id/barcode_lecture/basic_2d/qr/'" tppabs="http://www.keyence.com/ss/products/auto_id/barcode_lecture/basic_2d/qr/" target="_blank">What is a QR code?</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.swisseduc.ch/informatik/theoretische_informatik/qr_codes/docs/read.php?5142  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.swisseduc.ch/informatik/theoretische_informatik/qr_codes/docs/read.php?5142'" tppabs="http://www.swisseduc.ch/informatik/theoretische_informatik/qr_codes/docs/qr_standard.pdf" target="_blank">ISO/IEC 18004: QRCode Standard</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://qrcode.meetheed.com/read.php?4996  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://qrcode.meetheed.com/read.php?4996'" tppabs="http://qrcode.meetheed.com/question14.php" target="_blank">What Are The Different Sections In A QR Code?</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://blog.qartis.com/decoding-small-qr-codes-by-hand/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.qartis.com/decoding-small-qr-codes-by-hand/'" tppabs="http://blog.qartis.com/decoding-small-qr-codes-by-hand/" target="_blank">Decoding small QR codes by hand</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.explainthatstuff.com/read.php?4837  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.explainthatstuff.com/read.php?4837'" tppabs="http://www.explainthatstuff.com/how-data-matrix-codes-work.html" target="_blank">How data matrix codes work</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.thonky.com/qr-code-tutorial/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.thonky.com/qr-code-tutorial/'" tppabs="http://www.thonky.com/qr-code-tutorial/" target="_blank">QR Code Tutorial</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.ams.org/samplings/feature-column/read.php?4836  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ams.org/samplings/feature-column/read.php?4836'" tppabs="http://www.ams.org/samplings/feature-column/fc-2013-02" target="_blank">How to Read QR Symbols Without Your Mobile Telephone</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://dsynflo.blogspot.sg/2014/10/read.php?4835  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://dsynflo.blogspot.sg/2014/10/read.php?4835'" tppabs="http://dsynflo.blogspot.sg/2014/10/opencv-qr-code-detection-and-extraction.html" target="_blank">OpenCV: QRCode detection and extraction</a></li><li style="list-style: circle"><a style="color: #222222; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #222222; word-wrap: break-word; outline: 0px; background-color: transparent" rel="external" href="javascript:if(confirm('http://docs.opencv.org/3.1.0/d9/d8b/128390756.jpg  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://docs.opencv.org/3.1.0/d9/d8b/128390756.jpg'" tppabs="http://docs.opencv.org/3.1.0/d9/d8b/tutorial_py_contours_hierarchy.html" target="_blank">Tutorial Python: Contours Hierarchy</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?4834  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?4834'" tppabs="https://en.wikipedia.org/wiki/Pixel_connectivity" target="_blank">Wiki: Pixel Connectivity</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://www.cs.auckland.ac.nz/courses/compsci773s1c/lectures/ImageProcessing-html/read.php?4825  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.cs.auckland.ac.nz/courses/compsci773s1c/lectures/ImageProcessing-html/read.php?4825#connect'" tppabs="https://www.cs.auckland.ac.nz/courses/compsci773s1c/lectures/ImageProcessing-html/topic3.htm#connect" target="_blank">Image Processing: Connect</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?save_6894  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?save_6894'" tppabs="https://en.wikipedia.org/wiki/Image_moment" target="_blank">Wiki: Image Moment</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?4824  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?4824'" tppabs="https://en.wikipedia.org/wiki/Moment_(mathematics" target="_blank">Wiki: Moment (Mathematics)</a>)</li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.cnblogs.com/ronny/p/read.php?4181  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/ronny/p/read.php?4181'" tppabs="http://www.cnblogs.com/ronny/p/3985810.html" target="_blank">图像的矩特征</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://netclass.csu.edu.cn/NCourse/hep120/kj/read.php?4161  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://netclass.csu.edu.cn/NCourse/hep120/kj/read.php?4161'" tppabs="http://netclass.csu.edu.cn/NCourse/hep120/kj/3-3-1.htm" target="_blank">统计数据的形态特征</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.luohanjie.com/tech/%E5%9B%BE%E5%83%8F%E7%9A%84%E7%9F%A9-image-moments/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.luohanjie.com/tech/%E5%9B%BE%E5%83%8F%E7%9A%84%E7%9F%A9-image-moments/'" tppabs="http://www.luohanjie.com/tech/%E5%9B%BE%E5%83%8F%E7%9A%84%E7%9F%A9-image-moments/" target="_blank">图像的矩（Image Moments）</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://docs.opencv.org/2.4/modules/imgproc/doc/read.php?4134  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://docs.opencv.org/2.4/modules/imgproc/doc/read.php?4134'" tppabs="http://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html" target="_blank">OpenCV Doc: Structural analysis and shape descriptors</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://www.sci.utah.edu/~gerig/CS7960-S2010/handouts/read.php?4131  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sci.utah.edu/~gerig/CS7960-S2010/handouts/read.php?4131'" tppabs="http://www.sci.utah.edu/~gerig/CS7960-S2010/handouts/CS7960-AdvImProc-MomentInvariants.pdf" target="_blank">CS7960 AdvImProc MomentInvariants</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://docs.opencv.org/3.1.0/da/d22/read.php?4129  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://docs.opencv.org/3.1.0/da/d22/read.php?4129'" tppabs="http://docs.opencv.org/3.1.0/da/d22/tutorial_py_canny.html" target="_blank">OpenCV Doc: Canny</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?3920  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?3920'" tppabs="https://en.wikipedia.org/wiki/Canny_edge_detector" target="_blank">Wiki: Canny Edge Detector</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/read.php?3867  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://en.wikipedia.org/wiki/read.php?3867'" tppabs="https://en.wikipedia.org/wiki/Hysteresis" target="_blank">Wiki: Hysteresis</a></li><li style="list-style: circle"><a style="color: #555555; text-decoration: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #999999; word-wrap: break-word; background-color: transparent" rel="external" href="javascript:if(confirm('http://stackoverflow.com/a/32857432/read.php?5915  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://stackoverflow.com/a/32857432/read.php?5915'" tppabs="http://stackoverflow.com/a/32857432/3812779" target="_blank">OpenCV 3.0 Python LineIterator</a></li></ul> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 106 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>