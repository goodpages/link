<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>GPU编程 - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-index">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: block">
						<div class="announce-content">
						GPU编程
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							<span class="pagebar-mainbody"> 分页： 1/9  <a href="index.php-go=category_39&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=1"><img src="doubleleft.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleleft.gif" alt="第一页" title="第一页" border="0"/></a> <span class="pagebar-selections"> <span class="pagelink-current">1</span>  <a href="read.php-5324.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=2">2</a>  <a href="read.php-5323.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=3">3</a>  <a href="read.php-5322.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=4">4</a>  <a href="read.php-5320.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=5">5</a>  <a href="read.php-5319.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=6">6</a>  <a href="read.php-5302.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=7">7</a>  <a href="read.php-5270.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=8">8</a>  <a href="read.php-5269.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=9">9</a> </span> <a href="read.php-5324.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=2"><img src="singleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/singleright.gif" alt="下页" title="下页" border="0"/></a>  <a href="read.php-5269.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=9"><img src="doubleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleright.gif" alt="最后页" title="最后页" border="0"/></a> </span> [ 显示模式： <a href="index.php-go=category_39&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=1" title="切换到摘要模式">摘要</a> | <a href="index.php-go=category_39&mode=2&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=2&page=1" title="切换到列表模式">列表</a> ]
						</div>
					</div>
					<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6761.htm" tppabs="http://i.renjihe.com/blog/read.php?6761">一天干掉一只Monkey计划（四）——卡通着色，描边</a> <span id="starid6761"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:52 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6761.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6761#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6761");'>引用(0)</a> , <a href="read.php-6761.htm" tppabs="http://i.renjihe.com/blog/read.php?6761">阅读(2)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6761" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<br /><p style="margin: 10pt auto 0pt; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" class="p0">楔子：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p17">实在无奈，<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Unreal</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的世界浩如烟海，在里面一点一点地爬动，很充实，但也很无奈，加之最近加入自行车驴行俱乐部，几乎都没有什么时间出来搞些自己的小小兴趣爱好了，老大说的好&ldquo;每一个年轻程序员都有一颗渲染的心&rdquo;，正好有相关方面的应用，写下此篇，总结一下卡通渲染方面的知识，摘录不少，这里不一一谢过了，最后用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RM</span><span style="margin: 0px; padding: 0px; font-family: 宋体">做了相关的实现，工程文件就懒地放了，最怕害了一样手懒的童鞋，下个东西就当学习结束了，以我自己的深刻教训，理论与实际永远隔着一条银河，牢记，自勉：</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p17"><span style="margin: 0px; padding: 0px; font-size: 18pt; font-family: Arial"><strong style="margin: 0px; padding: 0px">实践是检验真理的唯一标准！</strong></span></p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">一、 技术背景</h4><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><span style="margin: 0px; padding: 0px; font-size: 14pt">非真实感绘制</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'"><span style="margin: 0px; padding: 0px; font-size: 14pt">(Non-photorealistic rendering)</span></span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">(NPR)是计算机图形学的一类，主要模拟艺术式的绘制风格，也用于发展新绘制风格。和传统的追求真实感的计算机图形学不同，NPR受到油画，素描，技术图纸，和动画卡通的影响。NPR已经以&quot;卡通造影&quot;的形式出现在电影和电子游戏中，它也已出现在设计图纸和试验动画中</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">卡通渲染便是一种典型的常用非真实感绘制技术，它要求帖图由不明显的渐变色块夹杂一些不复杂的纹理组成。它强调粗细线条（Silhouette，轮廓勾边）和简单色块（ToonShading<span style="margin: 0px; padding: 0px; font-family: 宋体">，块状</span>色调着色），忽略细节。利用这些很简单很纯粹的线条和色块，就能渲染出设计师所要求的质感很强的卡通效果，从而营造出互动的二维动画世界。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><br /><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2645  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2645'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217375173.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2638" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217376569.png" border="0" alt="wps_clip_image-15358" title="wps_clip_image-15358" width="439" height="294" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">典型的卡通渲染</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><br />如上示例，茶壶上的色调是通过角度的余弦值选择的，这个角度是指光线和面的法线之间的夹角角度。如果法线和光的夹角比较小，我们使用较亮的色调，随着夹角变大，逐步使用更暗的色调。换句话说，角度余弦值将决定色调的强度。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2637  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2637'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217373188.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2636" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217378172.png" border="0" alt="wps_clip_image-21776" title="wps_clip_image-21776" width="213" height="468" /></a></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">图<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.2</span><span style="margin: 0px; padding: 0px; font-family: 宋体">：（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">a</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）使用卡通着色法着色的对象（注意着色间的尖锐过渡）。（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">b</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）增强卡通效果，轮廓边（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">silhouette edge</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）被勾出。（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">c</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）使用标准散射光照着色的对象</span>--摘自《龙书》</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">勾边效果采用的是比较通行的做法，将模型的顶点沿法线方向外移一定距离得到一个比原模型稍大的模型，绘制时采用剔除正面绘制背面的方式，将模型绘制为黑色，再按正常方式绘制原来的模型，结果就产生了一定宽度的黑边，黑边的宽度可以通过将顶点沿法线外移的距离来控制。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">色阶效果采用了<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Diffuse Cubemap</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的方法实现。将模型法线作为第二套</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">UV</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，根据光源方向设置适当的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">UV</span><span style="margin: 0px; padding: 0px; font-family: 宋体">坐标变换矩阵，通过这套</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">UV</span><span style="margin: 0px; padding: 0px; font-family: 宋体">来索引一个保存了光照环境</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Diffuse</span><span style="margin: 0px; padding: 0px; font-family: 宋体">光照信息的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Cubemap</span><span style="margin: 0px; padding: 0px; font-family: 宋体">贴图。普通的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Diffuse Cubemap</span><span style="margin: 0px; padding: 0px; font-family: 宋体">贴图上的光照信息是平滑过渡的，为了实现色阶效果，将普通的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Diffuse Cubemap</span><span style="margin: 0px; padding: 0px; font-family: 宋体">贴图在</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">PhotoShop</span><span style="margin: 0px; padding: 0px; font-family: 宋体">中进行色调分离，将连续的灰度变化变成</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">4</span><span style="margin: 0px; padding: 0px; font-family: 宋体">级灰度。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当然实际的最终效果，不仅需要程序渲染的支持，美工的技术功底和经验也是非常重要。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><br /><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2635  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2635'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217374551.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2634" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217388106.png" border="0" alt="wps_clip_image-3734" title="wps_clip_image-3734" width="620" height="350" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">著名的<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">SF4</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><br />PS<span style="margin: 0px; padding: 0px; font-family: 宋体">：</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">OpenGPU</span><span style="margin: 0px; padding: 0px; font-family: 宋体">有</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Trace</span><span style="margin: 0px; padding: 0px; font-family: 宋体">大大翻译的几篇使用卡通渲染的典型日游，这里顺便膜拜下，可以看看商业中是如何使用的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">~</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 13.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.opengpu.org/read.php?2633  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opengpu.org/read.php?2633'" tppabs="http://www.opengpu.org/forum.php?mod=viewthread&tid=5235"><span style="margin: 0px; padding: 0px; font-size: 14pt">NBGI 2011年大作《偶像大师2》技术大揭秘！</span></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 13.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.opengpu.org/read.php?2631  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opengpu.org/read.php?2631'" tppabs="http://www.opengpu.org/forum.php?mod=viewthread&tid=7169"><span style="margin: 0px; padding: 0px; font-size: 14pt">为了3D游戏粉丝的[（超级）街头霸王4]图形讲座(后篇）</span></a>&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 13.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.opengpu.org/read.php?2399  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opengpu.org/read.php?2399'" tppabs="http://www.opengpu.org/forum.php?mod=viewthread&tid=7164"><span style="margin: 0px; padding: 0px; font-size: 14pt">【翻译】火影忍者鸣人 疾风传 终级风暴2 制作介绍</span></a></p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">二、 实现原理</h4><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">前面提到了，卡通渲染的主要技术就是&ldquo;Outlining&rdquo;和&ldquo;ToonShading&rdquo;两个技术，首先色阶渲染，可以用一张<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">1D</span><span style="margin: 0px; padding: 0px; font-family: 宋体">纹理读取实现，其次是描边，做法很多，龙书上有取边列表的方法（比较耗），还可以通过边缘检测，或者法线方向放大实现。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><strong style="margin: 0px; padding: 0px">1<span style="margin: 0px; padding: 0px; font-family: 宋体">，描边，边缘检测</span></strong></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">实现原理：</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">1.&nbsp; 把模型渲染到一张纹理图上；</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">2.&nbsp; 对这张图进行Sobel边缘检测，找出边界并把渲染到屏幕空间中。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">边缘检测参照如下，如看着怕怕，首先翻出你尘封已久的数字图像处理吧.</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 22.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/tianhai110/article/details/read.php?2398  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/tianhai110/article/details/read.php?2398'" tppabs="http://blog.csdn.net/tianhai110/article/details/5663756">Sobel边缘检测算法</a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">索贝尔算子（Sobel operator）主要用作边缘检测，在技术上，它是一离散性差分算子，用来运算图像亮度函数的灰度之近似值。在图像的任何一点使用此算子，将会产生对应的灰度矢量或是其法矢量</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Sobel卷积因子为：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2397  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2397'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217383961.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2396" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217385041.png" border="0" alt="wps_clip_image-15120" title="wps_clip_image-15120" width="583" height="279" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">该算子包含两组3x3的矩阵，分别为横向及纵向，将之与图像作平面卷积，即可分别得出横向及纵向的亮度差分近似值。如果以A代表原始图像，Gx及Gy分别代表经横向及纵向边缘检测的图像灰度值，其公式如下：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2377  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2377'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217388073.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2376" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217381104.png" border="0" alt="wps_clip_image-32525" title="wps_clip_image-32525" width="656" height="102" /></a>&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">具体计算如下：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Gx = (-1)*f(x-1, y-1) + 0*f(x,y-1) + 1*f(x+1,y-1)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +(-2)*f(x-1,y) + 0*f(x,y)+2*f(x+1,y)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +(-1)*f(x-1,y+1) + 0*f(x,y+1) + 1*f(x+1,y+1)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">=[f(x+1,y-1)+2*f(x+1,y)+f(x+1,y+1)]-[f(x-1,y-1)+2*f(x-1,y)+f(x-1,y+1)]</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Gy =1* f(x-1, y-1) + 2*f(x,y-1)+ 1*f(x+1,y-1)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +0*f(x-1,y) 0*f(x,y) + 0*f(x+1,y)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +(-1)*f(x-1,y+1) + (-2)*f(x,y+1) + (-1)*f(x+1, y+1)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">=[f(x-1,y-1)+2f(x,y-1)+f(x+1,y-1)]-[f(x-1,y+1)+2*f(x,y+1)+f(x+1,y+1)]</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">其中f(a,b), 表示图像(a,b)点的灰度值；</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">图像的每一个像素的横向及纵向灰度值通过以下公式结合，来计算该点灰度的大小：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2375  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2375'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217388596.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2374" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217386088.png" border="0" alt="wps_clip_image-21598" title="wps_clip_image-21598" width="295" height="81" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">通常，为了提高效率&nbsp;使用不开平方的近似值：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2373  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2373'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217389992.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2372" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217397483.png" border="0" alt="wps_clip_image-3585" title="wps_clip_image-3585" width="311" height="68" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">如果梯度G大于某一阀值&nbsp;则认为该点(x,y)为边缘点。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">然后可用以下公式计算梯度方向：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2371  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2371'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217391387.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2370" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217398879.png" border="0" alt="wps_clip_image-7174" title="wps_clip_image-7174" width="235" height="78" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Sobel算子根据像素点上下、左右邻点灰度加权差，在边缘处达到极值这一现象检测边缘。对噪声具有平滑作用，提供较为精确的边缘方向信息，边缘定位精度不够高。当对精度要求不是很高时，是一种较为常用的边缘检测方法。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">用阈值化的方法勾勒卡通渲染需要的轮廓。该算子包含两组3x3的矩阵(一个水平的，一个是垂直的)，每一个逼近一个偏导数，分别为横向及纵向，将之与图像作平面卷积，即可分别得出横向及纵向的亮度差分近似值。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">计算出深度图中的像素梯度值G，我们预设一个阀值(Threshold)值T，G值大于T值时，认为该像素为深度变化较大的边缘，由此我们得到一张屏幕空间描边图(Edge Texture)。这种阈值化轮廓提取算法，已在数学上证明当像素点满足正态分布时所求解是最优的。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp;&nbsp; 这种方法的Demo我就不贴了，需要的参见RenderMonkey自带例子中N<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.haogongju.net/tag/read.php?2369  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.haogongju.net/tag/read.php?2369'" tppabs="http://www.haogongju.net/tag/PR">PR</a>例子。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">简而言之，Sobel<span style="margin: 0px; padding: 0px; font-family: 宋体">算子</span>就是如何使用一个算子重新计算一个像素，看代码说话：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Pixel Shader：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">//RT尺寸 off值即为相邻像素（想像一下九宫格）的距离</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">sampler&nbsp;RT: register(s0);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float4&nbsp;myColor;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;fViewportWidth;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;fViewportHeight;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float4&nbsp;ps_main(float2&nbsp;texCoord: TEXCOORD0):COLOR</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#123;&nbsp;&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float4 newColor;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">newColor=tex2D(RT,texCoord);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;offx=1.0f/fViewportWidth;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;offy=1.0f/fViewportHeight;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p00 = tex2D( RT, texCoord + float2(-offx, -offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p01 = tex2D( RT, texCoord + float2( 0, -offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p02 = tex2D( RT, texCoord + float2( offx, -offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p10 = tex2D( RT, texCoord + float2(-offx, 0)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p12 = tex2D( RT, texCoord + float2( offx, 0)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p20 = tex2D( RT, texCoord + float2(-offx, offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p21 = tex2D( RT, texCoord + float2( 0, offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;p22 = tex2D( RT, texCoord + float2( 1, offy)).r;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">// sobel算子的横纵灰度值</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;gx = (p00 + 2*p10 + p20) - (p02 + 2*p12 + p22);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;gy = (p00 + 2*p01 + p02) - (p20 + 2*p21 + p22);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;edgeSqr = gx*gx + gy*gy;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;final=1.0f - (edgeSqr &lt; 0.07f*0.07f );</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">newColor.a = final;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">return&nbsp;newColor;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#125;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><strong style="margin: 0px; padding: 0px">2<span style="margin: 0px; padding: 0px; font-family: 宋体">，描边，法线放大</span></strong></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">可以从一遍又一遍的采样看出，<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Sobel</span><span style="margin: 0px; padding: 0px; font-family: 宋体">算法在</span>PixelShader<span style="margin: 0px; padding: 0px; font-family: 宋体">中进行逐像素的效率并不高</span>，而且也并不完全准确。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">另一种描边方法既是传说中的法线放大,渲染两次，先关闭<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Z-Write</span>，对模型按法线方向微微进行一次放大<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">,</span>并在PS<span style="margin: 0px; padding: 0px; font-family: 宋体">中将其处理为需要的描边颜色，然后在第二遍渲染中，正常渲染出模型（当然了，这只是</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">demo</span><span style="margin: 0px; padding: 0px; font-family: 宋体">演示时的做法，真正应用中，比如点选人物效果，还需要对描边进行一定的高斯模糊，具体方法后面再提）。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">VSShader:</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">float4x4 matViewProjection;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">struct VS_INPUT</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#123;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; float4 Position : POSITION0;</p><p style="margin: 0pt auto 0pt 21pt; padding: 0px; text-indent: -21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; float3 Normal&nbsp;&nbsp; : NORMAL0;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#125;;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">struct VS_OUTPUT</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#123;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; float4 Position : POSITION0;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#125;;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">VS_OUTPUT vs_main( VS_INPUT Input )</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#123;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; VS_OUTPUT Output;</p><p style="margin: 0pt auto 0pt 21pt; padding: 0px; text-indent: -21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; Output.Position = float4(Input.Position.xyz + Input.Normal*f1BiggerFactor1);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; Output.Position = mul( Output.Position, matViewProjection );</p><p style="margin: 0pt auto 0pt 21pt; padding: 0px; text-indent: -21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; return( Output );</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#125;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">PSShader:</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">sampler2D BaseMap;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">float4 ps_main() : COLOR0</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#123;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;&nbsp; return&nbsp;float4(0, 1, 0, 1);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&#125;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><strong style="margin: 0px; padding: 0px">3<span style="margin: 0px; padding: 0px; font-family: 宋体">，边列表方法</span></strong></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">首先需要做的是找出模型中的边来，其方法是首先在载入模型的时候，生成边列表，保存每条边连接的两个顶点，每条边相邻的两个面的编号。然后每一帧遍利所有边，找出边的两个面的法线和摄像机镜头夹角的乘积为负的边<span style="margin: 0px; padding: 0px; font-family: Arial">(</span><span style="margin: 0px; padding: 0px; font-family: 宋体">大于</span><span style="margin: 0px; padding: 0px; font-family: Arial">90</span><span style="margin: 0px; padding: 0px; font-family: 宋体">度为正，小于</span><span style="margin: 0px; padding: 0px; font-family: Arial">90</span><span style="margin: 0px; padding: 0px; font-family: 宋体">度为负</span><span style="margin: 0px; padding: 0px; font-family: Arial">)</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，找到这些边之后，然后把每条边的顶点复制一个，往法线方向位移一定的距离，获得一个顶点，然后据此来生成</span><span style="margin: 0px; padding: 0px; font-family: Arial">mesh</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的顶点索引。</span>&nbsp;</p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">若两个三角面<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">face0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">face1</span><span style="margin: 0px; padding: 0px; font-family: 宋体">在视图方向上与两个不同方向的面共享同一条边，则该边为轮廓边。也就是说，如果一个面是前面（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">front facing</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）而另一个面是后面（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">back facing</span><span style="margin: 0px; padding: 0px; font-family: 宋体">），那么这条边就是一条轮廓边。图</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.8</span><span style="margin: 0px; padding: 0px; font-family: 宋体">给出了一个轮廓边和一个非轮廓边的例子。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2368  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2368'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217391911.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2367" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217396894.png" border="0" alt="wps_clip_image-18972" title="wps_clip_image-18972" width="549" height="304" /></a></p><p style="margin: 0pt auto 0pt 21pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">图<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.8</span><span style="margin: 0px; padding: 0px; font-family: 宋体">：在（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">a</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）中，由</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">v0&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">v1</span><span style="margin: 0px; padding: 0px; font-family: 宋体">定义的共享边的一个面是前面，而共享边另一个面是背面，因此该边是轮廓边。在（</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">b</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）中，由</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">v0&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">v1</span><span style="margin: 0px; padding: 0px; font-family: 宋体">定义的这两个共享边面都是前面，因此该边不是轮廓边。</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">具体可以参照龙书17<span style="margin: 0px; padding: 0px; font-family: 宋体">章，这里不采用，就不再赘述。</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><strong style="margin: 0px; padding: 0px">4<span style="margin: 0px; padding: 0px; font-family: 宋体">，卡通着色</span>（摘自龙书）</strong></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">要实现卡通着色，我们采用<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Lander</span><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">2000</span><span style="margin: 0px; padding: 0px; font-family: 宋体">年</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">3</span><span style="margin: 0px; padding: 0px; font-family: 宋体">月发表在</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Game Developer Magazine</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的文章&ldquo;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Shades of Disney: Opaquing a 3D World</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&rdquo;中所描述的方法。它像这样工作：我们创建一个带强度级别的灰度纹理，它包含我们需要的不同的着色强度。图</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.3</span><span style="margin: 0px; padding: 0px; font-family: 宋体">显示了我们在样例程序中使用的这个纹理。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2366  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2366'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217394386.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2365" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217391877.png" border="0" alt="wps_clip_image-23700" title="wps_clip_image-23700" width="296" height="295" /></a></p><p style="margin: 0pt auto 0pt 21pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">图&nbsp;<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.3</span><span style="margin: 0px; padding: 0px; font-family: 宋体">：用来保存着色强度的着色纹理。注意观察不连续的着色间过渡和纹理着色强度必须从左到右增加。</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">然后在顶点着色器中，我们执行标准散射点积运算（<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">standard diffuse calculation dot product</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）来确定顶点法线</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">N</span><span style="margin: 0px; padding: 0px; font-family: 宋体">和光线向量</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">L</span><span style="margin: 0px; padding: 0px; font-family: 宋体">之间角度的余弦，用以确定顶点接收到多少光线：</span>s=L&middot;N</p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">如果<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">＜</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，就表示光线向量和顶点法线之间的角度大于</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">90</span><span style="margin: 0px; padding: 0px; font-family: 宋体">度，也就表示该表面接收不到光线。因此，如果</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">＜</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，我们就让</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">＝</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">。所以</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&isin;&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">[0, 1]</span><span style="margin: 0px; padding: 0px; font-family: 宋体">。</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">现在，在通常的散射光照模型中，我们使用<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">来标记颜色向量。这样，顶点颜色的明暗取决于接收到的光照的数量：</span>diffuseColor = s(r, g, b, a)</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p17">但是，这将会导致从亮到暗之间平滑的着色。这是与我们期望的卡通着色相反的。我们想要一种在几个不同着色器间突然转换颜色的效果（对卡通渲染来说，在<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">2</span><span style="margin: 0px; padding: 0px; font-family: 宋体">至</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">4</span><span style="margin: 0px; padding: 0px; font-family: 宋体">种着色器工作起来还是挺不错的）。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p17"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">不使用<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">来标记颜色向量，我们将使用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">作为早先提到的强度纹理的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">u</span><span style="margin: 0px; padding: 0px; font-family: 宋体">纹理坐标&mdash;&mdash;如图</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.3</span><span style="margin: 0px; padding: 0px; font-family: 宋体">。</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">注意：标量（<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">scalar</span><span style="margin: 0px; padding: 0px; font-family: 宋体">）</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s</span><span style="margin: 0px; padding: 0px; font-family: 宋体">必定是一个有效的纹理坐标，因为</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&isin;&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">[0, 1]</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，这是通常的纹理坐标区间。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 17.955pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">按这种方式，顶点不会被平滑着色，而是间断的。例如，强度纹理可能被分成<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">3</span><span style="margin: 0px; padding: 0px; font-family: 宋体">种着色，如图</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.4</span><span style="margin: 0px; padding: 0px; font-family: 宋体">所示：</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2364  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2364'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217399369.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2363" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217397941.png" border="0" alt="wps_clip_image-8048" title="wps_clip_image-8048" width="550" height="170" /></a></p><p style="margin: 0pt auto 0pt 42pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">图<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">17.4</span><span style="margin: 0px; padding: 0px; font-family: 宋体">：那么，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&isin;&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">[0, 0.33]</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的值使用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">着色，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&isin;&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">[ 0.33</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">0.66]</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的值使用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader1</span><span style="margin: 0px; padding: 0px; font-family: 宋体">着色，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">s&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体">&isin;&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">[0.66,1]</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的值使用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader2</span><span style="margin: 0px; padding: 0px; font-family: 宋体">着色。当然，从这些着色的一种到另一种的过渡是不平滑的，这就赋予了我们期望的效果。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">注意：我们还为卡通着色关闭了纹理过滤，因为这种过滤会试图使着色过渡变平滑。这对于我们要求的不连续过渡是多余的。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">为了实现卡通着色，&nbsp;我们需要创建一个带强度级别的灰度纹理，&nbsp;来达到卡通绘画中的阴影过度效果。</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">然后在顶点着色器中，我们执行基本的散射运算，通过&nbsp;光向量L与法向量N的点积，以确定顶点接受到了多少光线：</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">S= L.N</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">如果s&lt;0;表明光线和顶点法线间的夹角大于90度，顶点接受不到任何光线，所以如果s&lt;0,则让s=0; 以便让s位于[0,1]之间，方便在纹理坐标空间取值。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">像素处理器中，我们从亮度纹理中取值，&nbsp;由于亮度纹理只有3中颜色，所以着色的结果是一种颜色到另一种颜色的生硬过度，这正是我们所期望的。</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">VS代码片段：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">VS_OUTPUT&nbsp;vs_main( VS_INPUT&nbsp;Input )</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#123;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">VS_OUTPUT&nbsp;Output;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">Output.Position = mul( Input.Position, matViewProjection );</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float3 posW&nbsp;&nbsp;&nbsp; = mul( matView, Input.Position );</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float3 normalW = mul( Input.Normal, matView);</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float&nbsp;diffuse = max(0, dot(vecLightDir, normalW));</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">Output.Texcoord.x = diffuse;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">Output.Texcoord.y = 0.0f;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">return( Output );</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#125;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">PS代码：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">sampler cartoonMap;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">float4&nbsp;ps_main( float2&nbsp;tex:TEXCOORD0) : COLOR0</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#123;&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">return&nbsp;tex2D( cartoonMap, tex);&nbsp;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; text-align: justify; line-height: 18pt" class="p0">&#125;</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">&nbsp;</p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">三、 RenderMonkey<span style="margin: 0px; padding: 0px; font-family: 宋体">实践</span></h4><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">Now.It's action time:</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">首先建立<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RM</span><span style="margin: 0px; padding: 0px; font-family: 宋体">工程，初步，我们只需要两步：</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">1<span style="margin: 0px; padding: 0px; font-family: 宋体">，法线放大背景（背景）；</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">2<span style="margin: 0px; padding: 0px; font-family: 宋体">，渲染原始模型（前景）；</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">话不多说，直接看图：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2362  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2362'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217405956.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2361" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217404843.png" border="0" alt="wps_clip_image-14017" title="wps_clip_image-14017" width="286" height="480" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">RM<span style="margin: 0px; padding: 0px; font-family: 宋体">工程</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2360  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2360'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217406239.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2359" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217401222.png" border="0" alt="wps_clip_image-9490" title="wps_clip_image-9490" width="579" height="387" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">RimBack-VS</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2358  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2358'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217404254.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2357" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217409237.png" border="0" alt="wps_clip_image-389" title="wps_clip_image-389" width="637" height="352" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">RimBack-PS</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2356  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2356'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217417809.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2355" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217412792.png" border="0" alt="wps_clip_image-26986" title="wps_clip_image-26986" width="653" height="372" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">ToonShading-VS</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2354  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2354'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217415824.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2353" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/20120319221741807.png" border="0" alt="wps_clip_image-8114" title="wps_clip_image-8114" width="671" height="293" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">ToonShading-PS</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2352  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2352'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217416314.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2351" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217421613.png" border="0" alt="wps_clip_image-16867" title="wps_clip_image-16867" width="492" height="494" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">额，结果，还行</p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">四、 高斯模糊，随机颜色</h4><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">一开的效果，明显过于单调，让我们进入彩色的世界吧：</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">其中报了个错，error X3025: global variables are implicitly constant, enable compatibility mode to allow modification，需要注意下这是因为当前编译的<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader</span><span style="margin: 0px; padding: 0px; font-family: 宋体">基于一个较老的</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader</span><span style="margin: 0px; padding: 0px; font-family: 宋体">版本，必须指定兼容模式</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">D3DXSHADER_ENABLE_BACKWARDS_COMPATIBILITY</span><span style="margin: 0px; padding: 0px; font-family: 宋体">才能 编译通过也就是在调用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">D3DXCompileShaderFromFile</span><span style="margin: 0px; padding: 0px; font-family: 宋体">编译</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">shader</span><span style="margin: 0px; padding: 0px; font-family: 宋体">时，第</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">6</span><span style="margin: 0px; padding: 0px; font-family: 宋体">个参数必须包含此值。</span>在RM<span style="margin: 0px; padding: 0px; font-family: 宋体">中所以不要动态地改变全局变量值，直接中间赋值给一个局部变量吧</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">~</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2350  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2350'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217426281.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2349" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217429072.png" border="0" alt="wps_clip_image-8032" title="wps_clip_image-8032" width="407" height="305" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">其次是高斯模糊问题，典型如最近的暗黑3<span style="margin: 0px; padding: 0px; font-family: 宋体">中，鼠标移过人物背后会显示&ldquo;毛边&rdquo;，虽然没有去分析过渲染，但大体可以猜测出原理应该是一样的，渲染出人物背景后再进行高斯模糊（预存边列表太费，且会在人物身上描出线条，大多见于日式卡通游戏）。</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2348  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?2348'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217428723.png"><img style="margin: 0px; padding: 0px; border: 0px; width: 546px; display: inline; height: 343px" src="read-2.php-2347" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217438690.png" border="0" alt="wps_clip_image-16684" title="wps_clip_image-16684" width="546" height="343" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">坑爹呐，找不到图，只好自己截了个</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1740  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1740'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217435069.png"><img style="margin: 0px; padding: 0px; border: 0px; width: 578px; display: inline; height: 364px" src="read-2.php-1693" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217435036.png" border="0" alt="wps_clip_image-22957" title="wps_clip_image-22957" width="578" height="364" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">再放一张，期待国内快点出</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1692  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1692'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/2012031922174320.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-1349" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217436955.png" border="0" alt="wps_clip_image-20586" title="wps_clip_image-20586" width="591" height="395" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">偷偷地告诉你一句，其实<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RM</span><span style="margin: 0px; padding: 0px; font-family: 宋体">里有，自己拖个过来吧，可别小瞧了</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RM</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的节点功能</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1078  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1078'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217443575.png"><img longdesc="http://www.cnblogs.com/hmxp8/archive/2012/03/19/2407000.html" style="margin: 0px; padding: 0px; border: 0px; width: 446px; display: inline; height: 445px" src="read-2.php-1077" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/show4.gif" border="0" alt="wps_clip_image-15782" title="wps_clip_image-15782" width="446" height="445" /></a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">结果可以看到，这凶妹子是个精英怪哇，怕怕</p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">五、 实际应用，RT<span style="margin: 0px; padding: 0px; font-family: 宋体">处理</span></h4><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">1<span style="margin: 0px; padding: 0px; font-family: 宋体">，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Sobel</span><span style="margin: 0px; padding: 0px; font-family: 宋体">二次勾边</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1076  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1076'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217446889.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-1075" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217441316.png" border="0" alt="wps_clip_image-2823" title="wps_clip_image-2823" width="593" height="475" /></a></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">无心试了下<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Sobel</span><span style="margin: 0px; padding: 0px; font-family: 宋体">算子，特别提下，发现网上有的代码使用</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Sobel</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的最终计算是错误的，如</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">float final=1.0f - (edgeSqr &gt; 0.07f*0.07f ); ,</span><span style="margin: 0px; padding: 0px; font-family: 宋体">实际应为颜色值变化大的情况下，为</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">false</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，返回</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">1.0f</span><span style="margin: 0px; padding: 0px; font-family: 宋体">，如下</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">float final=1.0f - (edgeSqr &lt; 0.07f*0.07f );&nbsp;</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1074  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1074'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217454348.png"></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&nbsp;</p><div align="center" style="margin: 0px; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><img longdesc="http://www.cnblogs.com/hmxp8/archive/2012/03/19/2407000.html" style="margin: 0px; padding: 0px; border: 0px; width: 535px; height: 451px" src="read-1.php-1073" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/show8.gif" border="0" width="535" height="451" /></div><div align="center" style="margin: 0px; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Gif图，可能会看不到，用Chrome</div><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">特殊效果，加大Bigger<span style="margin: 0px; padding: 0px; font-family: 宋体">法线参数，可以做出</span>人物周围电圈效果；，</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1072  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1072'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/20120319221745411.png"></a>&nbsp;<img longdesc="http://www.cnblogs.com/hmxp8/archive/2012/03/19/2407000.html" style="margin: 0px; padding: 0px; border: 0px; width: 512px; height: 431px" src="read-2.php-1071" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/show9.gif" border="0" width="512" height="431" /></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">Gif图，同上</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">2<span style="margin: 0px; padding: 0px; font-family: 宋体">，与场景结合</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">RT<span style="margin: 0px; padding: 0px; font-family: 宋体">渲染的实际应用，如何贴上？你很快会发现这个问题；</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">首先是<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Clear</span><span style="margin: 0px; padding: 0px; font-family: 宋体">相关</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RT</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的时候，记得设</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Alpha</span><span style="margin: 0px; padding: 0px; font-family: 宋体">为</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">0</span><span style="margin: 0px; padding: 0px; font-family: 宋体">；</span></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">其次，将<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RT</span><span style="margin: 0px; padding: 0px; font-family: 宋体">贴到</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">MainBackBuffer</span><span style="margin: 0px; padding: 0px; font-family: 宋体">上时，</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RM</span><span style="margin: 0px; padding: 0px; font-family: 宋体">的半透明混合</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">ms</span><span style="margin: 0px; padding: 0px; font-family: 宋体">是没设置的，需要建立</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RenderState</span><span style="margin: 0px; padding: 0px; font-family: 宋体">节点，手动设置</span><span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">Alpha</span><span style="margin: 0px; padding: 0px; font-family: 宋体">混合参数；</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1069  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?1069'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217462754.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="index-2.php-go=category_48&mode=2&page=1" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217471085.png" border="0" alt="wps_clip_image-27708" title="wps_clip_image-27708" width="769" height="355" /></a></p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">最后，大功告成，结果如下：</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/index.php?go=category_48&mode=2&page=2  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/index.php?go=category_48&mode=2&page=2'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217475196.png"></a>&nbsp;<img longdesc="http://www.cnblogs.com/hmxp8/archive/2012/03/19/2407000.html" style="margin: 0px; padding: 0px; border: 0px; width: 441px; height: 375px" src="index-2.php-go=category_48&mode=1&page=1" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/show6.gif" border="0" width="441" height="375" /><img longdesc="http://www.cnblogs.com/hmxp8/archive/2012/03/19/2407000.html" style="margin: 0px; padding: 0px; border: 0px; width: 454px; height: 386px" src="read-2.php-6474" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/show7.gif" border="0" width="454" height="386" /></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: center" class="p0">最终效果，用了3张RT，模糊后背景变瘦，都还有待改进</p><p style="margin: 0pt auto; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"></p><h4 style="margin: 0pt auto; padding: 0px; font-size: 14px">六、 其它相关内容</h4><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">PS<span style="margin: 0px; padding: 0px; font-family: 宋体">：</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0">附录《<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cppblog.com/lai3d/archive/2008/12/09/read.php?6473  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cppblog.com/lai3d/archive/2008/12/09/read.php?6473'" tppabs="http://www.cppblog.com/lai3d/archive/2008/12/09/68975.html">RenderMonkey Predefined Variables</a>》，省的总是把参数忘了~</p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: right" class="p0">--摘自<span style="margin: 0px; padding: 0px; font-family: 'Times New Roman'">RenderMonkey Documentation.pdf</span></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px; text-align: right" class="p0"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cppblog.com/lai3d/archive/2008/12/09/read.php?6473  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cppblog.com/lai3d/archive/2008/12/09/read.php?6473'" tppabs="http://www.cppblog.com/lai3d/archive/2008/12/09/68975.html">http://www.cppblog.com/lai3d/archive/2008/12/09/68975.html</a></p><p style="margin: 0pt auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px" class="p0"><br />Predefined Variables&nbsp;<br /><br />RenderMonkey provides a set of predefined variables for added shader development&nbsp;<br />convenience. Such variables will display an appropriate tool tip (Predefined Variable) if&nbsp;<br />the mouse hovers over them. Predefined variables are shader constants whose values get&nbsp;<br />filled in at run-time by the viewer module directly at every frame. You cannot modify the&nbsp;<br />values directly through the same user interface that you can use to edit other variables of&nbsp;<br />similar types. A properly flagged predefined variable will be denoted in the workspace&nbsp;<br />tree view with a symbol over the nodes icon. For example:&nbsp;<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?6472  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201203/read.php?6472'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217474607.png"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-6316" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201203/201203192217476002.png" border="0" alt="wps_clip_image-20692" title="wps_clip_image-20692" width="136" height="33" /></a>&nbsp;<br />RenderMonkey provides this set of predefined variables for your convenience:&nbsp;<br /><br />Time&nbsp;<br /><br />&quot;Time0_X&quot;&nbsp;<br />Provides a floating point time value (in seconds) which repeats itself based on the&nbsp;<br />&ldquo;Cycle time&rdquo; set in the RenderMonkey Preferences dialog. By default this &ldquo;Cycle&nbsp;<br />time&rdquo; is set to 120 seconds. This means that the value of this variable cycles from&nbsp;<br />0 to 120 in 120 seconds and then goes back to 0 again.&nbsp;<br />&quot;CosTime0_X&quot;&nbsp;<br />This variable will provide the cosine of Time0_X.&nbsp;<br />&quot;SinTime0_X&quot;&nbsp;<br />This variable will provide the sine of Time0_X.&nbsp;<br />&quot;TanTime0_X&quot;&nbsp;<br />This variable will provide the tangent of Time0_X.&nbsp;<br />&quot;Time0_X_Packed&quot;&nbsp;<br />This variable will pack the above xxxTime0_X variables into a 4 component&nbsp;<br />floating point vector.&nbsp;<br />Example: float4(Time0_X,CosTime0_X,SinTime0_X,TanTime0_X).&nbsp;<br />&quot;Time0_1&quot;&nbsp;<br />This variable provides a scaled floating point time value [0..1] which repeats itself&nbsp;<br />based on the &ldquo;Cycle time&rdquo; set in the RenderMonkey Preferences dialog. By&nbsp;<br />default this &ldquo;Cycle time&rdquo; is set to 120 seconds. This means that the value of this&nbsp;<br />variable cycles from 0 to 1 in 120 seconds and then goes back to 0 again.&nbsp;<br />&quot;CosTime0_1&quot;&nbsp;<br />This variable will provide the cosine of Time0_1.&nbsp;<br />&quot;SinTime0_1&quot;&nbsp;<br />This variable will provide the sine of Time0_1.&nbsp;<br />&quot;TanTime0_1&quot;&nbsp;<br />This variable will provide the tangent of Time0_1.&nbsp;<br />&quot;Time0_1_Packed&quot;&nbsp;<br />This variable will pack the above xxxTime0_1 variables into a 4 component&nbsp;<br />floating point vector.&nbsp;<br />Example: float4(Time0_1,CosTime0_1,SinTime0_1,TanTime0_1).&nbsp;<br />&quot;Time0_2PI&quot;&nbsp;<br />This variable provides a scaled floating point time value [0..2PI] which repeats&nbsp;<br />itself based on the &ldquo;Cycle time&rdquo; set in the RenderMonkey Preferences dialog. By&nbsp;<br />default this &ldquo;Cycle time&rdquo; is set to 120 seconds. This means that the value of this&nbsp;<br />variable cycles from 0 to 2PI in 120 seconds and then goes back to 0 again.&nbsp;<br />&quot;CosTime0_2PI&quot;&nbsp;<br />This variable will provide the cosine of Time0_2PI.&nbsp;<br />&quot;SinTime0_2PI&quot;&nbsp;<br />This variable will provide the sine of Time0_2PI.&nbsp;<br />&quot;TanTime0_2PI&quot;&nbsp;<br />This variable will provide the tangent of Time0_2PI .&nbsp;<br />&quot;Time0_2PI_Packed&quot;&nbsp;<br />This variable will pack the above xxxTime0_2PI variables into a 4 component&nbsp;<br />floating point vector.&nbsp;<br />Example: float4(Time0_2PI,CosTime0_2PI,SinTime0_2PI,TanTime0_2PI).&nbsp;<br />&quot;TimeCyclePeriod&quot;&nbsp;<br />This variable provides the &ldquo;Cycle time&rdquo; floating point value, as set in the&nbsp;<br />RenderMonkey Preferences dialog. By default this &ldquo;Cycle time&rdquo; is set to 120&nbsp;<br />seconds.&nbsp;<br />&quot;FPS&quot;&nbsp;<br />This variable provides the calculated frames per second, returned as a floating&nbsp;<br />point value.&nbsp;<br />&quot;TimeElapsed&quot;&nbsp;<br />This variable provides the elapsed time (in seconds) from the last frame to the&nbsp;<br />current frame, returned as a floating point value.&nbsp;<br /><br /><br />Viewport&nbsp;<br /><br />&quot;ViewportWidth&quot;&nbsp;<br />This variable provides the preview window width (in pixels), returned as a&nbsp;<br />floating point value.&nbsp;<br />&quot;ViewportHeight&quot;&nbsp;<br />This variable provides the preview window height (in pixels), returned as a&nbsp;<br />floating point value.&nbsp;<br />&quot;ViewportDimensions&quot;&nbsp;<br />&nbsp;&nbsp; This variable provides the preview window width and height (in pixels), returned&nbsp;<br />as a float2 value.&nbsp;<br />&quot;ViewportWidthInverse&quot;&nbsp;<br />&nbsp;&nbsp; This variable will return 1.0 / ViewportWidth.&nbsp;<span style="margin: 0px; padding: 0px; font-family: 宋体">【</span>重剑注：<span style="margin: 0px; padding: 0px; font-family: Verdana">NND!</span><span style="margin: 0px; padding: 0px; font-family: 宋体">就是倒数啊</span>！--<span style="margin: 0px; padding: 0px; font-family: 宋体">囧，估计这位仁兄在此栽过跟头</span>】&nbsp;<br />&quot;ViewportHeightInverse&quot;&nbsp;<br />&nbsp;&nbsp; This variable will return 1.0 / ViewportHeight.&nbsp;<br />&quot;InverseViewportDimensions&quot;&nbsp;<br />This variable provides the inverse of the &ldquo;ViewportDimensions&rdquo;, returned as a&nbsp;<br />float2 value.&nbsp;<br />Random Values&nbsp;<br />&quot;RandomFraction1PerPass&quot;&nbsp;<br />&quot;RandomFraction2PerPass&quot;&nbsp;<br />&quot;RandomFraction3PerPass&quot;&nbsp;<br />&quot;RandomFraction4PerPass&quot;&nbsp;<br />Each of these variables provide a random floating point value in the range of&nbsp;<br />[0..1]. These values are updated each pass.&nbsp;<br />&quot;RandomFraction1PerEffect&quot;&nbsp;<br />&quot;RandomFraction2PerEffect&quot;&nbsp;<br />&quot;RandomFraction3PerEffect&quot;&nbsp;<br />&quot;RandomFraction4PerEffect&quot;&nbsp;<br />Each of these variables provide a random floating point value in the range of&nbsp;<br />[0..1]. These values are updated each effect.&nbsp;<br /><br />Pass&nbsp;<br /><br />&quot;PassIndex&quot;&nbsp;<br />This variable will provide the pass index, returned as a floating point value.&nbsp;<br /><br />Mouse Parameters&nbsp;<br /><br />&quot;LeftMouseButton&quot;&nbsp;<br />This variable will return a floating point value of 1.0 if the left mouse button is&nbsp;<br />currently pressed, or 0.0 if it is not currently pressed.&nbsp;<br />&quot;MiddleMouseButton&quot;&nbsp;<br />This variable will return a floating point value of 1.0 if the middle mouse button is&nbsp;<br />currently pressed, or 0.0 if it is not currently pressed.&nbsp;<br />&quot;RightMouseButton&quot;&nbsp;<br />This variable will return a floating point value of 1.0 if the right mouse button is&nbsp;<br />currently pressed, or 0.0 if it is not currently pressed.&nbsp;<br />&quot;MouseButtonsPacked&quot;&nbsp;<br />This variable will pack the above xxxMouseButton variables into a 4 component&nbsp;<br />floating point vector.&nbsp;<br />Example: float4(LeftMouseButton,MiddleMouseButton,RightMouseButton ,0.0).&nbsp;<br />&quot;MouseCoordinateX&quot;&nbsp;<br />This variable will return the horizontal mouse position (in pixels), relative to the&nbsp;<br />client area of the preview window, returned as a floating point value.&nbsp;<br />&quot;MouseCoordinateY&quot;&nbsp;<br />This variable will return the vertical mouse position (in pixels), relative to the&nbsp;<br />client area of the preview window, returned as a floating point value.&nbsp;<br />&quot;MouseCoordinateXNDC&quot;&nbsp;<br />This variable will return &quot;MouseCoordinateX&quot; / &quot;ViewportWidth&quot;.&nbsp;<br />&quot;MouseCoordinateYNDC&quot;&nbsp;<br />This variable will return &quot;MouseCoordinateY&quot; / &quot;ViewportHeight&quot;.&nbsp;<br />&quot;MouseCoordsPacked&quot;&nbsp;<br />This variable will pack the above MouseCoordinatexxx variables into a 4&nbsp;<br />component floating point vector.&nbsp;<br />Example: float4(MouseCoordinateX,MouseCoordinateY,XNDC,YNDC).&nbsp;<br />&quot;MouseCoordinateXY&quot;&nbsp;<br />This variable will return the &quot;MouseCoordinateX&quot; and &quot;MouseCoordinateY&quot;&nbsp;<br />coordinates into a 2 component floating point vector.&nbsp;<br />Example: float2(MouseCoordinateX,MouseCoordinateY).&nbsp;<br />&quot;MouseCoordinateXYNDC&quot;&nbsp;<br />This variable will return the &quot;MouseCoordinateXNDC&quot; and&nbsp;<br />&quot;MouseCoordinateYNDC&quot; coordinates into a 2 component floating point vector.&nbsp;<br />Example: float2(MouseCoordinateXNDC,MouseCoordinateYNDC).&nbsp;<br /><br />Model Parameters&nbsp;<br /><br />&quot;ModelMoundingBoxTopLeftCorner&quot;&nbsp;<br />This variable provides the top left coordinate of the model as a 3 component&nbsp;<br />floating point vector (world space).&nbsp;<br />&quot;ModelMoundingBoxBottomRightCorner&quot;&nbsp;<br />This variable provides the bottom right coordinate of the model as a 3 component&nbsp;<br />floating point vector (world space).&nbsp;<br />&quot;ModelMoundingBoxCenter&quot;&nbsp;<br />This variable provides the bounding box center of the model as a 3 component&nbsp;<br />floating point vector (world space).&nbsp;<br />&quot;ModelCentroid&quot;&nbsp;<br />This variable provides the centroid of the model as a 3 component floating point&nbsp;<br />vector (world space).&nbsp;<br />&quot;ModelBoundingSphereCenter&quot;&nbsp;<br />This variable provides the bounding sphere center of the model as a 3 component&nbsp;<br />floating point vector (world space).&nbsp;<br />&quot;ModelBoundingSphereRadius&quot;&nbsp;<br />This variable provides the bounding sphere radius of the model as a single&nbsp;<br />component floating point value (world space).&nbsp;<br /><br />View Parameters&nbsp;<br /><br />&quot;ViewDirection&quot;&nbsp;<br />This variable provides the view direction vector (world space).&nbsp;<br />&quot;ViewPosition&quot;&nbsp;<br />This variable provides the view position (world space).&nbsp;<br />&quot;ViewSideVector&quot;&nbsp;<br />This variable provides the view size vector (world space).&nbsp;<br />&quot;ViewUpVector&quot;&nbsp;<br />This variable provides the view up vector (world space).&nbsp;<br />&quot;FOV&quot;&nbsp;<br />This variable provides the field of view as a floating point value.&nbsp;<br />&quot;NearClipPlane&rdquo;&nbsp;<br />This variable provides the near clip distance as a floating point value.&nbsp;<br />&quot;FarClipPlane&rdquo;&nbsp;<br />This variable provides the far clip distance as a floating point value.&nbsp;<br /><br />View Matrices&nbsp;<br /><br />&quot;View&quot;&nbsp;<br />&quot;ViewTranspose&quot;&nbsp;<br />&quot;ViewInverse&quot;&nbsp;<br />&quot;ViewInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the view matrix, its transpose, its inverse, and&nbsp;<br />the inverse transpose.&nbsp;<br />&quot;Projection&quot;&nbsp;<br />&quot;ProjectionTranspose&quot;&nbsp;<br />&quot;ProjectionInverse&quot;&nbsp;<br />&quot;ProjectionInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the projection matrix, its transpose, its&nbsp;<br />inverse, and the inverse transpose.&nbsp;<br /><br />&quot;ViewProjection&quot;&nbsp;<br />&quot;ViewProjectionTranspose&quot;&nbsp;<br />&quot;ViewProjectionInverse&quot;&nbsp;<br />&quot;ViewProjectionInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the view * projection matrix, its transpose, its&nbsp;<br />inverse, and the inverse transpose.&nbsp;<br />&quot;World&quot;&nbsp;<br />&quot;WorldTranspose&quot;&nbsp;<br />&quot;WorldInverse&quot;&nbsp;<br />&quot;WorldInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the world matrix, its transpose, its inverse,&nbsp;<br />and the inverse transpose. Note that since this version of RenderMonkey does not&nbsp;<br />support implementation of a scene graph, we have decided to keep the world&nbsp;<br />matrix as identity, but provide this predefined variable for your development&nbsp;<br />convenience. The user may apply this variable in their shader and when imported&nbsp;<br />into their engine, they may provide appropriate value of the world view projection&nbsp;<br />matrix through the engine&rsquo;s calculations.&nbsp;<br />&quot;WorldView&quot;&nbsp;<br />&quot;WorldViewTranspose&quot;&nbsp;<br />&quot;WorldViewInverse&quot;&nbsp;<br />&quot;WorldViewInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the world * view matrix, its transpose, its&nbsp;<br />inverse, and the inverse transpose.&nbsp;<br />&quot;WorldViewProjection&quot;&nbsp;<br />&quot;WorldViewProjectionTranspose&quot;&nbsp;<br />&quot;WorldViewProjectionInverse&quot;&nbsp;<br />&quot;WorldViewProjectionInverseTranspose&quot;&nbsp;<br />These 4x4 matrix variables provide the World * View * Projection matrix, its&nbsp;<br />transpose, its inverse, and the inverse transpose.&nbsp;<br /><br />Customizing Predefined Variable Names&nbsp;<br /><br />All predefined variable names are customizable through editing the&nbsp;<br />&ldquo;.&#92;UserData&#92;RmPredefinedVariabled.txt&rdquo; file. The data file is organized into four&nbsp;<br />columns. The first column contains the name that the variable will be created with by&nbsp;<br />default. This column is editable by the user. No other column data should be modified.&nbsp;<br />The second column specifies the variable type; the third column specifies the rendering&nbsp;<br />update frequency, and the fourth column species the predefined variable semantic. When&nbsp;<br />items in the first column have been modified, RenderMonkey should be restarted for the&nbsp;<br />changes to take effect.</p><br /><br /><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">后记，OpenPGU中有人看到LOL中的描边效果，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">讨论起这个问题，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">确实，实际应用中，还有很多细节值得讨论。<br />引擎中实际渲染流程的整合，性能的优化，都值得深究，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">我的思路是动态增加一个法线膨胀的Pass，材质直接用描边色，标记Stencil，<br />然后在PostProcess里和Emitter等一并作Bloom。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">有大大提到</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&ldquo;模型投影矩形区域&rdquo;，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">似乎很有趣，想了下，阴影，区域判断等其他地方也有可用之处，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">回头也得看看。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">这里先挖个坑，<br />等差不多手头活少了，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">正好在UE3里实践一下，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">把遮挡和Bloom加上去，看看效果如何，<br />也欢迎感兴趣的童鞋继续讨论。</p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6760.htm" tppabs="http://i.renjihe.com/blog/read.php?6760">一天干掉一只Monkey计划（三）——延迟渲染，及材质ID</a> <span id="starid6760"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:51 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6760.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6760#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6760");'>引用(0)</a> , <a href="read.php-6760.htm" tppabs="http://i.renjihe.com/blog/read.php?6760">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6760" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">技术背景</span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">最近太懒了，打</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">LOL</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RM</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这一块都荒废了下来，关于延迟渲染的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RM</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">工程其实个把月前写好的，杂务所扰，一直没有静下心来整理，现在正值年关，终于可以继续了，努力在接下来的几周把接下来的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Monkey</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">计划完成。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">关于延迟渲染技术，在现阶段的游戏程序中正被越来越推广使用，从</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">PS3</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Xbox360</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的次时代，到暴雪的星际</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">2</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，及最近效果完全征服我的战地</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">3</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，无一例外的使用了延迟渲染</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DeferredShadin(</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">以下简称</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DeferredLighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DL</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">技术暂不在这里讨论</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">)</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">那么传说中的强大延迟渲染技术到底有何强大之处呢？！</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">其实，理论早在几十年前就已经提出，实现也不难，真正的优势，要从传统的前向渲染（</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">ForwardShading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">FS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">）说起</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">,</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">下面引用一段介绍：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">&ldquo;</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: 21.2pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">在</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">TabulaRasa</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">中，我们一开始的渲染引擎是基于最初的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">DX9</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">而完成的传统前向渲染技术<span style="margin: 0px; padding: 0px">(FS)</span>的，使用了</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">HLSL</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">和</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">D3DXEffect</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">。我们的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Effect</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">使用了</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">里的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Annotation</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">来描述这个</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">所支持的光照。而在</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">CPU</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">这边，引擎可以算出来每个几何体被那些光源所影响&mdash;&mdash;这个信息连同那些在</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Annotation</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">里的信息一起，用于设置光源的参数、以及确定每个</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">该调用多少次。</span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: 21.2pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这种前向着色有多种问题：</span></span></strong></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -21.25pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">1</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">计算每个几何体受那些光影响耗费了</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">CPU</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">的时间，更坏的是，这是个</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">O(n*m)</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">的操作。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -21.25pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">2</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，<span style="margin: 0px; padding: 0px">Shader</span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">经常需要超过一次以上的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">来渲染光照，渲染</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">n</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">个灯光，对于复杂的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Shader</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，可能需要</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">O(n)</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">次运算。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -21.25pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">3</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">增加新的光照模型和新的光源类型，可能需要改变所有</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Effect</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">的源文件。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -21.25pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">4</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，<span style="margin: 0px; padding: 0px">Shader</span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">很快就将达到或者超出</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">SM2</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">的指令限制。</span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: 21.2pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">在</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">MMO</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">里，我们对游戏环境很少会有过于苛求的要求。我们无法控制同屏可见的玩家数量、无法控制同屏会有多少特效和光源。由于传统前向渲染缺乏对环境的控制，且对于光源的复杂度难于估量，因此我们选择了延期着色。这可以让我们的画面更接近于当今顶尖的游戏引擎，并且让光照所耗费的资源独立于场景的几何复杂度。</span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: 21.2pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">延期着色提供了下面的好处：</span></span></strong></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -22.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">1</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">光照所耗费的资源独立于场景复杂度，这样就不用再费尽心机去想着处理那些光源影响几何体了。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -22.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">2</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">不必要再为几何体的受光提供附加的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Pass</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">了，这样就节省了</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">DrawCall</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">和状态切换的数量。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -22.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">3</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">在增加新的光源类型和光照模型时，材质的</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Shader</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">不需要做出任何改变。</span></strong></span></p><p style="margin: 0cm 0cm 10pt 42.55pt; padding: 0px; font-size: 13px; line-height: 19.5pt; text-indent: -22.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">4</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">，</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">材质</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">Shader</span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">不产生光照，这样就节省了计算额外的几何体的指令数。</span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">&rdquo;</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">简单的说，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">最大优势便是在如今渲染模块中</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">PixelShader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">变得越来越复杂的情况下，能最大限度地节约硬件效能。</span></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">实现原理</span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">延迟渲染管线可分为俩个阶段：</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry,Lighting,</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">当然如将</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">GeometryBuffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中的丰富的信息仅仅用于光照点亮过程显而易见不是俺们程序猿&ldquo;雁过拔毛&rdquo;的性格，所以通常各种</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Post-processing</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">也会被被我们加入管线之中</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">,</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这里且不做深入。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">鄙人很懒，相比码字，更喜欢用代码说话，所以这里就杂糅一些别人的著说，后面再一一提名感谢，嘿嘿</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">~~~</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段：将本帧所有的几何信息</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">(</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">位置，法线，贴图</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">)</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光栅化到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-buffer</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段：以</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">作为输入（位置，法线）进行逐像素的光照计算，得到渲染结果。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">整体渲染过程并不复杂，但问题往往出在细节，下面先一一列举各个步骤。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">G-buffer</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段将几何信息渲染到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MultiRenderTarget</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">上（</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">），当前最多支持</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">4</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。并且驱动要求</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">4</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">必须相同的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">bit</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">宽度。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">对显存占用过大会增加带宽，降低</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">cache</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">命中。而简单格式的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">又会影响画质。因此决定使用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">32bit</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">（如</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">A8R8G8B8</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">R16G16F</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">）或</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">64bit</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">宽度的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">（如</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">A16R16G16B16F</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">）。需要在画质和性能间做出折衷。（开发时尽可能可以方便的配置）。中有一些性能比较。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">光照计算</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">使用延迟渲染技术最大的好处就是可以渲染光照极为复杂的场景。这里场景中的光照可以分为两类。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">影响整个场景的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">scenelight</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。如</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">directionallight</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。渲染一个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">screenquad</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，逐像素光照计算，没什么好说的。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">另一类是只影响一部分区域的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">locallight</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。如点光源，聚光灯，以及特效等等。这些</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">locallight</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">只影响到屏幕上的某些像素，当然不需要逐像素的进行光照计算。最简单的方法是绘制这些光源的包围体（点光源的包围体是球，聚光灯的包围体是圆锥），包围体的大小要大于等于光源的衰减范围。这些包围体经过变换投影到屏幕上的对应区域，随后在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixelshader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中计算光照。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">优化：</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">1.</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光源包围体的视锥剔除，遮挡剔除。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">2.</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光源包围体投影后很小时剔除；若干个靠的比较近的小光源合并成一个较大的光源</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">3.</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光源包围体的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">backfaceculling</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">4.</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">屏幕空间中没有被光源照到的，或者被更近的物体遮挡住的像素不需要光照计算，因此可以逐像素的深度剔除。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">a.</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">使用正确的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">stencillightvolume</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。类似</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shadowvolume</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的方案，将渲染</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lightvolume</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的正反两面，得到正确的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">stencilmask</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，然后光照计算时使用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">stencilbuffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。这种方法可以得到正确的结果，但是需要渲染每盏灯时频繁改变</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">renderstate</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，可能会带来一定性能上的损失。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">b</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">使用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">ztest</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，可以得到&ldquo;一定程度上正确&rdquo;的结果。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">阴影</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光照计算的同时计算阴影。使用传统的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shadowmap</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，预先生成一张阴影图。考虑在编辑场景的时候指定那些重要的光源才会产生阴影。在计算</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shadowmap</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">时要针对光源的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">bindingvolume</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">进行剔除。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">方向光和聚光灯可以使用基本的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shadowmap</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">投影（正交投影，透视投影）。点光源会复杂一些，需要使用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">cubicshadowmap</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。（考虑</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">unwrappingmethod[14]</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">）</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">半透明</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">由于在延迟渲染的过程中只计算离屏幕距离最近的那个像素的光照，因此无法处理半透明物体的光照。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; color: #333333"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">方案</span></span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">1</span></span></span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">延迟渲染的过程中只处理不透明的物体，将所有半透明的物体放在渲染过程的最后，使用传统的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">forwardshading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">渲染。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; color: #333333"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">方案</span></span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">2</span></span></span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段将半透明的物体和背景逐像素的交织起来，将透明度放在一个单独的通道中。按一般的方法计算光照。随后在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">composition</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段再根据透明度将透明物体和背景逐像素的混合起来。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">优点：</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">光照一致性。半透明的物体也参加延迟渲染，可以接受多光源的光照。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">简单并且健壮。不需要单独区分不透明物体和半透明物体，不需要单独的半透明渲染管道。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">速度快。只增加了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">7</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">10</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">条</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">ps</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">指令，两张贴图，只有约</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">2%</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的性能损失。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">缺点：</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">模糊。在半透明的物体上会有一点模糊，原因是在交织的过程中会有一定信息损失。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">边缘锯齿。反交织的过程中半透明物体的边缘会产生一些锯齿。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">只能有一层半透明。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">多种材质</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在延迟光照的过程中支持多种材质需要如下方案：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段输出材质的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">ID</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的一个通道中，随后在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段根据材质</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">ID</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">使用不同的光照函数计算光照。这种方案在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">sm3.0</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中使用动态分支的前提下可以很好的工作。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">反锯齿</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Dx9API</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">不支持反锯齿的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT(</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">需要在后处理上自行解决</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">AntiAlias)</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Dx10</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">支持。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">一种方案是使用超采样，先渲染到大的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">上，再</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">downsample</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">到正常的大小，得到没有锯齿的结果。延迟渲染的效率跟分辨率有很大关系，因此这种方法会极大的降低性能，基本不可取。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">另一种方案是使用&ldquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">intelligentblur</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">&rdquo;，只模糊物体边缘的像素：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">根据相邻像素的深度和法线提取物体边界，然后对提取出的边界进行模糊。模糊时要避免不正确的泄露。如后面物体的颜色泄露到前面的物体上。总体而言实现会较为复杂。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; color: #333333"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">另一种方案：</span></span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 13.5pt">pre-lighting</span></span></span></strong></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">一种</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pre-zrendering</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">deferredrendering</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的结合。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段只保存</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">depth</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，然后计算光照信息到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lightingbuffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，格式如下</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 'Courier New'">LightColor.r*N.L*Att&nbsp;<br />LightColor.g*N.L*Att&nbsp;<br />LightColor.b*N.L*Att&nbsp;<br />R.V^n*N.L*Att</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">最后使用传统的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">forwardshading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">再将整个场景渲染一遍，期间查询</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lightingbuffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">与普通的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">deferredshading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">相比：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">优点：</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">占用带宽小，第一遍渲染只输出</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">depth</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">是自动获得的。可以用在较老的硬件平台上，不需要</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">支持。对现有</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">forwardshading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">管道改动较小，比较容易实现。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 13.5pt; color: #333333">缺点：</span></span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">整个场景需要渲染两遍，相当于在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pre-z</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">forwardshading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中间加了一个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lightingstage</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://ol.2u.com.cn/read.php?6211  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://ol.2u.com.cn/read.php?6211'" tppabs="http://ol.2u.com.cn/25_170486.html" target="_blank"><span style="margin: 0px; padding: 0px; color: #000000"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px">《</span></span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Resistance2</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">》</span></span></span></span></a></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，《</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">GTAIV</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">》，《</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MidnightClubLosAngeles</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">》使用了这种技术。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">CryEngine3</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中也使用了这种方案。</span></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 11pt">RT</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt">选择分配</span></span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中必须的信息：</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">position(depth),normal,diffuse(texture)</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">可能需要的信息：</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">specular,power,emissive,ao,materialid</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这些信息需要在这</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">4</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">上用合理格式，合理的组织。这里还可以就存储空间和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的复杂性做折衷。如只保存</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">depth</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，然后在光照时计算</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">position</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。以及用球面坐标保存法线。以目前的资料得出的结论是应该尽可能地</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pack</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">数据，减少内存占用，多出来的若干条</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">指令不会明显影响性能。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的预置，分配是需要针对实际使用而设计的，如何最大化地发挥每一个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">bit</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的作用，是一门需要不断实践的技术活。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?6210  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?6210'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706116048.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-6209" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706123955.jpg" border="0" alt="clip_image002[4]" title="clip_image002[4]" width="554" height="143" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">KillZone</span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRTf</span></span></strong><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">分布管理</span></span></strong></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">附上</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DX9SDK</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中对</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MRT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的说明</span></span></p><h1 style="margin: 10pt 0cm 0pt; padding: 0px; font-size: 28px"><a style="margin: 0px; padding: 1px 3px; color: green" name="direct3d9.multiple_render_targets"></a><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 15pt; color: #17365d">MultipleRenderTargets(Direct3D9)</span></span></span></h1><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MultipleRenderTargets(MRT)referstotheabilitytorendertomultiplesurfaces(see</span><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5976  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5976'" tppabs="http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/idirect3dsurface9.htm"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">IDirect3D9Surface</span></strong></a><span style="margin: 0px; padding: 0px; font-family: Calibri">)withasingledrawcall.Thesesurfacescanbecreatedindependentlyofeachother.Rendertargetscanbesetusing</span><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5975  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5975'" tppabs="http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/idirect3ddevice9__setrendertarget.htm"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">IDirect3DDevice9::SetRenderTarget</span></strong></a><span style="margin: 0px; padding: 0px; font-family: Calibri">.</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Multiplerendertargetshavethefollowingrestrictions:</span></span></p><ul style="margin: 0px 0px 0cm 45px; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Allrendertargetsurfacesusedtogethermusthavethesamebitdepthbutcanbeofdifferentformats,unlesstheD3DPMISCCAPS_MRTINDEPENDENTBITDEPTHScapisset.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Allsurfacesofamultiplerendertargetshouldhavethesamewidthandheight.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Someimplementationscannotperformpost-pixelshaderoperationsonmultiplerendertargets,including:nodithering,alphatest,nofogging,noblendingormasking,exceptthez-testandstenciltest.Devicesthatcansupportpost-pixelshaderoperationssetthecapbittoD3DPMISCCAPS_MRTPOSTPIXELSHADERBLENDING.</span></span></li></ul><p style="margin: 0cm 0cm 10pt 36pt; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">WhentheD3DPMISCCAPS_MRTPOSTPIXELSHADERBLENDINGcapisset,youmustfirstconsultthe</span><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5974  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/read.php?5974'" tppabs="http://www.cnblogs.com/hmxp8/admin/mk:@MSITStore:D:/Program%20Files/Microsoft%20DirectX%20SDK%20(June%202010)/Documentation/DirectX9/windows_graphics.chm::/direct3d9/idirect3d9__checkdeviceformat.htm"><strong style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">IDirect3D9::CheckDeviceFormat</span></strong></a><span style="margin: 0px; padding: 0px; font-family: Calibri">withtheUSAGE_QUERY_POSTPIXELSHADER_BLENDINGresultforthespecificsurfaceformat.Iffalse,nopost-pixelshaderblendingoperationswillbeavailableforthatspecificsurfaceformat.Iftrue,thedeviceisexpectedtoapplythesamestatetoallsimultaneousrendertargetsasfollows:</span></span></p><ul style="margin: 0px 0px 0cm 45px; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><ul style="margin: 0px 0px 0cm 45px; padding: 0px; list-style-type: disc"><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Alphablend:ThecolorvalueinoCiisblendedwiththeithrendertarget.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Alphatest:ComparisonwillhappenwithoC0.Ifthecomparisonfails,thepixeltestisterminatedforallrendertargets.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Fog:Rendertarget0willgetfogged.Otherrendertargetsareundefined.Implementationscanchoosetofogthemallusingthesamestate.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Dithering:Undefined.</span></span></li></ul><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Noantialiasingissupported.</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; list-style: inherit !important"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Someoftheimplementationsdonotapplytheoutputwritemask(D3DRS_COLORWRITEENABLE).Thosethatcan,haveindependentcolorwritemasks.Thisisexpressedusinganewcapabilitybit.Thenumberofindependentcolorwritemasksavailablewillbeequaltothemaximumnumberofelementsthedeviceiscapableof.</span></span></li></ul><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 11pt">RenderMonkey</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt">实践</span></span></span></span></h4><p style="margin: 0cm 0cm 10pt 21pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RenderMonkey</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中内置了一个简单的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">范例工程，如下图</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5911  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5911'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/20120129170614216.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5431" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706155888.jpg" border="0" alt="clip_image004[3]" title="clip_image004[3]" width="604" height="339" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5394  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5394'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706152366.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5376" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706166892.jpg" border="0" alt="clip_image006[3]" title="clip_image006[3]" width="142" height="334" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">可见，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">分成两个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Pss</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，分别实现了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">过程。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5375  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5375'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706173087.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5374" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/20120129170619744.jpg" border="0" alt="clip_image008[3]" title="clip_image008[3]" width="436" height="371" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">VetexShader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中，输出了世界变换坐标，视角变换空间坐标，及世界变换空间中的法向量。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5373  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5373'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706203974.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-1.php-5372" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/2012012917062261.jpg" border="0" alt="clip_image010[3]" title="clip_image010[3]" width="407" height="281" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这里的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">PixelShader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中由于是简单例子，只使用了两个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，分别输出世界坐标到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT0</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，输出法向量到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">RT1</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">具体渲染过程可以由下清晰可见，有兴趣地可以拿起笔算一下</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">WorldPos</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，看一下红黄蓝绿黑白的分布</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">~</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5371  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5371'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706239603.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5370" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706256945.jpg" border="0" alt="clip_image012[3]" title="clip_image012[3]" width="438" height="333" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;</span></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 11pt">ID</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt">材质标记</span></span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">前面提到过</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MaterialID</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，这里也对其做一个实现，顺便深入下实际使用中的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">技术。</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5369  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5369'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706269868.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5368" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706271603.jpg" border="0" alt="clip_image014[3]" title="clip_image014[3]" width="237" height="461" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在新的工程中，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Geometry</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">阶段使用了两个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Pass</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，利用标记不同的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Alpha</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">值来来实现</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中两中材质的渲染，当然，实际使用中，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Alpha</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">通道通常会被占用，来存储</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">EmittColor</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">、</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">SepcStrength</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">等参数，这时候可以使用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">StencilBuffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">来做标记</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">~</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在两个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Pass</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中标记材质直接使用了指定</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Alpha</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">值，在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Compostion</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中判断值，但</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Float</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">值是存在精度问题的，这里借鉴了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DriectX</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中工具函数的一个做法</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">,</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">加入一个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Epsilon</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">值，实现一个约等于的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Equal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">函数，在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DX10</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">后，会有</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Int</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，就好多了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">~</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5367  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5367'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706281702.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5366" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706299849.jpg" border="0" alt="clip_image016[3]" title="clip_image016[3]" width="451" height="296" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5365  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5365'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706297407.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5364" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706306917.jpg" border="0" alt="clip_image018[3]" title="clip_image018[3]" width="492" height="97" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">实现效果见下图，在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Composition</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中实现了纯色，法线贴图两种材质</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">~</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5363  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?5363'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706314606.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5362" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706336233.jpg" border="0" alt="clip_image020[3]" title="clip_image020[3]" width="478" height="367" /></a></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">AntiAlias</span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">关于抗锯齿的问题，在</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">KlayGE</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">上看到一篇，拿来以飨读者</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">&ldquo;</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">从</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Shading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">发明的一天起，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">anti-alias</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的问题就一直困扰着所有</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的方法。虽然很多无良的游戏厂商直接在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Rendering</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的游戏里不支持</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">AA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，但确实</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">AA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">对提升画面质量很有帮助。</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><h3 style="margin: 10pt 0cm 0pt; padding: 0px; font-size: 16px"><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; color: #17365d">Edge AA</span></span></span></span></h3><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">在</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的框架里，很自然会想到用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Edge AA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">来处理</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">AA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。其过程不外乎：</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><ol style="margin: 0px 0px 0cm; padding: 0px 0px 0px 50px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; list-style: decimal; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">边缘检测，得到每个像素</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&ldquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">像边缘的程度</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&rdquo;</span></span></li><li class="MsoNormal" style="margin: 0cm 0cm 10pt; padding: 0px; list-style: decimal; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">里根据</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&ldquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">像边缘的程度</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&rdquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">来控制采样坐标</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></li></ol><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 18pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">这本身并不是个复杂的过程，尤其是第二步，非常直截了当了，所以这里集中讨论的是如何进行边缘检测。</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 18pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">GPU Gems 2</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&ldquo;Deferred Shading in STALKER&rdquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">一文提供了一种边缘检测的方法，通过把周围像素的法线差和深度差的和来判断边缘，由</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">e_barrier</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这个参数来定义阈值和比例，而这个参数和分辨率有关。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">GPU Gems 3</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&ldquo;Deferred Shading in Tabula Rasa&rdquo;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">改进了这个过程，只判断法线差和深度差最大和最小的两组。由于只是局部的相对量而已，这样就做到了和分辨率无关的边缘检测。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">KlayGE</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">目前用的也是这种方法，得到的边缘如下：</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.klayge.org/wiki/index.php/read.php?5201  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.klayge.org/wiki/index.php/read.php?5201'" tppabs="http://www.klayge.org/wiki/index.php/File:Curr_edge.jpg"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5200" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706356398.jpg" border="0" alt="clip_image021[3]" title="clip_image021[3]" width="400" height="259" /></span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Edge</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">另一个可能用于边缘检测的方法是，前面提到了如何恢复出每个</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">view space position</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，每个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">取得周围</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">4</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的位置之后，就可以直接</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">cross</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">得出一个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，姑且称为</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">screen space normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。如果一个像素是连续的，那么这个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">就会很接近于</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-Buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中保存的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，否则它们的方向就会差别很大。下图为</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G- Buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">：</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.klayge.org/wiki/index.php/read.php?5197  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.klayge.org/wiki/index.php/read.php?5197'" tppabs="http://www.klayge.org/wiki/index.php/File:Normal_g_buffer.jpg"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5190" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706371089.jpg" border="0" alt="clip_image022[3]" title="clip_image022[3]" width="400" height="259" /></span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Normal in G-Buffer</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">这是</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">screen space</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">计算出的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">：</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.klayge.org/wiki/index.php/read.php?5189  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.klayge.org/wiki/index.php/read.php?5189'" tppabs="http://www.klayge.org/wiki/index.php/File:Normal_ss.jpg"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-5188" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706398430.jpg" border="0" alt="clip_image023[3]" title="clip_image023[3]" width="400" height="259" /></span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Normal in screen space</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">把这两个</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">normal</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">做一次</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">dot</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，小于某个阈值的就认为是边缘，得到：</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.klayge.org/wiki/index.php/read.php?4981  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.klayge.org/wiki/index.php/read.php?4981'" tppabs="http://www.klayge.org/wiki/index.php/File:New_edge.jpg"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-1.php-4971" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706406893.jpg" border="0" alt="clip_image024[3]" title="clip_image024[3]" width="400" height="259" /></span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Screen space normal based edge</span></span></p><h3 style="margin: 10pt 0cm 0pt; padding: 0px; font-size: 16px"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px">利用硬件</span></span></span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px">MSAA</span></span></span></span><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px">作边缘检测</span></span></span></span></span><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 10.5pt"></span></span></span></span></span></h3><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">前面提到的边缘检测结果虽然不错，但其实都是是参数相关的。能否就用硬件的</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">来做边缘检测呢？在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Shader model 3.0</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">以上的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">GPU</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">vertex attribute</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">插值的时候可以选择</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">centroid</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">这个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">modifier</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。开启了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">centroid</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">attribute</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，会选择覆盖到的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">sample&nbsp;</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中心来插值，而不是像素中心。所以，同一个属性，如果即有</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">centroid</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">又有不带</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">centroid</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的版本都传给</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">里面判断两者不一致，就表示这个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">在边缘上。这样的话，边缘的情况就和硬件</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">完全一致了。但其实</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">会过渡判断边缘，所有三角形的边缘都会被认出来，即便只是物体内部的。所以谨慎使用。</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px" class="mw-headline"></span></span></span></p><h3 style="margin: 10pt 0cm 0pt; padding: 0px; font-size: 16px"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px">能不能就用</span></span></span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px">MSAA</span></span></span></span><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px">？</span></span></span></span></span><span style="margin: 0px; padding: 0px" class="mw-headline"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 10.5pt"></span></span></span></span></span></h3><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">前面讨论了那么多都是基于</span></span></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Edge</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">AA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">。在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">框架下，难道就不能直接用</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">？可以！这也是</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">比</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Shading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">优秀的方面之一。</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Shading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">不能直接</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的本质原因是在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">G-Buffer</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">之后，物体几何信息全部抛弃了。相比</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Deferred Lighting</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shading pass</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，物体会被再次渲染一遍，这个时候还是有几何信息的，如果在</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">shading pass</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">打开了</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，就可以像</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Forward shading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">那样利用硬件</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">了。唯一不同的是，光照来自于</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">lighting pass</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">texture</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，而不是从光源计算。就算硬件</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">MSAA</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，也只是每个</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">执行一次</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">pixel shader</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，在按照覆盖情况写入</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">sample</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">的，所以在这里视觉上几乎和</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">Forward shading</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">一样。</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; text-indent: 21pt; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 10.5pt">&rdquo;</span></span></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px; color: #17365d"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt">实际使用</span></span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; font-size: 11pt">DS</span></span></span></span></h4><p style="margin: 0cm 0cm 10pt 21pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">到目前为止，这里都是很浅显的理论探究，自己做了一个简单地实现，同时渲染几十盏灯光都可以轻易地保持高</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">FPS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，这在传统的</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">FS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">体系中是难以想象的，</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">so</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">，感受到</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">DS</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">技术的吸引力了吧？！</span></span></p><p style="margin: 0cm 0cm 10pt 21pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4970  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4970'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706409468.jpg"><img style="margin: 0px auto; padding: 0px; border: 0px; display: block; float: none; background-image: none" src="read-2.php-4969" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706414550.jpg" border="0" alt="clip_image026[3]" title="clip_image026[3]" width="406" height="328" /></a></span></p><p style="margin: 0cm 0cm 10pt 21pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">闭门造车是难以前进的，多借鉴下成功的实际项目才是王道，载录若干如下，其它更多详见最后的附录：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4968  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4968'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706434159.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-4967" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706436385.jpg" border="0" alt="clip_image028[3]" title="clip_image028[3]" width="194" height="288" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hmxp8/archive/2010/10/16/read.php?4966  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hmxp8/archive/2010/10/16/read.php?4966'" tppabs="http://www.cnblogs.com/hmxp8/archive/2010/10/16/1852884.html"><span style="margin: 0px; padding: 0px; color: #0000ff"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">《</span></span></span><span style="margin: 0px; padding: 0px; font-family: Calibri">Cryengine</span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">渲染引擎剖析》</span></span></span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4965  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201201/read.php?4965'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706448402.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none" src="read-2.php-4964" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201201/201201291706445960.jpg" border="0" alt="clip_image030[3]" title="clip_image030[3]" width="440" height="229" /></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal" align="center"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hmxp8/archive/2010/10/15/read.php?4893  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hmxp8/archive/2010/10/15/read.php?4893'" tppabs="http://www.cnblogs.com/hmxp8/archive/2010/10/15/1852620.html"><span style="margin: 0px; padding: 0px; color: #0000ff"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">《</span></span></span><span style="margin: 0px; padding: 0px; font-family: Calibri">&lt;</span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">星际争霸</span></span></span><span style="margin: 0px; padding: 0px; font-family: Calibri">2&gt;</span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">引擎技术解析》</span></span></span></span></a></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">载录引用地址</span></span></span></h4><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px">《</span><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/garuda/article/details/read.php?4888  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/garuda/article/details/read.php?4888'" tppabs="http://blog.csdn.net/garuda/article/details/5273106" title="延迟渲染技术文献摘录"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; color: #0000ff">延迟渲染技术文献摘录</span></span></span></a></span><span style="margin: 0px; padding: 0px">》</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/Garuda/article/details/read.php?4888  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/Garuda/article/details/read.php?4888'" tppabs="http://blog.csdn.net/Garuda/article/details/5273106"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">http://blog.csdn.net/Garuda/article/details/5273106</span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">《</span></span><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/noslopforever/article/details/read.php?4884  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/noslopforever/article/details/read.php?4884'" tppabs="http://blog.csdn.net/noslopforever/article/details/3951273" title="Tabula Rasa中的延迟着色技术"><span style="margin: 0px; padding: 0px; color: #0000ff"><span style="margin: 0px; padding: 0px; font-family: Calibri">TabulaRasa</span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">中的延迟着色技术</span></span></span></span></a></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">》</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/noslopforever/article/details/read.php?4884  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/noslopforever/article/details/read.php?4884'" tppabs="http://blog.csdn.net/noslopforever/article/details/3951273"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">http://blog.csdn.net/noslopforever/article/details/3951273</span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">《延迟渲染</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">-KlayGE</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">》</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.klayge.org/wiki/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.klayge.org/wiki/'" tppabs="http://www.klayge.org/wiki/"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #0000ff">http://www.klayge.org/wiki/</span></a></span></p><h4 style="margin: 14pt 0cm 14.5pt 21pt; padding: 0px; font-size: 14px; line-height: 17pt; page-break-after: avoid; text-indent: -21pt" align="justify"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">其它相关内容</span></span></span></h4><p style="margin: 0cm 0cm 10pt 21pt; padding: 0px; font-size: 13px; line-height: 19.5px; text-indent: 21pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">工欲善其事必先利其器，除了必要的实践，在原理上上做足功课亦是非常重要，下面将相关的文章引用列如下：</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[1]DeferredShadingDemo</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.puzzledhero.com/projects/pages/read.php?4883  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.puzzledhero.com/projects/pages/read.php?4883'" tppabs="http://www.puzzledhero.com/projects/pages/deferred_shading_demo.htm"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://www.puzzledhero.com/projects/pages/deferred_shading_demo.htm</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; color: #333333"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">[2]Deferredshading2</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">（</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">dx10</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体">）</span></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.humus.name/read.php?4882  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.humus.name/read.php?4882'" tppabs="http://www.humus.name/index.php?page=3D&ID=81"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://www.humus.name/index.php?page=3D&amp;ID=81</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[3]gpugems2Chapter9.DeferredShadingin<em style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px">S.T.A.L.K.E.R.</span></em></span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://http.developer.nvidia.com/GPUGems2/read.php?4672  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://http.developer.nvidia.com/GPUGems2/read.php?4672'" tppabs="http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter09.html"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter09.html</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><a style="margin: 0px; padding: 1px 3px; color: green" name="biblio09_07"></a><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #000000">[4]Hargreaves,Shawn,andMarkHarris.2004.&quot;DeferredShading.&quot;Presentation.</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://download.nvidia.com/developer/presentations/2004/6800_Leagues/read.php?4668  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://download.nvidia.com/developer/presentations/2004/6800_Leagues/read.php?4668'" tppabs="http://download.nvidia.com/developer/presentations/2004/6800_Leagues/6800_Leagues_Deferred_Shading.pdf"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #336699">http://download.nvidia.com/developer/presentations/2004/6800_Leagues/6800_Leagues_Deferred_Shading.pdf</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[5]Chapter19.DeferredShadinginTabulaRasa</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://http.developer.nvidia.com/GPUGems3/read.php?4667  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://http.developer.nvidia.com/GPUGems3/read.php?4667'" tppabs="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch19.html"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://http.developer.nvidia.com/GPUGems3/gpugems3_ch19.html</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[6]DeferredShadingTutorial.</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://fabio.policarpo.nom.br/docs/read.php?4570  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://fabio.policarpo.nom.br/docs/read.php?4570'" tppabs="http://fabio.policarpo.nom.br/docs/Deferred_Shading_Tutorial_SBGAMES2005.pdf"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://fabio.policarpo.nom.br/docs/Deferred_Shading_Tutorial_SBGAMES2005.pdf</span></span></a></span><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #365f91">.</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[7]Deferredrenderingtransparency</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">Shaderx7</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[8]DesigningaRendererformultiplelights:ThelightPre-PassRenderer</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">Shaderx7</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[9]LightPre-PassDeferredLighting:LatestDevelopmentWolfgangEngel</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.bungie.net/images/Inside/publications/siggraph/Engel/read.php?4568  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bungie.net/images/Inside/publications/siggraph/Engel/read.php?4568'" tppabs="http://www.bungie.net/images/Inside/publications/siggraph/Engel/LightPrePass.ppt"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://www.bungie.net/images/Inside/publications/siggraph/Engel/LightPrePass.ppt</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[10]deferred-shading-aa-alpha-blending-demo</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://null-ptr.blogspot.com/2009/01/read.php?4566  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://null-ptr.blogspot.com/2009/01/read.php?4566'" tppabs="http://null-ptr.blogspot.com/2009/01/deferred-shading-aa-alpha-blending-demo.html"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #336699">http://null-ptr.blogspot.com/2009/01/deferred-shading-aa-alpha-blending-demo.html</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[11]overcomingdeferredshadingdrawbacks</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">shaderx5</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px" class="regularfont2"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #333333">[12]Reconstructingpixel3Dpositionfromdepth</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.gamedev.net/community/forums/read.php?4565  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.gamedev.net/community/forums/read.php?4565'" tppabs="http://www.gamedev.net/community/forums/topic.asp?topic_id=474166"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://www.gamedev.net/community/forums/topic.asp?topic_id=474166</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333"><span style="margin: 0px; padding: 0px" class="regularfont2"><span style="margin: 0px; padding: 0px">[13]</span></span><span style="margin: 0px; padding: 0px">StoringNormalsUsingSphericalCoordinates</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://mynameismjp.wordpress.com/2009/06/17/storing-normals-using-spherical-coordinates/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://mynameismjp.wordpress.com/2009/06/17/storing-normals-using-spherical-coordinates/'" tppabs="http://mynameismjp.wordpress.com/2009/06/17/storing-normals-using-spherical-coordinates/"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://mynameismjp.wordpress.com/2009/06/17/storing-normals-using-spherical-coordinates/</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[14]Efficientomnidirectionalshadowmaps</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">Shaderx3</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[15]DeferredShadingShawnHargreaves</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.talula.demon.co.uk/read.php?4564  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.talula.demon.co.uk/read.php?4564'" tppabs="http://www.talula.demon.co.uk/DeferredShading.pdf"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://www.talula.demon.co.uk/DeferredShading.pdf</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[17]Pre-lightinginResistance2MarkLee</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://cmpmedia.vo.llnwd.net/o1/vault/gdc09/slides/read.php?4563  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://cmpmedia.vo.llnwd.net/o1/vault/gdc09/slides/read.php?4563'" tppabs="http://cmpmedia.vo.llnwd.net/o1/vault/gdc09/slides/gdc09_insomniac_prelighting.pdf"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://cmpmedia.vo.llnwd.net/o1/vault/gdc09/slides/gdc09_insomniac_prelighting.pdf</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px; color: #333333">[18]DeferredRenderinginKillzone2</span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.guerrilla-games.com/publications/read.php?4562  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.guerrilla-games.com/publications/read.php?4562'" tppabs="http://www.guerrilla-games.com/publications/dr_kz2_rsx_dev07.pdf"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #336699">http://www.guerrilla-games.com/publications/dr_kz2_rsx_dev07.pdf</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; color: #333333">[19]</span></span><span style="margin: 0px; padding: 0px">DeferredShadingShines.DeferredLighting?NotSoMuch.</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://gameangst.com/read.php?4561  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gameangst.com/read.php?4561'" tppabs="http://gameangst.com/?p=141"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://gameangst.com/?p=141</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px; font-family: Calibri"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; color: #333333">[20]Wiki</span></span><span style="margin: 0px; padding: 0px">Deferredshading</span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5pt" class="MsoNormal"><span style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?4560  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?4560'" tppabs="http://en.wikipedia.org/wiki/Deferred_shading"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: Calibri; color: #365f91">http://en.wikipedia.org/wiki/Deferred_shading</span></span></a></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><span style="margin: 0px; padding: 0px; font-size: 11pt; color: #17365d">工程下载</span></span></span></span></p><p style="margin: 0cm 0cm 10pt; padding: 0px; font-size: 13px; line-height: 19.5px" class="MsoNormal"><span style="margin: 0px; padding: 0px"><span style="margin: 0px; padding: 0px; font-family: 宋体"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://files.cnblogs.com/hmxp8/read.php?4396  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://files.cnblogs.com/hmxp8/read.php?4396'" tppabs="http://files.cnblogs.com/hmxp8/DeferredShading_V1.1.rar">/Files/hmxp8/DeferredShading_V1.1.rar</a></span></span></p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6759.htm" tppabs="http://i.renjihe.com/blog/read.php?6759">一天干掉一只Monkey计划（二）——热流扰动，径向模糊</a> <span id="starid6759"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:50 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6759.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6759#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6759");'>引用(0)</a> , <a href="read.php-6759.htm" tppabs="http://i.renjihe.com/blog/read.php?6759">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6759" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">一天干掉一只Monkey计划（二）&mdash;&mdash;热流扰动，径向模糊</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">懒病又犯了，很多事情，你自以为囫囵吞枣，会了，可其实你不会，但亦有很多事情，你害怕你不会，但其实不妨来个囫囵吞枣先！戒贪戒急，戒骄戒躁，多谢多想多练，得时常打开RM和Word压压自己，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">好吧，继续上篇所讲，由于前人已有铺路，我就偷懒了，仅作实现，本篇内容同样转自逍遥剑客的<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/xoyojank/article/details/read.php?3007  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/xoyojank/article/details/read.php?3007'" tppabs="http://blog.csdn.net/xoyojank/article/details/2028898">Blog</a>：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">1，&nbsp;</strong><strong style="margin: 0px; padding: 0px">热流扰动&nbsp;</strong><strong style="margin: 0px; padding: 0px">柏松分布</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 每个人都对自然界中的这种大气效果很熟悉</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 光线在穿过不同密度的介质时会弯曲</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">热微光</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?3006  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?3006'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019515722.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2642" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019523737.jpg" border="0" alt="clip_image001" title="clip_image001" width="244" height="163" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 热空气密度比冷空气小</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 密度影响介质的折射率</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 热空气上升的同时会被冷空气替代, 这会改变光射入眼睛的路线</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">折射率的部分改变会导致我们看到的景物发生扭曲，具体可以参照一下实现：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 渲染场景到RGBA离屏缓存(可渲染的纹理)</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 颜色写入RGB值</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 扭曲度写入Alpha通道（这里只是RM下单一渲染效果的QuickTrick,实际中可以使用StencilBuffer来做标记）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 绘制全屏长方形到后备缓冲区</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 对离屏缓冲采样以获得扭曲度</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 用扰动贴图来确定扰动向量, 用扭曲度放缩后偏移原始纹理坐标</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 基于扰动纹理坐标的可增长泊松分布(根据扭曲度来进行偏移)</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">扭曲度</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 逐像素判断当前像素被扭曲的程度</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 当光线穿过更多的气体时, 折射程度也相应增加</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 扭曲随场景深度增加</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&ndash; 开始时把渲染目标的Alpha通道清为1.0,表示最大深度</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&ndash; Pixel shader把每个像素的深度写入alpha通道</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 深度提供了一个很好的全局扭曲方案, 但是你的美工们希望局部控制</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 热浪几何体可以用来定义扭曲范围, 如热空气出口和喷气发动机尾</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 热浪纹理可以使热浪几何本上的扭曲动起来</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">热度几何体</strong><strong style="margin: 0px; padding: 0px">&nbsp;&amp;&nbsp;</strong><strong style="margin: 0px; padding: 0px">热度纹理</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2641  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2641'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019524783.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2640" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019523114.jpg" border="0" alt="clip_image003" title="clip_image003" width="244" height="136" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 像素扭曲度来源来热度纹理</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 扭曲度被深度放大</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 用高度进一步放大 (纹理坐标) 并且 N.V 来避免生硬的边缘</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 扭曲度被写入Alpha通道</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">全屏矩形</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 全屏矩形用离屏缓存(可渲染的纹理)来绘制并且用扰动贴图作为纹理</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">扰动贴图</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2639  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2639'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019537193.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2632" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019533572.jpg" border="0" alt="clip_image005" title="clip_image005" width="244" height="90" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 一个2D向量储存在红色和绿色通道内</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 在全屏矩形两个方向上卷动贴图并采样两次</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 平均两次采样并把值变换到 [-1.0, 1.0] 的范围内</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 用扭曲度放缩向量</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 结果就是扭曲向量</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">扭曲向量</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2630  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2630'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019546014.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2629" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019547617.jpg" border="0" alt="clip_image006" title="clip_image006" width="244" height="140" /></a></strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 扭曲向量用于偏移原始纹理坐标</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 向量的大小取决于扭曲度</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 这个新的扰动纹理用于读入离屏缓存</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">可增长泊松分布</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2628  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2628'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019552883.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2627" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019558390.jpg" border="0" alt="clip_image007" title="clip_image007" width="244" height="140" /></a></strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 模糊中心在扰动纹理坐标的中间</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&bull; 偏移基于扭曲度（Perturbation）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">扭曲</strong><strong style="margin: 0px; padding: 0px">&nbsp;Shader</strong></p><table border="0" cellspacing="0" cellpadding="0" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; border: 1px solid silver; word-break: break-word; color: #000000; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><tbody><tr style="margin: 0px; padding: 0px"><td width="568" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float4</strong><strong style="margin: 0px; padding: 0px">&nbsp;main (</strong><strong style="margin: 0px; padding: 0px">PsInput</strong><strong style="margin: 0px; padding: 0px">&nbsp;i) :&nbsp;</strong><strong style="margin: 0px; padding: 0px">COLOR</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&#123;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// fetch from perturbation map with scrolling texture coords</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float3</strong><strong style="margin: 0px; padding: 0px">&nbsp;vPerturb0 =&nbsp;</strong><strong style="margin: 0px; padding: 0px">tex2D</strong><strong style="margin: 0px; padding: 0px">&nbsp;(tPerturbationMap, i.texCoord1);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float3</strong><strong style="margin: 0px; padding: 0px">&nbsp;vPerturb1 =&nbsp;</strong><strong style="margin: 0px; padding: 0px">tex2D</strong><strong style="margin: 0px; padding: 0px">&nbsp;(tPerturbationMap, i.texCoord2);</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// scale and bias: (color - 0.5f)*2.0f&nbsp;</strong><strong style="margin: 0px; padding: 0px">转回到[-1~1]范围</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; vPerturb0 = SiConvertColorToVector(vPerturb0);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; vPerturb1 = SiConvertColorToVector(vPerturb1);</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// average perturbation vectors</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">&nbsp;offset = (vPerturb0.xy + vPerturb1.xy) * 0.5f;</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// get distortion weight from renderable texture (stored in alpha)</strong><strong style="margin: 0px; padding: 0px">存在上一Pass的RT中</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float4</strong><strong style="margin: 0px; padding: 0px">&nbsp;cDistWeight =&nbsp;</strong><strong style="margin: 0px; padding: 0px">tex2D</strong><strong style="margin: 0px; padding: 0px">&nbsp;(tRBFullRes, i.texCoord0);</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// square distortion weight</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; cDistWeight.a *= cDistWeight.a;</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// compute distorted texture cords fPerturbScale</strong><strong style="margin: 0px; padding: 0px">这里是一个预定义的参数，可以当做扰动偏移的强度</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; offset.xy = ((offset.xy * cDistWeight.a) * fPerturbScale) + i.texCoord0;</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// fetch the distorted color</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float4</strong><strong style="margin: 0px; padding: 0px">&nbsp;o;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; o.rgb = SiPoissonDisc13RGB(tRBFullRes, offset, 1.0f/screenRes.xy, cDistWeight.a);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; o.a = 1.0f;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">return</strong><strong style="margin: 0px; padding: 0px">&nbsp;o;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&#125;</strong></p></td></tr></tbody></table><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">PS代码看到这里可以大体明白，基本过程与上一篇的水体扰动实现方法一致，但就是在最后出现了这个PoissonDiscl处理方法，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">数学课本差不多都还给老实了吧？好吧，首先，让我们看看什么事<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://baike.baidu.com/view/read.php?2626  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://baike.baidu.com/view/read.php?2626'" tppabs="http://baike.baidu.com/view/79815.htm">泊松分布</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://baike.baidu.com/albums/79815/read.php?2625  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://baike.baidu.com/albums/79815/read.php?2625#0$6391e903ef9a3bdc08fa93e3'" tppabs="http://baike.baidu.com/albums/79815/79815.html#0$6391e903ef9a3bdc08fa93e3"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2624" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019558913.jpg" border="0" alt="clip_image008" title="clip_image008" width="204" height="78" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">根据囫囵吞枣的精神指引，首先看一下Shader代码，这里<strong style="margin: 0px; padding: 0px">pixelSize</strong>应是外部的RT尺寸的倒数，也就是字面意义上的每个像素的uv宽度大小，这里的泊松分布也就是在当前偏移后的uv位置上继续偏移，采样，中和~~</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">可增长泊松分布</strong><strong style="margin: 0px; padding: 0px">&nbsp;Shader</strong></p><table border="0" cellspacing="0" cellpadding="0" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; border: 1px solid silver; word-break: break-word; color: #000000; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><tbody><tr style="margin: 0px; padding: 0px"><td width="568" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float3</strong><strong style="margin: 0px; padding: 0px">&nbsp;SiGrowablePoissonDisc13FilterRGB</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">(</strong><strong style="margin: 0px; padding: 0px">sampler</strong><strong style="margin: 0px; padding: 0px">&nbsp;tSource,&nbsp;</strong><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">&nbsp;texCoord,&nbsp;</strong><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">&nbsp;pixelSize,&nbsp;</strong><strong style="margin: 0px; padding: 0px">float</strong><strong style="margin: 0px; padding: 0px">&nbsp;discRadius)</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&#123;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float3</strong><strong style="margin: 0px; padding: 0px">&nbsp;cOut;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">&nbsp;poisson[12] = &#123;</strong><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.326212f, -0.40581f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.840144f, -0.07358f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.695914f, 0.457137f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.203345f, 0.620716f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.96234f, -0.194983f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.473434f, -0.480026f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.519456f, 0.767022f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.185461f, -0.893124f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.507431f, 0.064425f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(0.89642f, 0.412458f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.32194f, -0.932615f),</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">(-0.791559f, -0.59771f)&#125;;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// Center tap</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; cOut = tex2D (tSource, texCoord);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">for</strong><strong style="margin: 0px; padding: 0px">&nbsp;(</strong><strong style="margin: 0px; padding: 0px">int</strong><strong style="margin: 0px; padding: 0px">&nbsp;tap = 0; tap &lt; 12; tap++)</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; &#123;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">float2</strong><strong style="margin: 0px; padding: 0px">&nbsp;coord = texCoord.xy + (pixelSize * poisson[tap] * discRadius);</strong></p><p style="margin: 10px auto; padding: 0px"></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">// Sample pixel</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cOut +=&nbsp;</strong><strong style="margin: 0px; padding: 0px">tex2D</strong><strong style="margin: 0px; padding: 0px">&nbsp;(tSource, coord);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&nbsp;&nbsp; &#125;</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">return</strong><strong style="margin: 0px; padding: 0px">&nbsp;(cOut / 13.0f);</strong></p><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">&#125;</strong></p></td></tr></tbody></table><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">2，&nbsp;</strong><strong style="margin: 0px; padding: 0px">径向模糊</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">看原理：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">http://www.gamerendering.com/2008/12/20/radial-blur-filter/</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">实现其实很简单，比上边的热流扰动简单多了，确定一个中心点(如0.5, 0.5), 跟当前像素连一条线. 以当前像素为中心, 在线上的附近像素进行采样, 最后取一下平均值.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2623  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2623'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019551389.gif"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2622" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019554420.gif" border="0" alt="clip_image009" title="clip_image009" width="240" height="189" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">HLSL（感谢逍遥博主的翻译）:</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">1. // This texture should hold the image to blur.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">2. sampler2D Texture0;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">3.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">4. // some const, tweak for best look</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">5.&nbsp;<strong style="margin: 0px; padding: 0px">const</strong>&nbsp;<strong style="margin: 0px; padding: 0px">float</strong>&nbsp;fSampleDist;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">6.&nbsp;<strong style="margin: 0px; padding: 0px">const</strong>&nbsp;<strong style="margin: 0px; padding: 0px">float</strong>&nbsp;fSampleStrength;&nbsp;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">7.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">8.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">9. // some sample positions</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">10.&nbsp;<strong style="margin: 0px; padding: 0px">float</strong>&nbsp;samples[10] =&nbsp;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">11. &#123;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">12.&nbsp;&nbsp;&nbsp; -0.08,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">13.&nbsp;&nbsp;&nbsp; -0.05,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">14.&nbsp;&nbsp;&nbsp; -0.03,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">15.&nbsp;&nbsp;&nbsp; -0.02,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">16.&nbsp;&nbsp;&nbsp; -0.01,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">17.&nbsp;&nbsp;&nbsp; 0.01,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">18.&nbsp;&nbsp;&nbsp; 0.02,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">19.&nbsp;&nbsp;&nbsp; 0.03,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">20.&nbsp;&nbsp;&nbsp; 0.05,&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">21.&nbsp;&nbsp;&nbsp; 0.08&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">22. &#125;;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">23. float4 ps_main( float2 texCoord&nbsp; : TEXCOORD0 ) : COLOR&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">24. &#123;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">25. // 0.5,0.5 is the center of the screen</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">26. // so substracting uv from it will result in</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">27. // a vector pointing to the middle of the screen</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">28.&nbsp;&nbsp;&nbsp; float2 dir = 0.5 - texCoord;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">29. // calculate the distance to the center of the screen</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">30.&nbsp;<strong style="margin: 0px; padding: 0px">float</strong>&nbsp;dist = length(dir);&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">31. // normalize the direction (reuse the distance)</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">32.&nbsp;&nbsp;&nbsp; dir /= dist;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">33.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">34. // this is the original colour of this pixel</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">35. // using only this would result in a nonblurred version</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">36.&nbsp;&nbsp;&nbsp; float4 color = tex2D(Texture0, texCoord);&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">37.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">38.&nbsp;&nbsp;&nbsp; float4 sum = color;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">39. // take 10 additional blur samples in the direction towards</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">40. // the center of the screen</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">41.&nbsp;<strong style="margin: 0px; padding: 0px">for</strong>&nbsp;(<strong style="margin: 0px; padding: 0px">int</strong>&nbsp;i = 0; i &lt; 10; ++i)&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">42.&nbsp;&nbsp;&nbsp; &#123;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">43.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sum += tex2D(Texture0, texCoord + dir * samples[i] * fSampleDist);&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">44.&nbsp;&nbsp;&nbsp; &#125;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">45.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">46. // we have taken eleven samples</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">47.&nbsp;&nbsp;&nbsp; sum /= 11.0;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">48.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">49. // weighten the blur effect with the distance to the</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">50. // center of the screen ( further out is blurred more)</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">51.&nbsp;<strong style="margin: 0px; padding: 0px">float</strong>&nbsp;t = saturate(dist * fSampleStrength);&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">52.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">53. //Blend the original color with the averaged pixels</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">54.&nbsp;<strong style="margin: 0px; padding: 0px">return</strong>&nbsp;lerp(color, sum, t);&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">55. &#125;&nbsp;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">两个参数, 动态调整的</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">比如可以加入RM内置根据Time_X变化的Sin值，使得画面出现&ldquo;清晰-&gt;模糊-&gt;清晰&rsquo;的加速效果显示</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">for (int i = 0; i &lt; 10; ++i)</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">sum += tex2D(Image, texCoord + dir * samples[i] * fSampleDist*abs(fSinTime0_X));</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2621  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201111/read.php?2621'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019568291.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2620" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201111/201111242019569338.jpg" border="0" alt="clip_image011" title="clip_image011" width="572" height="347" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">怎么样，效果是不是很赞？！Just do it！</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">附上这两篇的RM工程：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">后处理 水底扰动（泊松分布暂未做）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://files.cnblogs.com/hmxp8/read.php?2619  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://files.cnblogs.com/hmxp8/read.php?2619'" tppabs="http://files.cnblogs.com/hmxp8/ZephyrTest_01.rar">/Files/hmxp8/ZephyrTest_01.rar</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">直接用了ScreenSpaceEffect的fx,径向模糊在其中的MotionBlur中</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://files.cnblogs.com/hmxp8/read.php?2618  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://files.cnblogs.com/hmxp8/read.php?2618'" tppabs="http://files.cnblogs.com/hmxp8/ZephyrTest_02.rar">/Files/hmxp8/ZephyrTest_02.rar</a></p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6758.htm" tppabs="http://i.renjihe.com/blog/read.php?6758">一天干掉一只Monkey计划（一）——基本光照模型及RT后处理</a> <span id="starid6758"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:50 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6758.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6758#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6758");'>引用(0)</a> , <a href="read.php-6758.htm" tppabs="http://i.renjihe.com/blog/read.php?6758">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6758" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">一天干掉一只Monkey计划（一）&mdash;&mdash;基本光照模型及RT后处理</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">1，&nbsp;<strong style="margin: 0px; padding: 0px">首先复习一下基本的光照模型：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Ambient Diffuse Specluar。。。不用多谈，不清楚自己复习，^_^~</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://photo.blog.sina.com.cn/read.php?2938  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://photo.blog.sina.com.cn/read.php?2938#blogid=5bf1d0c50100okb2&url=http://s9.sinaimg.cn/orignal/5bf1d0c5t9cfd3e75da28'" tppabs="http://photo.blog.sina.com.cn/showpic.html#blogid=5bf1d0c50100okb2&url=http://s9.sinaimg.cn/orignal/5bf1d0c5t9cfd3e75da28"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2614" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014028767.jpg" border="0" alt="clip_image002" title="clip_image002" width="355" height="269" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">然后建立一个基本的RenderMonkey工程，就可以开始着手建立一个基本的光照模型了。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">2</strong><strong style="margin: 0px; padding: 0px">，VertexShader</strong><strong style="margin: 0px; padding: 0px">：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">bool bViewSpace;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4x4 matView;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4x4 matViewProjection;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 vecLight;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float fSinTime0_X;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 vViewPosition;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">struct VS_INPUT</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 Position: POSITION0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 TexCoord: TEXCOORD0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Normal: NORMAL0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Binormal: BINORMAL0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Tangent: TANGENT0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">struct VS_OUTPUT</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 Position: POSITION0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 TexCoord: TEXCOORD0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Normal: TEXCOORD1;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Binormal: TEXCOORD2;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Tangent: TEXCOORD3;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Light:TEXCOORD4;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 View:TEXCOORD5;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">VS_OUTPUT vs_main( VS_INPUT Input )</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">VS_OUTPUT Output;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4x4 matTransform = &#123; 1.0f, 0.0f, 0.0f, 0.0f,</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">0.0f, 1.0f, 0.0f, 0.0f,</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">0.0f, 0.0f, 1.0f, 0.0f,</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">0.0f, 0.0f, 0.0f, 1.0f &#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">if( bViewSpace )</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">matTransform = matView;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125; // end if( bViewSpace )</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.Position = mul( Input.Position, matViewProjection );</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.View =Output.Position-vViewPosition;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.TexCoord = Input.TexCoord;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.Normal = normalize(mul( Input.Normal, matTransform ));</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.Binormal = ( mul( Input.Binormal, matTransform ) + 1.0f ) / 2.0f;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.Tangent = ( mul( Input.Tangent, matTransform ) + 1.0f ) / 2.0f;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Output.Light=normalize(vecLight);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">//加上这一句可以使光源位置动态改变</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">//Output.Light.x+=fSinTime0_X*2;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">return(Output);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">3，<strong style="margin: 0px; padding: 0px">PixelShader</strong><strong style="margin: 0px; padding: 0px">：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">sampler2D my2DTexture;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">struct PS_INPUT</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 TexCoord: TEXCOORD0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Normal: TEXCOORD1;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Binormal: TEXCOORD2;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Tangent: TEXCOORD3;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Light:TEXCOORD4;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 View:TEXCOORD5;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 ps_main( PS_INPUT Input ) : COLOR0</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 color = float4( 0.0f, 0.0f, 0.0f, 0.0f );</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 ambient = &#123; 0.3686f, 0.3686f, 0.3686f, 1.0f&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 diffuse = &#123; 0.88f, 0.88f, 0.88f, 1.0f&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Normal = normalize( Input.Normal);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 LightDir = normalize( Input.Light);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 ViewDir = normalize( Input.View);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 diff = saturate( dot( Normal, LightDir));</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float3 Reflect = normalize( 2 * diff * Normal - LightDir);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 specular = pow(saturate(dot(Reflect, ViewDir)), 8);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 fvBaseColor = tex2D( my2DTexture, Input.TexCoord );</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 fvTotalAmbient = ambient * fvBaseColor;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 fvTotalDiffuse = diffuse * diff * fvBaseColor;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">return fvTotalAmbient + fvTotalDiffuse + specular;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">4，<strong style="margin: 0px; padding: 0px">最后显示结果（先关的配置</strong><strong style="margin: 0px; padding: 0px">&nbsp;RenderMonkey</strong><strong style="margin: 0px; padding: 0px">可以非常轻松地实现）：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2613  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2613'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014034067.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-2612" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014032638.jpg" border="0" alt="clip_image004" title="clip_image004" width="397" height="243" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">5</strong><strong style="margin: 0px; padding: 0px">，RenderMonkey</strong><strong style="margin: 0px; padding: 0px">中的后处理</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">RenderMonkey可以在pass中简单地建立一个RenderTarget，通过试手几个RT的处理</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">，可以预热下相关的屏幕空间后处理</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">VertexShader</strong><strong style="margin: 0px; padding: 0px">：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">struct VS_OUTPUT</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 pos : POSITION0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 texCoord : TEXCOORD0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">VS_OUTPUT vs_main( float4 inPos: POSITION )</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">VS_OUTPUT o = (VS_OUTPUT) 0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">inPos.xy = sign( inPos.xy);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">o.pos = float4( inPos.xy, 0.0f, 1.0f);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">// get into range [0,1]</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">o.texCoord = (float2(o.pos.x, -o.pos.y) + 1.0f)/2.0f;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">return o;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">PixelShader</strong><strong style="margin: 0px; padding: 0px">：</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">sampler2D Texture0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 ps_main( float2 texCoord : TEXCOORD0 ) : COLOR</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 color=tex2D( Texture0, texCoord );</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">//转换RGB为强度值</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float intensity = color.r * 0.299 + color.g * 0.587 + color.b * 0.184;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">return float4(intensity,intensity,intensity,color.a);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">过程很简单，就是将原先的绘制结果改为输出到了一个指定RT上，然后再在将RT渲染的ps中做了灰度图处理~</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2611  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2611'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014037622.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2610" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014032049.jpg" border="0" alt="clip_image006" title="clip_image006" width="410" height="251" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">6</strong><strong style="margin: 0px; padding: 0px">，水下效果</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">水下效果是游戏中水体处理的常见效果，原理很简单，只要加入一张新的tex为BumpMap，再对结果进行处理即可：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/index.php?go=category_52&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/index.php?go=category_52&mode=2&page=1'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014035080.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="index-2.php-go=category_52&mode=1&page=1" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014042016.jpg" border="0" alt="clip_image008" title="clip_image008" width="142" height="363" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6375  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6375'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014041459.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-6333" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014046127.jpg" border="0" alt="clip_image010" title="clip_image010" width="189" height="188" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">VS不变，PixelShader如下：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">sampler2D Texture0;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">sampler2D Texture1;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float fTime0_1;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 ps_main( float2 texCoord : TEXCOORD0 ) : COLOR</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#123;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 bump=tex2D(Texture1,texCoord+fTime0_1*30);</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float2 texel=texCoord+bump/60;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">float4 color=tex2D( Texture0, texel );</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">return color;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&#125;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">F5，运行，神奇的效果便诞生了：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6331  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6331'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014041111.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-6301" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014046410.jpg" border="0" alt="clip_image012" title="clip_image012" width="481" height="294" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">是不是太简单了，知其然而不知其所以然，是件可耻的事情：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">首先来看贴图，可以从代码中发现采样出来只用了RG两个通道的颜色，打开PhotoShop，通过颜色通道面板，可以轻易地发现其中奥秘，RG两种颜色（白）交替出现，换算成float值大概是0.5f，左右，加在纹理的偏移上，即可产生一种&ldquo;随波逐流&rdquo;漂的效果。。。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6293  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?6293'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014041078.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5878" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014042473.jpg" border="0" alt="clip_image014" title="clip_image014" width="363" height="212" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5874  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5874'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014041917.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-4310" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014058536.jpg" border="0" alt="clip_image016" title="clip_image016" width="369" height="215" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">但这里还有个问题，如何控制效果，这里使用了一个RenderMonkey预定义的float值--&quot;Time0_1&quot;，查阅官方的SDK，（<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://developer.amd.com/gpu_assets/read.php?2284  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.amd.com/gpu_assets/read.php?2284'" tppabs="http://developer.amd.com/gpu_assets/RenderMonkey%20Documentation.pdf">http://developer.amd.com/gpu_assets/RenderMonkey%20Documentation.pdf</a>）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">&quot;Time0_1&quot;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">This variable provides a scaled floating point time value [0..1] which repeats itself</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">based on the &ldquo;Cycle time&rdquo; set in the RenderMonkey Preferences dialog. By</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">default this &ldquo;Cycle time&rdquo; is set to 120 seconds. This means that the value of this</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">variable cycles from 0 to 1 in 120 seconds and then goes back to 0 again.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">可以得知其值为指定时间（默认两分钟内）从0~1的循环值，float2 bump=tex2D(Texture1,texCoord+fTime0_1*30);float2 texel=texCoord+bump/60;</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">尝试改变其中30,60几个值，可以明白对noise贴图上的偏移值决定了偏移的频率(速度)，而加载对RT采样的实际纹理坐标texel上的除数决定了振幅，粗略理解fTime乘以一个m，则水流飘动的频率为1/（ （120/m）/4 ）,4为估计的寻址从0~1内出现的黑白交替数~</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">还有，进一步观察可以发现，有的像素由于扰动的纹理由屏幕左边被移到了屏幕有右边。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2283  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2283'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014053520.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-2282" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014056867.jpg" border="0" alt="clip_image018" title="clip_image018" width="421" height="315" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">在逍遥剑客的blog中看到了相应的解决方法，直接设置RT的寻址模式为clamp，问题解决；</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2278  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?2278'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014051850.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-318" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014052374.jpg" border="0" alt="clip_image020" title="clip_image020" width="448" height="269" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">7</strong><strong style="margin: 0px; padding: 0px">，热流扰动</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">本来想实现下水下水纹扰动效果的，结果一时找不到合适的图，倒是意外实现了热流扰动的效果，想起多年前第一次玩到战地里边直升机出风口空气扰动的效果，当时十分震惊，以致自己从没敢想过去实现它，其实原理一模一样（真的是人有画地为牢，固步自封啊）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">Noise贴图如下：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?315  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?315'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014053454.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="index-2.php-go=category_20&mode=2&page=1" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014061261.jpg" border="0" alt="clip_image022" title="clip_image022" width="182" height="178" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">结果静态贴图看不清，可以自行实现，但结果还不够平滑，同样还是在逍遥剑客（真是pf前辈啊，学习）的blog上发现了解决方法，松柏分布，具体明天再一一详谈。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: #ffffff; text-decoration: none; background-color: green" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/index.php?go=category_20&mode=2&page=2  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/index.php?go=category_20&mode=2&page=2'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014069833.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="index-2.php-go=category_20&mode=2&page=3" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110102014064816.jpg" border="0" alt="clip_image024" title="clip_image024" width="422" height="248" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">一天下来，颇为兴奋，还做了马赛克等等n多神奇的屏幕空间后处理，及预备下了延迟渲染，当然，我的目的是实践运用，到真正继承还需要克服各种问题，想各种方案和trick，额，不能想太多，博文都全写乱了，明天开始得每天专注于一个问题，好好精心思考~~</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">努力吧~~无止境~~~</p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6757.htm" tppabs="http://i.renjihe.com/blog/read.php?6757">一天干掉一只Monkey计划（序）</a> <span id="starid6757"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:49 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6757.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6757#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6757");'>引用(0)</a> , <a href="read.php-6757.htm" tppabs="http://i.renjihe.com/blog/read.php?6757">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6757" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">一天干掉一只Monkey计划（序）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">经过n久的焦头烂额，手头的工作终于开始轻松下来，想法很多，但出于兴趣第一，及将来对项目多做贡献的角度，决定目前最大的精力放在Shader效果上，辅之以C++深入的学习。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">千里之行始于足下，要专心学习shader还是用RenderMonkey这样的工具，排除其他编程方面的干扰为佳，以前对此工具还略有入门，正好现在拿来开刀：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">1，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">首先记录下，网上一些关于renderMonkey的教程：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">《<a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/tianhai110/article/details/index.php?go=category_20&mode=1&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/tianhai110/article/details/index.php?go=category_20&mode=1&page=1'" tppabs="http://blog.csdn.net/tianhai110/article/details/5668832">一步一步学RenderMonkey</a>》</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/tianhai110/article/details/index.php?go=category_20&mode=1&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/tianhai110/article/details/index.php?go=category_20&mode=1&page=1'" tppabs="http://blog.csdn.net/tianhai110/article/details/5668832">http://blog.csdn.net/tianhai110/article/details/5668832</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">《RenderMonkey的基本使用方法》</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/mixiyou/archive/2009/10/05/read.php?5524  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/mixiyou/archive/2009/10/05/read.php?5524'" tppabs="http://www.cnblogs.com/mixiyou/archive/2009/10/05/1578208.html">http://www.cnblogs.com/mixiyou/archive/2009/10/05/1578208.html</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">《用RenderMonkey 进行shader开发(一)》</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://school.ogdev.net/read.php?5504  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://school.ogdev.net/read.php?5504'" tppabs="http://school.ogdev.net/ArticleShow.asp?id=5551&categoryid=5">http://school.ogdev.net/ArticleShow.asp?id=5551&amp;categoryid=5</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">《用RenderMonkey 进行shader开发(二)》</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://school.ogdev.net/read.php?5500  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://school.ogdev.net/read.php?5500'" tppabs="http://school.ogdev.net/ArticleShow.asp?id=5552&categoryid=5">http://school.ogdev.net/ArticleShow.asp?id=5552&amp;categoryid=5</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">renderMonkey官方网址（提供renderMonkey下载）</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://developer.amd.com/gpu/rendermonkey/Pages/read.php?7069  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.amd.com/gpu/rendermonkey/Pages/read.php?7069'" tppabs="http://developer.amd.com/gpu/rendermonkey/Pages/default.aspx">http://developer.amd.com/gpu/rendermonkey/Pages/default.aspx</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">RenderMonkey制作photoshop特效</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://www.qqread.com/soft-engineering/read.php?5499  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.qqread.com/soft-engineering/read.php?5499'" tppabs="http://www.qqread.com/soft-engineering/q372752_2.html">http://www.qqread.com/soft-engineering/q372752_2.html</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">2，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">还有鉴于RenderMonkey由于长时间的不更新，附上其藏在amd角落的位置：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://developer.amd.com/archive/gpu/rendermonkey/pages/read.php?7069  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.amd.com/archive/gpu/rendermonkey/pages/read.php?7069'" tppabs="http://developer.amd.com/archive/gpu/rendermonkey/pages/default.aspx">http://developer.amd.com/archive/gpu/rendermonkey/pages/default.aspx</a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">3，</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">万籁具备，只欠东风，现在最需要的就是订立一个详细的计划，目标是首先走一遍基本的光照模型，然后一天收集一个符合cool标准的shader效果，从原理到实际实现加以吸收，争取一天干掉一只猴子，为期一月，再行引擎改造大业。</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">4,Basic</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">这里就偷个懒，直接套用逍遥剑客的blog：</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/xoyojank/article/details/read.php?5498  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/xoyojank/article/details/read.php?5498'" tppabs="http://blog.csdn.net/xoyojank/article/details/1788982"><strong style="margin: 0px; padding: 0px">http://blog.csdn.net/xoyojank/article/details/1788982</strong></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">RenderMokey是ATi发布的一个快速开发着色器程序和效果的工具.它解决了几个问题:</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">1. 着色器程序通常需要一个框架才能运行.这样的一个工具必须可以设置几何和纹理等信息而不用额外的代码</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">2. 传统的着色器程序开发时间消耗太大,而且需要高质量的代码做为依托.这就增加了开发难度,并限制了技术的共享</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">3. 着色器开发工具应该在程序员和美工之间建立一个桥梁,所以它不应该依赖任何API,也不应该需要太高的编程能力</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">4. 工具的框架应该要能够适应未来技术的发展</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">基于这些目标,ATi推出一个强大而且高效的开发工具:RenderMonkey,它大大降低了着色器程序开发的门槛,你只需要基本的图形学知识就可以使用它.</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">主界面</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5497  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5497'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921305721.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5496" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921301784.jpg" border="0" alt="clip_image002" title="clip_image002" width="244" height="184" /></a></p><table border="0" cellspacing="0" cellpadding="0" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; border: 1px solid silver; word-break: break-word; color: #000000; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><tbody><tr style="margin: 0px; padding: 0px"><td width="366" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">Workspace</strong><strong style="margin: 0px; padding: 0px">窗口</strong></p><p style="margin: 10px auto; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5495  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5495'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921304816.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5432" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/20111010192131672.jpg" border="0" alt="clip_image003" title="clip_image003" width="98" height="244" /></a></p></td><td width="202" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px">这里面包含很多不同类型的元素,可以分成4组:</p><p style="margin: 10px auto; padding: 0px">1. 组元素,用来把元素组织成一个层次结构,如effect,pass等</p><p style="margin: 10px auto; padding: 0px">2. 着色器或效果用到的参数,包括矩阵,向量,颜色等.它们可以用Artist编辑器来设定,我们会在后面提到</p><p style="margin: 10px auto; padding: 0px">3. 着色器或效果的状态控制,包括着色器程序,硬件渲染状态,或顶点流映射</p><p style="margin: 10px auto; padding: 0px">4. 着色器用到的资源,通常是网格和纹理</p><p style="margin: 10px auto; padding: 0px">这些东西被保存到一个.RFX文件中,里面是XML格式的.这样可以用程序来方便地读取</p></td></tr><tr style="margin: 0px; padding: 0px"><td width="366" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">效果预览窗口</strong></p><p style="margin: 10px auto; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5427  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5427'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921315655.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5423" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921316735.jpg" border="0" alt="clip_image004" title="clip_image004" width="230" height="244" /></a></p></td><td width="202" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px">从这里你可以看到着色器程序的最终效果.当然,你可以用鼠标来控制摄像机观察方式</p></td></tr></tbody></table><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">输出窗口</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5420  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5420'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921311718.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-5416" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921319210.jpg" border="0" alt="clip_image005" title="clip_image005" width="244" height="79" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">如果在这里出现了错误信息,你可以像在VC中一样双击它,RenderMonkey会自动打开编辑器窗口,并把光标定位到相应的位置</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px">编辑器窗口</strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><strong style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5415  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5415'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/20111010192131605.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-1.php-5414" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921313637.jpg" border="0" alt="clip_image006" title="clip_image006" width="244" height="208" /></a></strong></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">它可以用来编辑ASM代码或HLSL,而且在编辑的同时状态栏还会给出相应的代码提示</p><table border="0" cellspacing="0" cellpadding="0" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; border: 1px solid silver; word-break: break-word; color: #000000; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><tbody><tr style="margin: 0px; padding: 0px"><td width="284" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><strong style="margin: 0px; padding: 0px">Artist</strong><strong style="margin: 0px; padding: 0px">编辑器</strong></p><p style="margin: 10px auto; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5413  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5413'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921313081.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5412" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/20111010192131572.jpg" border="0" alt="clip_image007" title="clip_image007" width="98" height="244" /></a></p></td><td width="284" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px">这个窗口默认不显示,可以通过View-&gt;Artist Editor来调出来</p><p style="margin: 10px auto; padding: 0px">在这里你可以设置各个参数元素,而且可以即时显示结果</p></td></tr></tbody></table><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">下面看一下整个工程的组织形式</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">1. 库存变量,这里是View-Projection矩阵</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">2. 流映射,即这里的PNTT,应该是定义的VertexShader的顶点输入格式,双击可以打开编辑框</p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5410  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5410'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921325556.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5409" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921324684.jpg" border="0" alt="clip_image008" title="clip_image008" width="244" height="99" /></a></p><p style="margin: 10px auto; padding: 0px; font-size: 13.9200000762939px; line-height: 20.8800010681152px">3. 效果组,它代表一个独立的Shader程序,你可以在一个工作空间中建立多个Shader</p><table border="0" cellspacing="0" cellpadding="0" style="margin: 0px; padding: 0px; border-collapse: collapse; border-spacing: 0px; border: 1px solid silver; word-break: break-word; color: #000000; font-size: 13.9200000762939px; line-height: 20.8800010681152px"><tbody><tr style="margin: 0px; padding: 0px"><td width="284" valign="top" style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px">变量列表</p><p style="margin: 10px auto; padding: 0px">纹理</p><p style="margin: 10px auto; padding: 0px">模型</p><p style="margin: 10px auto; padding: 0px">Pass</p><p style="margin: 10px auto; padding: 0px">模型引用</p><p style="margin: 10px auto; padding: 0px">渲染状态</p><p style="margin: 10px auto; padding: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VertexShader</p><p style="margin: 10px auto; padding: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PixelShader</p><p style="margin: 10px auto; padding: 0px">纹理信息(我想可能是Sampler吧?)</p><p style="margin: 10px auto; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5398  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5398'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921324127.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5397" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921323571.jpg" border="0" alt="clip_image009" title="clip_image009" width="205" height="244" /></a></p></td><td style="margin: 0px; padding: 3px; border: 1px solid silver; border-collapse: collapse"><p style="margin: 10px auto; padding: 0px"><a style="margin: 0px; padding: 1px 3px; color: green; text-decoration: none" href="javascript:if(confirm('http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5148  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://images.cnblogs.com/cnblogs_com/hmxp8/201110/read.php?5148'" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921328555.jpg"><img style="margin: 0px; padding: 0px; border: 0px; display: inline" src="read-2.php-5060" tppabs="http://images.cnblogs.com/cnblogs_com/hmxp8/201110/201110101921327998.jpg" border="0" alt="clip_image010" title="clip_image010" width="193" height="244" /></a></p></td></tr></tbody></table>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">23</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6756.htm" tppabs="http://i.renjihe.com/blog/read.php?6756">Cg与RenderMonkey 之旅</a> <span id="starid6756"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 00:49 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-6756.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6756#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6756");'>引用(0)</a> , <a href="read.php-6756.htm" tppabs="http://i.renjihe.com/blog/read.php?6756">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6756" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	http://news.mydrivers.com/1/15/15020_all.htm<br /><br /><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><strong>【前言】</strong></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">您可能还没有意识到---您手头的这块显卡（或者说这块GPU）---它不仅仅是一个应用工具（游戏、平面设计或诸如此类）---它还是一个开发工具。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">游戏开发者的硬件配置似乎总比我们普通用户的要高（当然是指3D游戏的开发者，现在没有游戏不是3D的了吧？抛开多如牛毛的FPS不说，一直是2D唱主角的RTS，如魔兽争霸III到命令与征服-将军也都已毫不例外的转到了3D），在&ldquo;ATi的魔咒日-程序员的训练课程&rdquo;&nbsp;<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://www2.gb.tomshardware.com/business/02q4/021010/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www2.gb.tomshardware.com/business/02q4/021010/index.html'" tppabs="http://www2.gb.tomshardware.com/business/02q4/021010/index.html" target="_blank">http://www2.gb.tomshardware.com/business/02q4/021010/index.html</a>上，ATi给每位程序员一台配有Radeon9700的计算机，似乎这才是游戏程序员的标准配置，那时我们驱动之家评测室才刚刚拿到9700样品，ATi官方网站的报价是$399。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">专业图形领域的机器配置就更不用说了，从IBM到HP到SGI，各类图形工作站的配置令人惊艳，当然价格也是高的令人咋舌。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">可恶的是，画面效果从来都是游戏，特别是3D游戏的中心，要做出最新、最眩的游戏来打入市场，游戏制作者不得不采用最新的游戏引擎，使用高端甚至专业配置。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">GPU的出现和疯狂的更新换代改变了这一切。得到同样的速度和效果，原本要花掉成千上万美金堆积起来的设备，现在一颗小小的GPU将会取而代之，而且它的成本将会低得多，Quadro系列显卡就是最好的例子；另一方面，频繁的更新换代使得新产品不断降价并迅速进入主流市场，比如前面提到的9700（9500），相信本文的部分读者已经在使用它了。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">您注意到了吗？普通用户和各类专业开发人员在硬件配置上的差距正在不断缩小。现在的情况是，不管是游戏还是作图，一块最新一代的显卡（GPU），在能够展示其特效的游戏或新版应用软件还未上市之前，它就已经插到了你的主板上，这时，你的机器配置本身就是超前的，它完全可以用作开发工具；或者由于现在的娱乐级显卡功能也过于强大---强大到我们完全可以把它当作专业卡来使用---譬如---SoftQuadro4。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4900" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image001.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">我为Shader而疯狂</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在DX8、DX9的推动下，Shader成为了PC世界3D领域的主宰，新的GPU、新的API、新的游戏到新的应用程序，硬件设计者、软件开发者到疯狂的游戏迷都开始围着Shader打转，数百万的用户下载3Dmark03，或为了测试机器的Shader速度，或只是为了争相目睹新版Shader所带来的实时画面效果。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">3D游戏开发制作者当然也从来没有像今天这样为Shader而着迷，但是制作游戏并不象玩游戏那么简单，一开始他们碰了壁，由于没有合适的工具，因此大多数3D图形开发者没有办法发挥它们的全部潜能。而造成这个现象的主要原因就是，以上的显示卡如果要实现硬件的像素渲染和顶点渲染编程就必须要使用低级的汇编语言来进行，我们知道汇编编程的工作量极大而且难度是非常高，对于显示卡要达到的特效显然要求应该更高，因为众多的3D图像程序员都很难发挥这些显示卡硬件渲染方面的可编程性。这也正是当初DX8发布后，DX8游戏迟迟不能上市的原因之一。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">GPU的重要特性就是硬件可编程性，目前所推出的可程序化显卡包括有nVIDIA的Geforce 3及Geforce 4钛系列的产品（不含GF4MX系列）、Xbox主机（GF3.5）、Matrox Parhelia、3Dlabs的P10及ATi所推出的Radeon 8500、9000、9700镭系列显卡。然而，这些显卡的可程序化特性均被列为机密，并仅能通过DirectX 8（DX8）内的顶点着色（VS）及像素着色（PS）接口来使用，硬件可编程特性并未被真正利用。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-1.php-4899" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image002.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">nVIDIA公布的GPU的Shader支持列表</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">如果这几年你一直是图形卡的关注者，你一定看到了两个重大的转变，第一个转变自然是速度上的成倍增长，快的甩下了CPU界的摩尔定律，第二个转变则是工作方式上的转变，图形卡已经从CPU的随从---为CPU渲染提供帧缓冲的工具，转变为独立的GPU---它提供完全可编程特效单元、数倍的三角形生成和转换引擎、完全的硬件光照和硬件抗锯齿等等几乎所有的一切。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">生活在GPU时代，为什么3D程序的开发还是那么复杂呢？不是GPU晶体管数量不够，而是现在的图形硬件已经超越了开发者使用它的能力。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">我们需要GPU设计制造者提供一种高级编程语言，让图形编程的开发人员可以利用这些高级语言可以更加快捷、高效的写出所需的图形程序来，然后利用他们自己提供的编译器或者是类库将开发人员所写的这些高级语言转换成高效的，由他们各自的显卡所支持的计算指令集（汇编语言），来最终形成计算机上的图形。这样可以保证按照最快的速度来显示开发人员想得到图形，而开发人员又不必为复杂的硬件计算指令以及如何优化这些硬件指令而烦恼。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在这样的情况下，HLSL、Cg与RenderMonkey应运而生。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">C语言是目前世界上流行、使用最广泛的高级程序设计语言。对操作系统和系统使用程序以及需要对硬件进行操作的场合，用C语言明显优于其它高级语言，C语言具有绘图能力强，可移植性，并具备很强的数据处理能力，因此适于编写系统软件、三维、二维图形和动画，它是数值计算的高级语言。但是C语言是围绕着CPU的，nVIDIA需要为GPU量身度作的C语言，为此它开发了Cg---&ldquo;C for graphics&rdquo;。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-1.php-4898" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image003.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">GDC2003上公布的Shader语言列表，Cg只是其中之一</p><a style="color: #0066cc; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" name="2"></a><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">&nbsp;&nbsp;&nbsp;&nbsp;<strong>【Cg篇】</strong></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg语言是全新的类C高级编程语言，在微软的帮助下我们看到了它的雏形，有意思的是Cg语言不但支持普通的DirectX图形接口，对OpenGL图形接口也提供了完备的支持。Cg语言主要包括两个部分，Cg语言特征、Cg编译器，而且这种编译器可以使用高级语言数据类型。Cg语言适用性相当强，开发者可在多种平台上使用同其它编程语言相比，Cg是非常特殊的，它提供了Cg浏览器（Browser，针对语言属性和可视化操作），从而可以让开发变得更简单。另外Cg语言已经获得了大量数字内容生成和游戏开发产商的认证支持。这样显然Cg语言比其它任何的语言都更适合于3D游戏卡程序开发。由于采用C作为开发蓝本，因此开发者可以在很多平台上使用Cg语言，比如：Cg可以使用在Windows、Linux、Mac OS、Xbox下。并且由于同时支持DX8和OpenGL 1.4，因此Cg语言的适用性就更广了。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg语言非常灵活、并且考虑了最大限度的兼容性。这里，我们需要说明白的一点就是，Cg具备很高的效率，因为Cg其实就是提供了应用程序同硬件加速规范的中间层，应用程序通过Cg来调用DX和OpenGL，而原来这些功能是通过汇编调用的。所以说Cg不但可以大大降低编程的繁杂度，并且保持了汇编的高效性。使用Cg的开发环境，图像编程就成了书写Cg代码的过程，随后，通过Cg编译器产生低级的汇编代码，这样开发者再也不用去直接接触图形核心的细节了。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4877" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image004.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4876" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image005.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg与GPU及应用程序之间的架构</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">nVIDIA非常希望Cg可以成为一个图像上的标准，这样在不远的未来就创造出漂亮的令人惊讶和真实的3D场景。而目前的游戏世界还深陷在帧渲染以及固定渲染的的泥潭中，几年以来游戏画面都没有太大的改观。不过，目前有了Cg语言，这就可以充分地发挥显示核心的真正特性，从而实现更出色的3D效果。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">最新的Cg 工具包可从<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://developer.nvidia.com/read.php?4875  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.nvidia.com/read.php?4875'" tppabs="http://developer.nvidia.com/view.asp?IO=cg_toolkit" target="_blank">http://developer.nvidia.com/view.asp?IO=cg_toolkit</a>下载。nVIDIA Cg Toolkit 1.1包括以下组件：</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4874" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image006.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">nVIDIA宣称在未来的一年中Cg将可以给我们带来电影品质的3D图像，而现在的显示卡都只能实现普通的帧渲染。Cg可以更好地使用图形核心的可编程特性，可以提高开发速度，使开发者可以共享和重用代码，nVIDIA称Cg为一个&ldquo;工业标准语言&rdquo;。因此，ATi、Matrox、3D Labs等显示核心厂商会推出它们自己的Cg优化版本，基本的DX8和DX9渲染代码都能够适用nVIDIA编译器运行在它们的硬件上，DX9渲染是从微软的编译器派生的，而OpenGL 1.4的代码通过其它编译器生成。因此，从现实意义上来说Cg已经真正走到了前台。和统一驱动体系（Unified Driver Architecture）类似，在Cg上使用了nVIDIA的统一编译体系，这使得Cg可以向后兼容。不同的用户可以使用Cg的预编译模式或者实时编译模式。如果没有Cg，图像开发者要直接面对GPU的细节和图像API，增加了开发者的开发时间，并且这种整合式的支持也对开发的跨平台性做了很好的规范。其实Cg可以带来的最大特点，还是3D图形效果质量的提升。因为Cg已经预置了众多3D特效的命令，要达到一定的效果我们仅仅需要使用1-2条命令就足够了。同时这也可以促进非专业3D图形程序员，开发出出色效果的3D画面，因为要达到这个目的，只要你具备C语言开发能力就足够了。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg已经得到众多游戏开发商、数码内容制作（DCC）软件厂商以及渲染技术厂商的支持，其中包括Alias Wavefront、Discreet、Luxology以及Softimage，视频产品领域的翘楚Digital Immersion Software公司具备实时渲染功能的Presenter 3D&trade; 1.1版已在Cg的帮助下浮出水面。这种基于Cg 的新版Presenter 3D旨在简化操作，提升机械CAD设计师的工作效率，它可以直接嵌入Autodesk Inventor之中。此外还包括Valve Entertainment, Sony Online Entertainment和Microsoft's Games Division；Cg还有其它更多的大众游戏和DCC数字签名。第一个Cg应用会是Maya、SoftImage、3ds Max和Lightwave的软件插件，这些插件非常重要，它可以使开发者在像素和顶点渲染上创建3D艺术品。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4873" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image007.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Presenter3D的界面</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4872" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image008.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">通过Cg实现实时渲染的Presenter3D</p><a style="color: #0066cc; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" name="3"></a><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">&nbsp;&nbsp;&nbsp; Cg for Visual Studio</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">安装我们下载的Cg Toolkit，安装程序会提示是否建立MS Visual Studio与Cg shaders的关联（选择&ldquo;是&rdquo;，如果你已经安装了MS Visual Studio）。建立关联后，在Visual Studio中打开*.Cg文件进行编辑，可以看到Cg语言的编辑和标准C++语言是一样的，包括语法颜色的提示，在编辑过程中可以随时按下&ldquo;Control+F7&rdquo;进行编译，所有的语法错误都会被高亮显示。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4871" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image009.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">选择建立文件关联</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4870" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image010.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在MS Visual Studio中编辑Cg</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在安装后的C:&#92;Program Files&#92;NVIDIA Corporation&#92;SDK&#92;MEDIA&#92;programs文件夹中，有各种类型的Cg源代码，通过对这些简单的Cg小程序的学习，可以让我们迅速的掌握Cg语言图形编程技术。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg for 3ds max</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">实时渲染一直是图形设计者的梦想，OpenGL ARB曾经是图形技术上的巨大进步，它把矢量模型转化为实体，得到接近于真实的效果，在OpenGL状态下，我们可以看到颜色、材质、光照和阴影，但是它停滞不前的缓慢发展速度，使它与实时渲染的要求越来越远，在表现如金属的光泽、水面的反射、玻璃的透明等效果上OpenGL ARB都显得无能为力，最终不得不依赖于CPU的渲染，而这些效果则是迅速改进的DX的强项---Pixel Shader和Vertex Shader很容易就能实现这些效果。虽然由nVIDIA、ATi等硬件厂商提供的最新版的OpenGL已经加入了对Shader的支持，但是为了保持最大范围的兼容性，因此许多专业设计软件的OpenGL界面基本上还是仅限于ARB的OpenGL规范。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在驱动之家评测室的《图形世界分裂的两派&mdash;&mdash;理清D3D和OpenGL的脉络》一文中<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://hardware.mydrivers.com/page/ctdir1/read.php?4869  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://hardware.mydrivers.com/page/ctdir1/read.php?4869'" tppabs="http://hardware.mydrivers.com/page/ctdir1/2002,12,05,77,3.htm" target="_blank">http://hardware.mydrivers.com/page/ctdir1/2002,12,05,77,3.htm</a>我们看到D3D已经有了比OpenGL更好的显示效果，但是我们不太可能看到DCC软件厂商抛弃工业标准的OpenGL而转投D3D的怀抱，在OpenGL 2.0普及以前，Cg Plug-in会是最好的选择。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">需要指出的是，Cg Plug-in其实是对API的扩展，在前面的架构图上我们可以看到它可以通过D3D和OpenGL，甚至绕过它们与应用程序进行数据交换，这保证了它始终可以利用功能最为强大的API，从而不断延续它的生命力。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://developer.nvidia.com/read.php?4868  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.nvidia.com/read.php?4868'" tppabs="http://developer.nvidia.com/view.asp?IO=IO_3dsmaxCgFXPlugin" target="_blank">http://developer.nvidia.com/view.asp?IO=IO_3dsmaxCgFXPlugin</a>我们可以下载到3ds max Cg Plug-in for 3ds max 5.1。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4867" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image011.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">安装3ds max Cg Plug-in for 3ds max 5.1</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">同样需要指出的是，Cg Plug-in仍然是通过D3D API在3ds max上应用shader特效的，所以在安装Cg Plug-in for 3ds max以前，你必须要有硬件支持DX8.1以上的显卡+DX8.1以上版本+3ds max 5，并且在3ds max 5的CustomizePreferences Viewport里将当前驱动设为D3D。如果你坚持要用OpenGL，也可以用折衷的办法，选择安装NVB Exporter插件把场景导出为让CgFX Viewer识别的.nvb文件格式，在CgFX Viewer里进行实时的浏览，在处理复杂模型、场景的时候，这样的效率依然要比渲染更高得多。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">安装完成后，打开你想编辑的模型或者场景文件（.max文件），按&ldquo;M&rdquo;键激活材质编辑器（Material Editor）。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在Material Editor中拉出Viewport Manager，可以看到其中的下拉菜单有CgFX选择。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">选中CgFX后，点选旁边的Enable。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">这时你会看到使用default.fx效果的模型是黑漆漆的，我们得更改应用的CgFx Shader。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4866" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image012.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">激活CgFX Viewport</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4865" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image013.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">打开Cg FX Connection Editor</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4823" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image014.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg FX Connection Editor</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">点击&ldquo;File&rdquo;，进入CgFX 3ds max Plugin目录中，你可以看到很多.fx后缀文件名，选择其中的一个文件，立刻就可以看到新的效果了。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">CgFX是一种文件格式，类似于微软DX9 HLSL语言的.fx文件，定义了一个shader中可以编辑的参数，例如同一个场景的两个对象可以用同一个shader但是可以实现不同的效果。其中可以包容多种的shader技术，例如提供较高版本的shader（Pixle Shader 2.0）以及较低版本的shader（Pixel Shader 1.1）选择。此外，同一个CgFX文件还可以不同语言编写的shader，例如Cg高级语言、汇编语言以及特定硬件的机器代码等。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在Cg FX Connection Editor里还可以通过diffuseMaterial、lightPos等栏直接修改Cg的色彩、光照、环境贴图的材质等参数。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4822" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image015.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">我们甚至可以直接修改Cg FX的源代码</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">除了nVIDIA Cg Plug-in for 3ds max 5.1自带提供的CgFX shader外，你还可以在<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://www.cgshaders.org/shaders/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cgshaders.org/shaders/'" tppabs="http://www.cgshaders.org/shaders/" target="_blank">http://www.cgshaders.org/shaders/</a>找到更多更加丰富的CgFX shader库，参考大家的代码，编写出适用于自己作品的CgFX shader。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg for Maya</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">许多CgFX文件的代码是按Microsoft Direct X规范编写的，而Maya只使用OpenGL，但这些Cg shaders仍然可以作用于Maya---Cg会隐藏在后台执行任何需要调用的Direct X指令。所以在安装<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://news.mydrivers.com/1/15/read.php?4821  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://news.mydrivers.com/1/15/read.php?4821'" tppabs="http://news.mydrivers.com/1/15/%3Ca" target="_blank">http://developer.nvidia.com/view.asp?IO=mayacgplugin</a>&nbsp;target=_blank&gt;<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://developer.nvidia.com/read.php?4820  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://developer.nvidia.com/read.php?4820'" tppabs="http://developer.nvidia.com/view.asp?IO=mayacgplugin" target="_blank">http://developer.nvidia.com/view.asp?IO=mayacgplugin</a>&nbsp;Cg Plug-in for Maya之前，我们同样需要安装DX8.1以上版本，硬件支持DX8.1以上的GPU，要得到最多的效果，最好当然是DX9和NV30了，另外Maya 4.5版本也是不可少的。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">安装后，运行Maya，到主菜单下的Windows-&gt;Preferences-&gt;Plugin Manager...找到Cg plugin，选中启动时载入。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4819" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image016.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">载入Cg plugin</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4818" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image017.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">Cg Plug-in for Maya</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">再选中要应用Cg shader的三角形模型，到主菜单中选择&ldquo;Lighting/Shading,&rdquo; -&gt; &ldquo;Assign New Material,&rdquo; -&gt; &ldquo;Cg Shader.&rdquo;，打开属性编辑窗口，找到你所需的CgFX文件，载入即可得到实时的效果。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4817" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image018.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">load a CgFX file</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">最后，我们同样可以在属性编辑窗口对CgFX的色彩、光照等参数进行调整。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">CgFX Viewer也同样适用于Maya。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4816" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image019.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">CgFX Viewer</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">不难发现，CgFX的特性以及它在DCC领域的应用还将对游戏开发等领域带来新的变革。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4815" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image020.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">传统的开发途径</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-1.php-4814" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image021.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">应用FX的开发途径</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">上面两张图很清楚的表明了这一点，传统的3D游戏开发需要程序员针对不同的硬件平台编写不同的代码并进行封装，而现在我们只要通过共享的FX文件就可以传递特效；以前的美工因为在DCC工具里因为没有实时渲染，设计意图到游戏中往往大打折扣，而现在，我们可以在DCC设计与游戏中得到同样的画面。</p><a style="color: #0066cc; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" name="4"></a><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">&nbsp;&nbsp;&nbsp;&nbsp;<strong>【HLSL】</strong></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在介绍Cg和RenderMonkey的同时，有必要说一下微软的HLSL---high level shading languages，即高端着色语言。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">HLSL是包括Cg在内的shader语言的标准。（我们需要一套标准的HLSL，且需广为API应用程序编程接口及显卡制造商所支持。但目前，我们只有一种选择─Cg，nVIDIA已公开表示Cg将与DX9 HLSL兼容。在这个基础之上，nVIDIA已积极推展希望将Cg变成业界标准，并宣称所有的显卡制造商都能参与其中。到时候，Cg可能就成了DX9及OpenGL所共选用的HLSL。）</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">HLSL相对于顶点着色/像素着色引擎用的汇编语言，就像是C语言相对于中央处理器用的汇编语言一般。与汇编语言相比，HLSL版本将会易为人类所阅读，这项优势亦将带来更少的程序错误以及更容易维护及编辑。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在微软最新发布的DirectX 9.0 Software Development Kit (SDK)中已经包括了HLSL。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">虽然HLSL是设计VS/ PS效果极方便的方法，它仍无法克服在硬件上先天所具有的限制。更重要的是，使用HLSL的程序设计师必须要知道他们所将撰写软件的硬件平台为何，并要对于该系列产品在硬件上的限制先有通透的了解才行。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">CgFX文件解决了这一个问题。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-1.php-4813" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image022.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">典型的HLSL代码例子</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4812" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image023.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">DX9 SDK的组件之一EffectEdit</p><a style="color: #0066cc; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" name="5"></a><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">&nbsp;&nbsp;&nbsp;&nbsp;<strong>【RenderMonkey篇】</strong></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">与nVIDIA的Cg语言截然不同，RenderMonkey---The RenderMonkey Integrated Development Environment (IDE) 则是一套完整的材质处理研发工具。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">如果你是一位程序员，已经有了Microsoft DirecX9.0 SDK，那么ATi全新的DirectX 9 Beta v0.9版RenderMonkey工具套装会成为你开发DirectX 9.0游戏的得力工具。<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://mirror.ati.com/developer/sdk/radeonSDK/html/Tools/read.php?4811  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://mirror.ati.com/developer/sdk/radeonSDK/html/Tools/read.php?4811'" tppabs="http://mirror.ati.com/developer/sdk/radeonSDK/html/Tools/RenderMonkey.html" target="_blank">http://mirror.ati.com/developer/sdk/radeonSDK/html/Tools/RenderMonkey.html</a>。它的界面与Visual Studio GUI界面相近，Visual Studio程序员可以很快上手；自带Vertex和Pixel shaders编辑器，完整的支持微软Shader编译器；支持各种DX8, DX9 Shader模型(现在)和OpenGL Shader模型(未来)。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4810" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image024.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">安装RenderMonkey前必须安装有Microsoft DirecX9.0 SDK</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4809" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image025.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">RenderMonkey</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">运行RenderMonkey我们可以看到，在画面左边是工作区，显示了所有已被研发的组件与材质。每个材质的每次处理都有数个区段。每次处理包含有要应用效果的几何、每一个顶点着色引擎与像素着色引擎、着色贴图状态、以及任何处理必需的参数或变量。参数包含有这项素材需用的材质及色彩。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在其右边，有效果窗口，让开发者可以检视所修改的效果。下一个窗口显示处理程序0中所用的顶点着色引擎与像素着色引擎以及放置于其上的常数。通过修改程序并重新编译，设计者可以立刻看到其修改的结果。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在下方则是输出窗口，让开发者可以看到编译结果是否有任何程序错误。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4808" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image026.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在工作区点右键可以增加模型（3ds格式）、材质物体、PS、VS特效等</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4807" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image027.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">PS编辑窗口，可以使用PS1.1到2.0版本</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在编辑的同时，可以在预览输出窗口实时动态的察看效果。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">RenderMonkey软件是一个允许程序设计师与美工人员创造新材质及编辑现有材质的开发环境。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4806" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image028.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">预览输出窗口</p><a style="color: #0066cc; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" name="6"></a><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">&nbsp;&nbsp;&nbsp;&nbsp;<strong>【写在最后】</strong></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">GPU生产厂商给我们提供了最佳的shader制作工具，但他们最终的目的是为了通过这些工具在残酷的市场竞争中获得更多的支持，从而占据更有利的地位，没有任何一家厂商希望看到竞争对手的产品成为业界标准，所以硬件兼容性将是未来shader工具不得不引起重视的问题。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">虽然Cg在设计之初就考虑了最大限度的兼容性，它可以通过DirectX、OpenGL甚至绕过它们，但实际使用中它还是做出了种种限制。比如前不久发布的Cg游戏Gun Metal就无法在硬件支持DX9 shader2.0的ATi Radeon9500/9700上运行，这些用户不得不借助于3d Analyze的帮助来玩DX9 shader特效的游戏。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">在OpenGL上，Cg同样如此，只有完全符合nVIDIA制定的OpenGL扩展指令集的驱动才能展示Cg制作的OpenGL shader特效。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4805" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image029.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">错误信息</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">如果你是 Radeon95/9700用户在<a style="color: #0066cc; text-decoration: none" href="javascript:if(confirm('http://www.idvinc.com/html/read.php?4804  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.idvinc.com/html/read.php?4804'" tppabs="http://www.idvinc.com/html/downloads_exe.htm" target="_blank">http://www.idvinc.com/html/downloads_exe.htm</a>下载运行用Cg语言编写特效的IDV SpeedTree Demo，就只能得到上述的错误信息。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4803" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image030.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">IDV SpeedTree Demo</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">包括前面我们提到的Cg Plug-in for 3ds max 5.1，即使你是硬件支持DX9的ATi Radeon9500/9700的用户，也只能接受下面检测nv*.*文件失败，Dll文件无法加载的信息。Cg在ATi显卡上有太多的问题，这与nVIDIA公开宣称的兼容性极为不符。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd"><img style="border: 0px" src="read-2.php-4802" tppabs="http://news.mydrivers.com/upload/red-2003-06-04-image031.jpg" border="0" align="center" /></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">不难看出，Cg与RenderMonkey仍然还有一定的局限性，随着硬件和API的不断变更，它们还需要不断的升级，加入新的功能。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">希望Cg与RenderMonkey在未来能带给我们更多的惊喜。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">希望Cg与RenderMonkey能带领更多GPU用户进入shader的世界。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">注：如果条件允许，近期我们还将会推出深入Cg图形编程的文章。</p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd" class="news_bq"><span class="news_bq_more">阅读更多：</span><span class="news_bq_list"><a style="color: #0066cc; padding: 0px 5px" href="javascript:if(confirm('http://news.mydrivers.com/tags/read.php?4799  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://news.mydrivers.com/tags/read.php?4799'" tppabs="http://news.mydrivers.com/tags/234.htm">默认</a></span></p><p style="padding: 0px 27px; margin: 0px 0px 15px; color: #333333; font-family: 'Microsoft YaHei', 'Arial Narrow'; font-size: 15px; line-height: 26px; background-color: #f5f8fd">相关阅读：</p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Sep</span>
	<span class="textbox-calendar-day">11</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-5449.htm" tppabs="http://i.renjihe.com/blog/read.php?5449">oceanFFT_kernel.cu</a> <span id="starid5449"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 14:21 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-5449.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?5449#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb5449");'>引用(0)</a> , <a href="read.php-5449.htm" tppabs="http://i.renjihe.com/blog/read.php?5449">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb5449" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<a href="javascript:if(confirm('http://www.naic.edu/sw/lemon/index.php?go=category_9&mode=2&page=7  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.naic.edu/sw/lemon/index.php?go=category_9&mode=2&page=7'" tppabs="http://www.naic.edu/~phil/hardware/nvidia/doc/src/oceanFFT/oceanFFT_kernel.cu">http://www.naic.edu/~phil/hardware/nvidia/doc/src/oceanFFT/oceanFFT_kernel.cu</a><br /><br /><pre>/*<br />&nbsp;&nbsp;* Copyright 1993-2009 NVIDIA Corporation.&nbsp;&nbsp;All rights reserved.<br />&nbsp;&nbsp;*<br />&nbsp;&nbsp;* NVIDIA Corporation and its licensors retain all intellectual property and <br />&nbsp;&nbsp;* proprietary rights in and to this software and related documentation and <br />&nbsp;&nbsp;* any modifications thereto.&nbsp;&nbsp;Any use, reproduction, disclosure, or distribution <br />&nbsp;&nbsp;* of this software and related documentation without an express license <br />&nbsp;&nbsp;* agreement from NVIDIA Corporation is strictly prohibited.<br />&nbsp;&nbsp;* <br />&nbsp;&nbsp;*/<br /> <br /> ///////////////////////////////////////////////////////////////////////////////<br /> #include <br /> #include <br /> <br /> //Round a / b to nearest higher integer value<br /> int cuda_iDivUp(int a, int b)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; return (a + (b - 1)) / b;<br /> &#125;<br /> <br /> <br /> // complex math functions<br /> __device__<br /> float2 conjugate(float2 arg)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; return make_float2(arg.x, -arg.y);<br /> &#125;<br /> <br /> __device__<br /> float2 complex_exp(float arg)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; return make_float2(cosf(arg), sinf(arg));<br /> &#125;<br /> <br /> __device__<br /> float2 complex_add(float2 a, float2 b)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; return make_float2(a.x + b.x, a.y + b.y);<br /> &#125;<br /> <br /> __device__<br /> float2 complex_mult(float2 ab, float2 cd)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; return make_float2(ab.x * cd.x - ab.y * cd.y, ab.x * cd.y + ab.y * cd.x);<br /> &#125;<br /> <br /> // generate wave heightfield at time t based on initial heightfield and dispersion relationship<br /> __global__ void generateSpectrumKernel(float2* h0, float2 *ht, unsigned int width, unsigned int height, float t, float patchSize)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int y = blockIdx.y*blockDim.y + threadIdx.y;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int i = y*width+x;<br />&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; // calculate coordinates<br />&nbsp;&nbsp;&nbsp;&nbsp; float2 k;<br />&nbsp;&nbsp;&nbsp;&nbsp; k.x = CUDART_PI_F * x / (float) patchSize;<br />&nbsp;&nbsp;&nbsp;&nbsp; k.y = 2.0f * CUDART_PI_F * y / (float) patchSize;<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp; // calculate dispersion w(k)<br />&nbsp;&nbsp;&nbsp;&nbsp; float k_len = sqrtf(k.x*k.x + k.y*k.y);<br />&nbsp;&nbsp;&nbsp;&nbsp; float w = sqrtf(9.81f * k_len);<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp; float2 h0_k = h0[i];<br />&nbsp;&nbsp;&nbsp;&nbsp; float2 h0_mk = h0[(((height-1)-y)*width)+x];<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp; float2 h_tilda = complex_add( complex_mult(h0_k, complex_exp(w * t)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; complex_mult(conjugate(h0_mk), complex_exp(-w * t)) );<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp; // output frequency-space complex values<br />&nbsp;&nbsp;&nbsp;&nbsp; if ((x &lt; width) &amp;&amp; (y &lt; height)) &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ht[i] = h_tilda;<br />&nbsp;&nbsp;&nbsp;&nbsp; &#125;<br /> &#125;<br /> <br /> <br /> // generate slope by partial differences in spatial domain<br /> __global__ void calculateSlopeKernel(float* h, float2 *slopeOut, unsigned int width, unsigned int height)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int x = blockIdx.x*blockDim.x + threadIdx.x;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int y = blockIdx.y*blockDim.y + threadIdx.y;<br />&nbsp;&nbsp;&nbsp;&nbsp; unsigned int i = y*width+x;<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp; float2 slope;<br />&nbsp;&nbsp;&nbsp;&nbsp; if ((x &gt; 0) &amp;&amp; (y &gt; 0) &amp;&amp; (x &lt; width-1) &amp;&amp; (y &lt; height-1)) &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; slope.x = h[i+1] - h[i-1];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; slope.y = h[i+width] - h[i-width];<br />&nbsp;&nbsp;&nbsp;&nbsp; &#125; else &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; slope = make_float2(0.0f, 0.0f);<br />&nbsp;&nbsp;&nbsp;&nbsp; &#125;<br />&nbsp;&nbsp;&nbsp;&nbsp; slopeOut[i] = slope;<br /> &#125;<br /> <br /> extern &quot;C&quot; <br /> void cudaGenerateSpectrumKernel(float2* d_h0, float2 *d_ht, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int width, unsigned int height, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float animTime, float patchSize)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; dim3 block(8, 8, 1);<br />&nbsp;&nbsp;&nbsp;&nbsp; dim3 grid(cuda_iDivUp(width, block.x), cuda_iDivUp(height, block.y), 1);<br />&nbsp;&nbsp;&nbsp;&nbsp; generateSpectrumKernel&lt;&lt;&gt;&gt;(d_h0, d_ht, width, height, animTime, patchSize);<br /> &#125;<br /> <br /> extern &quot;C&quot;<br /> void cudaCalculateSlopeKernel(&nbsp;&nbsp;float* hptr, float2 *slopeOut, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int width, unsigned int height)<br /> &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp; dim3 block(8, 8, 1);<br />&nbsp;&nbsp;&nbsp;&nbsp; dim3 grid2(cuda_iDivUp(width, block.x), cuda_iDivUp(height, block.y), 1);<br />&nbsp;&nbsp;&nbsp;&nbsp; calculateSlopeKernel&lt;&lt;&gt;&gt;(hptr, slopeOut, width, height);<br /> &#125;</pre>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Sep</span>
	<span class="textbox-calendar-day">10</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-5446.htm" tppabs="http://i.renjihe.com/blog/read.php?5446">CUFFT 图像处理傅里叶变换&nbsp;&nbsp;</a> <span id="starid5446"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 17:26 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-5446.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?5446#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb5446");'>引用(0)</a> , <a href="read.php-5446.htm" tppabs="http://i.renjihe.com/blog/read.php?5446">阅读(2)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb5446" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<a href="javascript:if(confirm('http://0600310231.blog.163.com/content/images/2016/06/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://0600310231.blog.163.com/content/images/2016/06/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/'" tppabs="http://0600310231.blog.163.com/blog/static/4729168520122835759901/">http://0600310231.blog.163.com/blog/static/4729168520122835759901/</a><span style="font-size: 14px; line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; color: #444444"><br />CUFFT库实现了快速傅里叶变换，由于新手加上英文水平有限，被这玩意小小折磨了一下。我把其中需要注意到的几点问题，列在这里，以供后来的读者能够少犯错误。</span><div style="line-height: 25px; color: #444444; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: 14px">（1） 在图像正变换时，使用函数R2C，或者D2Z。从图像数据变换到复数数据，图像为N*N时，其实复数数据只有N*(N/2+1)，<span style="white-space: pre"> </span>因为另外的N*（N/2-1）可以根据中心对称和共轭关系算出来，CUFFT为了节省存储空间，所以略去了那些数据。</div><div style="line-height: 25px; color: #444444; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: 14px">（2） 在反变换时使用C2R变换，也可以是Z2D变换，在创建cufftPlan句柄时要注意：</div><div style="line-height: 25px; color: #444444; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: 14px"><span style="white-space: pre">&nbsp;&nbsp;</span>cufftPlan2d(&amp;plan_IFFT,nHeight,nWidth,CUFFT_C2R);</div><div style="line-height: 25px; color: #444444; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: 14px"><span style="white-space: pre"> </span>上面的语句中参数并不是（nWidth/2+1）而是nWidth。别以为得到的复数数据为N*（N/2+1）就用参数（nWidth/2+1）。</div><div style="line-height: 25px; color: #444444; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: 14px">（3）反变换出来的数据是实数，但是被放大了nWidth*nHeight倍，所以你要得到图像数据的话，需要每个像素值除以<span style="white-space: pre"> </span>nWidth*nHeight。</div>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Sep</span>
	<span class="textbox-calendar-day">10</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-5445.htm" tppabs="http://i.renjihe.com/blog/read.php?5445">Tricks and Tips: FFTShift in CUDA</a> <span id="starid5445"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 17:25 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-5445.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?5445#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb5445");'>引用(0)</a> , <a href="read.php-5445.htm" tppabs="http://i.renjihe.com/blog/read.php?5445">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb5445" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="border: 0px; margin: 0px 0px 10px; padding: 0px 0px 0.5em; vertical-align: baseline; line-height: 1.6em; color: #777777; font-family: Arial, Helvetica, sans-serif; font-size: medium; text-align: justify"><a href="javascript:if(confirm('http://www.orangeowlsolutions.com/archives/read.php?6516  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.orangeowlsolutions.com/archives/read.php?6516'" tppabs="http://www.orangeowlsolutions.com/archives/251">http://www.orangeowlsolutions.com/archives/251</a><br />This is an unusual way of performing fftshift, yet of interest for CUDA developers. The code for the 1D case is</p><pre style="background-color: #f7f7f7; border: 0px; margin-top: 0px; margin-bottom: 10px; padding: 1.5em; vertical-align: baseline; color: #222222; line-height: 21px; overflow: auto; font-size: 15px; text-align: justify">&nbsp;&nbsp; __global__ void 1dfftshift(double2 *u_d, int N) &#123;&nbsp;&nbsp;&nbsp;&nbsp;int i = blockDim.x * blockIdx.x + threadIdx.x;&nbsp;&nbsp;&nbsp;&nbsp;if(i &lt; N)&nbsp;&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double a = pow(-1.0,i&amp;1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_d[i].x *= a;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_d[i].y *= a;&nbsp;&nbsp;&nbsp;&nbsp; &#125; &#125;</pre><p style="border: 0px; margin: 0px 0px 10px; padding: 0px 0px 0.5em; vertical-align: baseline; line-height: 1.6em; color: #777777; font-family: Arial, Helvetica, sans-serif; font-size: medium; text-align: justify">It consists in multiplying the vector to be transformed by a sequence of 1s and -1s which is equivalent to the multiplication by exp(-j*n*pi) and thus to a shift in the conjugate domain.</p><p style="border: 0px; margin: 0px 0px 10px; padding: 0px 0px 0.5em; vertical-align: baseline; line-height: 1.6em; color: #777777; font-family: Arial, Helvetica, sans-serif; font-size: medium; text-align: justify">You have to call this kernel before and after the application of the CUFFT.</p><p style="border: 0px; margin: 0px 0px 10px; padding: 0px 0px 0.5em; vertical-align: baseline; line-height: 1.6em; color: #777777; font-family: Arial, Helvetica, sans-serif; font-size: medium; text-align: justify">One pro is that memory movements/swapping are avoided and that the idea is simple and can be immediately extended to the 2D case, see below:</p><pre style="background-color: #f7f7f7; border: 0px; margin-top: 0px; margin-bottom: 10px; padding: 1.5em; vertical-align: baseline; color: #222222; line-height: 21px; overflow: auto; font-size: 15px; text-align: justify">&nbsp;&nbsp; #define IDX2R(i,j,N) (((i)*(N))+(j))&nbsp;&nbsp;__global__ void fftshift_2D(double2 *data, int N1, int N2) &#123;&nbsp;&nbsp;&nbsp;&nbsp; int i = threadIdx.x + blockDim.x * blockIdx.x;&nbsp;&nbsp;&nbsp;&nbsp; int j = threadIdx.y + blockDim.y * blockIdx.y;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (i &lt; N1 &amp;&amp; j &lt; N2) &#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double a = 1-2*((i+j)&amp;1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data[j*blockDim.x*gridDim.x+i].x *= a;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[j*blockDim.x*gridDim.x+i].y *= a;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125; &#125;</pre>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Sep</span>
	<span class="textbox-calendar-day">10</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-5443.htm" tppabs="http://i.renjihe.com/blog/read.php?5443">CUDA 3.0 编程接口</a> <span id="starid5443"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 16:43 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="查看分类： GPU编程">GPU编程</a> , <a href="read.php-5443.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?5443#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb5443");'>引用(0)</a> , <a href="read.php-5443.htm" tppabs="http://i.renjihe.com/blog/read.php?5443">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb5443" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<a href="javascript:if(confirm('http://tech.it168.com/content/images/2016/06/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php?6252  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://tech.it168.com/content/images/2016/06/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/index.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php/read.php?6252'" tppabs="http://tech.it168.com/a2010/0323/864/000000864237_all.shtml">http://tech.it168.com/a2010/0323/864/000000864237_all.shtml</a><br /><br /><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;2D float texture&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">texture</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&lt;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">2</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">, cudaReadModeElementType</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&gt;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;texRef;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Simple transformation kernel&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">__global__&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">void</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;transformKernel(</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;output,&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">int</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;width,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">int</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;height,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;theta) &#123;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Calculate normalized texture coordinates&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">unsigned&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">int</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;x&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;blockIdx.x&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;blockDim.x&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;threadIdx.x;<br />unsigned&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">int</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;y&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;blockIdx.y&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;blockDim.y&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;threadIdx.y;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;u&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;x&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">/</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;(</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">)width;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;v&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;y&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">/</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;(</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">)height;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Transform coordinates&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">u&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">-=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0.5f</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">; v&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">-=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0.5f</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;tu&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;u&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cosf(theta) &ndash; v&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;sinf(theta)&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0.5f</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">float</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;tv&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;v&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cosf(theta)&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;u&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;sinf(theta)&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0.5f</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Read from texture and write to global memory&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">output[y&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;width&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">+</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;x]&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;tex2D(tex, tu, tv);&nbsp;<br />&#125;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Host code&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">int</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;main()&nbsp;<br />&#123;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Allocate CUDA array in device memory&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">cudaChannelFormatDesc channelDesc&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cudaCreateChannelDesc(<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">32</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">, cudaChannelFormatKindFloat);&nbsp;<br />cudaArray</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">*</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cuArray;&nbsp;<br />cudaMallocArray(</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&amp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">cuArray,&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&amp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">channelDesc, width, height);&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Copy to device memory some data located at address h_data&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;in host memory&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">cudaMemcpyToArray(cuArray,</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">,h_data,size,<br />cudaMemcpyHostToDevice);&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Set texture parameters&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">texRef.addressMode[</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">0</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">]&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cudaAddressModeWrap;&nbsp;<br />texRef.addressMode[</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #800080">1</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">]&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cudaAddressModeWrap;&nbsp;<br />texRef.filterMode&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;cudaFilterModeLinear;&nbsp;<br />texRef.normalized&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">=</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #0000ff">true</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">;&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Bind the array to the texture&nbsp;</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000"><br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial">cudaBindTextureToArray(texRef, cuArray, channelDesc);&nbsp;<br /></span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">//</span><span style="line-height: 13px; background-color: #e6e6e6; font-family: Arial; color: #008000">&nbsp;Allocate result of transformation in device memory</span>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div>
					<div class="article-bottom" style="display: block">
						<div class="pages">
							<span class="pagebar-mainbody"> 分页： 1/9  <a href="index.php-go=category_39&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=1"><img src="doubleleft.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleleft.gif" alt="第一页" title="第一页" border="0"/></a> <span class="pagebar-selections"> <span class="pagelink-current">1</span>  <a href="read.php-5324.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=2">2</a>  <a href="read.php-5323.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=3">3</a>  <a href="read.php-5322.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=4">4</a>  <a href="read.php-5320.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=5">5</a>  <a href="read.php-5319.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=6">6</a>  <a href="read.php-5302.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=7">7</a>  <a href="read.php-5270.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=8">8</a>  <a href="read.php-5269.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=9">9</a> </span> <a href="read.php-5324.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=2"><img src="singleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/singleright.gif" alt="下页" title="下页" border="0"/></a>  <a href="read.php-5269.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=9"><img src="doubleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleright.gif" alt="最后页" title="最后页" border="0"/></a> </span> [ 显示模式： <a href="index.php-go=category_39&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=1&page=1" title="切换到摘要模式">摘要</a> | <a href="index.php-go=category_39&mode=2&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39&mode=2&page=1" title="切换到列表模式">列表</a> ]
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程"><strong>GPU编程</strong></a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 279 ms, 4 Queries.</span>";
//]]>
</script></body>
</html>