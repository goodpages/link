<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>由浅入深探究mysql索引结构原理、性能分析与优化 - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-7452.htm" tppabs="http://i.renjihe.com/blog/read.php?7452" title="上一篇 Codeigniter的"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>Codeigniter的</a></div>
	<div class="next-article"><a href="read.php-7454.htm" tppabs="http://i.renjihe.com/blog/read.php?7454" title="下一篇 MYSQL数据库设计规范"><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>MYSQL数据库设计规范</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Aug</span>
	<span class="textbox-calendar-day">3</span>
	</div>
	<div class="textbox-title">
		<h4>
		由浅入深探究mysql索引结构原理、性能分析与优化 <span id="starid7453"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:08 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="查看分类： web">web</a> , <a href="read.php-7453.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?7453#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb7453");'>引用(0)</a> , <a href="read.php-7453.htm" tppabs="http://i.renjihe.com/blog/read.php?7453">阅读(0)</a> ,  Via 本站原创 <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="字体大小" border='0'/> <a href="javascript: doZoom(16);">大</a> | <a href="javascript: doZoom(14);">中</a> | <a href="javascript: doZoom(12);">小</a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?6923  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?6923'" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_7453"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="订阅本文" border='0'/></a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?6922  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?6922'" tppabs="http://i.renjihe.com/blog/read.php?save_7453"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="保存本文为文本文档" border='0'/></a></span>
		</div>
	</div>
	<div id="tb7453" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	<div style="font-family: Arial; font-size: 14px; line-height: 26px"><p style="margin: 0px; padding: 0px">摘要：</p><table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">第一部分：基础知识</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">第二部分：</span><span style="color: #333333">MYISAM</span><span style="color: #333333">和</span><span style="color: #333333">INNODB</span><span style="color: #333333">索引结构</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">1、&nbsp;</span><span style="color: #333333">简单介绍</span><span style="color: #333333">B-tree B+ tree</span><span style="color: #333333">树</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2、&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">索引结构</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">3、&nbsp;</span><span style="color: #333333">Annode</span><span style="color: #333333">索引结构</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">4、&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">索引与</span><span style="color: #333333">InnoDB</span><span style="color: #333333">索引相比较</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">第三部分：</span><span style="color: #333333"><a style="color: #df3434; text-decoration: none; font-weight: bold" href="javascript:if(confirm('http://lib.csdn.net/base/14  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lib.csdn.net/base/14'" tppabs="http://lib.csdn.net/base/14" target="_blank" title="undefined" class="replace_word">MySQL</a></span><span style="color: #333333">优化</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">1、</span><span style="color: #333333">表数据类型选择</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2、</span><span style="color: #333333">sql</span><span style="color: #333333">语句优化</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">最左前缀原则</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1.1)&nbsp;&nbsp;</span><span style="color: #333333">能正确的利用索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1.2)&nbsp;&nbsp;</span><span style="color: #333333">不能正确的利用索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1.3)&nbsp;&nbsp;</span><span style="color: #333333">如果一个查询</span><span style="color: #333333">where</span><span style="color: #333333">子句中确实不需要</span><span style="color: #333333">password</span><span style="color: #333333">列，那就用&ldquo;补洞&rdquo;。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1.4)&nbsp;&nbsp;</span><span style="color: #333333">like</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">Order by&nbsp;</span><span style="color: #333333">优化</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.1)</span>&nbsp;<span style="color: #333333">filesort</span><span style="color: #333333">优化算法</span><span style="color: #333333">.</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.2)</span>&nbsp;<span style="color: #333333">单独</span><span style="color: #333333">order by&nbsp;</span><span style="color: #333333">用不了索引，索引考虑加</span><span style="color: #333333">where&nbsp;</span><span style="color: #333333">或加</span><span style="color: #333333">limit</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.3)</span>&nbsp;<span style="color: #333333">where + orerby&nbsp;</span><span style="color: #333333">类型，</span><span style="color: #333333">where</span><span style="color: #333333">满足最左前缀原则，且</span><span style="color: #333333">orderby</span><span style="color: #333333">的列和</span><span style="color: #333333">where</span><span style="color: #333333">子句用到的索引的列的子集。即是</span><span style="color: #333333">(a,b,c)</span><span style="color: #333333">索引，</span><span style="color: #333333">where</span><span style="color: #333333">满足最左前缀原则且</span><span style="color: #333333">order by</span><span style="color: #333333">中列</span><span style="color: #333333">a</span><span style="color: #333333">、</span><span style="color: #333333">b</span><span style="color: #333333">、</span><span style="color: #333333">c</span><span style="color: #333333">的任意组合</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.4) where + orerby+limit</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.5)</span>&nbsp;<span style="color: #333333">如何考虑</span><span style="color: #333333">order by</span><span style="color: #333333">来建索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">隔离列</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">OR</span><span style="color: #333333">、</span><span style="color: #333333">IN</span><span style="color: #333333">、</span><span style="color: #333333">UNION ALL</span><span style="color: #333333">，可以尝试用</span><span style="color: #333333">UNION ALL</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.1)</span>&nbsp;<span style="color: #333333">or</span><span style="color: #333333">会遍历表就算有索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.2)</span><span style="color: #333333">关于</span><span style="color: #333333">in</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.2)</span>&nbsp;<span style="color: #333333">UNION All</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">范索引选择性</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">重复或多余索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">3、</span><span style="color: #333333">系统配置与维护优化</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">重要的一些变量</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">Fds</span>&nbsp;<span style="color: #333333">optimize</span><span style="color: #333333">、</span><span style="color: #333333">Analyze</span><span style="color: #333333">、</span><span style="color: #333333">check</span><span style="color: #333333">、</span><span style="color: #333333">repair</span><span style="color: #333333">维护操作</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">表结构的更新与维护</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">第四部分：图说</span><span style="color: #333333">mysql</span><span style="color: #333333">查询执行流程</span></p><p style="margin: 0px; padding: 0px">&nbsp;</p></td></tr></tbody></table><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">第一部分：基础知识：</span></strong></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">官方介绍索引是帮助</span><span style="color: #333333">MySQL</span><span style="color: #333333">高效获取数据的数据结构。笔者理解索引相当于一本书的目录，通过目录就知道要的资料在哪里，不用一页一页查阅找出需要的资料。关键字</span><span style="color: #333333">index</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">-------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">唯一索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">强调唯一，就是索引值必须唯一，关键字</span><span style="color: #333333">unique index</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">创建索引：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">1</span><span style="color: #333333">、</span><span style="color: #333333">create&nbsp;<strong>unique index</strong>&nbsp;</span><span style="color: #333333">索引名</span><span style="color: #333333">&nbsp;on&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">(</span><span style="color: #333333">列名</span><span style="color: #333333">);</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2</span><span style="color: #333333">、</span><span style="color: #333333">alter table&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">&nbsp;add&nbsp;<strong>unique index</strong>&nbsp;</span><span style="color: #333333">索引名</span><span style="color: #333333">&nbsp;(</span><span style="color: #333333">列名</span><span style="color: #333333">);</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">删除索引：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">1、&nbsp;&nbsp;</span><span style="color: #333333">drop index&nbsp;</span><span style="color: #333333">索引名</span><span style="color: #333333">&nbsp;on&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2、&nbsp;&nbsp;</span><span style="color: #333333">alter table&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">&nbsp;drop index&nbsp;</span><span style="color: #333333">索引名</span><span style="color: #333333">;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">-------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">主键</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">主键就是唯一索引的一种，主键要求建表时指定，一般用</span><span style="color: #333333">auto_increatment</span><span style="color: #333333">列，关键字是</span><span style="color: #333333">primary key</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">主键创建：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">creat table test2 (id int not null&nbsp;<strong>primary key</strong>&nbsp;auto_increment);</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">-------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">全文索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">InnoDB</span><span style="color: #333333">不支持，</span><span style="color: #333333">Myisam</span><span style="color: #333333">支持性能比较好，一般在</span><span style="color: #333333">&nbsp;CHAR</span><span style="color: #333333">、</span><span style="color: #333333">VARCHAR&nbsp;</span><span style="color: #333333">或</span><span style="color: #333333">&nbsp;TEXT&nbsp;</span><span style="color: #333333">列上创建。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Create table&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">( id int not null primary anto_increment,title</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">varchar(100),<strong>FULLTEXT</strong>(title))type=<strong>myisam</strong></span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">单列索引与多列索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">索引可以是单列索引也可以是多列索引（也叫复合索引）。按照上面形式创建出来的索引是单列索引，现在先看看创建多列索引：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">create table test3 (id int not null primary key auto_increment,uname char</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(8) not null default '',password char(12) not null,<strong>INDEX</strong>(uname,password))type</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">=myisam;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">注意：</span><span style="color: #333333">INDEX(a, b, c)</span><span style="color: #333333">可以当做</span><span style="color: #333333">a</span><span style="color: #333333">或</span><span style="color: #333333">(a, b)</span><span style="color: #333333">的索引来使用，但和</span><span style="color: #333333">b</span><span style="color: #333333">、</span><span style="color: #333333">c</span><span style="color: #333333">或</span><span style="color: #333333">(b,c)</span><span style="color: #333333">的索引来使用这是一个<strong>最左前缀</strong>的优化方法，在后面会有详细的介绍，你只要知道有这样两个概念</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">-------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">聚集索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">一种索引，该索引中键值的逻辑顺序决定了表中相应行的物理顺序。</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">聚集索引确定表中数据的物理顺序。</span><span style="color: #333333">Mysql</span><span style="color: #333333">中</span><span style="color: #333333">myisam</span><span style="color: #333333">表是没有聚集索引的，</span><span style="color: #333333">innodb</span><span style="color: #333333">有（主键就是聚集索引），聚集索引在下面介绍</span><span style="color: #333333">innodb</span><span style="color: #333333">结构的时有详细介绍。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">-------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">查看表的索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">通过命令：</span><span style="color: #333333">Show index from&nbsp;</span><span style="color: #333333">表名</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">如：</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;show&nbsp;<span style="color: #006699">index</span>&nbsp;<span style="color: #006699">from</span>&nbsp;test3;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+----+</span></li><li style="color: inherit">&#124;&nbsp;<span style="color: #006699">Table</span>&nbsp;&#124;&nbsp;Non_unique&nbsp;&#124;&nbsp;Key_name&nbsp;&#124;&nbsp;Seq_in_index&nbsp;&#124;&nbsp;Column_name&nbsp;&#124;&nbsp;Collation&nbsp;&#124;&nbsp;Cardinality&nbsp;&#124;&nbsp;Sub_part&nbsp;&#124;&nbsp;</li><li style="color: inherit">Packed&nbsp;&#124;&nbsp;<span style="color: black">Null</span>&nbsp;&#124;&nbsp;Index_type&nbsp;&#124;&nbsp;Comment&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+----+</span></li><li style="color: inherit">&#124;&nbsp;test3&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;<span style="color: #006699">PRIMARY</span>&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 &nbsp;&#124; &nbsp; &nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124; &nbsp; &nbsp; A &nbsp; &nbsp; &#124; &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;</li><li style="color: inherit"><span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;BTREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li></ol></div><p style="margin: 0px; padding: 0px"></p><p style="margin: 0px; padding: 0px">&nbsp;<span style="color: #333333">Table</span><span style="color: #333333">：表名</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Key_name</span><span style="color: #333333">：什么类型索引（这了是主键）</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Column_name</span><span style="color: #333333">：索引列的字段名</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Cardinality</span><span style="color: #333333">：索引基数，很关键的一个参数，平均数值组</span><span style="color: #333333">=</span><span style="color: #333333">索引基数</span><span style="color: #333333">/</span><span style="color: #333333">表总数据行，平均数值组越接近</span><span style="color: #333333">1</span><span style="color: #333333">就越有可能利用索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Index_type</span><span style="color: #333333">：如果索引是全文索引，则是</span><span style="color: #333333">fulltext,</span><span style="color: #333333">这里是</span><span style="color: #333333">b+tree</span><span style="color: #333333">索引，</span><span style="color: #333333">b+tre</span><span style="color: #333333">也是这篇文章研究的重点之一</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">其他的就不详细介绍，更多：</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">第二部分：</span><span style="color: #333333">MYISAM</span><span style="color: #333333">和</span><span style="color: #333333">INNODB</span><span style="color: #333333">索引结构</span></strong></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">1、&nbsp;</span><span style="color: #333333">简单介绍</span><span style="color: #333333">B-tree B+ tree</span><span style="color: #333333">树</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">B-tree</span><span style="color: #333333">结构视图</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333"><img style="border: none; max-width: 100%" src="read-1.php-6921" tppabs="http://www.phpben.com/uploadfile/13385371120.07680000.jpg" border="0" /></span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">一棵</span><span style="color: #333333">m</span><span style="color: #333333">阶的</span><span style="color: #333333">B-tree</span><span style="color: #333333">树，则有以下性质</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">1</span><span style="color: #333333">）</span><span style="color: #333333">Ki</span><span style="color: #333333">表示关键字值，上图中，</span><span style="color: #333333">k1&lt;k2&lt;&hellip;&lt;ki&lt;k0&lt;Kn(</span><span style="color: #333333">可以看出，一个节点的左子节点关键字值</span><span style="color: #333333">&lt;</span><span style="color: #333333">该关键字值</span><span style="color: #333333">&lt;</span><span style="color: #333333">右子节点关键字值</span><span style="color: #333333">)</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">2</span><span style="color: #333333">）</span><span style="color: #333333">Pi</span><span style="color: #333333">表示指向子节点的指针，左指针指向左子节点，右指针指向右子节点。即是：</span><span style="color: #333333">p1[</span><span style="color: #333333">指向值</span><span style="color: #333333">]&lt;k1&lt;p2[</span><span style="color: #333333">指向值</span><span style="color: #333333">]&lt;k2&hellip;&hellip;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">3</span><span style="color: #333333">）所有关键字必须唯一值（这也是创建</span><span style="color: #333333">myisam&nbsp;</span><span style="color: #333333">和</span><span style="color: #333333">innodb</span><span style="color: #333333">表必须要主键的原因），每个节点包含一个说明该节点多少个关键字，如上图第二行的</span><span style="color: #333333">i</span><span style="color: #333333">和</span><span style="color: #333333">n</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">4</span><span style="color: #333333">）节点：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">每个节点最可以有</span><span style="color: #333333">m</span><span style="color: #333333">个子节点。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">根节点若非叶子节点，至少</span><span style="color: #333333">2</span><span style="color: #333333">个子节点，最多</span><span style="color: #333333">m</span><span style="color: #333333">个子节点</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">每个非根，非叶子节点至少</span><span style="color: #333333">[m/2]</span><span style="color: #333333">子节点或叫子树（</span><span style="color: #333333">[]</span><span style="color: #333333">表示向上取整），最多</span><span style="color: #333333">m</span><span style="color: #333333">个子节点</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">5</span><span style="color: #333333">）关键字：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">根节点的关键字个数</span><span style="color: #333333">1~m-1</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">非根非叶子节点的关键字个数</span><span style="color: #333333">[m/2]-1~m-1,</span><span style="color: #333333">如</span><span style="color: #333333">m=3</span><span style="color: #333333">，则该类节点关键字个数：</span><span style="color: #333333">2-1~2</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">6</span><span style="color: #333333">）关键字数</span><span style="color: #333333">k</span><span style="color: #333333">和指向子节点个数指针</span><span style="color: #333333">p</span><span style="color: #333333">的关系：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">k+1=p&nbsp;</span><span style="color: #333333">，注意根据储存数据的具体需求，左右指针为空时要有标志位表示没有</span></p><p style="margin: 0px; padding: 0px"></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;&nbsp;B+tree</span><span style="color: #333333">结构示意图如下：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333"><img style="border: none; max-width: 100%" src="read-1.php-6920" tppabs="http://www.phpben.com/uploadfile/13385398090.25007700.jpg" border="0" width="549" height="236" /><br /></span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">B+</span><span style="color: #333333">树是</span><span style="color: #333333">B-</span><span style="color: #333333">树的变体，也是一种多路搜索树：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">非叶子结点的子树指针与关键字个数相同</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">为所有叶子结点增加一个链指针（红点标志的箭头）</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;</span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">B+</span><span style="color: #333333">树是</span><span style="color: #333333">B-</span><span style="color: #333333">树的变体，也是一种多路搜索树：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">非叶子结点的子树指针与关键字个数相同</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">为所有叶子结点增加一个链指针（红点标志的箭头）</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">2</span></strong><span style="color: #333333">、&nbsp;</span><strong><span style="color: #333333">MyisAM</span><span style="color: #333333">索引结构</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">MyisAM</span><span style="color: #333333">索引用的</span><span style="color: #333333">B+tree</span><span style="color: #333333">来储存数据，</span><span style="color: #333333">MyisAM</span><span style="color: #333333">索引的指针指向的是键值的地址，地址存储的是数据，如下图：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333"><img style="border: none; max-width: 100%" src="read-1.php-6919" tppabs="http://www.phpben.com/uploadfile/13385413760.76780100.jpg" border="0" width="538" height="450" /></span></p><p style="margin: 0px; padding: 0px">（1）结构讲解：上图3阶树，主键是Col2，Col值就是改行数据保存的物理地址，其中红色部分是说明标注。</p><p style="margin: 0px; padding: 0px">l&nbsp;&nbsp;1标注部分也许会迷惑，前面不是说关键字15右指针的指向键值要大于15，怎么下面还有15关键字？因为B+tree的所以叶子节点包含所有关键字且是按照升序排列（主键索引唯一，辅助索引可以不唯一），所以等于关键字的数据值在右子树</p><p style="margin: 0px; padding: 0px">l&nbsp;&nbsp;2标注是相应关键字存储对应数据的物理地址，注意这也是之后和InnoDB索引不同的地方之一</p><p style="margin: 0px; padding: 0px">l&nbsp;&nbsp;2标注也是一个所说MyiAM表的索引和数据是分离的，索引保存在&rdquo;表名.MYI&rdquo;文件内，而数据保存在&ldquo;表名.MYD&rdquo;文件内，2标注的物理地址就是&ldquo;表名.MYD&rdquo;文件内相应数据的物理地址。（InnoDB表的索引文件和数据文件在一起）</p><p style="margin: 0px; padding: 0px">l&nbsp;&nbsp;辅助索引和主键索引没什么大的区别，辅助索引的索引值是可以重复的（但InnoDB辅助索引和主键索引有很明显的区别，这里先提醒注意一下）</p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">3、&nbsp;</span><span style="color: #333333">Annode</span><span style="color: #333333">索引结构</span></strong></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">1</span><span style="color: #333333">）首先有一个表，内容和主键索引结构如下两图：</span></p><table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">Col1</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">Col2</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">Col3</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">1</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">15</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">phpben</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">2</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">20</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">mhycoe</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">3</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">23</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">phpyu</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">4</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">25</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">bearpa</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">5</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">40</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">phpgoo</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">6</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">45</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">phphao</span></p></td></tr><tr><td valign="top"><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">7</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">48</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">phpxue</span></p></td></tr><tr><td colspan="3" width="172" valign="top"><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">&hellip;&hellip;<br /></span></strong></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px"><span style="color: #333333"><img style="border: none; max-width: 100%" src="read-1.php-6918" tppabs="http://www.phpben.com/uploadfile/13385419510.57150200.jpg" border="0" width="576" height="346" /></span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">结构上：由上图可以看出</span><span style="color: #333333">InnoDB</span><span style="color: #333333">的索引结构很</span><span style="color: #333333">MyisAM</span><span style="color: #333333">的有很明显的区别</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;l&nbsp;&nbsp;</span>MyisAM表的索引和数据是分开的，用指针指向数据的物理地址，而InnoDB表中索引和数据是储存在一起。看红框1可一看出一行数据都保存了。</p><p style="margin: 0px; padding: 0px">&nbsp;l&nbsp;&nbsp;还有一个上图多了三行的隐藏数据列（虚线表），这是因为MyisAM不支持事务，InnoDB处理事务在性能上并发控制上比较好，看图中的红框2中的DB_TRX_ID是事务ID，自动增长；db_roll_ptr是回滚指针，用于事务出错时数据回滚恢复；db_row_id是记录行号，这个值其实在主键索引中就是主键值，这里标出重复是为了容易介绍，还有的是若不是主键索引（辅助索引），db_row_id会找表中unique的列作为值，若没有unique列则系统自动创建一个。关于InnoDB跟多事务MVCC点此：<a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6917  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6917'" tppabs="http://www.phpben.com/?post=72" target="_blank">http://www.phpben.com/?post=72</a>&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（</span><span style="color: #333333">2</span><span style="color: #333333">）加入上表中</span><span style="color: #333333">Col1</span><span style="color: #333333">是主键（下图<strong>标错</strong>），而</span><span style="color: #333333">Col2</span><span style="color: #333333">是辅助索引，则相应的辅助索引结构图：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333"><img style="border: none; max-width: 100%" src="read-1.php-6916" tppabs="http://www.phpben.com/uploadfile/13385420260.39020800.jpg" border="0" width="576" height="265" /></span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">可以看出</span><span style="color: #333333">InnoDB</span><span style="color: #333333">辅助索引并没有保存相应的所有列数据，而是保存了主键的键值（图中</span><span style="color: #333333">1</span><span style="color: #333333">、</span><span style="color: #333333">2</span><span style="color: #333333">、</span><span style="color: #333333">3&hellip;.</span><span style="color: #333333">）这样做利弊也是很明显：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">在已有主键索引，避免数据冗余，同时在修改数据的时候只需修改辅助索引值。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">但辅助索引查找数据事要检索两次，先找到相应的主键索引值然后在去检索主键索引找到对应的数据。这也是网上很多</span><span style="color: #333333">mysql</span><span style="color: #333333">性能优化时提到的&ldquo;主键尽可能简短&rdquo;的原因，主键越长辅助索引也就越大，当然主键索引也越大。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">4、&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">索引与</span><span style="color: #333333">InnoDB</span><span style="color: #333333">索引相比较</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">支持全文索引（</span><span style="color: #333333">FULLTEXT</span><span style="color: #333333">）、压缩索引，</span><span style="color: #333333">InnoDB</span><span style="color: #333333">不支持</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">AnnoDB</span><span style="color: #333333">支持事务，</span><span style="color: #333333">MyisAM</span><span style="color: #333333">不支持</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">顺序储存数据，索引叶子节点保存对应数据行地址，辅助索引很主键索引相差无几；</span><span style="color: #333333">AnnoDB</span><span style="color: #333333">主键节点同时保存数据行，其他辅助索引保存的是主键索引的值</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">键值分离，索引载入内存（</span><span style="color: #333333">key_buffer_size</span><span style="color: #333333">）</span><span style="color: #333333">,</span><span style="color: #333333">数据缓存依赖操作系统；</span><span style="color: #333333">InnoDB</span><span style="color: #333333">键值一起保存，索引与数据一起载入</span><span style="color: #333333">InnoDB</span><span style="color: #333333">缓冲池</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">主键（唯一）索引按升序来存储存储，</span><span style="color: #333333">InnoDB</span><span style="color: #333333">则不一定</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">索引的基数值（</span><span style="color: #333333">Cardinality</span><span style="color: #333333">，</span><span style="color: #333333">show index&nbsp;</span><span style="color: #333333">命令可以看见）是精确的，</span><span style="color: #333333">InnoDB</span><span style="color: #333333">则是估计值。这里涉及到信息统计的知识，</span><span style="color: #333333">MyisAM</span><span style="color: #333333">统计信息是保存磁盘中，在</span><span style="color: #333333">alter</span><span style="color: #333333">表或</span><span style="color: #333333">Analyze table</span><span style="color: #333333">操作更新此信息，而</span><span style="color: #333333">InnoDB</span><span style="color: #333333">则是在表第一次打开的时候估计值保存在缓存区内</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;</span><span style="color: #333333">MyisAM</span><span style="color: #333333">处理字符串索引时用增量保存的方式，如第一个索引是&lsquo;</span><span style="color: #333333">preform</span><span style="color: #333333">&rsquo;，第二个是&lsquo;</span><span style="color: #333333">preformence</span><span style="color: #333333">&rsquo;，则第二个保存是&lsquo;</span><span style="color: #333333">7</span><span style="color: #333333">，</span><span style="color: #333333">ance</span><span style="color: #333333">&lsquo;，这个明显的好处是缩短索引，但是缺陷就是不支持倒序提取索引，必须顺序遍历获取索引</span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">第三部分：</span><span style="color: #333333">MYSQL</span><span style="color: #333333">优化</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">mysql</span><span style="color: #333333">优化是一个重大课题之一，这里会重点详细的介绍</span><span style="color: #333333">mysql</span><span style="color: #333333">优化，包括表数据类型选择，</span><span style="color: #333333">sql</span><span style="color: #333333">语句优化，系统配置与维护优化三类。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">1、&nbsp;&nbsp;</span><span style="color: #333333">表数据类型选择</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（1）&nbsp;</span><span style="color: #333333">能小就用小。表数据类型第一个原则是：使用能正确的表示和存储数据的最短类型。这样可以减少对磁盘空间、内存、</span><span style="color: #333333">cpu</span><span style="color: #333333">缓存的使用。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（2）</span><span style="color: #333333">避免用</span><span style="color: #333333">NULL</span><span style="color: #333333">，这个也是网上优化技术博文传的最多的一个。理由是额外增加字节，还有使索引，索引统计和值更复杂。很多还忽略一</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp; &nbsp; &nbsp;个</span><span style="color: #333333">count(</span><span style="color: #333333">列</span><span style="color: #333333">)</span><span style="color: #333333">的问题，</span><span style="color: #333333">count(</span><span style="color: #333333">列</span><span style="color: #333333">)</span><span style="color: #333333">是不会统计列值为</span><span style="color: #333333">null</span><span style="color: #333333">的行数。更多关于</span><span style="color: #333333">NULL</span><span style="color: #333333">可参考：</span><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6915  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6915'" tppabs="http://www.phpben.com/?post=71" target="_blank">http://www.phpben.com/?post=71</a></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（3）&nbsp;</span>字符串如何选择char和varchar？一般phper能想到就是char是固定大小，varchar能动态储存数据。这里整理一下这两者的区别：<span style="color: #333333"><br /></span></p><table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">属性</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">Char</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">Varchar</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">值域大小</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">最长<strong>字符数</strong>是</span><span style="color: #333333">255（不是字节）</span><span style="color: #333333">，不管什么编码，超过此值则自动截取255个字符保存并没有报错。</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">65535</span><span style="color: #333333">个字节，开始两位存储长度，超过</span><span style="color: #333333">255</span><span style="color: #333333">个字符，用</span><span style="color: #333333">2</span><span style="color: #333333">位储存长度，否则</span><span style="color: #333333">1</span><span style="color: #333333">位，具体字符长度根据编码来确定，如</span><span style="color: #333333">utf8</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">则字符最长是</span><span style="color: #333333">21845</span><span style="color: #333333">个</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">如何处理字符串末尾空格</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">去掉末尾空格，取值出来比较的时候自动加上进行比较</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">Version&lt;=4.1</span><span style="color: #333333">，字符串末尾空格被删掉，</span><span style="color: #333333">version&gt;5.0</span><span style="color: #333333">则保留</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">储存空间</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">固定空间，比喻</span><span style="color: #333333">char(10)</span><span style="color: #333333">不管字符串是否有</span><span style="color: #333333">10</span><span style="color: #333333">个字符都分配</span><span style="color: #333333">10</span><span style="color: #333333">个字符的空间</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">Varchar</span><span style="color: #333333">内节约空间，但更新可能发生变化，若</span><span style="color: #333333">varchar(10),</span><span style="color: #333333">开始若储存</span><span style="color: #333333">5</span><span style="color: #333333">个字符，当</span><span style="color: #333333">update</span><span style="color: #333333">成</span><span style="color: #333333">7</span><span style="color: #333333">个时有</span><span style="color: #333333">myisam</span><span style="color: #333333">可能把行拆开，</span><span style="color: #333333">innodb</span><span style="color: #333333">可能分页，这样开销就增大</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="color: #333333">适用场合</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">适用于存储很短或固定或长度相似字符，如</span><span style="color: #333333">MD5</span><span style="color: #333333">加密的密码</span><span style="color: #333333">char(33)</span><span style="color: #333333">、昵称</span><span style="color: #333333">char(8)</span><span style="color: #333333">等</span></p></td><td valign="top"><p style="margin: 0px; padding: 0px"><span style="color: #333333">当最大长度远大于平均长度并且发生更新的时候。</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">注意当一些英文或数据的时候，最好用每个字符用字节少的类型，如</span><span style="color: #333333">latin1</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（4）&nbsp;</span><span style="color: #333333">整型、整形优先原则</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Tinyint</span><span style="color: #333333">、</span><span style="color: #333333">smallint</span><span style="color: #333333">、</span><span style="color: #333333">mediumint</span><span style="color: #333333">、</span><span style="color: #333333">int</span><span style="color: #333333">、</span><span style="color: #333333">bigint</span><span style="color: #333333">，分别需要</span><span style="color: #333333">8</span><span style="color: #333333">、</span><span style="color: #333333">16</span><span style="color: #333333">、</span><span style="color: #333333">24</span><span style="color: #333333">、</span><span style="color: #333333">32</span><span style="color: #333333">、</span><span style="color: #333333">64</span><span style="color: #333333">。</span></p><p style="margin: 0px; padding: 0px">值域范围：-2^(n-1)~ 2^(n-1)-1</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">很多程序员在设计数据表的时候很习惯的用</span><span style="color: #333333">int</span><span style="color: #333333">，压根不考虑这个问题</span></p><p style="margin: 0px; padding: 0px">笔者建议：能用tinyint的绝不用smallint</p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">误区</span></strong><span style="color: #333333">：</span><span style="color: #333333">int(1)&nbsp;</span><span style="color: #333333">和</span><span style="color: #333333">int(11)</span><span style="color: #333333">是一样的，唯一区别是</span><span style="color: #333333">mysql</span><span style="color: #333333">客户端显示的时候显示多少位。</span></p><p style="margin: 0px; padding: 0px">整形优先原则：能用整形的不用其他类型替换，如ip可以转换成整形保存，如商品价格&lsquo;50.00元&rsquo;则保存成50</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">（5）</span>精确度与空间的转换。<span style="color: #333333">在存储相同数值范围的数据时，浮点数类型通常都会比</span><span style="color: #333333">DECIMAL</span><span style="color: #333333">类型使用更少的空间。</span><span style="color: #333333">FLOAT</span><span style="color: #333333">字段使用</span><span style="color: #333333">4</span><span style="color: #333333">字节存储</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;数据。</span><span style="color: #333333">DOUBLE</span><span style="color: #333333">类型需要</span><span style="color: #333333">8&nbsp;</span><span style="color: #333333">个字节并拥有更高的精确度和更大的数值范围，</span><span style="color: #333333">DECIMAL</span><span style="color: #333333">类型的数据将会转换成</span><span style="color: #333333">DOUBLE</span><span style="color: #333333">类型。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">2、&nbsp;&nbsp;</span><span style="color: #333333">sql</span><span style="color: #333333">语句优化</span></strong>&nbsp;&nbsp;</p><div><ol style="color: #5c5c5c"><li>mysql&gt;&nbsp;<span style="color: #006699">create</span>&nbsp;<span style="color: #006699">table</span>&nbsp;one&nbsp;(</li><li>id&nbsp;<span style="color: #006699">smallint</span>(10)&nbsp;<span style="color: black">not</span>&nbsp;<span style="color: black">null</span>&nbsp;auto_increment&nbsp;<span style="color: #006699">primary</span>&nbsp;<span style="color: #006699">key</span>,&nbsp;&nbsp;</li><li style="color: inherit">username&nbsp;<span style="color: #006699">char</span>(8)&nbsp;<span style="color: black">not</span>&nbsp;<span style="color: black">null</span>,&nbsp;&nbsp;</li><li><span style="color: #006699">password</span>&nbsp;<span style="color: #006699">char</span>(4)&nbsp;<span style="color: black">not</span>&nbsp;<span style="color: black">null</span>,&nbsp;&nbsp;</li><li style="color: inherit">`<span style="color: #006699">level</span>`&nbsp;tinyint&nbsp;(1)&nbsp;<span style="color: #006699">default</span>&nbsp;0,&nbsp;&nbsp;</li><li>last_login&nbsp;<span style="color: #006699">char</span>(15)&nbsp;<span style="color: black">not</span>&nbsp;<span style="color: black">null</span>,&nbsp;&nbsp;</li><li style="color: inherit"><span style="color: #006699">index</span>(username,<span style="color: #006699">password</span>,last_login))engine=innodb;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">这是</span><span style="color: #333333">test</span><span style="color: #333333">表，其中</span><span style="color: #333333">id</span><span style="color: #333333">是主键，多列索引</span><span style="color: #333333">(username,password,last_login),</span><span style="color: #333333">里面有</span><span style="color: #333333">10000多</span><span style="color: #333333">条数据</span><span style="color: #333333">.</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">&#124;&nbsp;<span style="color: #006699">Table</span>&nbsp;&#124;&nbsp;Non_unique&nbsp;&#124;&nbsp;Key_name&nbsp;&#124;&nbsp;Seq_in_index&nbsp;&#124;&nbsp;Column_name&nbsp;&#124;&nbsp;Collation&nbsp;&#124;&nbsp;Cardinality&nbsp;&#124;&nbsp;Sub_part&nbsp;&#124;&nbsp;Packed&nbsp;&#124;&nbsp;<span style="color: black">Null</span>&nbsp;&#124;</li><li style="color: inherit">&nbsp;Index_type&nbsp;&#124;&nbsp;Comment&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li><li style="color: inherit">&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;<span style="color: #006699">PRIMARY</span>&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;20242&nbsp;&#124;&nbsp;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&#124;</li><li style="color: inherit">&nbsp;BTREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li><li>&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;10121&nbsp;&#124;&nbsp;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;</li><li>BTREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li><li style="color: inherit">&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&#124;&nbsp;<span style="color: #006699">password</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;10121&nbsp;&#124;&nbsp;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&#124;&nbsp;YES&nbsp;&nbsp;&#124;</li><li style="color: inherit">&nbsp;BTREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li><li>&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&#124;&nbsp;last_login&nbsp;&nbsp;&#124;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;20242&nbsp;&#124;&nbsp;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;</li><li>&nbsp;BTREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+</span></li></ol></div><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">最左前缀原则</span></strong></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">定义</span></strong><span style="color: #333333">：最左前缀原则指的的是在</span><span style="color: #333333">sql where&nbsp;</span><span style="color: #333333">字句中一些条件或表达式中出现的列的顺序要保持和多索引的一致或以多列索引顺序出现，只要出现非顺序出现、断层都无法利用到多列索引。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">举例说明：上面给出一个多列索引</span><span style="color: #333333">(username,password,last_login)</span><span style="color: #333333">，当三列在</span><span style="color: #333333">where</span><span style="color: #333333">中出现的顺序如</span><span style="color: #333333">(username,password,last_login)</span><span style="color: #333333">、</span><span style="color: #333333">(username,password)</span><span style="color: #333333">、</span><span style="color: #333333">(username)</span><span style="color: #333333">才能用到索引，如下面几个顺序</span><span style="color: #333333">(password,last_login)</span><span style="color: #333333">、</span><span style="color: #333333">(passwrod)</span><span style="color: #333333">、</span><span style="color: #333333">(last_login)---</span><span style="color: #333333">这三者不从</span><span style="color: #333333">username</span><span style="color: #333333">开始，</span><span style="color: #333333">(username,last_login)---</span><span style="color: #333333">断层，少了</span><span style="color: #333333">password</span><span style="color: #333333">，都无法利用到索引。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">因为</span><span style="color: #333333">B+tree</span><span style="color: #333333">多列索引保存的顺序是按照索引创建的顺序，检索索引时按照此顺序检索</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">测试</span></strong><span style="color: #333333">：以下测试不精确，这里只是说明如何才能正确按照最左前缀原则使用索引。还有的是以下的测试用的时间</span><span style="color: #333333">0.00sec</span><span style="color: #333333">看不出什么时间区别，因为数据量只有</span><span style="color: #333333">20003</span><span style="color: #333333">条，加上没有在实体机上运行，很多未可预知的影响因素都没考虑进去。当在大数据量，高并发的时候，最左前缀原则对与提高性能方面是不可否认的。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">Ps</span></strong><span style="color: #333333">：最左前缀原则中</span><span style="color: #333333">where</span><span style="color: #333333">字句有</span><span style="color: #333333">or</span><span style="color: #333333">出现还是会遍历全表</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1.1)</span><span style="color: #333333">能正确的利用索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where</span><span style="color: #333333">子句表达式</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">顺序是</span><span style="color: #333333">(username)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>; &nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&nbsp;&#124;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124; &nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const&nbsp;&#124;5&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124; &nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where</span><span style="color: #333333">子句表达式</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">顺序是</span><span style="color: #333333">(username,password)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>=<span style="color: blue">'123456'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const,const&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where</span><span style="color: #333333">子句表达式</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">顺序是</span><span style="color: #333333">(username,password, last_login)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>=<span style="color: blue">'123456'</span><span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338251170'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const,const,const&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">上面可以看出</span><span style="color: #333333">type=ref&nbsp;</span><span style="color: #333333">是多列索引，</span><span style="color: #333333">key_len</span><span style="color: #333333">分别是</span><span style="color: #333333">24</span><span style="color: #333333">、</span><span style="color: #333333">43</span><span style="color: #333333">、</span><span style="color: #333333">83</span><span style="color: #333333">，这说明用到的索引分别是</span><span style="color: #333333">(username), (username,password), (username,password, last_login );row</span><span style="color: #333333">分别是</span><span style="color: #333333">5</span><span style="color: #333333">、</span><span style="color: #333333">1</span><span style="color: #333333">、</span><span style="color: #333333">1</span><span style="color: #333333">检索的数据行都很少，因为这三个查询都按照索引前缀原则，可以利用到索引。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1.2)</span><span style="color: #333333">不能正确的利用索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where</span><span style="color: #333333">子句表达式</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">顺序是</span><span style="color: #333333">(password, last_login)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;<span style="color: #006699">password</span>=<span style="color: blue">'123456'</span><span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338251170'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;20146&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where&nbsp;</span><span style="color: #333333">子句表达式顺序是</span><span style="color: #333333">(last_login)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;last_login=<span style="color: blue">'1338252525'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;20146&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">以上的两条语句都不是以</span><span style="color: #333333">username</span><span style="color: #333333">开始，这样是用不了索引，通过</span><span style="color: #333333">type=all</span><span style="color: #333333">（全表扫描），</span><span style="color: #333333">key_len=null</span><span style="color: #333333">，</span><span style="color: #333333">rows</span><span style="color: #333333">都很大</span><span style="color: #333333">20146</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Ps</span><span style="color: #333333">：</span><span style="color: #333333">one</span><span style="color: #333333">表里只有</span><span style="color: #333333">20003</span><span style="color: #333333">条数据，为什么出现</span><span style="color: #333333">20146</span><span style="color: #333333">，这是优化器对表的一个估算值，不精确的。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Where&nbsp;</span><span style="color: #333333">子句表达式虽然顺序是</span><span style="color: #333333">(username,password, last_login)</span><span style="color: #333333">或</span><span style="color: #333333">(username,password)</span><span style="color: #333333">但第一个是有范围</span><span style="color: #333333">&rsquo;&lt;&rsquo;</span><span style="color: #333333">、</span><span style="color: #333333">&rsquo;&gt;&rsquo;</span><span style="color: #333333">，</span><span style="color: #333333">&rsquo;&lt;=&rsquo;</span><span style="color: #333333">，</span><span style="color: #333333">&rsquo;&gt;=&rsquo;</span><span style="color: #333333">等出现</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username&gt;<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>&nbsp;=<span style="color: blue">'123456'</span><span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338251170'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;20146&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个查询很明显是遍历所有表，一个索引都没用到，非第一列出现范围（</span><span style="color: #333333">password</span><span style="color: #333333">列或</span><span style="color: #333333">last_login</span><span style="color: #333333">列），则能利用索引到首先出现范围的一列，也就是&ldquo;</span><span style="color: #333333">where username='abgvwfnt' and password &gt;'123456'and last_login='1338251170';</span><span style="color: #333333">&rdquo;或则&ldquo;</span><span style="color: #333333">where username='abgvwfnt' and password &gt;'123456'and last_login&lt;'1338251170';</span><span style="color: #333333">&rdquo;索引长度</span><span style="color: #333333">ref_len=43,</span><span style="color: #333333">索引检索到</span><span style="color: #333333">password</span><span style="color: #333333">列，所以考虑多列索引的时候把那些查询语句用的比较的列放在最后（或非第一位）。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">断层，即是</span><span style="color: #333333">where</span><span style="color: #333333">顺序</span><span style="color: #333333">(username, last_login)</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338252525'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const&nbsp;&#124;5&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">注意</span></strong><span style="color: #333333">这里的</span><span style="color: #333333">key_len=24=8*3(8</span><span style="color: #333333">是</span><span style="color: #333333">username</span><span style="color: #333333">的长度，</span><span style="color: #333333">3</span><span style="color: #333333">是</span><span style="color: #333333">utf8</span><span style="color: #333333">编码</span><span style="color: #333333">)</span><span style="color: #333333">，</span><span style="color: #333333">rows=5</span><span style="color: #333333">，和下面一条</span><span style="color: #333333">sql</span><span style="color: #333333">语句搜索出来一样</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;<span style="color: #006699">password</span>&nbsp;&#124;&nbsp;<span style="color: #006699">level</span>&nbsp;&#124;&nbsp;last_login&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;3597&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;234567&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338251420&nbsp;&#124;&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;7693&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338251717&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;11789&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338251992&nbsp;&#124;&nbsp;&nbsp;</li><li>&#124;&nbsp;15885&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338252258&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;19981&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338252525&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">5&nbsp;<span style="color: #006699">rows</span>&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li style="color: inherit">mysql&gt;&nbsp;&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338252525'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;<span style="color: #006699">password</span>&nbsp;&#124;&nbsp;<span style="color: #006699">level</span>&nbsp;&#124;&nbsp;last_login&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;19981&nbsp;&#124;&nbsp;abgvwfnt&nbsp;&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&#124;&nbsp;1338252525&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">-------+----------+----------+-------+------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个就是要的返回结果，所以可以知道断层</span><span style="color: #333333">(username,last_login)</span><span style="color: #333333">，这样只用到</span><span style="color: #333333">username</span><span style="color: #333333">索引，把用到索引的数据再重新检查</span><span style="color: #333333">last_login</span><span style="color: #333333">条件，这个相对全表查询来说还是有性能上优化，这也是很多</span><span style="color: #333333">sql</span><span style="color: #333333">优化文章中提到的</span><span style="color: #333333">where&nbsp;</span><span style="color: #333333">范围查询要放在最后（这不绝对，但可以利用一部分索引）</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1.3)</span><span style="color: #333333">如果一个查询</span><span style="color: #333333">where</span><span style="color: #333333">子句中确实不需要</span><span style="color: #333333">password</span><span style="color: #333333">列，那就用&ldquo;补洞&rdquo;。</span></strong></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;<span style="color: #006699">select</span>&nbsp;<span style="color: #006699">distinct</span>(<span style="color: #006699">password</span>)&nbsp;<span style="color: #006699">from</span>&nbsp;one;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;<span style="color: #006699">password</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;234567&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>&#124;&nbsp;345678&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;456789&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>&#124;&nbsp;123456&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----------+</span>&nbsp;&nbsp;</li><li style="color: inherit"><span style="color: #333333">4 rows in set (0.08 sec)</span></li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">可以看出</span><span style="color: #333333">password</span><span style="color: #333333">列中只有这几个值，当然在现实中不可能密码有这么多一样的，再说数据也可能不断更新，这里只是举例说明补洞的方法</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>&nbsp;<span style="color: black">in</span>(<span style="color: blue">'123456'</span>,<span style="color: blue">'234567'</span>,<span style="color: blue">'345678'</span>,<span style="color: blue">'456789'</span>)</li><li style="color: inherit"><span style="color: black">and</span>&nbsp;last_login=<span style="color: blue">'1338251170'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&#124;&nbsp;range&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&#124;&nbsp;83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;4&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">可以看出</span><span style="color: #333333">ref=83&nbsp;</span><span style="color: #333333">所有的索引都用到了，</span><span style="color: #333333">type=range</span><span style="color: #333333">是因为用了</span><span style="color: #333333">in</span><span style="color: #333333">子句。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个被&ldquo;补洞&rdquo;列中的值应该是有限的，可预知的，如性别，其值只有男和女（加多一个不男不女也无妨）。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&ldquo;补洞&rdquo;方法也有瓶颈，当很多列，且需要补洞的相应列（可以多列）的值虽有限但很多（如中国城市）的时候，优化器在优化时组合起来的数量是很大，这样的话就要做好基准测试和性能分析，权衡得失，取得一个合理的优化方法。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1.4)like</span></strong></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username&nbsp;<span style="color: black">like</span>&nbsp;<span style="color: blue">'abgvwfnt%'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;range&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+----------+---------+------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li><li>mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username&nbsp;<span style="color: black">like</span>&nbsp;<span style="color: blue">'%abgvwfnt%'</span>;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;20259&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li>1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.01&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">对比就知道</span><span style="color: #333333">like</span><span style="color: #333333">操作</span><span style="color: #333333">abgvwfnt%</span><span style="color: #333333">能用到索引，</span><span style="color: #333333">%abgvwfnt%</span><span style="color: #333333">用不到</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">---------------------------------------------------------------------------------------------</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(2)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">Order by&nbsp;</span><span style="color: #333333">优化</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.1)filesort</span><span style="color: #333333">优化算法</span><span style="color: #333333">.</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">在</span><span style="color: #333333">mysql version()&lt;4.1</span><span style="color: #333333">之前，优化器采用的是</span><span style="color: #333333">filesort</span><span style="color: #333333">第一种优化算法，先提取键值和指针，排序后再去提取数据，前后要搜索数据两次，第一次若能使用索引则使用，第二次是随机读（当然不同引擎也不同）。</span><span style="color: #333333">mysql version()&gt;=4.1,</span><span style="color: #333333">更新了一个新算法，就是在第一次读的时候也把</span><span style="color: #333333">selcet</span><span style="color: #333333">的列也读出来，然后在</span><span style="color: #333333">sort_buffer_size</span><span style="color: #333333">中排序（不够大则建临时表保存排序顺序），这算法只需要一次读取数据。所以有这个广为人传的一个优化方法，那就是增大</span><span style="color: #333333">sort_buffer_size</span><span style="color: #333333">。</span><span style="color: #333333">Filesort</span><span style="color: #333333">第二种算法要用到更的空间，</span><span style="color: #333333">sort_buffer_size</span><span style="color: #333333">不够大反而会影响速度，所以</span><span style="color: #333333">mysql</span><span style="color: #333333">开发团队定了个变量</span><span style="color: #333333">max_length_for_sort_data</span><span style="color: #333333">，当算法中读出来的需要列的数据的大小超过该变量的值才使用，所以一般性能分析的时候会尝试把</span><span style="color: #333333">max_length_for_sort_data</span><span style="color: #333333">改小。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.2)</span><span style="color: #333333">单独</span><span style="color: #333333">order by&nbsp;</span><span style="color: #333333">用不了索引，索引考虑加</span><span style="color: #333333">where&nbsp;</span><span style="color: #333333">或加</span><span style="color: #333333">limit</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">先建一个索引</span><span style="color: #333333">(last_login),建的过程就不给出了</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">order</span>&nbsp;<span style="color: #006699">by</span>&nbsp;last_login&nbsp;<span style="color: #006699">desc</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+----------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+----------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;2046&nbsp;&nbsp;</li><li style="color: inherit">3&nbsp;&#124;&nbsp;Using&nbsp;filesort&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+----------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">order</span>&nbsp;<span style="color: #006699">by</span>&nbsp;last_login&nbsp;<span style="color: #006699">desc</span>&nbsp;limit&nbsp;10;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+------------+---------+------+------+-------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;</li><li>&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+-------+---------------+------------+---------+------+------+-------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">index</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;last_login&nbsp;&nbsp;&#124;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;</li><li style="color: inherit">&nbsp;&#124;&nbsp;&nbsp;&nbsp;10&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+-------+---------------+------------+---------+------+------+-------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">开始没</span><span style="color: #333333">limit</span><span style="color: #333333">查询是遍历表的，加了</span><span style="color: #333333">limit</span><span style="color: #333333">后，索引可以使用，看</span><span style="color: #333333">key_len&nbsp;</span><span style="color: #333333">和</span><span style="color: #333333">key</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.3)where + orerby&nbsp;</span><span style="color: #333333">类型，</span><span style="color: #333333">where</span><span style="color: #333333">满足最左前缀原则，且</span><span style="color: #333333">orderby</span><span style="color: #333333">的列和</span><span style="color: #333333">where</span><span style="color: #333333">子句用到的索引的列的子集。即是</span><span style="color: #333333">(a,b,c)</span><span style="color: #333333">索引，</span><span style="color: #333333">where</span><span style="color: #333333">满足最左前缀原则且</span><span style="color: #333333">order by</span><span style="color: #333333">中列</span><span style="color: #333333">a</span><span style="color: #333333">、</span><span style="color: #333333">b</span><span style="color: #333333">、</span><span style="color: #333333">c</span><span style="color: #333333">的任意组合</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>&nbsp;='123456&nbsp;&nbsp;</li><li><span style="color: blue">'&nbsp;and&nbsp;last_login='</span>1338251001'&nbsp;<span style="color: #006699">order</span>&nbsp;<span style="color: #006699">by</span>&nbsp;<span style="color: #006699">password</span>&nbsp;<span style="color: #006699">desc</span>,last_login&nbsp;<span style="color: #006699">desc</span>;&nbsp;&nbsp;</li><li style="color: inherit">&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li style="color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const,c&nbsp;&nbsp;</li><li>onst,const&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-------------+</span>&nbsp;&nbsp;</li><li>1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec)&nbsp;&nbsp;</li><li style="color: inherit">&nbsp;&nbsp;</li><li>mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username=<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">and</span>&nbsp;<span style="color: #006699">password</span>&nbsp;='123456&nbsp;&nbsp;</li><li style="color: inherit"><span style="color: blue">'&nbsp;and&nbsp;last_login='</span>1338251001'&nbsp;<span style="color: #006699">order</span>&nbsp;<span style="color: #006699">by</span>&nbsp;<span style="color: #006699">password</span>&nbsp;<span style="color: #006699">desc</span>,<span style="color: #006699">level</span>&nbsp;<span style="color: #006699">desc</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+----------------------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-----------------------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&#124;&nbsp;83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const,c&nbsp;&nbsp;</li><li>onst,const&nbsp;&#124;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>;&nbsp;Using&nbsp;filesort&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+----------+---------+-------------------+------+-----------------------------+</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">上面两条语句明显的区别是多了一个非索引列</span><span style="color: #333333">level</span><span style="color: #333333">的排序，在</span><span style="color: #333333">extra</span><span style="color: #333333">这列对了</span><span style="color: #333333">Using filesort</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">笔者测试结果：</span><span style="color: #333333">where</span><span style="color: #333333">满足最左前缀且</span><span style="color: #333333">order by</span><span style="color: #333333">中的列是该多列索引的子集时（也就是说</span><span style="color: #333333">orerby</span><span style="color: #333333">中没最左前缀原则限制），不管是否有</span><span style="color: #333333">asc ,desc</span><span style="color: #333333">混合出现，都能用索引来满足</span><span style="color: #333333">order by</span><span style="color: #333333">。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">笔者测试过，因为篇幅比较大，这里就不一一列出。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Ps:</span><span style="color: #333333">很优化博文都说</span><span style="color: #333333">order by</span><span style="color: #333333">中的列要</span><span style="color: #333333">where</span><span style="color: #333333">中出现的列（是索引）的顺序一致，笔者认为不够严谨。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.3) where + orerby+limit</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个其实也差不多，只要</span><span style="color: #333333">where</span><span style="color: #333333">最左前缀，</span><span style="color: #333333">orderby</span><span style="color: #333333">也正确，</span><span style="color: #333333">limit</span><span style="color: #333333">在此影响不大</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(2.4)</span><span style="color: #333333">如何考虑</span><span style="color: #333333">order by</span><span style="color: #333333">来建索引</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个回归到创建索引的问题来，在比较常用的</span><span style="color: #333333">oder by</span><span style="color: #333333">的列和</span><span style="color: #333333">where</span><span style="color: #333333">中常用的列建立多列索引，这样优化起来的广度和扩张性都比较好，当然如果要考虑</span><span style="color: #333333">UNION</span><span style="color: #333333">、</span><span style="color: #333333">JOIN</span><span style="color: #333333">、</span><span style="color: #333333">COUNT</span><span style="color: #333333">、</span><span style="color: #333333">IN</span><span style="color: #333333">等进来就复杂很多了</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(3)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">隔离列</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">隔离列是只查询语句中把索引列隔离出来，也就是说不能在语句中把列包含进表达式中，如</span><span style="color: #333333">id+1=2</span><span style="color: #333333">、</span><span style="color: #333333">inet_aton('210.38.196.138')---ip</span><span style="color: #333333">转换成整数、</span><span style="color: #333333">convert(123,char(3))---</span><span style="color: #333333">数字转换成字符串、</span><span style="color: #333333">date</span><span style="color: #333333">函数等</span><span style="color: #333333">mysql</span><span style="color: #333333">内置的大多函数。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">非隔离列影响性能很大甚至是致命的，这也就是赶集网石展的《三十六军规》中的一条，虽然他没说明是隔离列。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">以下就测试一下：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">首先建立一个索引</span><span style="color: #333333">(last_login )</span><span style="color: #333333">，这里就不给出建立的代码了，且把</span><span style="color: #333333">last_login</span><span style="color: #333333">改成整型（这里只是为了方便测试，并不是影响条件）</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;last_login&nbsp;=&nbsp;8388605;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------------+---------+-------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------------+---------+-------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;last_login&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;last_login&nbsp;&#124;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;const&nbsp;&nbsp;</li><li>&nbsp;&#124;&nbsp;1&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------------+---------+-------+-------+-------------+</span>&nbsp;&nbsp;</li><li>1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>,&nbsp;1&nbsp;warning&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">容易看出建的索引已起效</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;last_login&nbsp;+1=&nbsp;8388606&nbsp;;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&#124;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;2049&nbsp;&nbsp;</li><li style="color: inherit">7&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">last_login +1=8388608</span><span style="color: #333333">非隔离列的出现导致查找的列</span><span style="color: #333333">20197</span><span style="color: #333333">，说明是遍历整张表且索引不能使用。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">这是因为这条语句要找出所有</span><span style="color: #333333">last_login</span><span style="color: #333333">的数据，然后</span><span style="color: #333333">+1</span><span style="color: #333333">再和</span><span style="color: #333333">20197</span><span style="color: #333333">比较，优化器在这方面比较差，性能很差。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">所以要尽可能的把列隔离出来，如</span><span style="color: #333333">last_login +1=</span>&nbsp;<span style="color: #333333">8388606</span><span style="color: #333333">改成</span><span style="color: #333333">login_login=8388607,</span><span style="color: #333333">或者把计算、转换等操作先用</span><span style="color: #333333">php</span><span style="color: #333333">函数处理过再传递给</span><span style="color: #333333">mysql</span><span style="color: #333333">服务器</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(4)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">OR</span><span style="color: #333333">、</span><span style="color: #333333">IN</span><span style="color: #333333">、</span><span style="color: #333333">UNION ALL</span><span style="color: #333333">，可以尝试用</span><span style="color: #333333">UNION ALL</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.1)or</span><span style="color: #333333">会遍历表就算有索引</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;explain&nbsp;<span style="color: #006699">select</span>&nbsp;*&nbsp;<span style="color: #006699">from</span>&nbsp;one&nbsp;<span style="color: #006699">where</span>&nbsp;username&nbsp;=&nbsp;<span style="color: blue">'abgvwfnt'</span>&nbsp;<span style="color: black">or</span>&nbsp;<span style="color: #006699">password</span>=<span style="color: blue">'123456'</span>;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;id&nbsp;&#124;&nbsp;select_type&nbsp;&#124;&nbsp;<span style="color: #006699">table</span>&nbsp;&#124;&nbsp;type&nbsp;&#124;&nbsp;possible_keys&nbsp;&#124;&nbsp;<span style="color: #006699">key</span>&nbsp;&nbsp;&#124;&nbsp;key_len&nbsp;&#124;&nbsp;ref&nbsp;&nbsp;&#124;&nbsp;<span style="color: #006699">rows</span>&#124;&nbsp;&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;1&nbsp;&#124;&nbsp;SIMPLE&nbsp;&nbsp;&nbsp;&#124;&nbsp;one&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">ALL</span>&nbsp;&nbsp;&#124;&nbsp;username&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;<span style="color: black">NULL</span>&nbsp;&#124;&nbsp;20259&nbsp;&#124;&nbsp;Using&nbsp;<span style="color: #006699">where</span>&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">----+-------------+-------+------+---------------+------+---------+------+-------+-------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.00&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.2)</span><span style="color: #333333">对于</span><span style="color: #333333">in</span><span style="color: #333333">，这个是有争议的，网上很多优化方案中都提到尽量少用</span><span style="color: #333333">in</span><span style="color: #333333">，这不全面，其实在</span><span style="color: #333333">in</span><span style="color: #333333">里面如果是常量的话，可一大胆的用</span><span style="color: #333333">in</span><span style="color: #333333">，这个也是赶集网石展、阿里</span><span style="color: #333333">hellodab</span><span style="color: #333333">的观点（笔者从微博中获知）。应用</span><span style="color: #333333">hellodab</span><span style="color: #333333">一句话&ldquo;</span><span style="color: #333333">MySQL</span><span style="color: #333333">用</span><span style="color: #333333">IN</span><span style="color: #333333">效率不好，通常是指</span><span style="color: #333333">in</span><span style="color: #333333">中嵌套一个子查询，因为</span><span style="color: #333333">MySQL</span><span style="color: #333333">的查询重写可能会产生一个不好的执行计划，而如果</span><span style="color: #333333">in</span><span style="color: #333333">里面是常量的话，我认为性能没有任何问题，可以放心使用&rdquo;</span><span style="color: #333333">---------</span><span style="color: #333333">当然对于这个比较的话，没有实战数据的话很难辩解，就算有，影响性能的因素也很多，也许会每个</span><span style="color: #333333">dba</span><span style="color: #333333">都有不同的测试结果</span><span style="color: #333333">.</span><span style="color: #333333">这也签名最左前缀中&ldquo;补洞&rdquo;一个方法</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">(4.3)UNION All&nbsp;</span><span style="color: #333333">直接返回并集，可以避免去重的开销。之所说&ldquo;尝试&rdquo;用</span><span style="color: #333333">UNION All&nbsp;</span><span style="color: #333333">替代</span><span style="color: #333333">&nbsp;OR</span><span style="color: #333333">来优化</span><span style="color: #333333">sql</span><span style="color: #333333">语句，因为这不是一直能优化的了，这里只是作为一个方法去尝试。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(5)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">索引选择性</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">索引选择性是不重复的索引值也叫基数（</span><span style="color: #333333">cardinality</span><span style="color: #333333">）表中数据行数的比值，索引选择性</span><span style="color: #333333">=</span><span style="color: #333333">基数</span><span style="color: #333333">/</span><span style="color: #333333">数据行，基数可以通过&ldquo;</span><span style="color: #333333">show index from&nbsp;</span><span style="color: #333333">表名</span><span style="color: #333333">&rdquo;查看。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">高索引选择性的好处就是</span><span style="color: #333333">mysql</span><span style="color: #333333">查找匹配的时候可以过滤更多的行，唯一索引的选择性最佳，值为</span><span style="color: #333333">1</span><span style="color: #333333">。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">那么对于非唯一索引或者说要被创建索引的列的数据内容很长，那就要选择索引前缀。这里就简单说明一下：</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">mysql&gt;&nbsp;<span style="color: #006699">select</span>&nbsp;<span style="color: black">count</span>(<span style="color: #006699">distinct</span>(username))/<span style="color: black">count</span>(*)&nbsp;&nbsp;<span style="color: #006699">from</span>&nbsp;one;&nbsp;&nbsp;</li><li>+<span style="color: #008200">------------------------------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;<span style="color: black">count</span>(<span style="color: #006699">distinct</span>(username))/<span style="color: black">count</span>(*)&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">------------------------------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">&#124;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.2047&nbsp;&#124;&nbsp;&nbsp;</li><li>+<span style="color: #008200">------------------------------------+</span>&nbsp;&nbsp;</li><li style="color: inherit">1&nbsp;row&nbsp;<span style="color: black">in</span>&nbsp;<span style="color: #006699">set</span>&nbsp;(0.09&nbsp;sec) &nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">count(distinct(username))/count(*)</span><span style="color: #333333">就是索引选择性的值，这里</span><span style="color: #333333">0.2</span><span style="color: #333333">太小了。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">假如</span><span style="color: #333333">username</span><span style="color: #333333">列数据很长，则可以通过</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">select count(distinct(concat(first_name, left(last_name,&nbsp;<strong>N</strong>))/count(*)&nbsp; from one;</span><span style="color: #333333">测试出接近</span><span style="color: #333333">1</span><span style="color: #333333">的索引选择性，其中</span><span style="color: #333333">N</span><span style="color: #333333">是索引的长度，穷举法去找出</span><span style="color: #333333">N</span><span style="color: #333333">的值，然后再建索引。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(6)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">重复或多余索引</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">很多</span><span style="color: #333333">phper</span><span style="color: #333333">开始都以为建索引相对多点性能就好点，压根没考虑到有些索引是重复的，比如建一个</span><span style="color: #333333">(username),(username,password), (username,password,last_login),</span><span style="color: #333333">很明显第一个索引是重复的，因为后两者都能满足其功能。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">要有个意识就是，在满足功能需求的情况下建最少索引。对于</span><span style="color: #333333">INNODB</span><span style="color: #333333">引擎的索引来说，每次修改数据都要把主键索引，辅助索引中相应索引值修改，这可能会出现大量数据迁移，分页，以及碎片的出现。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">3</span><span style="color: #333333">、</span><span style="color: #333333">系统配置与维护优化</span></strong></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(1)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">重要的一些变量</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">key_buffer_size</span><span style="color: #333333">索引块缓存区大小</span><span style="color: #333333">,&nbsp;</span><span style="color: #333333">针对</span><span style="color: #333333">MyISAM</span><span style="color: #333333">存储引擎</span><span style="color: #333333">,</span><span style="color: #333333">该值越大</span><span style="color: #333333">,</span><span style="color: #333333">性能越好</span><span style="color: #333333">.</span><span style="color: #333333">但是超过操作系统能承受的最大值</span><span style="color: #333333">,</span><span style="color: #333333">反而会使</span><span style="color: #333333">mysql</span><span style="color: #333333">变得不稳定</span><span style="color: #333333">. ----</span><span style="color: #333333">这是很重要的参数</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">sort_buffer_size&nbsp;</span><span style="color: #333333">这是索引在排序缓冲区大小，若排序数据大小超过该值，则创建临时文件，注意和</span><span style="color: #333333">myisam_sort_buffer_size</span><span style="color: #333333">的区别</span><span style="color: #333333">----</span><span style="color: #333333">这是很重要的参数</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">read_rnd_buffer_size</span><span style="color: #333333">当排序后按排序后的顺序读取行时，则通过该缓冲区读取行，避免搜索硬盘。将该变量设置为较大的值可以大大改进</span><span style="color: #333333">ORDER BY</span><span style="color: #333333">的性能。但是，这是为每个客户端分配的缓冲区，因此你不应将全局变量设置为较大的值。相反，只为需要运行大查询的客户端更改会话变量</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">join_buffer_size</span><span style="color: #333333">用于表间关联</span><span style="color: #333333">(join)</span><span style="color: #333333">的缓存大小</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">tmp_table_size</span><span style="color: #333333">缓存表的大小</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">table_cache</span><span style="color: #333333">允许</span><span style="color: #333333">&nbsp;MySQL&nbsp;</span><span style="color: #333333">打开的表的最大个数，并且这些都</span><span style="color: #333333">cache</span><span style="color: #333333">在内存中</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">delay_key_write</span><span style="color: #333333">针对</span><span style="color: #333333">MyISAM</span><span style="color: #333333">存储引擎</span><span style="color: #333333">,</span><span style="color: #333333">延迟更新索引</span><span style="color: #333333">.</span><span style="color: #333333">意思是说</span><span style="color: #333333">,update</span><span style="color: #333333">记录时</span><span style="color: #333333">,</span><span style="color: #333333">先将数据</span><span style="color: #333333">up</span><span style="color: #333333">到磁盘</span><span style="color: #333333">,</span><span style="color: #333333">但不</span><span style="color: #333333">up</span><span style="color: #333333">索引</span><span style="color: #333333">,</span><span style="color: #333333">将索引存在内存里</span><span style="color: #333333">,</span><span style="color: #333333">当表关闭时</span><span style="color: #333333">,</span><span style="color: #333333">将内存索引</span><span style="color: #333333">,</span><span style="color: #333333">写到磁盘</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">更多参数查看</span><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6914  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6914'" tppabs="http://www.phpben.com/?post=70" target="_blank">http://www.phpben.com/?post=70</a></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(2)&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #333333">optimize</span><span style="color: #333333">、</span><span style="color: #333333">Analyze</span><span style="color: #333333">、</span><span style="color: #333333">check</span><span style="color: #333333">、</span><span style="color: #333333">repair</span><span style="color: #333333">维护操作</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">optimize&nbsp;</span><span style="color: #333333">数据在插入，更新，删除的时候难免一些数据迁移，分页，之后就出现一些碎片，久而久之碎片积累起来影响性能，这就需要</span><span style="color: #333333">DBA</span><span style="color: #333333">定期的优化数据库减少碎片，这就通过</span><span style="color: #333333">optimize</span><span style="color: #333333">命令。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">如对</span><span style="color: #333333">MyisAM</span><span style="color: #333333">表操作：</span><span style="color: #333333">optimize table&nbsp;</span><span style="color: #333333">表名</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">对于</span><span style="color: #333333">InnoDB</span><span style="color: #333333">表是不支持</span><span style="color: #333333">optimize</span><span style="color: #333333">操作，否则提示&ldquo;</span><span style="color: #333333">Table does not support optimize, doing recreate + analyze instead</span><span style="color: #333333">&rdquo;，当然也可以通过命令：</span><span style="color: #333333">alter table one type=innodb;&nbsp;</span><span style="color: #333333">来替代。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Analyze</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">用来分析和存储表的关键字的分布，使得系统获得准确的统计信息，影响</span><span style="color: #333333">&nbsp;SQL&nbsp;</span><span style="color: #333333">的执行计划的生成。对于数据基本没有发生变化的表，是不需要经常进行表分析的。但是如果表的数据量变化很明显，用户感觉实际的执行计划和预期的执行计划不</span><span style="color: #333333">&nbsp;</span><span style="color: #333333">同的时候，执行一次表分析可能有助于产生预期的执行计划。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">Analyze table&nbsp;</span><span style="color: #333333">表名</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Check</span><span style="color: #333333">检查表或者视图是否存在错误，对</span><span style="color: #333333">&nbsp;MyISAM&nbsp;</span><span style="color: #333333">和</span><span style="color: #333333">&nbsp;InnoDB&nbsp;</span><span style="color: #333333">存储引擎的表有作用。对于</span><span style="color: #333333">&nbsp;MyISAM&nbsp;</span><span style="color: #333333">存储引擎的表进行表检查，也会同时更新关键字统计数据</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">Repair&nbsp;</span>&nbsp;<span style="color: #333333">optimize</span><span style="color: #333333">需要有足够的硬盘空间，否则可能会破坏表，导致不能操作，那就要用上</span><span style="color: #333333">repair</span><span style="color: #333333">，注意</span><span style="color: #333333">INNODB</span><span style="color: #333333">不支持</span><span style="color: #333333">repair</span><span style="color: #333333">操作</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">以上的操作出现的都是如下这是</span><span style="color: #333333">check</span></p><div><ol style="color: #5c5c5c"><li style="color: inherit">+<span style="color: #008200">----------+-------+--------------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;<span style="color: #006699">Table</span>&nbsp;&nbsp;&#124;&nbsp;Op&nbsp;&nbsp;&#124;&nbsp;Msg_type&#124;&nbsp;Msg_text&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----------+-------+--------------+-------------+</span>&nbsp;&nbsp;</li><li>&#124;&nbsp;test.one&nbsp;&#124;&nbsp;<span style="color: #006699">check</span>&nbsp;&#124;&nbsp;status&nbsp;&nbsp;&#124;&nbsp;OK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#124;&nbsp;&nbsp;</li><li style="color: inherit">+<span style="color: #008200">----------+-------+--------------+-------------+</span>&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><span style="color: #333333">其中</span><span style="color: #333333">op</span><span style="color: #333333">是</span><span style="color: #333333">option&nbsp;</span><span style="color: #333333">可以是</span><span style="color: #333333">repair check optimize</span><span style="color: #333333">，</span><span style="color: #333333">msg_type&nbsp;</span><span style="color: #333333">表示信息类型，</span><span style="color: #333333">msg_text&nbsp;</span><span style="color: #333333">表示信息类型，这里就说明表的状态正常。如在</span><span style="color: #333333">innodb</span><span style="color: #333333">表使用</span><span style="color: #333333">repair</span><span style="color: #333333">就出现</span><span style="color: #333333">note &#124; The storage engine for the table doesn't support repair</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">注意：以上操作最好在数据库访问量最低的时候操作，因为涉及到很多表锁定，扫描，数据迁移等操作，否则可能导致一些功能无法正常使用甚至数据库崩溃。</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">(3)</span><span style="color: #333333">表结构的更新与维护</span></strong></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">改表结构。当要在数据量千万级的数据表中使用</span><span style="color: #333333">alter</span><span style="color: #333333">更改表结构的时候，这是一个棘手问题。一种方法是在低并发低访问量的时候用平常的</span><span style="color: #333333">alter</span><span style="color: #333333">更改表。另外一种就是建另一个与要修改的表，这个表除了要修改的结构属性外其他的和原表一模一样，这样就能得到一个相应的</span><span style="color: #333333">.frm</span><span style="color: #333333">文件，然后用</span><span style="color: #333333">flush with read lock&nbsp;</span><span style="color: #333333">锁定读，然后覆盖用新建的</span><span style="color: #333333">.frm</span><span style="color: #333333">文件覆盖原表的</span><span style="color: #333333">.frm</span><span style="color: #333333">，最后</span><span style="color: #333333">unlock table&nbsp;</span><span style="color: #333333">释放表。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">建立新的索引。一般方法这里不说。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">1、&nbsp;&nbsp;</span><span style="color: #333333">创建没索引的</span><span style="color: #333333">a</span><span style="color: #333333">表，导入数据形成</span><span style="color: #333333">.MYD</span><span style="color: #333333">文件。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2、&nbsp;&nbsp;</span><span style="color: #333333">创建包括索引</span><span style="color: #333333">b</span><span style="color: #333333">表，形成</span><span style="color: #333333">.FRM</span><span style="color: #333333">和</span><span style="color: #333333">.MYI</span><span style="color: #333333">文件</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">3、&nbsp;&nbsp;</span><span style="color: #333333">锁定读写</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">4、&nbsp;&nbsp;</span><span style="color: #333333">把</span><span style="color: #333333">b</span><span style="color: #333333">表的</span><span style="color: #333333">.FRM</span><span style="color: #333333">和</span><span style="color: #333333">.MYI</span><span style="color: #333333">文件改成</span><span style="color: #333333">a</span><span style="color: #333333">表名字</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">5、&nbsp;&nbsp;</span><span style="color: #333333">解锁</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">6、&nbsp;&nbsp;</span><span style="color: #333333">用</span><span style="color: #333333">repair</span><span style="color: #333333">创建索引。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">这个方法对于大表也是很有效的。这也是为什么很多</span><span style="color: #333333">dba</span><span style="color: #333333">坚持说&ldquo;先导数据库在建索引，这样效率更快&rdquo;</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">l&nbsp;&nbsp;</span><span style="color: #333333">定期检查</span><span style="color: #333333">mysql</span><span style="color: #333333">服务器</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">定期使用</span><span style="color: #333333">show status</span><span style="color: #333333">、</span><span style="color: #333333">show processlist</span><span style="color: #333333">等命令检查数据库。这里就不细说，这说起来也篇幅是比较大的，笔者对这个也不是很了解</span></p><p style="margin: 0px; padding: 0px"><strong><span style="color: #333333">第四部分：图说</span><span style="color: #333333">mysql</span><span style="color: #333333">查询执行流程</span></strong></p><p style="margin: 0px; padding: 0px"><img style="border: none; max-width: 100%" src="read-1.php-6913" tppabs="http://www.phpben.com/uploadfile/13385514970.67127400.jpg" border="0" /></p><p style="margin: 0px; padding: 0px">&nbsp;<span style="color: #333333">1、&nbsp;&nbsp;</span><span style="color: #333333">查询缓存，判断</span><span style="color: #333333">sql</span><span style="color: #333333">语句是否完全匹配，再判断是否有权限，两个判断为假则到解析器解析语句，为真则提取数据结果返回给用户。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">2、&nbsp;&nbsp;</span><span style="color: #333333">解析器解析。解析器先词法分析，语法分析，检查错误比如引号有没闭合等，然后生成解析树。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">3、&nbsp;&nbsp;</span><span style="color: #333333">预处理。预处理解决解析器无法决解的语义，如检查表和列是否存在，别名是否有错，生成新的解析树。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">4、&nbsp;&nbsp;</span><span style="color: #333333">优化器做大量的优化操作。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">5、&nbsp;&nbsp;</span><span style="color: #333333">生成执行计划。</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">6、&nbsp;&nbsp;</span><span style="color: #333333">查询执行引擎，负责调度引擎获取相应数据</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">7、&nbsp;&nbsp;</span><span style="color: #333333">返回结果。</span></p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"></p><p style="margin: 0px; padding: 0px">这篇博文准备，写，将用了一个月时间！终于写完，但真的学了很多东西！ 有纰漏请联系：benwin(bw@7bus.net/445235728@qq.com)</p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px">&nbsp;</p><p style="margin: 0px; padding: 0px"><span style="color: #333333">参考：</span></p><p style="margin: 0px; padding: 0px"><span style="color: #333333">&nbsp;</span><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/hustcat/archive/2009/10/28/read.php?6912  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/hustcat/archive/2009/10/28/read.php?6912'" tppabs="http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html" target="_blank">http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html</a></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.cnblogs.com/oldhorse/archive/2009/11/16/read.php?6911  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnblogs.com/oldhorse/archive/2009/11/16/read.php?6911'" tppabs="http://www.cnblogs.com/oldhorse/archive/2009/11/16/1604009.html" target="_blank">http://www.cnblogs.com/oldhorse/archive/2009/11/16/1604009.html</a></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/zuiaituantuan/article/details/read.php?6910  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/zuiaituantuan/article/details/read.php?6910'" tppabs="http://blog.csdn.net/zuiaituantuan/article/details/5909334" target="_blank">http://blog.csdn.net/zuiaituantuan/article/details/5909334</a></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.codinglabs.org/html/read.php?6909  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinglabs.org/html/read.php?6909'" tppabs="http://www.codinglabs.org/html/theory-of-mysql-index.html" target="_blank">http://www.codinglabs.org/html/theory-of-mysql-index.html</a></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://isky000.com/database/read.php?6908  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://isky000.com/database/read.php?6908'" tppabs="http://isky000.com/database/mysql_order_by_implement" target="_blank">http://isky000.com/database/mysql_order_by_implement</a></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://dev.mysql.com/doc/refman/5.0/en/read.php?6907  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://dev.mysql.com/doc/refman/5.0/en/read.php?6907'" tppabs="http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html" target="_blank">http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html</a></p><p style="margin: 0px; padding: 0px"></p><p style="margin: 0px; padding: 0px"><a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.docin.com/read.php?6906  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.docin.com/read.php?6906'" tppabs="http://www.docin.com/p-211669085.html" target="_blank">http://www.docin.com/p-211669085.html</a>&nbsp;</p></div><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">标签:&nbsp;<a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6905  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6905'" tppabs="http://www.phpben.com/?tag=mysql%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84" target="_blank">mysql索引结构</a>&nbsp;<a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6904  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6904'" tppabs="http://www.phpben.com/?tag=inndbo" target="_blank">inndbo</a>&nbsp;<a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6903  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6903'" tppabs="http://www.phpben.com/?tag=b-%E6%A0%91" target="_blank">b-树</a>&nbsp;<a style="color: #895705; text-decoration: none" href="javascript:if(confirm('http://www.phpben.com/read.php?6902  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.phpben.com/read.php?6902'" tppabs="http://www.phpben.com/?tag=sql%E4%BC%98%E5%8C%96" target="_blank">sql优化</a></p> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 104 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>