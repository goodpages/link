<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
<title><![CDATA[流浪的龙－个人知识管理]]></title> 
<link>http://i.renjihe.com/blog/index.php</link> 
<description><![CDATA[]]></description> 
<language>zh-cn</language> 
<copyright><![CDATA[流浪的龙－个人知识管理]]></copyright>
<item>
<link>http://i.renjihe.com/blog/read.php?</link>
<title><![CDATA[nodejs异步控制利器Async]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[web]]></category>
<pubDate>Mon, 29 Aug 2016 06:34:57 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?</guid> 
<description>
<![CDATA[ 
	<p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。&nbsp;<br />因为是js语言，也就是说，凡是懂得一点js或者jquery，对nodejs入手相当的快，而且没过多久你就会爱上nodejs！</p><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-weight: 100; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="box-sizing: border-box; color: #0c89cf" name="t0"></a>但是！但是！但是！</h3><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">nodejs是基于异步的写法，有时一个函数需要上一个函数的返回值做参数，这样下来一不小心就会陷入回调地狱的陷阱中。（一把辛酸泪-_-!!!）&nbsp;<br />下面的一个相当简单的需求</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)">将A、B、<span style="box-sizing: border-box; color: #000088" class="hljs-keyword">C</span>文件里面的内容读取出来存到<span style="box-sizing: border-box; color: #000088" class="hljs-keyword">D</span>文件中<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">普通的写法如下</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">var</span> fs = <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">require</span>(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'fs'</span>); fs.readFile(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'D:&#92;&#92;test&#92;&#92;A.txt'</span>,<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(err,data1)</span>&#123;</span>&nbsp;&nbsp; fs.readFile(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'D:&#92;&#92;test&#92;&#92;B.txt'</span>,<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(err,data2)</span>&#123;</span>&nbsp;&nbsp;&nbsp;&nbsp; fs.readFile(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'D:&#92;&#92;test&#92;&#92;C.txt'</span>,<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(err,data3)</span>&#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(data1+<span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;'</span>+data2+<span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;'</span>+data3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fs.writeFile(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'D:&#92;&#92;test&#92;&#92;D.txt'</span>,data1+<span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;'</span>+data2+<span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;'</span>+data3,<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(err)</span>&#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(err);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#125;);&nbsp;&nbsp;&nbsp;&nbsp; &#125;);&nbsp;&nbsp; &#125;); &#125;);<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">如果再来个a，b，c等等文件，各种嵌套，一是看起来很凌乱，二是后来维护起来是相当的困难！&nbsp;<br />那么为了避免这样的问题，也有一些模块来解决，比如Promise，Async，co等等，使用哪种来控制异步流程，我也纠结了许久，最终选择使用Async，有人说Asunc是一代，promise是二代，co是三代。于是毫不犹豫的选择了Async.&nbsp;<br />在此推荐相当详细的demo地址&nbsp;<br /><a style="text-decoration: none; box-sizing: border-box; color: #0c89cf" href="https://github.com/bsspirit/async_demo">GitHub地址</a>&nbsp;<br />里面把asunc所有的方法重新讲解了一遍，很详细。&nbsp;<br />我下面要介绍的是四种控制流程&nbsp;<br />* 串行无关联&nbsp;<br />* 串行有关联&nbsp;<br />* 并行无关联&nbsp;<br />* 只能控制</p><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">下载async模块</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)">npm install async<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li></ul></pre><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-weight: 100; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="box-sizing: border-box; color: #0c89cf" name="t1"></a>串行无关联</h3><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">多个函数或方法要依次执行，但是他们之间并没有什么联系，只有先后的顺序，比如我要写一个文件，写完之后像用户发送邮件，这两者之间没有必然的联系，但是发邮件必须在写文件完成之后。&nbsp;<br />async里有一个方法series可以实现这一流程,代码实现如下：</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">var</span> async = <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">require</span>(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'async'</span>); console.time(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'series'</span>); async.series(&#123;&nbsp;&nbsp;&nbsp;&nbsp; one: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'one'</span>);<span style="box-sizing: border-box; color: #880000" class="hljs-comment">//callback('i am err','one');异常处理</span>&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; two: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'two'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;, &#125;, <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(error, result)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box; color: #880000" class="hljs-comment">//最后结果</span>&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'error: '</span> + error);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'result: '</span> + result);&nbsp;&nbsp;&nbsp;&nbsp; console.timeEnd(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'series'</span>); &#125;);<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">结果</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)">error: null result: [object Object] series: <span style="box-sizing: border-box; color: #006666" class="hljs-number">4.472</span>ms<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">串行流程，one执行完再执行two，如果有three、four等方法，依次写下去，callback(arg1,arg2),两个参数，arg1是异常，arg2是方法的返回值，如果某个函数中arg1不为空，则程序到此终止，之后的不再执行，可自行测试！&nbsp;<br /><strong style="box-sizing: border-box">注意:waterfall不能使用对象表示法来传递(json格式)</strong></p><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-weight: 100; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="box-sizing: border-box; color: #0c89cf" name="t2"></a>串行有关联</h3><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">多个函数或方法执行，每一步执行时都需要上一步执行的结果当参数，所以就会有串行等待。async里有waterfall可以实现此场景：</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">var</span> async = <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">require</span>(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'async'</span>); console.time(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'waterfall'</span>); async.waterfall([&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'one'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(onearg, callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, onearg + <span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;two'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(twoarg, callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, twoarg + <span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;three'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(threearg, callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, threearg + <span style="box-sizing: border-box; color: #008800" class="hljs-string">'&gt;&gt;&gt;four'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125; ], <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(error, result)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'error: '</span> + error);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'result: '</span> + result);&nbsp;&nbsp;&nbsp;&nbsp; console.timeEnd(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'waterfall'</span>); &#125;);<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">结果</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)">error: null result: one&gt;&gt;&gt;two&gt;&gt;&gt;three&gt;&gt;&gt;four waterfall: <span style="box-sizing: border-box; color: #006666" class="hljs-number">4.516</span>ms<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">这个比较series换了个方法名之外，每个函数多了个参数第二个函数中onearg则是第一个函数的值，以此类推，callback中没变，如果有异常，立即终止可自行验证;</p><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-weight: 100; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="box-sizing: border-box; color: #0c89cf" name="t3"></a>并行无关联</h3><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">多个函数执行，之间没有任何的关系，也就是说谁执行都行，为了节约时间就可以使用并行流程来解决，如下：</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">var</span> async = <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">require</span>(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'async'</span>); console.time(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'parallel'</span>); async.parallel(&#123;&nbsp;&nbsp;&nbsp;&nbsp; one: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box; color: #880000" class="hljs-comment">//处理逻辑</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'one'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; two: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box; color: #880000" class="hljs-comment">//处理逻辑</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'tow'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; three: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box; color: #880000" class="hljs-comment">//处理逻辑</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'three'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; four: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="box-sizing: border-box; color: #880000" class="hljs-comment">//处理逻辑</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'four'</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125; &#125;, <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(error, result)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'one:'</span>, result.one);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'two:'</span>, result.two);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'three:'</span>, result.three);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'four:'</span>, result.four);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'error: '</span> + error);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'result: '</span> + <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">JSON</span>.stringify(result));&nbsp;&nbsp;&nbsp;&nbsp; console.timeEnd(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'parallel'</span>); &#125;);<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li><li style="box-sizing: border-box; padding: 0px 5px">21</li><li style="box-sizing: border-box; padding: 0px 5px">22</li><li style="box-sizing: border-box; padding: 0px 5px">23</li><li style="box-sizing: border-box; padding: 0px 5px">24</li><li style="box-sizing: border-box; padding: 0px 5px">25</li><li style="box-sizing: border-box; padding: 0px 5px">26</li><li style="box-sizing: border-box; padding: 0px 5px">27</li><li style="box-sizing: border-box; padding: 0px 5px">28</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li><li style="box-sizing: border-box; padding: 0px 5px">21</li><li style="box-sizing: border-box; padding: 0px 5px">22</li><li style="box-sizing: border-box; padding: 0px 5px">23</li><li style="box-sizing: border-box; padding: 0px 5px">24</li><li style="box-sizing: border-box; padding: 0px 5px">25</li><li style="box-sizing: border-box; padding: 0px 5px">26</li><li style="box-sizing: border-box; padding: 0px 5px">27</li><li style="box-sizing: border-box; padding: 0px 5px">28</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">结果</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)">one: one two: tow three: three four: four error: null result: &#123;<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;one&quot;</span>:<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;one&quot;</span>,<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;two&quot;</span>:<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;tow&quot;</span>,<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;three&quot;</span>:<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;three&quot;</span>,<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;four&quot;</span>:<span style="box-sizing: border-box; color: #008800" class="hljs-string">&quot;four&quot;</span>&#125; parallel: <span style="box-sizing: border-box; color: #006666" class="hljs-number">4.237</span>ms<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">并行无关联和串行无关联唯一的差异就是名称不同，但也都是见名知意，主要看执行的时间！！！</p><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-weight: 100; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="box-sizing: border-box; color: #0c89cf" name="t4"></a>智能控制</h3><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">以上都是纯串行传并行，但是当一个场景里，需要使用串行也需要使用并行的时候，虽然分别写能解决，但是效率不是很高，维护性也不是很好，auto可以解决这一问题。如下场景，<a style="text-decoration: none; box-sizing: border-box; color: #0c89cf" href="https://github.com/bsspirit/async_demo/blob/master/auto.js">参见github示例</a>&nbsp;<br />需求如下：</p><ul style="box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px"><li style="box-sizing: border-box"><ol style="box-sizing: border-box"><li style="box-sizing: border-box">从某处取得数据</li></ol></li><li style="box-sizing: border-box"><ol style="box-sizing: border-box"><li style="box-sizing: border-box">在硬盘上建立一个新的目录</li></ol></li><li style="box-sizing: border-box"><ol style="box-sizing: border-box"><li style="box-sizing: border-box">将数据写入到目录下某文件</li></ol></li><li style="box-sizing: border-box"><ol style="box-sizing: border-box"><li style="box-sizing: border-box">发送邮件，将文件以附件形式发送给其它人。</li></ol></li></ul><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">可以知道1与2可以并行执行，3需要等1和2完成，4要等3完成。&nbsp;<br />使用auto来解决</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">var</span> async = <span style="box-sizing: border-box; color: #660066" class="hljs-built_in">require</span>(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'async'</span>); console.time(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'auto'</span>); async.auto(&#123;&nbsp;&nbsp;&nbsp;&nbsp; getData: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setTimeout(<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">()</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'1.1: got data'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'mydata'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#125;, <span style="box-sizing: border-box; color: #006666" class="hljs-number">300</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; makeFolder: <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setTimeout(<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">()</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'1.1: made folder'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'myfolder'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#125;, <span style="box-sizing: border-box; color: #006666" class="hljs-number">200</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;,&nbsp;&nbsp;&nbsp;&nbsp; writeFile: [<span style="box-sizing: border-box; color: #008800" class="hljs-string">'getData'</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'makeFolder'</span>, <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setTimeout(<span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">()</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'1.1: wrote file'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, <span style="box-sizing: border-box; color: #008800" class="hljs-string">'myfile'</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#125;, <span style="box-sizing: border-box; color: #006666" class="hljs-number">300</span>);&nbsp;&nbsp;&nbsp;&nbsp; &#125;],&nbsp;&nbsp;&nbsp;&nbsp; emailFiles: [<span style="box-sizing: border-box; color: #008800" class="hljs-string">'writeFile'</span>, <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(callback, results)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'emailed file: '</span>, results.writeFile);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; callback(<span style="box-sizing: border-box; color: #006666" class="hljs-literal">null</span>, results.writeFile);&nbsp;&nbsp;&nbsp;&nbsp; &#125;] &#125;, <span style="box-sizing: border-box" class="hljs-function"><span style="box-sizing: border-box; color: #000088" class="hljs-keyword">function</span><span style="box-sizing: border-box; color: #660066" class="hljs-params">(err, results)</span> &#123;</span>&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'err: '</span>, err);&nbsp;&nbsp;&nbsp;&nbsp; console.log(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'results: '</span>, results);&nbsp;&nbsp;&nbsp;&nbsp; console.timeEnd(<span style="box-sizing: border-box; color: #008800" class="hljs-string">'auto'</span>); &#125;);<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li><li style="box-sizing: border-box; padding: 0px 5px">21</li><li style="box-sizing: border-box; padding: 0px 5px">22</li><li style="box-sizing: border-box; padding: 0px 5px">23</li><li style="box-sizing: border-box; padding: 0px 5px">24</li><li style="box-sizing: border-box; padding: 0px 5px">25</li><li style="box-sizing: border-box; padding: 0px 5px">26</li><li style="box-sizing: border-box; padding: 0px 5px">27</li><li style="box-sizing: border-box; padding: 0px 5px">28</li><li style="box-sizing: border-box; padding: 0px 5px">29</li><li style="box-sizing: border-box; padding: 0px 5px">30</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li><li style="box-sizing: border-box; padding: 0px 5px">11</li><li style="box-sizing: border-box; padding: 0px 5px">12</li><li style="box-sizing: border-box; padding: 0px 5px">13</li><li style="box-sizing: border-box; padding: 0px 5px">14</li><li style="box-sizing: border-box; padding: 0px 5px">15</li><li style="box-sizing: border-box; padding: 0px 5px">16</li><li style="box-sizing: border-box; padding: 0px 5px">17</li><li style="box-sizing: border-box; padding: 0px 5px">18</li><li style="box-sizing: border-box; padding: 0px 5px">19</li><li style="box-sizing: border-box; padding: 0px 5px">20</li><li style="box-sizing: border-box; padding: 0px 5px">21</li><li style="box-sizing: border-box; padding: 0px 5px">22</li><li style="box-sizing: border-box; padding: 0px 5px">23</li><li style="box-sizing: border-box; padding: 0px 5px">24</li><li style="box-sizing: border-box; padding: 0px 5px">25</li><li style="box-sizing: border-box; padding: 0px 5px">26</li><li style="box-sizing: border-box; padding: 0px 5px">27</li><li style="box-sizing: border-box; padding: 0px 5px">28</li><li style="box-sizing: border-box; padding: 0px 5px">29</li><li style="box-sizing: border-box; padding: 0px 5px">30</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">结果</p><pre class="prettyprint" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: #333333; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588)"><span style="box-sizing: border-box; color: #006666" class="hljs-number">1.1</span>: made folder <span style="box-sizing: border-box; color: #006666" class="hljs-number">1.1</span>: got data <span style="box-sizing: border-box; color: #006666" class="hljs-number">1.1</span>: wrote file emailed file:&nbsp;&nbsp;myfile err:&nbsp;&nbsp;null results:&nbsp;&nbsp;&#123; makeFolder: <span style="box-sizing: border-box; color: #008800" class="hljs-string">'myfolder'</span>,&nbsp;&nbsp; getData: <span style="box-sizing: border-box; color: #008800" class="hljs-string">'mydata'</span>,&nbsp;&nbsp; writeFile: <span style="box-sizing: border-box; color: #008800" class="hljs-string">'myfile'</span>,&nbsp;&nbsp; emailFiles: <span style="box-sizing: border-box; color: #008800" class="hljs-string">'myfile'</span> &#125; auto: <span style="box-sizing: border-box; color: #006666" class="hljs-number">650.972</span>ms<ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd; list-style: none; text-align: right; background-color: #eeeeee"><li style="box-sizing: border-box; padding: 0px 5px">1</li><li style="box-sizing: border-box; padding: 0px 5px">2</li><li style="box-sizing: border-box; padding: 0px 5px">3</li><li style="box-sizing: border-box; padding: 0px 5px">4</li><li style="box-sizing: border-box; padding: 0px 5px">5</li><li style="box-sizing: border-box; padding: 0px 5px">6</li><li style="box-sizing: border-box; padding: 0px 5px">7</li><li style="box-sizing: border-box; padding: 0px 5px">8</li><li style="box-sizing: border-box; padding: 0px 5px">9</li><li style="box-sizing: border-box; padding: 0px 5px">10</li></ul></pre><p style="margin: 0px 0px 1.1em; padding: 0px; box-sizing: border-box; color: #555555; font-family: 'microsoft yahei'; font-size: 14px; line-height: 35px">通过这样的写法，就可以实现串行并行组合写法，这些方法需要多多练习才能熟练使用。。。</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?#blogcomment</link>
<title><![CDATA[[评论] nodejs异步控制利器Async]]></title> 
<author> &lt;user@domain.com&gt;</author>
<category><![CDATA[评论]]></category>
<pubDate>Thu, 01 Jan 1970 00:00:00 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?#blogcomment</guid> 
<description>
<![CDATA[ 
	
]]>
</description>
</item>
</channel>
</rss>