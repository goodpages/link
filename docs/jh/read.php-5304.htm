<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="æµæµªçš„é¾™ï¼ä¸ªäººçŸ¥è¯†ç®¡ç†" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="æµæµªçš„é¾™ï¼ä¸ªäººçŸ¥è¯†ç®¡ç†" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>SQLAlchemyè¯¦ç»†æ•™ç¨‹ - æµæµªçš„é¾™ï¼ä¸ªäººçŸ¥è¯†ç®¡ç† - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="æœç´¢ æµæµªçš„é¾™ï¼ä¸ªäººçŸ¥è¯†ç®¡ç†" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">æµæµªçš„é¾™ï¼ä¸ªäººçŸ¥è¯†ç®¡ç†</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">é¦–é¡µ</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">ä¸ªæ€§é¦–é¡µ</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">ç½‘å€å¯¼èˆª</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">æ ‡ç­¾</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">ç•™è¨€</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-5303.htm" tppabs="http://i.renjihe.com/blog/read.php?5303" title="ä¸Šä¸€ç¯‡ Jinja2 ç®€æ˜ä½¿ç”¨æ‰‹"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>Jinja2 ç®€æ˜ä½¿ç”¨æ‰‹</a></div>
	<div class="next-article"><a href="read.php-5306.htm" tppabs="http://i.renjihe.com/blog/read.php?5306" title="ä¸‹ä¸€ç¯‡ Pythonä¹‹ç§‘æ™®ç¯‡"><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>Pythonä¹‹ç§‘æ™®ç¯‡</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Aug</span>
	<span class="textbox-calendar-day">7</span>
	</div>
	<div class="textbox-title">
		<h4>
		SQLAlchemyè¯¦ç»†æ•™ç¨‹ <span id="starid5304"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="æœªåŠ æ˜Ÿæ ‡" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="ä¸æŒ‡å®š" title="ä¸æŒ‡å®š"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 14:23 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="æŸ¥çœ‹åˆ†ç±»ï¼š è½¯ä»¶">è½¯ä»¶</a> &raquo; <a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="æŸ¥çœ‹åˆ†ç±»ï¼š Python">Python</a> , <a href="read.php-5304.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?5304#reply" title="å‘è¡¨æ‚¨çš„è¯„è®º">è¯„è®º(0)</a> , <a href='javascript: void(0);' title="æŸ¥çœ‹å¼•ç”¨åœ°å€" onclick='showhidediv("tb5304");'>å¼•ç”¨(0)</a> , <a href="read.php-5304.htm" tppabs="http://i.renjihe.com/blog/read.php?5304">é˜…è¯»(1)</a> ,  Via æœ¬ç«™åŸåˆ› <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="å­—ä½“å¤§å°" border='0'/> <a href="javascript: doZoom(16);">å¤§</a> | <a href="javascript: doZoom(14);">ä¸­</a> | <a href="javascript: doZoom(12);">å°</a> <a href="read.php-5187.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_5304"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="è®¢é˜…æœ¬æ–‡" border='0'/></a> <a href="read.php-5186.htm" tppabs="http://i.renjihe.com/blog/read.php?save_5304"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="ä¿å­˜æœ¬æ–‡ä¸ºæ–‡æœ¬æ–‡æ¡£" border='0'/></a></span>
		</div>
	</div>
	<div id="tb5304" style="display: none;" class="textbox-tburl"><strong>å¼•ç”¨åŠŸèƒ½è¢«å…³é—­äº†ã€‚</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	<a href="javascript:if(confirm('https://www.ibm.com/data/file/0/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÒÑ¾­±»Õ¾µãÂşÓÎÆ÷ÅÅ³ı¹æÔò²ÎÊıÅÅ³ıµÄÂ·¾¶µØÖ·¡£(¸ÃÏµÍ³µÄ Teleport Ultra ÊØÔòÊÇ¿ÉÑ¡µÄ; ²Î¼ûÏîÄ¿ÊôĞÔ, ÍøÂçÀñÒÇ¡£)  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.ibm.com/data/file/0/1/6/'" tppabs="https://www.ibm.com/developerworks/cn/aix/library/au-sqlalchemy/">https://www.ibm.com/developerworks/cn/aix/library/au-sqlalchemy/</a><br /><a href="javascript:if(confirm('http://blog.csdn.net/data/file/1/1/6/read.php?5162  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://blog.csdn.net/data/file/1/1/6/read.php?5162'" tppabs="http://blog.csdn.net/nciaebupt/article/details/8135952">http://blog.csdn.net/nciaebupt/article/details/8135952</a><br /><br /><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å‰è¨€:æœ€è¿‘å¼€å§‹å­¦ä¹ SQLAlchemy,æœ¬æ•™ç¨‹æ˜¯å…¶å®˜æ–¹æ–‡æ¡£ä»¥åŠåœ¨è¯»è‹±æ–‡ç‰ˆ&lt;Essential SQLAlchemy&gt;çš„ç¿»è¯‘åŠ ä¸€äº›è‡ªå·±çš„ç†è§£å’Œæ€»ç»“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1 ä»€ä¹ˆæ˜¯ SQLAlchemy?</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å®ƒæ˜¯ç»™mysql, oracle,sqliteç­‰å…³ç³»å‹æ•°æ®åº“çš„pythonæ¥å£,ä¸éœ€è¦å¤§å¹…ä¿®æ”¹åŸæœ‰çš„pythonä»£ç ,å®ƒå·²ç»åŒ…å«äº†SQLè¡¨è¾¾å¼è¯­è¨€å’ŒORM,çœ‹ä¸€äº›ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">sql=&rdquo;INSERT INTO user(user_name, password) VALUES (%s, %s)&rdquo;<br />cursor = conn.cursor()<br />cursor.execute(sql, (&lsquo;dongwm&rsquo;, &lsquo;testpass&rsquo;))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä»¥ä¸Šæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„mysqlçš„SQLè¯­å¥,ä½†æ˜¯å†—é•¿ä¹Ÿå®¹æ˜“å‡ºé”™,å¹¶ä¸”å¯èƒ½å¯¼è‡´å®‰å…¨é—®é¢˜(å› ä¸ºæ˜¯å­—ç¬¦ä¸²çš„è¯­å¥,ä¼šå­˜åœ¨SQLæ³¨å…¥),å¹¶ä¸”ä»£ç ä¸è·¨å¹³å°,åœ¨ä¸åŒæ•°æ®åº“è½¯ä»¶çš„è¯­å¥ä¸åŒ(ä»¥ä¸‹æ˜¯ä¸€ä¸ª&nbsp;Oracleä¾‹å­),ä¸å…·å¤‡å®¢ç§»æ¤æ€§:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">sql=&rdquo;INSERT INTO user(user_name, password) VALUES (:1, :2)&rdquo;<br />cursor = conn.cursor()<br />cursor.execute(sql, &lsquo;dongwm&rsquo;, &lsquo;testpass&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è€Œåœ¨SQLAlchemyé‡Œåªéœ€è¦è¿™æ ·å†™:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">statement = user_table.insert(user_name=&rsquo;rick&rsquo;, password=&rsquo;parrot&rsquo;)<br />statement.execute()&nbsp; #æŠ¤ç•¥æ˜¯ä»€ä¹ˆæ•°æ®åº“ç¯å¢ƒ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SQLAlchemyè¿˜èƒ½è®©ä½ å†™å‡ºå¾ˆpythonicçš„è¯­å¥:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">statement = user_table.select(and_(<br />user_table.c.created &gt;= date(2007,1,1),<br />user_table.c.created &lt; date(2008,1,1))<br />result = statement.execute()&nbsp; #æ£€ç´¢æ‰€æœ‰åœ¨2007å¹´åˆ›å»ºçš„ç”¨æˆ·</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata=MetaData(&lsquo;sqlite://&rsquo;) # å‘Šè¯‰å®ƒä½ è®¾ç½®çš„æ•°æ®åº“ç±»å‹æ˜¯åŸºäºå†…å­˜çš„sqlite<br />user_table = Table(&nbsp; #åˆ›å»ºä¸€ä¸ªè¡¨<br />&lsquo;tf_user&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),&nbsp; #ä¸€äº›å­—æ®µ,å‡è®¾ä½ æ‡‚SQL,é‚£ä¹ˆä»¥ä¸‹çš„å­—æ®µå¾ˆå¥½ç†è§£<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False),<br />Column(&lsquo;email_address&rsquo;, Unicode(255), unique=True, nullable=False),<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False),<br />Column(&lsquo;first_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;last_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;created&rsquo;, DateTime, default=datetime.now))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">users_table = Table(&lsquo;users&rsquo;, metadata, autoload=True) #å‡è®¾tableå·²ç»å­˜åœ¨.å°±ä¸éœ€è¦æŒ‡å®šå­—æ®µ,åªæ˜¯åŠ ä¸ªautoload=True</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class User(object): pass&nbsp; #è™½ç„¶SQLAlchemyå¼ºå¤§,ä½†æ˜¯æ’å…¥æ›´æ–°è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨æŒ‡å®š,å¯ä»¥ä½¿ç”¨ORM,æ–¹æ³•å°±æ˜¯:è®¾å®šä¸€ä¸ªç±»,å®šä¹‰ä¸€ä¸ªè¡¨,æŠŠè¡¨æ˜ å°„åˆ°ç±»é‡Œé¢<br />mapper(User, user_table)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´ORMçš„ä¾‹å­:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_4"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_4'" tppabs="http://www.dongwm.com/page/2/#codesyntax_4" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_4'" tppabs="http://www.dongwm.com/page/2/#codesyntax_4" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_4'" tppabs="http://www.dongwm.com/page/2/#codesyntax_4" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy.orm import mapper, sessionmaker #sessionmaker()å‡½æ•°æ˜¯æœ€å¸¸ä½¿ç”¨çš„åˆ›å»ºæœ€é¡¶å±‚å¯ç”¨äºæ•´ä¸ªåº”ç”¨Session çš„æ–¹æ³•,Sessionç®¡ç†ç€æ‰€æœ‰ä¸æ•°æ®åº“ä¹‹é—´çš„ä¼šè¯</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from datetime import datetime</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import Table, MetaData, Column,ForeignKey, Integer, String, Unicode, DateTime #ä¼šSQLçš„äººèƒ½ç†è§£è¿™äº›å‡½æ•°å§?</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine = create_engine(&quot;sqlite:///tutorial.db&quot;,echo=True) #åˆ›å»ºåˆ°æ•°æ®åº“çš„è¿æ¥,echo=Trueè¡¨ç¤ºç”¨loggingè¾“å‡ºè°ƒè¯•ç»“æœ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata = MetaData() #è·Ÿè¸ªè¡¨å±æ€§</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_table = Table( #åˆ›å»ºä¸€ä¸ªè¡¨æ‰€éœ€çš„ä¿¡æ¯:å­—æ®µ,è¡¨åç­‰</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">'tf_user', metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('id', Integer, primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('user_name', Unicode(16), unique=True,nullable=False),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('email_address', Unicode(255), unique=True,nullable=False),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('password', Unicode(40), nullable=False),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('first_name', Unicode(255), default=''),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('last_name', Unicode(255), default=''),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('created', DateTime, default=datetime.now))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata.create_all(engine)&nbsp; #åœ¨æ•°æ®åº“ä¸­ç”Ÿæˆè¡¨</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class User(object): pass #åˆ›å»ºä¸€ä¸ªæ˜ å°„ç±»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(User, user_table) #æŠŠè¡¨æ˜ å°„åˆ°ç±»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Session = sessionmaker() #åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰äº†çš„ Sessionç±»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Session.configure(bind=engine)&nbsp; #å°†åˆ›å»ºçš„æ•°æ®åº“è¿æ¥å…³è”åˆ°è¿™ä¸ªsession</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session = Session()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u = User()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u.user_name='dongwm'</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u.email_address='dongwm@dongwm.com'</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u.password='testpass'&nbsp;#ç»™æ˜ å°„ç±»æ·»åŠ ä»¥ä¸‹å¿…è¦çš„å±æ€§,å› ä¸ºä¸Šé¢åˆ›å»ºè¡¨æŒ‡å®šè¿™å‡ ä¸ªå­—æ®µä¸èƒ½ä¸ºç©º</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session.add(u)&nbsp;#åœ¨sessionä¸­æ·»åŠ å†…å®¹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session.flush() #ä¿å­˜æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session.commit() #æ•°æ®åº“äº‹åŠ¡çš„æäº¤,sissonè‡ªåŠ¨è¿‡æœŸè€Œä¸éœ€è¦å…³é—­</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">query = session.query(User) #query() ç®€å•çš„ç†è§£å°±æ˜¯select() çš„æ”¯æŒ ORM çš„æ›¿ä»£æ–¹æ³•,å¯ä»¥æ¥å—ä»»æ„ç»„åˆçš„ class/column è¡¨è¾¾å¼</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print list(query) #åˆ—å‡ºæ‰€æœ‰user</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print query.get(1) #æ ¹æ®ä¸»é”®æ˜¾ç¤º</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print query.filter_by(user_name='dongwm').first()&nbsp; #ç±»ä¼¼äºSQLçš„where,æ‰“å°å…¶ä¸­çš„ç¬¬ä¸€ä¸ª</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u = query.filter_by(user_name='dongwm').first()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">u.password = 'newpass' #ä¿®æ”¹å…¶å¯†ç å­—æ®µ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session.commit() #æäº¤äº‹åŠ¡</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print query.get(1).password #æ‰“å°ä¼šå‡ºç°æ–°å¯†ç </p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">for instance insession.query(User).order_by(User.id):&nbsp; #æ ¹æ®idå­—æ®µæ’åº,æ‰“å°å…¶ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±åœ°å€</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; printinstance.user_name, instance.email_address</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æ—¢ç„¶æ˜¯ORMæ¡†æ¶,æˆ‘ä»¬æ¥ä¸€ä¸ªæ›´å¤æ‚çš„åŒ…å«å…³ç³»çš„ä¾‹å­,å…ˆçœ‹sqlè¯­å¥:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">CREATE TABLE tf_user (<br />id INTEGER NOT NULL,<br />user_name VARCHAR(16) NOT NULL,<br />email_address VARCHAR(255) NOT NULL,<br />password VARCHAR(40) NOT NULL,<br />first_name VARCHAR(255),<br />last_name VARCHAR(255),<br />created TIMESTAMP,<br />PRIMARY KEY (id),<br />UNIQUE (user_name),<br />UNIQUE (email_address));<br />CREATE TABLE tf_group (<br />id INTEGER NOT NULL,<br />group_name VARCHAR(16) NOT NULL,<br />PRIMARY KEY (id),<br />UNIQUE (group_name));<br />CREATE TABLE tf_permission (<br />id INTEGER NOT NULL,<br />permission_name VARCHAR(16) NOT NULL,<br />PRIMARY KEY (id),<br />UNIQUE (permission_name));<br />CREATE TABLE user_group (<br />user_id INTEGER,<br />group_id INTEGER,<br />PRIMARY KEY(user_id, group_id),<br />FOREIGN KEY(user_id) REFERENCES tf_user (id), #user_groupçš„user_idå…³è”äº†tf_userçš„idå­—æ®µ<br />FOREIGN KEY(group_id) REFERENCES tf_group (id));&nbsp; #group_idå…³è”äº† tf_group çš„idå­—æ®µ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">CREATE TABLE group_permission (<br />group_id INTEGER,<br />permission_id INTEGER,<br />PRIMARY KEY(group_id, permission_id),<br />FOREIGN KEY(group_id) REFERENCES tf_group (id),&nbsp; #group_permissionçš„idå…³è” tf_groupçš„idå­—æ®µ<br />FOREIGN KEY(permission_id) REFERENCES tf_permission (id)); #permission_idå…³è”äº†tf_permission çš„idå­—æ®µ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„å¤šå¯¹å¤šçš„å…³ç³»,æ¯”å¦‚æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰adminæƒé™,sqléœ€è¦è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SELECT COUNT(*) FROM tf_user, tf_group, tf_permission WHERE<br />tf_user.user_name=&rsquo;dongwm&rsquo; AND tf_user.id=user_group.user_id<br />AND user_group.group_id = group_permission.group_id<br />AND group_permission.permission_id = tf_permission.id<br />AND permission_name=&rsquo;admin&rsquo;;&nbsp; çœ‹èµ·æ¥å¤ªå¤æ‚å¹¶ä¸”ç¹é•¿äº†</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">åœ¨é¢å‘å¯¹è±¡çš„ä¸–ç•Œé‡Œ,æ˜¯è¿™æ ·çš„:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class User(object):<br />groups=[]<br />class Group(object):<br />users=[]<br />permissions=[]<br />class Permission(object):<br />groups=[]</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_5"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_5'" tppabs="http://www.dongwm.com/page/2/#codesyntax_5" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_5'" tppabs="http://www.dongwm.com/page/2/#codesyntax_5" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_5'" tppabs="http://www.dongwm.com/page/2/#codesyntax_5" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print 'Summary for %s' % user.user_name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">for g in user.groups:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; print 'Member of group %s' % g.group_name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; for p ing.permissions:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print'... which has permission %s' % p.permission_name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_6"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_6'" tppabs="http://www.dongwm.com/page/2/#codesyntax_6" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_6'" tppabs="http://www.dongwm.com/page/2/#codesyntax_6" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_6'" tppabs="http://www.dongwm.com/page/2/#codesyntax_6" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def user_has_permission(user, permission_name):&nbsp; #æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰permission_nameçš„æƒé™çš„å‡½æ•°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; for g inuser.groups:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for p ing.permissions: #å¯ä»¥çœ‹å‡ºæ¥ä½¿ç”¨äº†forå¾ªç¯</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ifp.permission_name == 'admin':</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; return False</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è€Œåœ¨SQLAlchemyä¸­,è¿™æ ·åš:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(User, user_table, properties=dict(<br />groups=relation(Group, secondary=user_group, backref=&rsquo;users&rsquo;))) #propertiesæ˜¯ä¸€ä¸ªå­—å…¸å€¼ã€‚å¢åŠ äº†ä¸€ä¸ªgroups å€¼ï¼Œå®ƒåˆæ˜¯ä¸€ä¸ªrelation å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®ç°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">#äº†Groupç±»ä¸user_groupçš„&nbsp; æ˜ å°„ã€‚è¿™æ ·æˆ‘é€šè¿‡user_tableçš„groups å±æ€§å°±å¯ä»¥åæ˜ å‡ºRssFeedçš„å€¼æ¥,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">#ä¸­é—´è¡¨å¯¹è±¡(user_group)ä¼ ç»™secondaryå‚æ•°ï¼Œbackrefä¸ºè‡ªå·±çš„è¡¨(users)<br />mapper(Group, group_table, properties=dict(<br />permissions=relation(Permission, secondary=group_permission,<br />backref=&rsquo;groups&rsquo;)))<br />mapper(Permission, permission_table)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">q = session.query(Permission)<br />dongwm_is_admin = q.count_by(permission_name=&rsquo;admin&rsquo;,user_name=&rsquo;dongwm&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å‡å¦‚è®¡ç®—ç»„é‡Œç”¨æˆ·æ•°(ä¸åŒ…å«å¿˜è®°åˆ é™¤ä½†æ˜¯é‡å¤çš„)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">for p in permissions:<br />users = set()<br />for g in p.groups:<br />for u in g.users:<br />users.add(u)<br />print &lsquo;Permission %s has %d users&rsquo; % (p.permission_name, len(users))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">åœ¨SQLAlchemyå¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">q=select([Permission.c.permission_name,<br />func.count(user_group.c.user_id)],<br />and_(Permission.c.id==group_permission.c.permission_id,<br />Group.c.id==group_permission.c.group_id,<br />Group.c.id==user_group.c.group_id),<br />group_by=[Permission.c.permission_name],<br />distinct=True)<br />rs=q.execute()<br />for permission_name, num_users in q.execute():<br />print &lsquo;Permission %s has %d users&rsquo; % (permission_name, num_users) #è™½ç„¶ä¹Ÿé•¿,ä½†æ˜¯å‡å°‘äº†æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°,ä¹Ÿå°±æ˜¯è®©ç®€å•äº‹æƒ…ç®€å•åŒ–,å¤æ‚äº‹æƒ…å¯èƒ½ç®€å•è§£å†³</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">çœ‹ä¸€ä¸ªç»¼åˆçš„ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class User(object):&nbsp; #è¿™äº›ç±»è®¾è®¡æ•°æ®åº“çš„æ¨¡å‹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __init__(self, group_name=None, users=None, permissions=None):<br />if users is None: users = []<br />if permissions is None: permissions = []<br />self.group_name = group_name<br />self._users = users<br />self._permissions = permissions</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def add_user(self, user):<br />self._users.append(user)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def del_user(self, user):<br />self._users.remove(user)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def add_permission(self, permission):<br />self._permissions.append(permission)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def del_permission(self, permission):<br />self._permissions.remove(permission)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class Permission(object):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __init__(self, permission_name=None, groups=None):<br />self.permission_name = permission_name<br />self._groups = groups</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def join_group(self, group):<br />self._groups.append(group)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def leave_group(self, group):<br />self._groups.remove(group)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ç”¨sqlalchemyçš„æ•ˆæœæ˜¯è¿™æ ·çš„:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_table = Table(<br />&lsquo;tf_user&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False),<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">group_table = Table(<br />&lsquo;tf_group&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;group_name&rsquo;, Unicode(16), unique=True, nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">permission_table = Table(<br />&lsquo;tf_permission&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;permission_name&rsquo;, Unicode(16), unique=True,<br />nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_group = Table(<br />&lsquo;user_group&rsquo;,&nbsp; metadata,<br />Column(&lsquo;user_id&rsquo;, None, ForeignKey(&lsquo;tf_user.id&rsquo;),<br />primary_key=True),<br />Column(&lsquo;group_id&rsquo;, None, ForeignKey(&lsquo;tf_group.id&rsquo;),<br />primary_key=True))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">group_permission = Table(<br />&lsquo;group_permission&rsquo;,&nbsp; metadata,<br />Column(&lsquo;group_id&rsquo;, None, ForeignKey(&lsquo;tf_group.id&rsquo;),<br />primary_key=True),<br />Column(&lsquo;permission_id&rsquo;, None, ForeignKey(&lsquo;tf_permission.id&rsquo;),<br />primary_key=True))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(User, user_table, properties=dict(<br />_groups=relation(Group, secondary=user_group, backref=&rsquo;_users&rsquo;)))<br />mapper(Group, group_table, properties=dict(<br />_permissions=relation(Permission, secondary=group_permission,<br />backref=_&rsquo;groups&rsquo;)))<br />mapper(Permission, permission_table)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è¿™é‡Œæ²¡æœ‰ä¿®æ”¹å¯¹è±¡,è€Œjoin_group,leave_groupè¿™æ ·çš„å‡½æ•°ä¾ç„¶å¯ç”¨,sqlalchemyä¼šè·Ÿè¸ªå˜åŒ–,å¹¶ä¸”è‡ªåŠ¨åˆ·æ–°æ•°æ®åº“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¸Šé¢ä»‹ç»äº†ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­,è¿æ¥æ•°æ®åº“å—¨å¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine = create_engine(&lsquo;sqlite://&rsquo;)<br />connection = engine.connect()&nbsp; #ä½¿ç”¨connect<br />result = connection.execute(&ldquo;select user_name from tf_user&rdquo;)<br />for row in result:<br />print &lsquo;user name: %s&rsquo; % row['user_name']<br />result.close()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine = create_engine(&lsquo;sqlite://&rsquo;, strategy=&rsquo;threadlocal&rsquo;)&nbsp;#,strategy=&rsquo;threadlocal&rsquo;è¡¨ç¤ºé‡ç”¨å…¶å®ƒæœ¬åœ°çº¿ç¨‹å‡å°‘å¯¹æ•°æ®åº“çš„è®¿é—®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy.databases.mysql import MSEnum, MSBigInteger&nbsp; #è¿™ä¸ª sqlalchemy.databasesæ˜¯æŸæ•°æ®åº“è½¯ä»¶çš„&rsquo;æ–¹è¨€&rsquo;é›†åˆ,åªæ”¯æŒç‰¹å®šå¹³å°<br />user_table = Table(&lsquo;tf_user&rsquo;, meta,<br />Column(&lsquo;id&rsquo;, MSBigInteger),<br />Column(&lsquo;honorific&rsquo;, MSEnum(&lsquo;Mr&rsquo;, &lsquo;Mrs&rsquo;, &lsquo;Ms&rsquo;, &lsquo;Miss&rsquo;, &lsquo;Dr&rsquo;, &lsquo;Prof&rsquo;)))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä»¥ä¸‹æ˜¯å‡ ä¸ªMetaDataçš„åº”ç”¨:<br />unbound_meta = MetaData()&nbsp; #è¿™ä¸ªmetadataæ²¡æœ‰ç»‘å®š<br />db1 = create_engine(&lsquo;sqlite://&rsquo;)<br />unbound_meta.bind = db1&nbsp; #å…³è”å¼•æ“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">db2 = MetaData(&lsquo;sqlite:///test1.db&rsquo;)&nbsp; #ç›´æ¥è®¾ç½®å¼•æ“<br />bound_meta1 = MetaData(db2)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"># Create a bound MetaData with an implicitly created engine<br />bound_meta2 = MetaData(&lsquo;sqlite:///test2.db&rsquo;)&nbsp; #éšå¼ç»‘å®šå¼•æ“<br />meta = MetaData(&lsquo;sqlite://&rsquo;) #ç›´æ¥ç»‘å®šå¼•æ“å¯ä»¥è®©æºæ•°æ®ç›´æ¥è®¿é—®æ•°æ®åº“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_table = Table(<br />&lsquo;tf_user&rsquo;, meta,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False),<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">group_table = Table(<br />&lsquo;tf_group&rsquo;, meta,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;group_name&rsquo;, Unicode(16), unique=True, nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">meta.create_all() #åˆ›å»ºæ‰€æœ‰çš„æ•°æ®åº“(ä»¥ä¸Š2ä¸ª),å‡½æ•°æ— å‚æ•°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">result_set = group_table.select().execute() #é€‰å– group_tableçš„æ‰€æœ‰è¡¨æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä»¥ä¸‹çœ‹ä¸€ä¸ªå…³è”å¤šå¼•æ“çš„ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">meta = MetaData()&nbsp; #è¿™é‡Œä¸èƒ½ç›´æ¥å…³è”äº†<br />engine1 = create_engine(&lsquo;sqlite:///test1.db&rsquo;)&nbsp; #2ä¸ªå¼•æ“<br />engine2 = create_engine(&lsquo;sqlite:///test2.db&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"># Use the engine parameter to load tables from the first engineuser_table= Table(<br />&lsquo;tf_user&rsquo;, meta, autoload=True, autoload_with=engine1)&nbsp; #ä»ç¬¬ä¸€ä¸ªå¼•æ“åŠ è½½è¿™äº›è¡¨<br />group_table = Table(<br />&lsquo;tf_group&rsquo;, meta, autoload=True, autoload_with=engine1)<br />permission_table = Table(<br />&lsquo;tf_permission&rsquo;, meta, autoload=True, autoload_with=engine1)<br />user_group_table = Table(<br />&lsquo;user_group&rsquo;, meta, autoload=True, autoload_with=engine1)<br />group_permission_table = Table(<br />&lsquo;group_permission&rsquo;, meta, autoload=True, autoload_with=engine1)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">meta.create_all(engine2) #åœ¨ç¬¬äºŒä¸ªå¼•æ“é‡Œé¢åˆ›å»ºè¡¨</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class ImageType(sqlalchemy.types.Binary):&nbsp; #è‡ªå®šä¹‰æˆ‘ä»¬çš„tableçš„ç±»<br />def convert_bind_param(self, value, engine):<br />sfp = StringIO()<br />value.save(sfp, &lsquo;JPEG&rsquo;)<br />return sfp.getvalue()<br />def convert_result_value(self, value, engine):<br />sfp = StringIO(value)<br />image = PIL.Image.open(sfp)<br />return image&nbsp; #è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå›¾å½¢å¤„ç†çš„ç±»å‹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å½“å®šä¹‰äº†metadataå,ä¼šè‡ªå®šç”Ÿæˆä¸€ä¸ªtable.cobject:<br />q = user_table.select(&nbsp; #æŸ¥è¯¢åˆ›å»ºåœ¨2007å¹´6æœˆ1å·ä¹‹å‰çš„ç”¨æˆ·,å¹¶ä¸”ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯&rsquo;r&rsquo;<br />user_table.c.user_name.like(&lsquo;r%&rsquo;)&nbsp; #è¿™é‡Œçš„cå°±æ˜¯é‚£ä¸ªç‰¹æ®Šçš„ç±»,å½“ä½¿ç”¨sqlè¡¨è¾¾å¼ä¼šç”¨åˆ°<br />&amp; user_table.c.created &lt; datetime(2007,6,1))<br />æˆ–è€…æ›¿ä»£è¿™æ ·:<br />q = user_table.select(and_(<br />user_table.c.user_name.like(&lsquo;r%&rsquo;),<br />user_table.c.created &lt; datetime(2007,6,1)))<br />ä¹Ÿå¯ä»¥ä½¿ç”¨romæ˜ å°„:<br />q = session.query(User)<br />q = q.filter(User.c.user_name.like(&lsquo;r%&rsquo;)<br />&amp; User.c.created &gt; datetime(2007,6,1))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è¿˜æ˜¯ä¸€ä¸ªORMçš„ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_table = Table(<br />&lsquo;tf_user&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False),<br />Column(&lsquo;email_address&rsquo;, Unicode(255), unique=True, nullable=False),<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False),<br />Column(&lsquo;first_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;last_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;created&rsquo;, DateTime, default=datetime.now))&nbsp; #è¿™æ˜¯ä¸€ä¸ªå®šä¹‰çš„è¡¨ç±»å‹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">group_table = Table(<br />&lsquo;tf_group&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;group_name&rsquo;, Unicode(16), unique=True, nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_group = Table(<br />&lsquo;user_group&rsquo;,&nbsp; metadata,<br />Column(&lsquo;user_id&rsquo;, None, ForeignKey(&lsquo;tf_user.id&rsquo;), primary_key=True),<br />Column(&lsquo;group_id&rsquo;, None, ForeignKey(&lsquo;tf_group.id&rsquo;),<br />&hellip; primary_key=True))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">import sha<br />class User(object):&nbsp; #æ˜ å°„ç±»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def _get_password(self):<br />return self._password<br />def _set_password(self, value):<br />self._password = sha.new(value).hexdigest() #åªå­˜å‚¨ç”¨æˆ·çš„å“ˆå¸Œå¯†ç <br />password=property(_get_password, _set_password)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def password_matches(self, password):<br />return sha.new(password).hexdigest() == self._password</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(User, user_table, properties=dict( #æ˜ å°„å°†åˆ›å»ºid, user_name, email_address, password, first_name, last_name,createdç­‰å­—æ®µ<br />_password=user_table.c.password)) #ä½¿ç”¨å“ˆå¸Œåçš„å¯†ç æ›¿æ¢çœŸå®å¯†ç ,æ•°æ®åº“åªä¿å­˜å“ˆå¸Œåçš„,è¿™é‡Œåœ¨ormä¸Šä¿®æ”¹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(User, user_table, properties=dict(<br />_password=user_table.c.password,<br />groups=relation(Group, secondary=user_group, backref=&rsquo;users&rsquo;))) #è¿™é‡Œè¡¨ç¤ºå¯ä»¥è®¿é—®æ‰€æœ‰çš„ç»„ï¼Œç”¨æˆ·åªéœ€è®¿é—®ä¸€ä¸ªæˆå‘˜å›¢ä½“å±æ€§,user_groupæ˜ å°„ç±»æ·»åŠ groupå’ŒGroupå…³è”,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"># Userç±»æ·»åŠ usersè®¿é—®groupå±æ€§,çœ‹æ•ˆæœ:<br />group1.users.append(user1)&nbsp; #ç»™group1æ·»åŠ ç”¨æˆ·user1,è‡ªåŠ¨æ›´æ–°<br />user2.groups.append(group2) #æŠŠuser2æ·»åŠ åˆ°group2ç»„,è‡ªåŠ¨æ›´æ–°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å¯¹äºSQLAlchemyçš„ä¸€äº›æ€»ç»“:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1 metadata.create_all()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">åˆ›å»ºå¤šä¸ªtableå¯ä»¥è¿™æ ·ä½¿ç”¨,ä½†æ˜¯ä»–è¿˜æœ‰ä¸ªåŠŸèƒ½,å®ƒæ·»åŠ äº†&rdquo;IF NOT EXISTS&rdquo;,å°±æ˜¯åœ¨æ•°æ®åº“å­˜åœ¨çš„æ—¶å€™,ä»–è¿˜æ˜¯å®‰å…¨çš„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2 äº¤äº’æ¨¡å¼ä¸‹çš„ä¸€ä¸ªå…¨è¿‡ç¨‹:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_3"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_3'" tppabs="http://www.dongwm.com/page/2/#codesyntax_3" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_3'" tppabs="http://www.dongwm.com/page/2/#codesyntax_3" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_3'" tppabs="http://www.dongwm.com/page/2/#codesyntax_3" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dongwm@localhost ~ $ python</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Python 2.7.3 (default, Jul 11 2012, 10:10:17)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[GCC 4.5.3] on linux2</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or&quot;license&quot; for more information.</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy import create_engine</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy import Table, MetaData, Column, ForeignKey,Integer, String, Unicode, DateTime</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from datetime import datetime</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; metadata = MetaData('sqlite:///tutorial.db')</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; user_table = Table(</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; 'tf_user', metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; Column('id', Integer,primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; Column('user_name',Unicode(16),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unique=True,nullable=False),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; Column('password',Unicode(40), nullable=False),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; Column('display_name',Unicode(255), default=''),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; Column('created', DateTime,default=datetime.now))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">__main__:7: SAWarning: Unicode column received non-unicode default value.</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = user_table.insert()&nbsp;#æ’å…¥æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt.execute(user_name='dongwm1',password='secret',display_name='testdongwm1')</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.8-py2.7-linux-i686.egg/sqlalchemy/engine/default.py:463:SAWarning: Unicode type received non-unicode bind param value.</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;param.append(processors[key](compiled_params[key]))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&lt;sqlalchemy.engine.base.ResultProxy object at 0x8377fcc&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt.execute(user_name='dongwm2',password='secret',display_name='testdongwm2') #è¿™ä¸ªå®ä¾‹å¯ä»¥å¤šæ¬¡æ’å…¥,å’ŒsqlåŒºåˆ«å¾ˆå¤§</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&lt;sqlalchemy.engine.base.ResultProxy object at 0x837e4ec&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = user_table.select() #selectæŸ¥è¯¢</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; result = stmt.execute()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; for row in result:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...&nbsp;&nbsp;&nbsp;&nbsp; print row</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">...</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">(1, u'dongwm1', u'secret', u'testdongwm1', datetime.datetime(2012, 7, 17,11, 57, 48, 515953))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">(2, u'dongwm2', u'secret', u'testdongwm2', datetime.datetime(2012, 7, 17,11, 58, 5, 226977))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; result = stmt.execute()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; row =result.fetchone() #åªè·å–ç¬¦åˆè¦æ±‚çš„ç¬¬ä¸€é¡¹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print&nbsp; row['user_name']</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dongwm1</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print row.password</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">secret</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print row.items()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[(u'id', 1), (u'user_name', u'dongwm1'), (u'password', u'secret'),(u'display_name', u'testdongwm1'), (u'created', datetime.datetime(2012, 7, 17,11, 57, 48, 515953))]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = user_table.select(user_table.c.user_name=='dongwm1') #è¿‡æ»¤ç•™ä¸‹user_name=='dongwm1çš„é¡¹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print stmt.execute().fetchall() #è·å–æ‰€æœ‰ç¬¦åˆé¡¹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[(1, u'dongwm1', u'secret', u'testdongwm1', datetime.datetime(2012, 7, 17,11, 57, 48, 515953))]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = user_table.update(user_table.c.user_name=='dongwm1') #æ›´æ–°æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt.execute(password='secret123') #ä¿®æ”¹å¯†ç </p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&lt;sqlalchemy.engine.base.ResultProxy object at 0x8377f6c&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = user_table.delete(user_table.c.user_name !='dongwm1')&nbsp; #åˆ é™¤user_nameä¸æ˜¯dongwm1çš„æ¡ç›®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt.execute()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&lt;sqlalchemy.engine.base.ResultProxy object at 0x837f3ac&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; user_table.select().execute().fetchall() #æŸ¥è¯¢å‘ç°å°±å‰©ä¸€æ¡äº†</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[(1, u'dongwm1', u'secret123', u'testdongwm1', datetime.datetime(2012, 7,17, 11, 57, 48, 515953))]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">3 sissionä¸Šé¢å·²ç»è¯´è¿‡äº†,è¡¥å……ä¸€äº›:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">session.delete(u) #æŠŠæ˜ å°„ç±»ä»ä¼šè¯ä¸­åˆ é™¤</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">4 å…³äºå¼•æ“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å¼•æ“å°±æ˜¯æ ¹æ®ä¸åŒçš„æ•°æ®åº“æ–¹è¨€è¿æ¥æ•°æ®åº“çš„æ–¹æ³•</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­(æ–¹æ³• driver://username:password@host:port/database):<br />engine = create_engine(&lsquo;sqlite://&rsquo;)&nbsp; #è¿æ¥åŸºäºå†…å­˜çš„sqlite<br />engine = create_engine(&lsquo;sqlite:///data.sqlite&rsquo;)&nbsp; #è¿æ¥åŸºäºç¡¬ç›˜æ–‡ä»¶çš„sqlite<br />engine = create_engine(&lsquo;postgres://dongwm:foo@localhost:5432/pg_db&rsquo;)&nbsp; #è¿æ¥postgresql<br />engine = create_engine(&lsquo;mysql://localhost/mysql_db&rsquo;)&nbsp; #è¿æ¥mysql<br />engine = create_engine(&lsquo;oracle://dongwm:foo@oracle_tns&rsquo;) #è¿æ¥åŸºäºTNSåè®®çš„Oracle<br />engine =create_engine(&lsquo;oracle://dongwm:foo@localhost:1521/oracle_sid&rsquo;) #è¿æ¥æ²¡æœ‰TNSåå­—çš„Oracle</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¹Ÿå¯ä»¥å¸¦ä¸€äº›å‚æ•°:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">url=&rsquo;postgres://dongwm:foo@localhost/pg_db?arg1=foo&amp;arg2=bar&rsquo;<br />engine = create_engine(url)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æˆ–è€…:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine = create_engine(&lsquo;postgres://dongwm:foo@localhost/pg_db&rsquo;,<br />connect_args=dict(arg1=&rsquo;foo&rsquo;, arg2=&rsquo;bar&rsquo;))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è¿˜å¯ä»¥é€šè¿‡å‡½æ•°å®Œå…¨æ§åˆ¶è¿æ¥:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">import psycopg<br />def connect_pg():<br />return psycopg.connect(user=&rsquo;rick&rsquo;, host=&rsquo;localhost&rsquo;)<br />engine = create_engine(&lsquo;postgres://&rsquo;, creator=connect_pg)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">import logging<br />handler = logging.FileHandler(&lsquo;sqlalchemy.engine.log&rsquo;)&nbsp; #å¯ä»¥ç»™å®ƒæ·»åŠ ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶å¤„ç†ç±»<br />handler.level = logging.DEBUG<br />logging.getLogger(&lsquo;sqlalchemy.engine&rsquo;).addHandler(handler)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¸Šé¢è¯´çš„æ“ä½œè¡¨,ä¹Ÿå¯ä»¥ç›´æ¥æ“ä½œæ•°æ®åº“:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">conn = engine.connect()<br />result = conn.execute(&lsquo;select user_name, email_address from tf_user&rsquo;) #ç»“æœæ˜¯ä¸€ä¸ªsqlalchemy.engine.ResultProxyçš„å®ä¾‹<br />for row in result:<br />print &lsquo;User name: %s Email address: %s&rsquo; % (<br />row['user_name'], row['email_address'])<br />conn.close()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import pool #æœ¬æ¥å®ƒå·²ç»è‡ªåŠ¨é€šè¿‡æ•°æ®åº“è¿æ¥ç®¡ç†æ•°æ®æ± ,ä½†æ˜¯ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç®¡ç†<br />import psycopg2<br />psycopg = pool.manage(psycopg2) #ç»“æœæ˜¯ä¸€ä¸ªsqlalchemy.pool.DBProxyå®ä¾‹<br />connection = psycopg.connect(database=&rsquo;mydb&rsquo;,<br />username=&rsquo;rick&rsquo;, password=&rsquo;foo&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">5 å…³äºå…ƒæ•°æ®metadata</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å®ƒæ”¶é›†äº†æè¿°tableå¯¹è±¡ç­‰çš„å…ƒæ•°æ®ç±»,å½“ä½¿ç”¨ORMç­‰æ—¶å¿…é¡»ä½¿ç”¨metadata</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å¦‚æœä»–è¢«ç»‘å®šäº†,é‚£ä¹ˆä½¿ç”¨table.create()å°±ä¼šç”Ÿæˆè¡¨,æ²¡æœ‰ç»‘å®šéœ€è¦:table.create(bind=some_engine_or_connection),å…¶ä¸­table.create</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">åŒ…å«ä¸€äº›å‡½æ•°:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">autoload:é»˜è®¤æ˜¯false,å½“æ•°æ®åº“å·²ç»å­˜åœ¨è¿™ä¸ªtableä¼šè‡ªåŠ¨åŠ è½½è¦†ç›–</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">autoload_with:é»˜è®¤æ˜¯false,æ˜¯å¦è‡ªåŠ¨åŠ è½½å¼•æ“çš„å­—æ®µç»“æ„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">reflect:é»˜è®¤æ˜¯false,æ˜¯å¦ä½“ç°æºè¡¨ç»“æ„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">brand_table = Table(&lsquo;brand&rsquo;, metadata,<br />Column(&lsquo;name&rsquo;, Unicode(255)), # è¦†ç›–ç±»å‹<br />autoload=True)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">6 å…³äºè¡¨ç»“æ„:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è®¾ç½®è¡¨ä¸»é”®å¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column(&lsquo;brand_id&rsquo;, Integer, ForeignKey(&lsquo;brand.id&rsquo;),primary_key=True), #é€šè¿‡primary_key=True<br />Column(&lsquo;sku&rsquo;, Unicode(80), primary_key=True))<br />ä¹Ÿå¯ä»¥è¿™æ ·:<br />product_table = Table(<br />&lsquo;product&rsquo;, metadata,<br />Column(&lsquo;brand_id&rsquo;, Integer, ForeignKey(&lsquo;brand.id&rsquo;)),<br />Column(&lsquo;sku&rsquo;, Unicode(80)),<br />PrimaryKeyConstraint(&lsquo;brand_id&rsquo;, &lsquo;sku&rsquo;, name=&rsquo;prikey&rsquo;))&nbsp; #é€šè¿‡PrimaryKeyConstraint</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">style_table = Table(<br />&lsquo;style&rsquo;, metadata,<br />Column(&lsquo;brand_id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;sku&rsquo;, Unicode(80), primary_key=True),<br />Column(&lsquo;code&rsquo;, Unicode(80), primary_key=True),<br />ForeignKeyConstraint(&nbsp; #ä½¿ç”¨å¤åˆé”®,å…³è”å¤–éƒ¨è¡¨çš„å­—æ®µ<br />['brand_id', 'sku'],<br />['product.brand_id', 'product.sku']))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_table = Table(<br />&lsquo;product&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;brand_id&rsquo;, Integer, ForeignKey(&lsquo;brand.id&rsquo;)), #ä»–çš„brand_idå…³è”brandçš„è®©id<br />Column(&lsquo;sku&rsquo;, Unicode(80)),<br />UniqueConstraint(&lsquo;brand_id&rsquo;, &lsquo;sku&rsquo;)) #çº¦æŸå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯æ¡è®°å½•</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">payment_table = Table(<br />&lsquo;payment&rsquo;, metadata,<br />Column(&lsquo;amount&rsquo;, Numeric(10,2), CheckConstraint(&lsquo;amount &gt; 0&prime;))) #éªŒè¯amountå¤§äº0<br />user_table = Table(<br />&lsquo;tf_user&rsquo;, MetaData(),<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False),<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False),<br />Column(&lsquo;first_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;last_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;created_apptime&rsquo;, DateTime, default=datetime.now), #defaultè¡¨ç¤ºå½“ä¸èˆå®šå…·ä½“å€¼æ—¶è®¾å®šä¸€ä¸ªé»˜è®¤å€¼<br />Column(&lsquo;created_dbtime&rsquo;, DateTime, PassiveDefault(&lsquo;sysdate&rsquo;)), # PassiveDefaultæ˜¯æ•°æ®åº“çº§åˆ«çš„é»˜è®¤å€¼,<br />Column(&lsquo;modified&rsquo;, DateTime, onupdate=datetime.now)) #å•è®¾ç½®onupdateè¿™ä¸ªå±æ€§ï¼Œè¿™æ˜¯ä¸åº”ç”¨åˆ°æ•°æ®åº“çš„è®¾è®¡ä¸­çš„.åªæ˜¯å­˜åœ¨äºæ˜ å°„ç±»ä¸­.</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">#å®ƒæ˜¯æ´»è·ƒæ›´æ–°çš„,å› ä¸ºæ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´éƒ½ä¸åŒ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">user_table = Table(<br />&lsquo;tf_user&rsquo;, MetaData(),<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;user_name&rsquo;, Unicode(16), unique=True, nullable=False, index=True), #ä¸€æ—¦æ•°æ®åº“å¢é•¿åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å¢åŠ è¡¨çš„ç´¢å¼•ï¼Œä»¥åŠ å¿«æŸäº›æ“ä½œ<br />Column(&lsquo;password&rsquo;, Unicode(40), nullable=False),<br />Column(&lsquo;first_name&rsquo;, Unicode(255), default=&rdquo;),<br />Column(&lsquo;last_name&rsquo;, Unicode(255), default=&rdquo;, index=True))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å…¶ä¸­æŒ‡å®šç´¢å¼•ä¹Ÿå¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">i = Index(&lsquo;idx_name&rsquo;,user_table.c.first_name,user_table.c.last_name,unique=True)<br />i.create(bind=e)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">brand_table = Table(<br />&lsquo;brand&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, Sequence(&lsquo;brand_id_seq&rsquo;), primary_key=True),&nbsp; #éœ€è¦é€šè¿‡åºåˆ—åŒ–æ–¹å¼æ¥åˆ›å»ºæ–°ä¸»é”®æ ‡è¯†ç¬¦çš„æ•°æ®åº“ï¼Œ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">#SQLAlchemy å¹¶ä¸ä¼šè‡ªåŠ¨ä¸ºå…¶ç”Ÿæˆã€‚å¯ä»¥æŒ‡å®šSequenceç”Ÿæˆ<br />Column(&lsquo;name&rsquo;, Unicode(255), unique=True, nullable=False))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">7 å…ƒæ•°æ®æ“ä½œ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">meta1 = MetaData(&lsquo;postgres://postgres:password@localhost/test&rsquo;,<br />&hellip; reflect=True)<br />meta2 = MetaData(&lsquo;sqlite://&rsquo;)<br />for table in meta1.table_iterator():<br />table.tometadata(meta2) #é€šè¿‡è¿™ä¸ªæ–¹æ³•è®©meta1çš„å…ƒæ•°æ®è¢«meta2ä½¿ç”¨<br />meta2.create_all()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2 å‡å¦‚æƒ³æ”¾å¼ƒç»‘å®šä½¿ç”¨drop_all( )æˆ–è€…drop(e)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1 è‡ªå®šä¹‰è¡¨ç»“æ„ç±»å‹:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import types</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class MyCustomEnum(types.TypeDecorator):&nbsp; #è‡ªå®šä¹‰çš„ç±»å‹ç»§æ‰¿è‡³types.TypeDecorator</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">impl=types.Integer&nbsp; #å®ç°æŒ‡å®šçš„ç±»å‹int</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __init__(self, enum_values, *l, **kw):<br />types.TypeDecorator.__init__(self, *l, **kw)<br />self._enum_values = enum_values</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def convert_bind_param(self, value, engine):&nbsp; #å¿…é¡»å«æœ‰è¿™ä¸ªæ–¹æ³•,è½¬æ¢pythonè¯­è¨€ä¸ºSQL<br />result = self.impl.convert_bind_param(value, engine)<br />if result not in self._enum_values:<br />raise TypeError, (<br />&ldquo;Value %s must be one of %s&rdquo; % (result, self._enum_values))<br />return result</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def convert_result_value(self, value, engine):&nbsp; #å¿…é¡»å«æœ‰è¿™ä¸ªæ–¹æ³•,é€šè¿‡dbçš„apiæŠŠSQLè½¬æ¢æˆpythonè¯­è¨€<br />&lsquo;Do nothing here&rsquo;<br />return self.impl.convert_result_value(value, engine)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">çœ‹ä¸€ä¸ªä¾‹å­:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_2"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_2'" tppabs="http://www.dongwm.com/page/2/#codesyntax_2" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_2'" tppabs="http://www.dongwm.com/page/2/#codesyntax_2" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_2'" tppabs="http://www.dongwm.com/page/2/#codesyntax_2" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import types</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy.databases import sqlite</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class MyCustomEnum(types.TypeDecorator):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; impl = types.Integer</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; def __init__(self, enum_values,*l, **kw):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types.TypeDecorator.__init__(self, *l, **kw)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self._enum_values =enum_values</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp; def bind_processor(self,dialect): #å¦‚æœæä¾›è¿™ä¸ªæ–¹æ³•ä¼šæ›¿ä»£convert_bind_param( )å’Œconvert_result_value( )</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; impl_processor =self.impl.bind_processor(dialect)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if impl_processor:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def processor(value):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result =impl_processor(value)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assert value inself._enum_values, &#92;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Value %smust be one of %s&quot; % (result,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._enum_values)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def processor(value):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assert value inself._enum_values, &#92;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Value %smust be one of %s&quot; % (value,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;self._enum_values)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return value</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return processor</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mce=MyCustomEnum([1,2,3])</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">processor = mce.bind_processor(sqlite.dialect())</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print processor(1) #è¿”å›1</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">print processor(5) #è¿”å›é”™è¯¯,å› ä¸ºä¸æ˜¯1,2,3ä¸­çš„æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><br />ä½ ç”šè‡³å¯ä»¥ç›´æ¥å®šä¹‰è‡ªå®šçš„TypeDecorator</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">class NewType(types.TypeEngine): #TypeDecoratorç»§æ‰¿è‡ªtypes.TypeEngine</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __init__(self, *args):<br />self._args = args</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def get_col_spec(self):&nbsp; #create_table( )ä¼šç”¨åˆ°è¿™ä¸ªæ–¹æ³•<br />return &lsquo;NEWTYPE(%s)&rsquo; % &lsquo;,&rsquo;.join(self._args)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def convert_bind_param(self, value, engine):&nbsp; #è¿™ä¸ªå¿…é¡»è®¾ç½®<br />return value</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def convert_result_value(self, value, engine):&nbsp; #è¿™ä¸ªä¹Ÿå¿…é¡»è®¾ç½®<br />return value</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2 SQLè¯­å¥åœ¨äº¤äº’æ¨¡å¼ä¸‹çš„ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dongwm@localhost ~ $ python<br />Python 2.7.3 (default, Jul 11 2012, 10:10:17)<br />[GCC 4.5.3] on linux2<br />Type &ldquo;help&rdquo;, &ldquo;copyright&rdquo;, &ldquo;credits&rdquo; or &ldquo;license&rdquo; for more information.<br />&gt;&gt;&gt; from sqlalchemy import Table, MetaData, Column, ForeignKey,Integer, String, Unicode, DateTime<br />&gt;&gt;&gt; metadata=MetaData()<br />&gt;&gt;&gt; simple_table = Table(&nbsp; #ä¸€ä¸ªç®€å•çš„è¡¨ç»“æ„<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;simple&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;col1&prime;, Unicode(20)))<br />&gt;&gt;&gt;<br />&gt;&gt;&gt; stmt = simple_table.insert()&nbsp; #æ’å…¥æ•°æ®æ“ä½œçš„å®ä¾‹<br />&gt;&gt;&gt; print stmt #æ‰“å°è¿™ä¸ªå®ä¾‹<br />INSERT INTO simple (id, col1) VALUES (:id, :col1) #é‡Œé¢åŒ…å«éœ€è¦æ›¿æ¢çš„å˜é‡<br />&gt;&gt;&gt; compiled_stmt = stmt.compile()&nbsp; #ç¼–è¯‘è¯­å¥<br />&gt;&gt;&gt; print compiled_stmt.params #è½¬æˆäº†å­—å…¸å¾—æ–¹å¼<br />&#123;&lsquo;id&rsquo;: None, &lsquo;col1&prime;: None&#125;<br />&gt;&gt;&gt; from sqlalchemy import create_engine<br />&gt;&gt;&gt; engine = create_engine(&lsquo;sqlite://&rsquo;)<br />&gt;&gt;&gt; simple_table.create(bind=engine)&nbsp; #åˆ›å»ºtable<br />&gt;&gt;&gt; engine.execute(stmt, col1=&rdquo;Foo&rdquo;) #ç»™è¯­å¥æ·»åŠ å€¼<br />/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.8-py2.7-linux-i686.egg/sqlalchemy/engine/default.py:463:SAWarning: Unicode type received non-unicode bind param value.<br />param.append(processors[key](compiled_params[key]))<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x8376c8c&gt;<br />&gt;&gt;&gt; metadata.bind = engine&nbsp; #å’Œä¸Šé¢æ•ˆæœä¸€æ ·,ç»™è¯­å¥æ·»åŠ å€¼<br />&gt;&gt;&gt; stmt.execute(col1=&rdquo;Bar&rdquo;)<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x8376f4c&gt;<br />&gt;&gt;&gt; stmt = simple_table.insert(values=dict(col1=&rdquo;Initial value&rdquo;)) #è¿™æ¬¡æ’å…¥å·²ç»è®¾ç½®äº†å€¼<br />&gt;&gt;&gt; print stmt<br />INSERT INTO simple (col1) VALUES (?)<br />&gt;&gt;&gt; compiled_stmt = stmt.compile()<br />&gt;&gt;&gt; print compiled_stmt.params<br />&#123;&lsquo;col1&prime;: &lsquo;Initial value&rsquo;&#125;<br />&gt;&gt;&gt; stmt = simple_table.insert()<br />&gt;&gt;&gt; stmt.execute(col1=&rdquo;First value&rdquo;)<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x838832c&gt;<br />&gt;&gt;&gt;<br />&gt;&gt;&gt; stmt.execute(col1=&rdquo;Second value&rdquo;)<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x838844c&gt;<br />&gt;&gt;&gt; stmt.execute(col1=&rdquo;Third value&rdquo;) #è¿™æ ·ä¸€è¡Œä¸€è¡Œæ’å…¥çœŸæ˜¯è´¹åŠ²<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x838856c&gt;<br />&gt;&gt;&gt; stmt.execute([dict(col1=&quot;Fourth Value&quot;), #å¯ä»¥ä¸€æ¬¡æ’å…¥å¤šè¡Œ<br />...&nbsp;&nbsp;&nbsp;&nbsp; dict(col1=&quot;Fifth Value&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp; dict(col1=&quot;Sixth Value&quot;)])<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x83886ac&gt;<br />&gt;&gt;&gt; from sqlalchemy import text<br />&gt;&gt;&gt; stmt = simple_table.update(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; whereclause=text(&ldquo;col1=&rsquo;First value&rsquo;&rdquo;),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; values=dict(col1=&rsquo;1st Value&rsquo;))&nbsp; #æ‰§è¡Œcol1æ˜¯First valueçš„æ¡ç›®è®¾ç½®å€¼ä¸º1st Value<br />&gt;&gt;&gt; stmt.execute()<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x838878c&gt;<br />&gt;&gt;&gt; stmt = simple_table.update(text(&ldquo;col1=&rsquo;Second value&rsquo;&rdquo;)) #å¯»æ‰¾col1æ˜¯Second valueçš„æ¡ç›®<br />&gt;&gt;&gt; stmt.execute(col1=&rsquo;2nd Value&rsquo;) #æ‰§è¡Œæ›´æ–°æ—¶,è®¾ç½®å…¶å€¼,æƒ³è¿‡å’Œä¸Šé¢çš„ä¸€æ ·<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x8376f4c&gt;<br />&gt;&gt;&gt; stmt = simple_table.update(text(&ldquo;col1=&rsquo;Third value&rsquo;&rdquo;))<br />&gt;&gt;&gt; print stmt<br />UPDATE simple SET id=?, col1=? WHERE col1=&rsquo;Third value&rsquo;<br />&gt;&gt;&gt; engine.echo = True #è®¾ç½®æ‰“å°è°ƒè¯•æ—¥å¿—<br />&gt;&gt;&gt; stmt.execute(col1=&rsquo;3rd value&rsquo;)<br />2012-07-17 15:16:59,231 INFO sqlalchemy.engine.base.Engine UPDATE simple SETcol1=? WHERE col1=&rsquo;Third value&rsquo;<br />2012-07-17 15:16:59,245 INFO sqlalchemy.engine.base.Engine (&rsquo;3rd value&rsquo;,)<br />2012-07-17 15:16:59,245 INFO sqlalchemy.engine.base.Engine COMMIT<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x83767ec&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = simple_table.delete(&nbsp; #åˆ é™¤<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; text(&ldquo;col1=&rsquo;Second value&rsquo;&rdquo;))<br />&gt;&gt;&gt; stmt.execute()<br />2012-07-17 15:21:03,806 INFO sqlalchemy.engine.base.Engine DELETE FROM simpleWHERE col1=&rsquo;Second value&rsquo;<br />2012-07-17 15:21:03,806 INFO sqlalchemy.engine.base.Engine ()<br />2012-07-17 15:21:03,806 INFO sqlalchemy.engine.base.Engine COMMIT<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x8376a0c&gt;<br />&gt;&gt;&gt; from sqlalchemy import select<br />&gt;&gt;&gt; stmt = select([simple_table.c.col1])&nbsp; #æŸ¥è¯¢col1è¿™ä¸ªå­—æ®µ<br />&gt;&gt;&gt; for row in stmt.execute():<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print row<br />(u&rsquo;Foo&rsquo;,)<br />(u&rsquo;Bar&rsquo;,)<br />(u&rsquo;1st Value&rsquo;,)<br />(u&rsquo;2nd Value&rsquo;,)<br />(u&rsquo;3rd value&rsquo;,)<br />(u&rsquo;Fourth Value&rsquo;,)<br />(u&rsquo;Fifth Value&rsquo;,)<br />(u&rsquo;Sixth Value&rsquo;,)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = simple_table.select() #å’Œä¸Šé¢çš„åŒºåˆ«æ˜¯è¿™æ˜¯æ¡ç›®å…¨éƒ¨æ˜¾ç¤º<br />&gt;&gt;&gt; for row in stmt.execute():&nbsp; #è¿™2å¥ä¹Ÿå¯ä»¥è¿™æ ·è¡¨ç¤ºstmt = select( simple_table])<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print row<br />&hellip;<br />(1, u&rsquo;Foo&rsquo;)<br />(2, u&rsquo;Bar&rsquo;)<br />(3, u&rsquo;1st Value&rsquo;)<br />(4, u&rsquo;2nd Value&rsquo;)<br />(5, u&rsquo;3rd value&rsquo;)<br />(6, u&rsquo;Fourth Value&rsquo;)<br />(7, u&rsquo;Fifth Value&rsquo;)<br />(8, u&rsquo;Sixth Value&rsquo;)<br />&gt;&gt;&gt; x = simple_table.c.col1==&rdquo;Foo&rdquo;<br />&gt;&gt;&gt; print type(x)<br />&lt;class &lsquo;sqlalchemy.sql.expression._BinaryExpression&rsquo;&gt;<br />&gt;&gt;&gt; print x<br />simple.col1 = :col1_1<br />&gt;&gt;&gt; expr = simple_table.c.col1 + &ldquo;-col1&Prime;&nbsp; #å®ƒè¿˜æ”¯æŒè¿ç®—ç¬¦<br />&gt;&gt;&gt; print expr<br />simple.col1 &#124;&#124; :col1_1<br />&gt;&gt;&gt; from sqlalchemy.databases import mysql<br />&gt;&gt;&gt; print expr.compile(dialect=mysql.MySQLDialect())<br />concat(simple.col1, %s) #åœ¨ä¸åŒçš„æ•°æ®åº“è½¯ä»¶,æ•ˆæœä¸åŒ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy import func<br />&gt;&gt;&gt; print func.now()<br />now()<br />&gt;&gt;&gt; print func.current_timestamp<br />&lt;sqlalchemy.sql.expression._FunctionGenerator object at 0x83888cc&gt;<br />&gt;&gt;&gt; print func._(text(&lsquo;a=b&rsquo;))<br />(a=b)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æ³¨:sqlalchemyæ”¯æŒin,op,startwith,endwith,between,likeç­‰è¿ç®—</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy import bindparam&nbsp; #è‡ªå®šä¹‰ç»‘å®šçš„è¯<br />&gt;&gt;&gt; stmt = select([simple_table.c.col1],<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;whereclause=simple_table.c.col1==bindparam(&lsquo;test&rsquo;))&nbsp; #ç”¨testæ›¿æ¢åŸæ¥çš„col1<br />&gt;&gt;&gt; print stmt<br />SELECT simple.col1<br />FROM simple<br />WHERE simple.col1 = ? #è¿™é‡Œä¾ç„¶æ˜¯col1<br />&gt;&gt;&gt; print stmt.execute(test=&rsquo;Foo&rsquo;).fetchall()<br />[(u'Foo',)]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt =simple_table.select(order_by=[simple_table.c.col1])&nbsp; #æ›´å…·col1,å‡åºæ’åº<br />&gt;&gt;&gt; print stmt<br />SELECT simple.id, simple.col1<br />FROM simple ORDER BY simple.col1<br />&gt;&gt;&gt; print stmt.execute().fetchall()<br />[(3, u'1st Value'), (4, u'2nd Value'), (5, u'3rd value'), (2, u'Bar'), (7,u'Fifth Value'), (1, u'Foo'), (6, u'Fourth Value'), (8, u'Sixth Value')]<br />&gt;&gt;&gt; from sqlalchemy import desc<br />&gt;&gt;&gt; stmt = simple_table.select(order_by=[desc(simple_table.c.col1)]) #æ ¹æ®col1,é™åºæ’åº<br />&gt;&gt;&gt; print stmt<br />SELECT simple.id, simple.col1<br />FROM simple ORDER BY simple.col1 DESC<br />&gt;&gt;&gt; print stmt.execute().fetchall()<br />[(8, u'Sixth Value'), (6, u'Fourth Value'), (1, u'Foo'), (7, u'Fifth Value'),(2, u'Bar'), (5, u'3rd value'), (4, u'2nd Value'), (3, u'1st Value')]<br />æ³¨:distinct=Trueå»é‡å¤,æ•ˆæœç±»ä¼¼äºSELECT DISTINCT</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; stmt = simple_table.select(offset=1, limit=1) #offsetè®¾ç½®åç§»,è¿™é‡Œå°±æ˜¯ç•¥è¿‡ç¬¬ä¸€ä¸ª,è¿”å›ç¬¬äºŒä¸ª.limitè®¾ç½®è¿”å›å¤šå°‘ä¸ªæ¡ç›®<br />&gt;&gt;&gt; print stmt<br />SELECT simple.id, simple.col1<br />FROM simple<br />LIMIT ? OFFSET ?<br />&gt;&gt;&gt; print stmt.execute().fetchall()<br />[(2, u'Bar')]<br />çœ‹ä¸‹é¢çš„ä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&ldquo;Persons&rdquo; è¡¨ï¼š</p><table border="0" cellpadding="0" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">Id_P</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">LastName</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">FirstName</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">Address</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">City</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">1</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Adams</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">John</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Oxford Street</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">London</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">2</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Bush</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">George</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Fifth Avenue</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">New York</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">3</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Carter</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Thomas</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Changan Street</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">Beijing</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&ldquo;Orders&rdquo; è¡¨ï¼š</p><table border="0" cellpadding="0" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">Id_O</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">OrderNo</span></p></td><td><p style="margin: 0px; padding: 0px" align="center"><span style="font-size: 14px">Id_P</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">1</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">77895</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">3</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">2</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">44678</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">3</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">3</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">22456</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">1</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">4</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">24562</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">1</span></p></td></tr><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">5</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">34764</span></p></td><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px">65</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ—å‡ºæ‰€æœ‰çš„äººï¼Œä»¥åŠä»–ä»¬çš„å®šè´­å·ç :</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SELECT Persons.LastName, Persons.FirstName,Orders.OrderNo</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">FROM Persons</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">LEFT JOIN Orders #å°†ordersè¡¨joinè¿›æ¥</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ON Persons.Id_P=Orders.Id_P #å…³ç³»è”ç³»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ORDER BY Persons.LastName #æ’åº</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¹¦ä¸­çš„ä¾‹å­æ˜¯è¿™æ ·çš„:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SELECT store.name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">FROM store</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">JOIN product_price ON store.id=product_price.store_id</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">JOIN product ON product_price.sku=product.sku</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">WHERE product.msrp != product_price.price;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è½¬æ¢æˆsqlalchemyè¯­å¥:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt;from_obj =store_table.join(product_price_table).join(product_table)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; query = store_table.select()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; query = query.select_from(from_obj)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; query = query.where(product_table.c.msrp !=product_price_table.c.price)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print query</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SELECT store.id, store.name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">FROM store JOIN product_price ON store.id =product_price.store_id JOIN product ON product.sku = product_price.sku</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">WHERE product.msrp != product_price.price</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; print query.column(&lsquo;product.sku&rsquo;)<br />SELECT store.id, store.name, product.sku<br />FROM store JOIN product_price ON store.id = product_price.store_id&nbsp; JOINproduct ON product.sku = product_price.sku<br />WHERE product.msrp != product_price.price<br />&gt;&gt;&gt; query2 = select([store_table,product_table.c.sku],from_obj=[from_obj],whereclause=(product_table.c.msrp!=product_price_table.c.price))<br />&gt;&gt;&gt; print query2<br />SELECT store.id, store.name, product.sku<br />FROM store JOIN product_price ON store.id = product_price.store_id JOIN productON product.sku = product_price.sku<br />WHERE product.msrp != product_price.price<br />&gt;&gt;&gt; query = product_table.select(and_(product_table.c.msrp &gt; 10.00,product_table.c.msrp &lt; 20.00)) #èŒƒå›´æŸ¥è¯¢<br />&gt;&gt;&gt; print query<br />SELECT product.sku, product.msrp<br />FROM product<br />WHERE product.msrp &gt; ? AND product.msrp &lt; ?<br />&gt;&gt;&gt; for r in query.execute():<br />&hellip;print r<br />(u&rsquo;123&prime;, Decimal(&ldquo;12.34&Prime;))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy import intersect</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; query0 = product_table.select(product_table.c.msrp &gt;10.00)<br />&gt;&gt;&gt; query1 = product_table.select(product_table.c.msrp &lt; 20.00)<br />&gt;&gt;&gt; query = intersect(query0, query1) #ä½¿ç”¨ intersectæ·»åŠ å¤šquery<br />&gt;&gt;&gt; print query<br />SELECT product.sku, product.msrp</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">employee_table = Table(<br />&lsquo;employee&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;manager&rsquo;, None, ForeignKey(&lsquo;employee.id&rsquo;)),<br />Column(&lsquo;name&rsquo;, String(255)))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ç»™è®¾å®šalias:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æ¯”å¦‚æƒ³å®ç°ä»¥ä¸‹SQL</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">SELECT employee.name<br />FROM employee, employee AS manager<br />WHERE employee.manager_id = manager.id<br />AND manager.name = &lsquo;Fred&rsquo;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; manager = employee_table.alias(&lsquo;mgr&rsquo;)<br />&gt;&gt;&gt; stmt = select([employee_table.c.name],<br />&hellip;<br />and_(employee_table.c.manager_id==manager.c.id,<br />&hellip;<br />manager.c.name==&rsquo;Fred&rsquo;))<br />&gt;&gt;&gt; print stmt<br />SELECT employee.name<br />FROM employee, employee AS mgr<br />WHERE employee.manager_id = mgr.id AND mgr.name = ?</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; manager = employee_table.alias()&nbsp; #è‡ªåŠ¨alias<br />&gt;&gt;&gt; stmt = select([employee_table.c.name],<br />&hellip;and_(employee_table.c.manager_id==manager.c.id,<br />&hellip;manager.c.name==&rsquo;Fred&rsquo;))<br />&gt;&gt;&gt; print stmt<br />SELECT employee.name<br />FROM employee, employee AS employee_1<br />WHERE employee.manager_id = employee_1.id AND employee_1.name = ?</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import types<br />class MyCustomEnum(types.TypeDecorator):<br />impl=types.Integer<br />def __init__(self, enum_values, *l, **kw):<br />types.TypeDecorator.__init__(self, *l, **kw)<br />self._enum_values = enum_values<br />def convert_bind_param(self, value, engine):<br />result = self.impl.convert_bind_param(value, engine)<br />if result not in self._enum_values:<br />raise TypeError, (<br />&ldquo;Value %s must be one of %s&rdquo; % (result, self._enum_values))<br />Application-Specific Custom Types &#124; 63return result<br />def convert_result_value(self, value, engine):<br />&lsquo;Do nothing here&rsquo;<br />return self.impl.convert_result_value(value, engine)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1&nbsp; ORMæ¨¡å‹çš„ç®€å•æ€§ç®€åŒ–äº†æ•°æ®åº“æŸ¥è¯¢è¿‡ç¨‹ã€‚ä½¿ç”¨ORMæŸ¥è¯¢å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥è®¿é—®æœŸæœ›æ•°æ®ï¼Œè€Œä¸å¿…ç†è§£æ•°æ®åº“çš„åº•å±‚ç»“æ„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä»¥ä¸‹æ˜¯SQLè¯­å¥:<br />region_table = Table(<br />&lsquo;region&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;name&rsquo;, Unicode(255)))<br />ç›¸åº”çš„ç±»:<br />class Region(object):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __init__(self, name):<br />self.name = name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">def __repr__(self):<br />return &lsquo;&lt;Region %s&gt;&rsquo; % self.name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">çœ‹ä¸€ä¸‹åœ¨äº¤äº’æ¨¡å¼ä¸‹:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__']<br />&gt;&gt;&gt; mapper(Region,region_table)&nbsp; #ORMæ˜ å°„<br />&lt;Mapper at 0x84bdb2c; Region&gt;<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__', '_sa_class_manager', 'id','name'] #å¢åŠ äº†å¾ˆå¤šå±æ€§<br />&gt;&gt;&gt; Region.id<br />&lt;sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x84c238c&gt;<br />&gt;&gt;&gt; Region.name<br />&lt;sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x84c254c&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; r0 = Region(name=&rdquo;Northeast&rdquo;)<br />&gt;&gt;&gt; r1 = Region(name=&rdquo;Southwest&rdquo;)<br />&gt;&gt;&gt; r0<br />&lt;Region Northeast&gt;&nbsp; #ç±»èƒ½æ˜¾ç¤ºè¿™æ ·çš„æ•°æ®æ˜¯å› ä¸ºç±»å®šä¹‰äº†__repr__æ–¹æ³•<br />&gt;&gt;&gt; r1<br />&lt;Region Southwest&gt;<br />&gt;&gt;&gt; from sqlalchemy.orm import clear_mappers<br />&gt;&gt;&gt; clear_mappers() #å–æ¶ˆæ˜ å°„<br />&gt;&gt;&gt; Region.name #ä¸å†æœ‰è¿™ä¸ªå±æ€§<br />Traceback (most recent call last):<br />File &ldquo;&lt;stdin&gt;&rdquo;, line 1, in &lt;module&gt;<br />AttributeError: type object &lsquo;Region&rsquo; has no attribute &lsquo;name&rsquo;<br />&gt;&gt;&gt; dir(Region)&nbsp; #å›åˆ°äº†åŸæ¥çš„åªæœ‰ç±»å±æ€§<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__']</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; r0 = Region(name=&rdquo;Northeast&rdquo;)&nbsp; #ä»è¿™é‡Œå¼€å§‹ç†è§£ORMåšäº†ä»€ä¹ˆ<br />&gt;&gt;&gt; r1 = Region(name=&rdquo;Southwest&rdquo;) #å®ç°äº†2ä¸ªç±»çš„å®ä¾‹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; metadata.create_all(engine) #åˆ›å»ºtable</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; Session = sessionmaker()&nbsp; #é€šè¿‡sessionmakeräº§ç”Ÿä¸€ä¸ªä¼šè¯<br />&gt;&gt;&gt; Session.configure(bind=engine) #ç»‘å®šåˆ°æ•°æ®åº“è¿æ¥<br />&gt;&gt;&gt; session = Session()&nbsp; #äº§ç”Ÿä¼šè¯å®ä¾‹,è®©å¯¹è±¡å¯ä»¥è¢«è½½å…¥æˆ–ä¿å­˜åˆ°æ•°æ®åº“,è€Œåªéœ€è¦è®¿é—®ç±»å´ä¸ç”¨ç›´æ¥è®¿é—®æ•°æ®åº“<br />&gt;&gt;&gt; session.bind.echo = True #æ˜¾ç¤ºæ‰“å°ä¿¡æ¯</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; session.add(r1) #æŠŠr0,r12ä¸ªå®ä¾‹åŠ åˆ°ä¼šè¯ä¸­<br />&gt;&gt;&gt; session.add(r0)<br />&gt;&gt;&gt; print r0.id&nbsp; #å› ä¸ºè¿˜æ²¡æœ‰ä¿å­˜,æ•°æ®ä¸ºç©º<br />None<br />&gt;&gt;&gt; session.flush() #æäº¤æ•°æ®åˆ°æ•°æ®åº“<br />2012-07-18 10:24:07,116 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 10:24:07,116 INFO sqlalchemy.engine.base.Engine INSERT INTO region(name) VALUES (?)<br />2012-07-18 10:24:07,116 INFO sqlalchemy.engine.base.Engine (&lsquo;Southwest&rsquo;,)<br />2012-07-18 10:24:07,117 INFO sqlalchemy.engine.base.Engine INSERT INTO region(name) VALUES (?)<br />2012-07-18 10:24:07,117 INFO sqlalchemy.engine.base.Engine (&lsquo;Northeast&rsquo;,)<br />&gt;&gt;&gt; print r0.id #idå› ä¸ºå­å¢é•¿,å‡ºç°äº†<br />2<br />&gt;&gt;&gt; r0.name = &lsquo;Northwest&rsquo;<br />&gt;&gt;&gt; session.flush() #ä¿®æ”¹æäº¤<br />2012-07-18 10:24:50,644 INFO sqlalchemy.engine.base.Engine UPDATE region SETname=? WHERE region.id = ?<br />2012-07-18 10:24:50,644 INFO sqlalchemy.engine.base.Engine (&lsquo;Northwest&rsquo;, 2)<br />&gt;&gt;&gt; print r0.name #æ•°æ®åº“ä¸­çš„æ•°æ®è¢«updateæˆäº†æ–°å€¼<br />Northwest<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__','__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__','__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__','__weakref__']<br />&gt;&gt;&gt; mapper(Region, region_table, include_properties=['id']) #ä½¿ç”¨ include_propertiesåªæ˜ å°„æŸäº›å­—æ®µ,åŒæ ·è¿˜æœ‰exclude_properties<br />&lt;Mapper at 0x84c26cc; Region&gt;<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__', '_sa_class_manager', 'id']&nbsp;#åªå¤šäº†ä¸€ä¸ª&rdquo;id&rdquo;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__']<br />&gt;&gt;&gt; mapper(Region, region_table, column_prefix=&rsquo;_')&nbsp; #æ˜ å°„åè‡ªå®šä¹‰ä¿®æ”¹æ–°å±æ€§çš„å‰ç¼€<br />&lt;Mapper at 0x84f73ac; Region&gt;<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__', '_id', '_name','_sa_class_manager'] #idå’Œnameç­‰å‰é¢éƒ½æœ‰äº†&rdquo;_&rdquo;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__']<br />&gt;&gt;&gt; mapper(Region, region_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; region_name=region_table.c.name,&nbsp; #æƒ³æŠŠnameçš„å±æ€§å®šä¹‰ä¸ºregion_name,å› ä¸ºc.nameå°±æ˜¯ç”¨Tableåˆ›å»ºçš„è¡¨ç»“æ„çš„ç‰¹å®šå®ä¾‹çš„nameå±æ€§<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; region_id=region_table.c.id))<br />&lt;Mapper at 0x8509d2c; Region&gt;<br />&gt;&gt;&gt; dir(Region)<br />['__class__', '__delattr__', '__dict__', '__doc__', '__format__','__getattribute__', '__hash__', '__init__', '__module__', '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__','__str__', '__subclasshook__', '__weakref__', '_sa_class_manager', 'region_id','region_name']&nbsp; #idæ”¹åä¸ºregion_id</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; class Region(object):&nbsp; #é‡æ–°å®šä¹‰ç±»<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, name):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.name = name<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;Region %s&gt;&rsquo; %self.name<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def _get_name(self): #è¿™ä¸ª_getå’Œ_setæ˜¯ä¸ºäº†è®©å†…ç½®çš„propertyè°ƒç”¨<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return self._name<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def _set_name(self, value):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assertvalue.endswith(&lsquo;Region&rsquo;), &#92;<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lsquo;Region names must end in &ldquo;Region&rdquo;&lsquo;<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self._name = value<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; name=property(_get_name, _set_name) #é€šè¿‡propertyçš„å®šä¹‰ï¼Œå½“è·å–æˆå‘˜xçš„å€¼æ—¶ï¼Œå°±ä¼šè°ƒç”¨_get_nameå‡½æ•°(ç¬¬ä¸€ä¸ªå‚æ•°)ï¼Œå½“ç»™æˆå‘˜xèµ‹å€¼æ—¶ï¼Œå°±ä¼šè°ƒç”¨_set_nameå‡½æ•°(ç¬¬äºŒä¸ªå‚æ•°)ï¼Œå½“åˆ é™¤xæ—¶ï¼Œå°±ä¼šè°ƒç”¨delxå‡½æ•°(è¿™é‡Œæ²¡æœ‰è®¾ç½®)<br />&hellip;<br />&gt;&gt;&gt; from sqlalchemy.orm import synonym<br />&gt;&gt;&gt; mapper(Region, region_table, column_prefix=&rsquo;_', properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; name=synonym(&lsquo;_name&rsquo;))) #é¦–å…ˆæ£€éªŒ_nameçš„å±æ€§æ˜¯å¦æ»¡è¶³<br />&lt;Mapper at 0x84f7acc; Region&gt;<br />&gt;&gt;&gt; s0 = Region(&lsquo;Southeast&rsquo;)&nbsp; #æ²¡æœ‰æ­£ç¡®ç»“å°¾<br />Traceback (most recent call last):<br />File &ldquo;&lt;stdin&gt;&rdquo;, line 1, in &lt;module&gt;<br />File &ldquo;&lt;string&gt;&rdquo;, line 4, in __init__<br />File&ldquo;/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.8-py2.7-linux-i686.egg/sqlalchemy/orm/state.py&rdquo;,line 98, in initialize_instance<br />return manager.original_init(*mixed[1:], **kwargs)<br />File &ldquo;&lt;stdin&gt;&rdquo;, line 3, in __init__<br />File &ldquo;&lt;string&gt;&rdquo;, line 1, in __set__<br />File &ldquo;&lt;stdin&gt;&rdquo;, line 10, in _set_name<br />AssertionError: Region names must end in &ldquo;Region&rdquo;<br />&gt;&gt;&gt; s0 = Region(&lsquo;Southeast Region&rsquo;) #æ­£å¸¸</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; segment_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;segment&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;lat0&prime;, Float),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;long0&prime;, Float),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;lat1&prime;, Float),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;long1&prime;, Float))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; metadata.create_all(engine) #åˆ›å»ºè¡¨<br />&gt;&gt;&gt; class RouteSegment(object): #ä¸€ä¸ªå«æœ‰beginå’Œendçš„ç±»<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, begin, end):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.begin = begin<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.end = end<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;Route %s to%s&gt;&rsquo; % (self.begin, self.end)<br />&hellip;<br />&gt;&gt;&gt; class MapPoint(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, lat, long):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.coords = lat, long<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __composite_values__(self): #è¿”å›æ¯”è¾ƒåçš„åˆ—è¡¨æˆ–è€…å…ƒç¥–<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return self.coords<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __eq__(self, other):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return self.coords ==other.coords<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __ne__(self, other):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return self.coords !=other.coords<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;(%s lat, %s long)&rsquo; %self.coords<br />&hellip;<br />&hellip;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy.orm import composite<br />&gt;&gt;&gt; mapper(RouteSegment, segment_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; begin=composite(MapPoint,&nbsp; #åˆ›å»ºå¤šä¸ªå±æ€§<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; segment_table.c.lat0,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; segment_table.c.long0),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; end=composite(MapPoint,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; segment_table.c.lat1,segment_table.c.long1)))<br />&lt;Mapper at 0x86203cc; RouteSegment&gt;<br />&gt;&gt;&gt; work=MapPoint(33.775562,-84.29478)<br />&gt;&gt;&gt; library=MapPoint(34.004313,-84.452062)<br />&gt;&gt;&gt; park=MapPoint(33.776868,-84.389785)<br />&gt;&gt;&gt; routes = [<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(work, library),<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(work, park),<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(library, work),<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(library, park),<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(park, library),<br />...&nbsp;&nbsp;&nbsp;&nbsp; RouteSegment(park, work)]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; for rs in routes:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; session.add(rs)<br />&hellip;<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; q = session.query(RouteSegment)<br />&gt;&gt;&gt; print RouteSegment.begin==work<br />segment.lat0 = :lat0_1 AND segment.long0 = :long0_1<br />&gt;&gt;&gt; q = q.filter(RouteSegment.begin==work)<br />&gt;&gt;&gt; for rs in q:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print rs<br />&hellip;<br />2012-07-18 11:12:29,360 INFO sqlalchemy.engine.base.Engine SELECT segment.id ASsegment_id, segment.lat0 AS segment_lat0, segment.long0 AS segment_long0,segment.lat1 AS segment_lat1, segment.long1 AS segment_long1<br />FROM segment<br />WHERE segment.lat0 = ? AND segment.long0 = ?<br />2012-07-18 11:12:29,360 INFO sqlalchemy.engine.base.Engine (33.775562,-84.29478)<br />&lt;Route (33.775562 lat, -84.29478 long) to (34.004313 lat, -84.452062long)&gt;<br />&lt;Route (33.775562 lat, -84.29478 long) to (33.776868 lat, -84.389785long)&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy.orm import PropComparator<br />&gt;&gt;&gt; class MapPointComparator(PropComparator): #è‡ªå®šä¹‰è¿ç®—ç¬¦ç»§æ‰¿PropComparatorç±»<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __lt__(self, other):&nbsp; #è‡ªå®šä¹‰å°äºè¿ç®—ç»“æœ<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return and_(*[a&lt;b for a, bin<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zip(self.prop.columns,<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other.__composite_values__())])<br />&hellip;<br />&gt;&gt;&gt; mapper(RouteSegment, segment_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; begin=composite(MapPoint,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segment_table.c.lat0, segment_table.c.long0,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comparator=MapPointComparator),&nbsp; #å®šä¹‰ä½¿ç”¨è‡ªå®šä¹‰çš„è¿ç®—ç±»<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; end=composite(MapPoint,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segment_table.c.lat1, segment_table.c.long1,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comparator=MapPointComparator)))<br />&lt;Mapper at 0x85b2bac; RouteSegment&gt;<br />&gt;&gt;&gt; product_table = Table(<br />&hellip; &lsquo;product&rsquo;, metadata,<br />&hellip; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip; Column(&lsquo;msrp&rsquo;, Numeric),<br />&hellip; Column(&lsquo;image&rsquo;, BLOB))<br />&gt;&gt;&gt; from sqlalchemy.orm import deferred<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; image=deferred(product_table.c.image)))&nbsp;#deferredæ„æ€æ˜¯å»¶è¿Ÿ,å°±æ˜¯åœ¨å®ç° mapper æ—¶ï¼Œå¯ä»¥æŒ‡å®šæŸäº›å­—æ®µæ˜¯ Deferred è£…å…¥çš„ï¼Œè¿™æ ·è±¡é€šå¸¸ä¸€æ ·å–å‡ºæ•°æ®æ—¶ï¼Œè¿™äº›å­—æ®µå¹¶ä¸çœŸæ­£çš„ä»æ•°æ®åº“ä¸­å–å‡ºï¼Œåªæœ‰åœ¨ä½ çœŸæ­£éœ€è¦æ—¶æ‰å–å‡ºï¼Œè¿™æ ·å¯ä»¥å‡å°‘èµ„æºçš„å ç”¨å’Œæé«˜æ•ˆç‡,åªæœ‰åœ¨è¯»å– imageæ—¶æ‰ä¼šå–å‡ºç›¸åº”çš„æ•°æ®<br />&lt;Mapper at 0x862a40c; Product&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; metadata.remove(product_table)&nbsp; #å› ä¸ºå·²ç»å¸¸è§äº†è¡¨,å…ˆåˆ é™¤<br />&gt;&gt;&gt; product_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;image1&prime;, Binary),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;image2&prime;, Binary),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;image3&prime;, Binary))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; clear_mappers() #å·²ç»æ˜ å°„,å…ˆå–æ¶ˆ<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; image1=deferred(product_table.c.image1,group=&rsquo;images&rsquo;),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; image2=deferred(product_table.c.image2,group=&rsquo;images&rsquo;),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; image3=deferred(product_table.c.image3,group=&rsquo;images&rsquo;))) #Deferredå­—æ®µå¯ä»¥é€šè¿‡åœ¨ properties ä¸­æŒ‡å®š groupå‚æ•°æ¥è¡¨ç¤ºç¼–ç»„æƒ…å†µã€‚è¿™æ ·å½“ä¸€ä¸ªç»„çš„æŸä¸ª</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">#å­—æ®µè¢«å–å‡ºæ—¶ï¼Œ åŒç»„çš„å…¶å®ƒå­—æ®µå‡è¢«å–å‡º<br />&lt;Mapper at 0x85b8c4c; Product&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; q = product_table.join(&nbsp; è¢«æ˜ å°„çš„æ˜¯joinäº†product_summary_tableåˆ°product_tableçš„ç»“æœ<br />&hellip; product_summary_table,<br />&hellip; product_table.c.sku==product_summary_table.c.sku).alias(&lsquo;full_product&rsquo;)<br />&gt;&gt;&gt; class FullProduct(object): pass<br />&hellip;<br />&gt;&gt;&gt; mapper(FullProduct, q)<br />&lt;Mapper at 0x86709cc; FullProduct&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapperå‡½æ•°çš„ä¸€äº›å‚æ•°:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">always_refresh =False:è¿”å›æŸ¥è¯¢æ—§ä¼šä¿®æ”¹å†…å­˜ä¸­çš„å€¼,ä½†æ˜¯populate_existingä¼˜å…ˆçº§é«˜</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">allow_column_override =False:å…è®¸å…³ç³»å±æ€§å°†å…·æœ‰ç›¸åŒçš„åç§°å®šä¹‰ä¸ºä¸€ä¸ªæ˜ å°„åˆ—,å¦åˆ™åç§°å†²çª,äº§ç”Ÿå¼‚å¸¸</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2 ORMçš„å…³ç³»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1 1:N relations (1å¯¹å¤š)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(Store, store_table)<br />&lt;Mapper at 0x84fba4c; Store&gt;<br />&gt;&gt;&gt; from sqlalchemy.orm import relation<br />&gt;&gt;&gt; mapper(Region, region_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; stores=relation(Store))) #è®©2ä¸ªè¡¨å…³è”,ç»™Regionæ·»åŠ ä¸€ä¸ªå±æ€§stores,é€šè¿‡å®ƒè”ç³»Storeæ¥ä¿®æ”¹Store<br />&lt;Mapper at 0x84f76ac; Region&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; r0 = Region(&lsquo;test&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; session.add(r0) #å…ˆç”Ÿæˆä¸€æ¡æ•°æ®<br />&gt;&gt;&gt; session.commit()<br />2012-07-18 13:56:26,858 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 13:56:26,859 INFO sqlalchemy.engine.base.Engine INSERT INTO region(name) VALUES (?)<br />2012-07-18 13:56:26,859 INFO sqlalchemy.engine.base.Engine (&lsquo;test&rsquo;,)<br />2012-07-18 13:56:26,859 INFO sqlalchemy.engine.base.Engine COMMIT<br />&gt;&gt;&gt; rgn = session.query(Region).get(1)&nbsp; #è·å–è¿™æ¡æ•°æ®<br />2012-07-18 13:56:37,250 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 13:56:37,251 INFO sqlalchemy.engine.base.Engine SELECT region.id ASregion_id, region.name AS region_name<br />FROM region<br />WHERE region.id = ?<br />2012-07-18 13:56:37,251 INFO sqlalchemy.engine.base.Engine (1,)<br />&gt;&gt;&gt; s0 = Store(name=&rsquo;3rd and Juniper&rsquo;) #åˆ›å»ºä¸€ä¸ªå®ä¾‹<br />&gt;&gt;&gt; rgn.stores.append(s0) #é€šè¿‡Regionçš„ä¾èµ–å»ºç«‹æ–°çš„Store(å…¶ä¸­çš„ä¸€ä¸ªå­—æ®µregion_idå€¼æ¥ç€regionçš„idå­—æ®µ)<br />2012-07-18 13:56:51,611 INFO sqlalchemy.engine.base.Engine SELECT store.id ASstore_id, store.region_id AS store_region_id, store.name AS store_name<br />FROM store<br />WHERE ? = store.region_id<br />2012-07-18 13:56:51,611 INFO sqlalchemy.engine.base.Engine (1,)<br />&gt;&gt;&gt; session.flush() #ä¿å­˜æ•°æ®åº“<br />2012-07-18 13:57:02,131 INFO sqlalchemy.engine.base.Engine INSERT INTO store(region_id, name) VALUES (?, ?)<br />2012-07-18 13:57:02,131 INFO sqlalchemy.engine.base.Engine (1, &rsquo;3rd andJuniper&rsquo;)<br />æ³¨:å‡å¦‚2ä¸ªè¡¨ä¹‹é—´æœ‰å¤šä¸ªå¤–éƒ¨ä¾èµ–å…³ç³»,éœ€è¦ä½¿ç”¨primaryjoinæŒ‡å®š:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(Region, region_table, properties=dict(<br />stores=relation(Store,<br />primaryjoin=(store_table.c.region_id&nbsp; #åˆ¤æ–­å…³ç³»æ¥ç€region_idå’Œregionçš„id<br />==region_table.c.id))))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2 M:N relations(å¤šå¯¹å¤š)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">ä¸Šé¢æœ‰SQLè¯­å¥:æˆ‘å¤åˆ¶è¿‡æ¥:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">category_table = Table(<br />&lsquo;category&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;level_id&rsquo;, None, ForeignKey(&lsquo;level.id&rsquo;)),<br />Column(&lsquo;parent_id&rsquo;, None, ForeignKey(&lsquo;category.id&rsquo;)),<br />Column(&lsquo;name&rsquo;, String(20)))<br />product_table = Table(<br />&lsquo;product&rsquo;, metadata,<br />Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />Column(&lsquo;msrp&rsquo;, Numeric))<br />product_category_table = Table(<br />&lsquo;product_category&rsquo;, metadata,<br />Column(&lsquo;product_id&rsquo;, None, ForeignKey(&lsquo;product.sku&rsquo;), primary_key=True),<br />Column(&lsquo;category_id&rsquo;, None, ForeignKey(&lsquo;category.id&rsquo;), primary_key=True))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">å¯ä»¥çœ‹å‡ºæ¥product_category_tableå’Œcategory_table æ˜¯å¤šå¯¹å¤šçš„å…³ç³».</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(Category, category_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; products=relation(Product,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; secondary=product_category_table)))<br />&lt;Mapper at 0x859c8cc; Category&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; categories=relation(Category,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; secondary=product_category_table)))<br />&lt;Mapper at 0x859c5cc; Product&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; r0=Product(&rsquo;123&prime;,&rsquo;234&prime;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; session.add(r0)<br />&gt;&gt;&gt; session.flush()<br />2012-07-18 14:18:06,599 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 14:18:06,618 INFO sqlalchemy.engine.base.Engine INSERT INTO product(sku, msrp) VALUES (?, ?)<br />2012-07-18 14:18:06,618 INFO sqlalchemy.engine.base.Engine (&rsquo;123&prime;, 234.0)<br />&gt;&gt;&gt; session.query(Product).get(&rsquo;123&prime;).categories</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; mapper(Category, category_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; products=relation(Product,secondary=product_category_table,<br />&hellip; primaryjoin=(product_category_table.c.category_id&nbsp; #primaryjoinæ˜¯è¦è¢«æ˜ å°„çš„è¡¨å’Œè¿æ¥è¡¨çš„æ¡ä»¶<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== category_table.c.id),<br />&hellip; secondaryjoin=(product_category_table.c.product_id&nbsp; #secondaryjoinæ˜¯è¿æ¥è¡¨å’Œæƒ³åŠ å…¥çš„è¡¨çš„æ¡ä»¶<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== product_table.c.sku))))<br />&lt;Mapper at 0x84ff7cc; Category&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; categories=relation(Category,secondary=product_category_table,<br />&hellip; primaryjoin=(product_category_table.c.product_id<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== product_table.c.sku),<br />&hellip; secondaryjoin=(product_category_table.c.category_id<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;== category_table.c.id))))<br />&lt;Mapper at 0x859cb8c; Product&gt;<br />1:1 relations(ä¸€å¯¹ä¸€):ç‰¹æ®Šçš„(1:N)<br />è¿˜æ˜¯ä¸Šé¢çš„SQL:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_table = Table(<br />&lsquo;product&rsquo;, metadata,<br />Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />Column(&lsquo;msrp&rsquo;, Numeric))<br />product_summary_table = Table(<br />&lsquo;product_summary&rsquo;, metadata,<br />Column(&lsquo;sku&rsquo;, None, ForeignKey(&lsquo;product.sku&rsquo;), primary_key=True), #åªæœ‰ä¸€ä¸ªå¤–è”åˆ°product<br />Column(&lsquo;name&rsquo;, Unicode(255)),<br />Column(&lsquo;description&rsquo;, Unicode))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; summary=relation(ProductSummary)))<br />KeyboardInterrupt<br />&gt;&gt;&gt; mapper(ProductSummary, product_summary_table)<br />&lt;Mapper at 0x84fbe6c; ProductSummary&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; summary=relation(ProductSummary)))<br />&lt;Mapper at 0x85bee6c; Product&gt;<br />&gt;&gt;&gt; prod = session.query(Product).get(&rsquo;123&prime;)<br />[]&nbsp; #product_summary_tableå› ä¸ºproduct_tableå„¿å­˜åœ¨,æµªè´¹äº†</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(ProductSummary, product_summary_table)<br />&lt;Mapper at 0x84f7dec; ProductSummary&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;summary=relation(ProductSummary,uselist=False)))&nbsp; #ä½¿ç”¨uselist=Falseå°±ä¸ä¼šè¿™æ ·äº†<br />&lt;Mapper at 0x860584c; Product&gt;<br />&gt;&gt;&gt; prod = session.query(Product).get(&rsquo;123&prime;)<br />&gt;&gt;&gt; print prod.summary<br />None<br />&gt;&gt;&gt; mapper(ProductSummary, product_summary_table)<br />&lt;Mapper at 0x859ca0c; ProductSummary&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; summary=relation(ProductSummary, uselist=False,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; backref=&rsquo;product&rsquo;))) #è‡ªå®šä¹‰è‡ªå·±è¡¨çš„å‡½æ•°<br />&lt;Mapper at 0x860e90c; Product&gt;<br />&gt;&gt;&gt; prod = session.query(Product).get(&rsquo;123&prime;)<br />&gt;&gt;&gt; prod.summary = ProductSummary(name=&rdquo;Fruit&rdquo;, description=&rdquo;Some<br />&hellip; Fruit&rdquo;)<br />&gt;&gt;&gt; print prod.summary<br />&lt;ProductSummary Fruit&gt;<br />&gt;&gt;&gt; print prod.summary.product #ä»–çš„å±æ€§å°±æ˜¯prod,å¯å°±æ˜¯è¡¨æœ¬èº«<br />&lt;Product 123&gt;<br />&gt;&gt;&gt; print prod.summary.product is prod<br />True</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(Level, level_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; categories=relation(Category, backref=&rsquo;level&rsquo;)))<br />&lt;Mapper at 0x860590c; Level&gt;<br />&gt;&gt;&gt; mapper(Category, category_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; products=relation(Product,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secondary=product_category_table)))<br />&lt;Mapper at 0x860ec8c; Category&gt;<br />&gt;&gt;&gt; mapper(Product, product_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; categories=relation(Category,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secondary=product_category_table)))<br />&lt;Mapper at 0x860e7ec; Product&gt;<br />&gt;&gt;&gt; lvl = Level(name=&rsquo;Department&rsquo;)<br />&gt;&gt;&gt; cat = Category(name=&rsquo;Produce&rsquo;, level=lvl)<br />&gt;&gt;&gt; session.add(lvl)<br />&gt;&gt;&gt; session.flush()<br />2012-07-18 14:44:02,005 INFO sqlalchemy.engine.base.Engine INSERT INTO level(parent_id, name) VALUES (?, ?)<br />2012-07-18 14:44:02,005 INFO sqlalchemy.engine.base.Engine (None, &lsquo;Department&rsquo;)<br />2012-07-18 14:44:02,020 INFO sqlalchemy.engine.base.Engine INSERT INTO category(level_id, parent_id, name) VALUES (?, ?, ?)<br />2012-07-18 14:44:02,020 INFO sqlalchemy.engine.base.Engine (1, None, &lsquo;Produce&rsquo;)<br />&gt;&gt;&gt; prod = session.query(Product).get(&rsquo;123&prime;)<br />&gt;&gt;&gt; print prod.categories<br />[]<br />&gt;&gt;&gt; print cat.products<br />2012-07-18 14:44:25,517 INFO sqlalchemy.engine.base.Engine SELECT product.skuAS product_sku, product.msrp AS product_msrp<br />FROM product, product_category<br />WHERE ? = product_category.category_id AND product.sku =product_category.product_id<br />2012-07-18 14:44:25,517 INFO sqlalchemy.engine.base.Engine (1,)<br />[]<br />&gt;&gt;&gt; prod.categories.append(cat)<br />&gt;&gt;&gt; print prod.categories<br />[&lt;Category Department.Produce&gt;]<br />&gt;&gt;&gt; print cat.products&nbsp; #backrefè‡ªåŠ¨æ›´æ–°,åœ¨å¤šå¯¹å¤šçš„æƒ…å†µ,å¯ä»¥ä½¿ç”¨relationå‡½æ•°ä¸¤æ¬¡,ä½†æ˜¯2ä¸ªå±æ€§æ²¡æœ‰ä¿æŒåŒæ­¥<br />[]&nbsp; #è§£å†³æ–¹æ³•:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; mapper(Level, level_table, properties=dict(<br />&hellip;categories=relation(Category, backref=&rsquo;level&rsquo;)))<br />&gt;&gt;&gt; mapper(Category, category_table, properties=dict(<br />&hellip;products=relation(Product, secondary=product_category_table,<br />&hellip; backref=&rsquo;categories&rsquo;)))&nbsp; #åœ¨Productä¹Ÿè®¾ç½®backref,å°±ä¼šä¿æŒåŒæ­¥<br />&gt;&gt;&gt; mapper(Product, product_table)<br />&gt;&gt;&gt; lvl = Level(name=&rsquo;Department&rsquo;)<br />&gt;&gt;&gt; cat = Category(name=&rsquo;Produce&rsquo;, level=lvl)<br />&gt;&gt;&gt; session.save(lvl)<br />&gt;&gt;&gt; prod = session.query(Product).get(&rsquo;123&prime;)<br />&gt;&gt;&gt; print prod.categories<br />[]<br />&gt;&gt;&gt; print cat.products<br />[]<br />&gt;&gt;&gt; prod.categories.append(cat)<br />&gt;&gt;&gt; print prod.categories<br />[&lt;Category Department.Produce&gt;]<br />&gt;&gt;&gt;print cat.products<br />[&lt;Product 123&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy.orm import backref<br />&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; mapper(ProductSummary, product_summary_table, properties=dict(<br />&hellip; product=relation(Product,<br />&hellip; backref=backref(&lsquo;summary&rsquo;, uselist=False))))&nbsp; #è¿˜å¯ä»¥ä½¿ç”¨backrefå‡½æ•°åšä¸€æ ·çš„äº‹æƒ…<br />&lt;Mapper at 0x860aaec; ProductSummary&gt;<br />&gt;&gt;&gt; mapper(Product, product_table)<br />&lt;Mapper at 0x85bee6c; Product&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">4 Self-Referential è‡ªæˆ‘å‚ç…§æ˜ å°„<br />level_table = Table(<br />&lsquo;level&rsquo;, metadata,<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;parent_id&rsquo;, None, ForeignKey(&lsquo;level.id&rsquo;)), #è¿™ä¸ªå¤–è”å…¶å®è¿˜æ˜¯è¿™ä¸ªç±»çš„id,ä¹Ÿå°±æ˜¯æ˜ å°„äº†è‡ªå·±çš„å¯¹è±¡<br />Column(&lsquo;name&rsquo;, String(20)))<br />&gt;&gt;&gt; mapper(Level, level_table, properties=dict(<br />&hellip; children=relation(Level))) #ä¸åŒå±‚æ¬¡ä¹‹é—´çš„çˆ¶å­å…³ç³»,æˆ‘è¿™é‡ŒæŒ‡å®šå¾—åˆ°&rdquo;å­&rdquo;çš„å±æ€§<br />&lt;Mapper at 0x860a66c; Level&gt;<br />&gt;&gt;&gt; mapper(Level, level_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; children=relation(Level,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; backref=backref(&lsquo;parent&rsquo;,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; remote_side=[level_table.c.id]))))&nbsp; #remote_sideæŒ‡å®š&rsquo;å­&rsquo;çš„id,local side&rdquo;å°±æ˜¯å­—æ®µparent_id<br />&lt;Mapper at 0x860e42c; Level&gt;<br />&gt;&gt;&gt; l0 = Level(&lsquo;Gender&rsquo;)<br />&gt;&gt;&gt; l1 = Level(&lsquo;Department&rsquo;, parent=l0)<br />&gt;&gt;&gt; session.add(l0)<br />&gt;&gt;&gt; session.flush()<br />2012-07-18 15:07:55,810 INFO sqlalchemy.engine.base.Engine INSERT INTO level(parent_id, name) VALUES (?, ?)<br />2012-07-18 15:07:55,810 INFO sqlalchemy.engine.base.Engine (None, &lsquo;Gender&rsquo;) #æ’å…¥l0,ä»–æ²¡æœ‰çˆ¶çº§<br />2012-07-18 15:07:55,810 INFO sqlalchemy.engine.base.Engine INSERT INTO level(parent_id, name) VALUES (?, ?)<br />2012-07-18 15:07:55,810 INFO sqlalchemy.engine.base.Engine (2, &lsquo;Department&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æ³¨ æˆ‘ä»¬è¿˜èƒ½åè¿‡æ¥ç”¨:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">mapper(Level, level_table, properties=dict(<br />parent=relation(Level, remote_side=[level_table.c.parent_id],<br />backref=&rsquo;children&rsquo;)))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤šå¼•æ“çš„ä¾‹å­:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_1"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_1'" tppabs="http://www.dongwm.com/page/2/#codesyntax_1" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_1'" tppabs="http://www.dongwm.com/page/2/#codesyntax_1" title="&quot;Show code only&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/2/1/6/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/2/1/6/#codesyntax_1'" tppabs="http://www.dongwm.com/page/2/#codesyntax_1" title="&quot;Print code&quot; "></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" title="&quot;Show plugin information&quot; t "></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import create_engine</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy.orm import mapper, sessionmaker</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import Numeric,Table, MetaData, Column, ForeignKey,Integer, String</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine1 = create_engine('sqlite://')</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine2 = create_engine('sqlite://')</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata = MetaData()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_table = Table(</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">'product', metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('sku', String(20), primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('msrp', Numeric))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_summary_table = Table(</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">'product_summary', metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('sku', String(20), ForeignKey('product.sku'), primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('name', Unicode(255)),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">Column('description', Unicode))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_table.create(bind=engine1)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">product_summary_table.create(bind=engine2)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">stmt = product_table.insert()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine1.execute(</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">stmt,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[dict(sku=&quot;123&quot;, msrp=12.34),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dict(sku=&quot;456&quot;, msrp=22.12),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dict(sku=&quot;789&quot;, msrp=41.44)])</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">stmt = product_summary_table.insert()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">engine2.execute(</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">stmt,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">[dict(sku=&quot;123&quot;, name=&quot;Shoes&quot;, description=&quot;SomeShoes&quot;),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dict(sku=&quot;456&quot;, name=&quot;Pants&quot;, description=&quot;SomePants&quot;),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dict(sku=&quot;789&quot;, name=&quot;Shirts&quot;, description=&quot;Some Shirts&quot;)])</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">è¿™æ ·å°±åˆ›å»ºäº†è¡¨å¹¶ä¸”æ’å…¥äº†ä¸€äº›æ•°æ®</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">dongwm@localhost ~ $ python<br />Python 2.7.3 (default, Jul 11 2012, 10:10:17)<br />[GCC 4.5.3] on linux2<br />Type &ldquo;help&rdquo;, &ldquo;copyright&rdquo;, &ldquo;credits&rdquo; or &ldquo;license&rdquo; for more information.<br />&gt;&gt;&gt; from sqlalchemy import create_engine<br />&gt;&gt;&gt; from sqlalchemy.orm import mapper, sessionmaker<br />&gt;&gt;&gt; from sqlalchemy import Numeric,Table, MetaData, Column,ForeignKey, Integer, String,Unicode<br />&gt;&gt;&gt; engine1 = create_engine(&lsquo;sqlite://&rsquo;)<br />&gt;&gt;&gt; engine2 = create_engine(&lsquo;sqlite://&rsquo;)&nbsp; #åˆ›å»ºå¤šä¸ªå¼•æ“<br />&gt;&gt;&gt; metadata = MetaData()<br />&gt;&gt;&gt; product_table = Table(<br />&hellip; &lsquo;product&rsquo;, metadata,<br />&hellip; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip; Column(&lsquo;msrp&rsquo;, Numeric))<br />&gt;&gt;&gt; product_summary_table = Table(<br />&hellip; &lsquo;product_summary&rsquo;, metadata,<br />&hellip; Column(&lsquo;sku&rsquo;, String(20), ForeignKey(&lsquo;product.sku&rsquo;), primary_key=True),<br />&hellip; Column(&lsquo;name&rsquo;, Unicode(255)),<br />&hellip; Column(&lsquo;description&rsquo;, Unicode))<br />&gt;&gt;&gt; product_table.create(bind=engine1)<br />&gt;&gt;&gt; product_summary_table.create(bind=engine2)<br />&gt;&gt;&gt; stmt = product_table.insert()<br />&gt;&gt;&gt; engine1.execute(<br />&hellip; stmt,<br />&hellip; [dict(sku=&quot;123&quot;, msrp=12.34),<br />... dict(sku=&quot;456&quot;, msrp=22.12),<br />... dict(sku=&quot;789&quot;, msrp=41.44)])<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x84ef9ec&gt;<br />&gt;&gt;&gt; stmt = product_summary_table.insert()<br />&gt;&gt;&gt; engine2.execute(&nbsp; #ç”¨å¼•æ“2 æ’å…¥æ•°æ®,é‚£ä¹ˆproduct_summaryçš„æ•°æ®å°±åœ¨è¿™ä¸ªå¼•æ“<br />&hellip; stmt,<br />&hellip; [dict(sku=&quot;123&quot;, name=&quot;Shoes&quot;, description=&quot;SomeShoes&quot;),<br />... dict(sku=&quot;456&quot;, name=&quot;Pants&quot;, description=&quot;SomePants&quot;),<br />... dict(sku=&quot;789&quot;, name=&quot;Shirts&quot;, description=&quot;SomeShirts&quot;)])<br />/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.8-py2.7-linux-i686.egg/sqlalchemy/engine/default.py:463:SAWarning: Unicode type received non-unicode bind param value.<br />param.append(processors[key](compiled_params[key]))<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x84e896c&gt;<br />&gt;&gt;&gt; class Product(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, sku, msrp, summary=None):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.sku = sku<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.msrp = msrp<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.summary = summary<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;Product %s&gt;&rsquo; %self.sku<br />&hellip;<br />&gt;&gt;&gt; class ProductSummary(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, name, description):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.name = name<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.description =description<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;ProductSummary%s&gt;&rsquo; % self.name<br />&hellip;<br />&gt;&gt;&gt; from sqlalchemy.orm import clear_mappers,backref,relation<br />&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; mapper(ProductSummary, product_summary_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; product=relation(Product,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;backref=backref(&lsquo;summary&rsquo;, uselist=False))))<br />&lt;Mapper at 0x84efa4c; ProductSummary&gt;<br />&gt;&gt;&gt; mapper(Product, product_table)<br />&lt;Mapper at 0x84efd0c; Product&gt;<br />&gt;&gt;&gt; Session = sessionmaker(binds=&#123;Product:engine1,&nbsp; #è¿™é‡Œç»‘å®šäº†2ä¸ªå¼•æ“,ä¸åŒormçš„å¼•æ“ä¸åŒ<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; ProductSummary:engine2&#125;)<br />&gt;&gt;&gt; session = Session()<br />&gt;&gt;&gt; engine1.echo = engine2.echo = True<br />&gt;&gt;&gt; session.query(Product).all() #æŸ¥è¯¢productçš„æ•°æ®<br />2012-07-18 19:00:59,514 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 19:00:59,514 INFO sqlalchemy.engine.base.Engine SELECT product.skuAS product_sku, product.msrp AS product_msrp<br />FROM product<br />2012-07-18 19:00:59,514 INFO sqlalchemy.engine.base.Engine ()<br />/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.8-py2.7-linux-i686.egg/sqlalchemy/types.py:215:SAWarning: Dialect sqlite+pysqlite does *not* support Decimal objects natively,and SQLAlchemy must convert from floating point &ndash; rounding errors and otherissues may occur. Please consider storing Decimal numbers as strings orintegers on this platform for lossless storage.<br />d[coltype] = rp = d['impl'].result_processor(dialect, coltype)<br />[&lt;Product 123&gt;, &lt;Product 456&gt;, &lt;Product 789&gt;]<br />&gt;&gt;&gt; session.query(ProductSummary).all() #æŸ¥è¯¢ProductSummary<br />2012-07-18 19:01:07,510 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)<br />2012-07-18 19:01:07,510 INFO sqlalchemy.engine.base.Engine SELECTproduct_summary.sku AS product_summary_sku, product_summary.name ASproduct_summary_name, product_summary.description AS product_summary_description<br />FROM product_summary<br />2012-07-18 19:01:07,510 INFO sqlalchemy.engine.base.Engine ()<br />[&lt;ProductSummary Shoes&gt;, &lt;ProductSummary Pants&gt;, &lt;ProductSummaryShirts&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; from sqlalchemy.orm.shard import ShardedSession #ä½¿ç”¨ShardedSessionå¯¹ä¼šè¯æ°´å¹³åˆ†åŒº,æ ¹æ®éœ€æ±‚æŠŠæ•°æ®åˆ†å¼€<br />&gt;&gt;&gt; product_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric))<br />&gt;&gt;&gt; metadata.create_all(bind=engine1)<br />&gt;&gt;&gt; metadata.create_all(bind=engine2)<br />&gt;&gt;&gt; class Product(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, sku, msrp):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.sku = sku<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.msrp = msrp<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;Product %s&gt;&rsquo; %self.sku<br />&hellip;<br />&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; product_mapper = mapper(Product, product_table)<br />&gt;&gt;&gt; def shard_chooser(mapper, instance, clause=None):&nbsp; #è¿”å›åŒ…å«æ˜ å°„å’Œå®ä¾‹çš„è¡Œçš„åˆ†åŒºID<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; if mapper is not product_mapper: #éè®¾å®šçš„ormæ˜ å°„å«åšodd<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;odd&rsquo;<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; if (instance.sku&nbsp; #æ•°æ®ä¸ºå¶æ•°ä¹Ÿå«åševen<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and instance.sku[0].isdigit()<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and int(instance.sku[0]) % 2== 0):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;even&rsquo;<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; else:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;odd&rsquo; #å¦åˆ™å«åšodd<br />&hellip;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; def id_chooser(query, ident):&nbsp; æ ¹æ®æŸ¥è¯¢å’Œæ˜ å°„ç±»çš„ä¸»é”®è¿”å›å¯¹è±¡æƒ³é€šè¿‡æŸ¥è¯¢é©»ç•™çš„shard IDåˆ—è¡¨<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; if query.mapper is not product_mapper:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ['odd']<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; if (ident &#92;<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and ident[0].isdigit()<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and int(ident[0]) % 2 == 0):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ['even']<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; return ['odd']<br />&hellip;<br />&gt;&gt;&gt; def query_chooser(query): #è¿”å›å¯é€‰çš„shard IDåˆ—è¡¨<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; return ['even', 'odd']<br />&hellip;<br />&gt;&gt;&gt; Session = sessionmaker(class_=ShardedSession)<br />&gt;&gt;&gt; session = Session(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; shard_chooser=shard_chooser,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; id_chooser=id_chooser,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; query_chooser=query_chooser,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; shards=dict(even=engine1,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odd=engine2))<br />&gt;&gt;&gt; products = [ Product('%d%d%d' % (i,i,i), 0.0)<br />...&nbsp;&nbsp;&nbsp;&nbsp; for i in range(10) ]<br />&gt;&gt;&gt; for p in products:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; session.add(p)<br />&hellip;<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; for row in engine1.execute(product_table.select()):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print row<br />&hellip;<br />2012-07-18 19:11:19,811 INFO sqlalchemy.engine.base.Engine SELECT product.sku,product.msrp<br />FROM product<br />2012-07-18 19:11:19,811 INFO sqlalchemy.engine.base.Engine ()<br />(u&rsquo;000&prime;, Decimal(&rsquo;0E-10&prime;)) #å¶æ•°æ•°æ®å†™åœ¨engine1<br />(u&rsquo;222&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;444&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;666&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;888&prime;, Decimal(&rsquo;0E-10&prime;))<br />&gt;&gt;&gt; for row in engine2.execute(product_table.select()):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print row<br />&hellip;<br />2012-07-18 19:11:40,098 INFO sqlalchemy.engine.base.Engine SELECT product.sku,product.msrp<br />FROM product<br />2012-07-18 19:11:40,099 INFO sqlalchemy.engine.base.Engine ()<br />(u&rsquo;111&prime;, Decimal(&rsquo;0E-10&prime;)) #å¥‡æ•°æ•°æ®å†™åœ¨engine1<br />(u&rsquo;333&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;555&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;777&prime;, Decimal(&rsquo;0E-10&prime;))<br />(u&rsquo;999&prime;, Decimal(&rsquo;0E-10&prime;))<br />&gt;&gt;&gt; session.query(Product).all()<br />2012-07-18 19:12:36,130 INFO sqlalchemy.engine.base.Engine SELECT product.skuAS product_sku, product.msrp AS product_msrp<br />FROM product<br />2012-07-18 19:12:36,130 INFO sqlalchemy.engine.base.Engine ()<br />2012-07-18 19:12:36,131 INFO sqlalchemy.engine.base.Engine SELECT product.skuAS product_sku, product.msrp AS product_msrp<br />FROM product<br />2012-07-18 19:12:36,131 INFO sqlalchemy.engine.base.Engine ()<br />[&lt;Product 123&gt;, &lt;Product 456&gt;, &lt;Product 789&gt;, &lt;Product000&gt;, &lt;Product 222&gt;, &lt;Product 444&gt;, &lt;Product 666&gt;,&lt;Product 888&gt;, &lt;Product 111&gt;, &lt;Product 333&gt;, &lt;Product555&gt;, &lt;Product 777&gt;, &lt;Product 999&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">from sqlalchemy import create_engine<br />from sqlalchemy.orm import mapper, sessionmaker<br />from datetime import datetime<br />from sqlalchemy import Numeric,Table, MetaData, Column, ForeignKey, Integer,String, Unicode, DateTime<br />from sqlalchemy import types<br />from sqlalchemy.databases import sqlite<br />engine1 = create_engine(&lsquo;sqlite://&rsquo;)<br />engine2 = create_engine(&lsquo;sqlite://&rsquo;)<br />metadata = MetaData()<br />product_table = Table(<br />&lsquo;product&rsquo;, metadata,<br />Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />Column(&lsquo;msrp&rsquo;, Numeric))<br />product_summary_table = Table(<br />&lsquo;product_summary&rsquo;, metadata,<br />Column(&lsquo;sku&rsquo;, String(20), ForeignKey(&lsquo;product.sku&rsquo;), primary_key=True),<br />Column(&lsquo;name&rsquo;, Unicode(255)),<br />Column(&lsquo;description&rsquo;, Unicode))<br />product_table.create(bind=engine1)<br />product_summary_table.create(bind=engine2)<br />stmt = product_table.insert()<br />engine1.execute(<br />stmt,<br />[dict(sku=&quot;123&quot;, msrp=12.34),<br />dict(sku=&quot;456&quot;, msrp=22.12),<br />dict(sku=&quot;789&quot;, msrp=41.44)])<br />stmt = product_summary_table.insert()<br />engine2.execute(<br />stmt,<br />[dict(sku=&quot;123&quot;, name=&quot;Shoes&quot;, description=&quot;SomeShoes&quot;),<br />dict(sku=&quot;456&quot;, name=&quot;Pants&quot;, description=&quot;SomePants&quot;),<br />dict(sku=&quot;789&quot;, name=&quot;Shirts&quot;, description=&quot;SomeShirts&quot;)])</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;æœ¬æ–‡ä¸»è¦è¯´åˆ é™¤</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata.drop_all(engine) #åˆ é™¤æŸå¼•æ“çš„å…¨éƒ¨è¡¨</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">metadata.remove(test_table)&nbsp; #åˆ é™¤æŸä¸€ä¸ªtable</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">clear_mappers() #å–æ¶ˆæ‰€æœ‰çš„æ˜ å°„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">åœ¨relationä¸­æœ‰ä¸€ä¸ªå‚æ•°cascade,å®ƒæ˜¯åŸºäºsessionçš„æ“ä½œ,åŒ…æ‹¬æŠŠå¯¹è±¡æ”¾å…¥session,ä»sessionåˆ é™¤å¯¹è±¡ç­‰,å¦‚æœ æŒ‡å®šcascade=&rdquo;all&rdquo;è¡¨ç¤ºåšçš„ä»»ä½•sessionæ“ä½œç»™æ˜ å°„ç±»éƒ½èƒ½å¾ˆå¥½çš„å·¥ä½œ,é»˜è®¤åŒ…å«save-update, merge<br />mapper(ParentClass, parent, properties=dict(<br />children=relation(ChildClass, backref=&rsquo;parent&rsquo;,<br />cascade=&rsquo;all,delete-orphan&rsquo;) )) #delete-orphanè¡¨ç¤ºå¦‚æœæ›¾ç»æ˜¯å­ç±»(childclass)å®ä¾‹ä½†æ˜¯å´æ²¡æœ‰å’Œçˆ¶ç±»è¿æ¥çš„æƒ…å†µä¸‹,å‡å¦‚è¦åˆ é™¤è¿™ä¸ªå­ç±»,è€Œä¸æƒ³æŒ‚ç©ºçˆ¶ç±»å¼•ç”¨äº†çš„å®ä¾‹,<br />é¢çœ‹ä¸ªä¾‹å­å°±æ‡‚äº†:<br />photo = Table(<br />&hellip; &lsquo;photo&rsquo;, metadata,<br />&hellip; Column(&lsquo;id&rsquo;, Integer, primary_key=True))<br />tag = Table(<br />&hellip; &lsquo;tag&rsquo;, metadata,<br />&hellip; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip; Column(&lsquo;photo_id&rsquo;, None, ForeignKey(&lsquo;photo.id&rsquo;)),<br />&hellip; Column(&lsquo;tag&rsquo;, String(80)))<br />class Photo(object):<br />&hellip; pass<br />&hellip;<br />class Tag(object):<br />&hellip; def __init__(self, tag):<br />&hellip; self.tag = tag<br />&hellip;<br />mapper(Photo, photo, properties=dict(<br />&hellip; tags=relation(Tag, backref=&rsquo;photo&rsquo;, cascade=&rdquo;all&rdquo;)))<br />&lt;Mapper at 0x851504c; Photo&gt;<br />&gt;&gt;&gt; mapper(Tag, tag)<br />&lt;Mapper at 0x8515dac; Tag&gt;<br />&gt;&gt;&gt; p1 = Photo()<br />&gt;&gt;&gt; p2 = Photo()<br />&gt;&gt;&gt; p1.tags = [Tag(tag='foo'),Tag(tag='bar'),Tag(tag='baz')]<br />&gt;&gt;&gt; p2.tags = [Tag(tag='foo'),Tag(tag='bar'),Tag(tag='baz')]<br />&gt;&gt;&gt; session.add(p1)<br />&gt;&gt;&gt; session.add(p2)<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; for t in session.query(Tag):<br />&hellip; print t.id,t.photo_id, t.tag<br />&hellip;<br />1 1 foo #å‡ºç°ä»¥ä¸‹å…³è”æ•°æ®<br />2 1 bar<br />3 1 baz<br />4 2 foo<br />5 2 bar<br />6 2 baz<br />&gt;&gt;&gt; session.delete(session.query(Photo).get(1)) #åˆ é™¤ä¸€ä¸ªtagçš„æ•°æ®<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; for t in session.query(Tag):<br />&hellip; print t.id, t.photo_id, t.tag<br />&hellip;<br />4 2 foo #ä»–ä¼šåˆ é™¤å…³è”æ‰€æœ‰t.photo_idä¸º1çš„æ•°æ®,åœ¨è¿™é‡Œrelation(ChildClass, backref=&rsquo;parent&rsquo;,cascade=&rsquo;all,delete-orphan&rsquo;)æŒ‡å®šdelete-orphanæ²¡ä»€ä¹ˆ,å…³é”®çœ‹ä¸‹é¢<br />5 2 bar<br />6 2 baz<br />&gt;&gt;&gt; p3 = session.query(Photo).get(2)<br />&gt;&gt;&gt; del p3.tags[0] #å¦‚æœæˆ‘åªæ˜¯åˆ é™¤å…³è”ç‚¹&hellip;<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; for t in session.query(Tag):<br />&hellip; print t.id, t.photo_id, t.tag<br />&hellip;<br />4 None foo #å…³è”ç‚¹photo_idæˆäº†none,ä½†æ˜¯æ¡ç›®å­˜åœ¨ &ndash;ä»–ä¸ä¼šå½±å“å…¶å®ƒå…³è”è¡¨<br />5 2 bar<br />6 2 baz</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&gt;&gt;&gt; p3 = session.query(Photo).get(2) #å‡å¦‚æ²¡æœ‰è®¾ç½®delete-orphan<br />&gt;&gt;&gt; del p3.tags[0]<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; for t in session.query(Tag):<br />&hellip; print t.id, t.photo_id, t.tag<br />5 2 bar #è‡ªåŠ¨åˆ é™¤äº†å…³è”çš„å…¶å®ƒè¡¨çš„é¡¹<br />6 2 baz<br />æ³¨:å¯ç”¨çš„cascadeå‚æ•°åŒ…å«:</p><ul style="font-family: Arial; font-size: 14px; line-height: 26px"><li>save-update -æˆ‘çš„ç†è§£æ˜¯è°ƒç”¨session.add()ä¼šè‡ªåŠ¨å°†é¡¹ç›®æ·»åŠ åˆ°ç›¸åº”çº§è”å…³ç³»ä¸Š,ä¹Ÿé€‚ç”¨äºå·²ç»ä»å…³ç³»ä¸­åˆ é™¤çš„é¡¹ç›®å—¨æ²¡æœ‰æ¥å¾—åŠåˆ·æ–°çš„æƒ…å†µ</li><li>merge &ndash; å®ƒæ˜¯session.mergeçš„å®ç°,å¤åˆ¶çŠ¶æ€åˆ°å…·æœ‰ç›¸åŒæ ‡è¯†ç¬¦çš„æŒä¹…åŒ–å®ä¾‹çš„å®ä¾‹,å¦‚æœæ²¡æœ‰æŒä¹…çš„å®ä¾‹å’Œå½“å‰sessionç›¸å…³è”ï¼Œè¿”å›çš„æŒä¹…åŒ–å®ä¾‹ã€‚å¦‚æœç»™å®šçš„å®ä¾‹æœªä¿å­˜ï¼Œä»–ä¼šä¿å­˜ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶è¿”å›è¿™ä¸ªå‰¯æœ¬ä½œä¸ºä¸€ä¸ªæ–°çš„æŒä¹…åŒ–å®ä¾‹</li><li>expunge &ndash; ä»sessionä¸­åˆ é™¤å®ä¾‹</li><li>delete &ndash; æ ‡è®°ä¸€ä¸ªå®ä¾‹è¢«åˆ é™¤,æ‰§è¡Œflush()ä¼šæ‰§è¡Œåˆ é™¤æ“ä½œ</li><li>delete-orphan-å¦‚æœå­ç±»ä»æ¯ç±»åˆ é™¤,æ ‡è®°ä¹‹,ä½†æ˜¯ä¸å½±å“æ¯ç±»</li><li>refresh-expire &ndash; å®šæœŸåˆ·æ–°åœ¨ç»™å®šçš„å®ä¾‹çš„å±æ€§,æŸ¥è¯¢å¹¶åˆ·æ–°æ•°æ®åº“</li><li>all &ndash; ä»¥ä¸Šå…¨éƒ¨å±æ€§çš„é›†åˆ:&ldquo;save-update,merge, refresh-expire, expunge, delete</li></ul><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬æ–‡ä¸»è¦æ˜¯ORMçš„sissionæŸ¥è¯¢å’Œæ›´æ–°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sessionè´Ÿè´£æ‰§è¡Œå†…å­˜ä¸­çš„å¯¹è±¡å’Œæ•°æ®åº“è¡¨ä¹‹é—´çš„åŒæ­¥å·¥ä½œ,åˆ›å»ºsessionå¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session =sessionmaker(bind=engine) #sqlalchemy.orm.session.Sessionç±»æœ‰å¾ˆå¤šå‚æ•°,ä½¿ç”¨sessionmakeræ˜¯ä¸ºäº†ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è€…:<br />Session = sessionmaker()<br />Session.configure(bind=engine)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ³¨:sessionmakerçš„å‚æ•°:<br />autoflush=True&nbsp; #ä¸ºTrueæ—¶ï¼Œsessionå°†åœ¨æ‰§è¡Œsessionçš„ä»»ä½•æŸ¥è¯¢å‰è‡ªåŠ¨è°ƒç”¨flush()ã€‚è¿™å°†ç¡®ä¿è¿”å›çš„ç»“æœ</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transactional=False #ä¸ºTrueæ—¶ï¼Œsessionå°†è‡ªåŠ¨ä½¿ç”¨äº‹åŠ¡commit<br />twophase=False #å½“å¤„ç†å¤šä¸ªæ•°æ®åº“å®ä¾‹,å½“ä½¿ç”¨flush()ä½†æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡commitæ—¶,ç»™æ¯ä¸ªæ•°æ®åº“ä¸€ä¸ªæ ‡è¯†,ä½¿æ•´ä¸ªäº‹åŠ¡å›æ»š</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ›å»ºsession,æ·»åŠ æ•°æ®çš„ä¾‹å­(ä»¥å‰ä¹Ÿå‡ºç°è¿‡å¾ˆå¤šæ¬¡äº†)<br />dongwm@localhost ~ $ python<br />Python 2.7.3 (default, Jul 11 2012, 10:10:17)<br />[GCC 4.5.3] on linux2<br />Type &ldquo;help&rdquo;, &ldquo;copyright&rdquo;, &ldquo;credits&rdquo; or &ldquo;license&rdquo; for more information.<br />&gt;&gt;&gt; from sqlalchemy import *<br />&gt;&gt;&gt; from sqlalchemy.orm import *<br />&gt;&gt;&gt; engine = create_engine(&lsquo;sqlite://&rsquo;)<br />&gt;&gt;&gt; metadata = MetaData(engine)<br />&gt;&gt;&gt; account_table = Table(<br />&hellip; &lsquo;account&rsquo;, metadata,<br />&hellip; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip; Column(&lsquo;balance&rsquo;, Numeric))<br />&gt;&gt;&gt; class Account(object): pass<br />&hellip;<br />&gt;&gt;&gt; mapper(Account, account_table)<br />&lt;Mapper at 0x84e6f2c; Account&gt;<br />&gt;&gt;&gt; account_table.create()<br />&gt;&gt;&gt; a = Account()<br />&gt;&gt;&gt; a.balance = 100.00<br />&gt;&gt;&gt; Session = sessionmaker(bind=engine)<br />&gt;&gt;&gt; session = Session()<br />&gt;&gt;&gt; session.add(a)<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; session.delete(a) #è‡ªåŠ¨åˆ é™¤ account_tableç›¸åº”æ¡ç›®,ä½†æ˜¯åœ¨1:Nå’ŒM:Nå…³ç³»ä¸­ä¸ä¼šè‡ªåŠ¨åˆ é™¤å®ƒçš„çº§è”å…³ç³»<br />&gt;&gt;&gt; session.flush()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ³¨:sessionçš„å¯¹è±¡çŠ¶æ€:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transient:çŸ­æš‚çš„,ä¸»è¦æŒ‡å†…å­˜ä¸­çš„å¯¹è±¡</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pending:æŒ‚èµ·çš„,è¿™æ ·çš„å¯¹è±¡å‡†å¤‡æ’å…¥æ•°æ®åº“,ç­‰æ‰§è¡Œäº†flushå°±ä¼šæ’å…¥</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Persistent:æŒä¹…çš„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Detached:å¯¹è±¡åœ¨æ•°æ®åº“é‡Œé¢æœ‰è®°å½•,ä½†æ˜¯ä¸å±äºsession</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;make_transient(a)&nbsp; #å› ä¸ºæ ‡è¯†äº†å·²åˆ é™¤,æ¢å¤açš„çŠ¶æ€<br />&gt;&gt;&gt; session.add(a) #é‡æ–°æ·»åŠ <br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; query = session.query(Account)<br />&gt;&gt;&gt; print query<br />SELECT account.id AS account_id, account.balance AS account_balance<br />FROM account<br />&gt;&gt;&gt; for obj in query:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print obj<br />&hellip;<br />&lt;__main__.Account object at 0x84eef0c&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; query.all()&nbsp;#æŸ¥è¯¢æ‰€æœ‰<br />[&lt;__main__.Account object at 0x84eef0c&gt;]<br />&gt;&gt;&gt; query = query.filter(Account.balance &gt; 10.00)&nbsp; #filterè¿‡æ»¤<br />&gt;&gt;&gt; for obj in query:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print obj.balance<br />&hellip;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100.00</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; for i insession.query(Account).filter_by(balance=100.00 ):&nbsp; #é€šè¿‡æ¡ä»¶è¿‡æ»¤<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print i<br />&gt;&gt;&gt; query = session.query(Account)<br />&gt;&gt;&gt; query = query.from_statement(&lsquo;select *from account wherebalance=:bac&rsquo;) #é€šè¿‡å¸¦é€šé…ç¬¦çš„SQLè¯­å¥å…¶ä¸­:bacæ ‡è¯†è¿™ä¸ªå‚æ•°æ˜¯bac<br />&gt;&gt;&gt; query = query.params(bac=&rsquo;100.00&prime;) #æ ¹æ®bacæŒ‡å®šå€¼å¯»æ‰¾<br />&gt;&gt;&gt; print query.all()<br />[&lt;__main__.Account object at 0x84eef0c&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬åœ°session</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; Session =scoped_session(sessionmaker(&nbsp; #è®¾ç½®ä¸€ä¸ªæœ¬åœ°çš„å…±äº«session<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; bind=engine, autoflush=True))<br />&gt;&gt;&gt; session = Session()<br />&gt;&gt;&gt; session2 = Session()<br />&gt;&gt;&gt; session is session2&nbsp; #ä»–ä»¬æ˜¯åŒä¸€ä¸ª<br />True</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; a = Account()<br />&gt;&gt;&gt; a.balance = 100.00<br />&gt;&gt;&gt; Session.add(a) #æ³¨æ„ è¿™æ˜¯çš„&rsquo;S'æ˜¯å¤§å†™<br />&gt;&gt;&gt; Session.flush()<br />&gt;&gt;&gt; b = Account()<br />&gt;&gt;&gt; a.balance = 200.00<br />&gt;&gt;&gt; session.add(a)&nbsp; #å…¶å®ä»–ä»¬æ˜¯ä¸€ä¸ªå…±äº«çš„session åå­—éƒ½å¯ä»¥<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; print session.query(Account).all() #æŸ¥è¯¢åˆ°äº†2ä¸ª<br />[&lt;__main__.Account object at 0x851be0c&gt;, &lt;__main__.Account object at0x84f7d6c&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ³¨:è¿™æ ·çš„æ˜ å°„mapperä¹Ÿå¯ä»¥è¿™æ ·æ˜¯ç”¨:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapper(Product, product_table,properties=dict(<br />categories=relation(Category, secondary=product_category_table,<br />backref=&rsquo;products&rsquo;)))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session.mapper(Product,product_table, properties=dict(<br />categories=relation(Category, secondary=product_category_table,<br />backref=&rsquo;products&rsquo;))) #å®ƒçš„ä¼˜ç‚¹æ˜¯å¯ä»¥åˆå§‹åŒ–å‚æ•°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬æ–‡ä¸»è¦æ˜¯é¢å‘å¯¹è±¡çš„ç»§æ‰¿æ˜ å°„åˆ°å…³ç³»æ•°æ®åº“è¡¨çš„æ–¹æ³•</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; classProduct(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, sku, msrp):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.sku = sku<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.msrp = msrp<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &lsquo;&lt;%s %s&gt;&rsquo; % (<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.__class__.__name__, self.sku)<br />&hellip;<br />&gt;&gt;&gt; class Clothing(Product):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, sku, msrp, clothing_info):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Product.__init__(self, sku,msrp) #ç»§æ‰¿äº†Product<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.clothing_info =clothing_info<br />&hellip;<br />&gt;&gt;&gt; class Accessory(Product):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, sku, msrp, accessory_info):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Product.__init__(self, sku,msrp) #ç»§æ‰¿äº†Product<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.accessory_info =accessory_info<br />ä¹Ÿå°±æ˜¯è¿™æ ·çš„æ„æ€:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/4/1/6/read.php?4982  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/4/1/6/read.php?4982'" tppabs="http://www.dongwm.com/wp-content/uploads/2012/07/Screenshot-1.png"></a></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸ªå•è¡¨ç»§æ‰¿ä¸­(å¦‚ä¸‹å›¾,é»‘è‰²çš„è¡¨ç¤ºæ²¡æœ‰è¢«æ˜ å°„):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/4/1/6/read.php?4956  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/4/1/6/read.php?4956'" tppabs="http://www.dongwm.com/wp-content/uploads/2012/07/Screenshot-2.png"></a></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä»åˆ›å»ºè¡¨ç»“æ„æ˜¯è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; product_table =Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;clothing_info&rsquo;, String),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;accessory_info&rsquo;, String),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;product_type&rsquo;, String(1), nullable=False)) #ä¸€ä¸ªæ–°çš„å­—æ®µ<br />&gt;&gt;&gt; mapper(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Product, product_table,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; polymorphic_on=product_table.c.product_type, #æ˜ å°„ç»§æ‰¿å±‚æ¬¡ç»“æ„ä½¿ç”¨polymorphic_onè¡¨ç¤ºç»§æ‰¿åœ¨product_typeå­—æ®µ,å€¼æ˜¯polymorphic_identityæŒ‡å®šçš„æ ‡è¯†<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; polymorphic_identity=&rsquo;P') #æ ‡è¯†ç»§æ‰¿ Product ,çˆ¶ç±»<br />&lt;Mapper at 0x85833ec; Product&gt;<br />&gt;&gt;&gt; mapper(Clothing, inherits=Product,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;polymorphic_identity=&rsquo;C')&nbsp;&nbsp; #æ ‡è¯†ç»§æ‰¿Clothingproduct<br />&lt;Mapper at 0x858362c; Clothing&gt;<br />&gt;&gt;&gt;<br />&gt;&gt;&gt; mapper(Accessory, inherits=Product, #ç»§æ‰¿è‡³Product<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; polymorphic_identity=&rsquo;A') #æ ‡è¯†ç»§æ‰¿Accessory<br />&lt;Mapper at 0x8587d8c; Accessory&gt;<br />&gt;&gt;&gt; products = [&nbsp; #åˆ›å»ºä¸€äº›äº§å“<br />...&nbsp;&nbsp;&nbsp;&nbsp; Product('123', 11.22),<br />...&nbsp;&nbsp;&nbsp;&nbsp; Product('456', 33.44),<br />...&nbsp;&nbsp;&nbsp;&nbsp; Clothing('789', 123.45, &quot;Nice Pants&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp; Clothing('111', 125.45, &quot;Nicer Pants&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp; Accessory('222', 24.99, &quot;Wallet&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp; Accessory('333', 14.99, &quot;Belt&quot;) ]<br />&gt;&gt;&gt; Session = sessionmaker()<br />&gt;&gt;&gt; session = Session()<br />&gt;&gt;&gt; for p in products:<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; session.add(p)<br />&hellip;<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; print session.query(Product).all() #å…¨éƒ¨éƒ½æœ‰<br />[&lt;Product 123&gt;, &lt;Product 456&gt;, &lt;Clothing 789&gt;, &lt;Clothing111&gt;, &lt;Accessory 222&gt;, &lt;Accessory 333&gt;]<br />&gt;&gt;&gt; print session.query(Clothing).all()&nbsp; #åªæ˜¾ç¤º2ä¸ª<br />[&lt;Clothing 789&gt;, &lt;Clothing 111&gt;]<br />&gt;&gt;&gt; print session.query(Accessory).all() #åªæ˜¾ç¤º2ä¸ª,æ˜¯ä¸æ˜¯ä¸Šé¢çš„æ˜ å°„æ•ˆæœå’Œåˆ›å»º3ä¸ªç±»è€Œåˆ†åˆ«ormå¥½çš„å¤šå‘¢?<br />[&lt;Accessory 222&gt;, &lt;Accessory 333&gt;]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; for row inproduct_table.select().execute(): #ä»çˆ¶ç±»åº“æŸ¥è¯¢,æ‰€æœ‰æ•°æ®éƒ½æœ‰,åªæ˜¯product_typeä¸åŒ<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; print row<br />&hellip;<br />(u&rsquo;123&prime;, Decimal(&rsquo;11.2200000000&prime;), None, None, u&rsquo;P')<br />(u&rsquo;456&prime;, Decimal(&rsquo;33.4400000000&prime;), None, None, u&rsquo;P')<br />(u&rsquo;789&prime;, Decimal(&rsquo;123.4500000000&prime;), u&rsquo;Nice Pants&rsquo;, None, u&rsquo;C')<br />(u&rsquo;111&prime;, Decimal(&rsquo;125.4500000000&prime;), u&rsquo;Nicer Pants&rsquo;, None, u&rsquo;C')<br />(u&rsquo;222&prime;, Decimal(&rsquo;24.9900000000&prime;), None, u&rsquo;Wallet&rsquo;, u&rsquo;A')<br />(u&rsquo;333&prime;, Decimal(&rsquo;14.9900000000&prime;), None, u&rsquo;Belt&rsquo;, u&rsquo;A')</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…·ä½“çš„æ˜ å°„è§ä¸‹å›¾:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/4/1/6/read.php?4955  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/4/1/6/read.php?4955'" tppabs="http://www.dongwm.com/wp-content/uploads/2012/07/Screenshot-3.png"></a></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æŸ¥è¯¢ä¸€ä¸ªæ²¡æœ‰çš„ä¸å­˜åœ¨çš„æ˜ å°„:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; printsession.query(Accessory)[0].clothing_info<br />None</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…·ä½“è¡¨çš„ç»§æ‰¿</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¯ä¸ªè¡¨åŒ…å«çš„æ•°æ®é‡,éœ€è¦å®ç°å®ƒçš„ç±»;æ²¡æœ‰æµªè´¹çš„ç©ºé—´</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;metadata.remove(product_table)<br />&gt;&gt;&gt; product_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric))<br />&gt;&gt;&gt; clothing_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;clothing&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;clothing_info&rsquo;, String))<br />&gt;&gt;&gt;<br />&gt;&gt;&gt; accessory_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;accessory&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;accessory_info&rsquo;, String))<br />&gt;&gt;&gt;<br />æ‘„åƒæˆ‘ä»¬æƒ³è¦è·å–Product&rsquo;sku&rsquo;æ˜¯222çš„æ•°æ®(æ²¡æœ‰å…¶ä»–é¢å¤–çš„å·¥ä½œ),æˆ‘ä»¬ä¸å¾—ä¸å±‚æ¬¡å‹çš„æŸ¥è¯¢æ¯ä¸ªç±»,è¯·çœ‹è¿™ä¸ªä¾‹å­:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; punion =polymorphic_union(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; dict(P=product_table,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; C=clothing_table,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; A=accessory_table),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;type_&rsquo;)<br />&gt;&gt;&gt;<br />&gt;&gt;&gt; print punion<br />SELECT accessory.sku, accessory.msrp, accessory.accessory_info, CAST(NULL ASVARCHAR) AS clothing_info, &lsquo;A&rsquo; AS type_<br />FROM accessory UNION ALL SELECT product.sku, product.msrp, CAST(NULL ASVARCHAR) AS accessory_info, CAST(NULL AS VARCHAR) AS clothing_info, &lsquo;P&rsquo; AStype_<br />FROM product UNION ALL SELECT clothing.sku, clothing.msrp, CAST(NULL ASVARCHAR) AS accessory_info, clothing.clothing_info, &lsquo;C&rsquo; AS type_<br />FROM clothing<br />ç°åœ¨æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„æ ‡è®°äº†(C,A,P)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; mapper(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Product, product_table, with_polymorphic=(&lsquo;*&rsquo;,punion),&nbsp; #ä½¿ç”¨with_polymorphic=(&lsquo;*&rsquo;, punion)çš„æ–¹å¼æ˜ å°„çˆ¶ç±»,æŒ‡å®šä¸åŒè¡¨é€‰æ‹©,å®ç°å¤šæ€,å¹¶ä¸”æé«˜äº†æ€§èƒ½(åªselectäº†ä¸€æ¬¡)<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; polymorphic_on=punion.c.type_,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; polymorphic_identity=&rsquo;P')<br />&lt;Mapper at 0x8605b6c; Product&gt;<br />&gt;&gt;&gt; mapper(Clothing, clothing_table, inherits=Product,<br />&hellip; polymorphic_identity=&rsquo;C',<br />&hellip; concrete=True)<br />&lt;Mapper at 0x84f1bac; Clothing&gt;<br />&gt;&gt;&gt; mapper(Accessory, accessory_table, inherits=Product,<br />&hellip; polymorphic_identity=&rsquo;A',<br />&hellip; concrete=True)<br />&lt;Mapper at 0x858770c; Accessory&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; session.query(Product).get(&rsquo;222&prime;)<br />&lt;Accessory 222&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬æ–‡ä¸»è¦æ˜¯è®²å…³äºsqlalchemyçš„æ‰©å±•</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ‰©å±•å…¶å®å°±æ˜¯ä¸€äº›å¤–éƒ¨çš„æ’ä»¶,æ¯”å¦‚sqlsoup,associationproxy,declarative,horizontal_shardç­‰ç­‰</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 declarative</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‡å¦‚æƒ³è¦æ•°æ®æ˜ å°„,ä»¥å‰çš„åšæ³•æ˜¯:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_28"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_28'" tppabs="http://www.dongwm.com/#codesyntax_28" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_28'" tppabs="http://www.dongwm.com/#codesyntax_28" title="Show code only"></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_28'" tppabs="http://www.dongwm.com/#codesyntax_28" title="Print code"></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" target="_blank" title="Show plugin information"></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy importcreate_engine</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy import Column,MetaData, Table</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy import Integer,String, ForeignKey</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy.orm importmapper, sessionmaker</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class User(object): #ç®€å•ç±»</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, name, fullname,password):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.name = name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.fullname = fullname</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.password = password</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __repr__(self):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;&lt;User('%s','%s','%s')&gt;&quot; % (self.name, self.fullname, self.password)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata = MetaData()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;users_table = Table('users',metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('user_id', Integer,primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('name', String),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('fullname', String),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('password', String)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email_table = Table('email',metadata,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('email_id', Integer,primary_key=True),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('email_address',String),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Column('user_id', Integer,ForeignKey('users.user_id'))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata.create_all(engine)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapper(User, users_table) #æ˜ å°„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¯¥æ¢é£æ ¼,å¯ä»¥ç”¨è¿™æ ·çš„æ–¹æ³•:</p><table border="0" cellpadding="0" width="100%" style="color: #000000; font-family: Arial; font-size: 14px; line-height: 26px"><tbody><tr><td><p style="margin: 0px; padding: 0px" align="left"><span style="font-size: 14px"><a style="color: #ff9900" name="#codesyntax_29"></a><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_29'" tppabs="http://www.dongwm.com/#codesyntax_29" title="Click to show/hide code block">Source code</a></span></p></td><td><p style="margin: 0px; padding: 0px" align="right"><span style="font-size: 14px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_29'" tppabs="http://www.dongwm.com/#codesyntax_29" title="Show code only"></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/#codesyntax_29'" tppabs="http://www.dongwm.com/#codesyntax_29" title="Print code"></a>&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.dongwm.com/data/file/3/1/6/read.php?5145  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dongwm.com/data/file/3/1/6/read.php?5145'" tppabs="http://www.dongwm.com/wp-content/plugins/wp-synhighlight/About.html" target="_blank" title="Show plugin information"></a>&nbsp;</span></p></td></tr></tbody></table><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy import Column,Integer, String, ForeignKey</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy importcreate_engine</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy.ext.declarativeimport declarative_base</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from sqlalchemy.orm importbackref, mapper, relation, sessionmaker</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base = declarative_base()</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class User(Base):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__tablename__ = &quot;users&quot; #è®¾å®šæ¥æ”¶æ˜ å°„çš„è¡¨å</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id = Column(Integer, primary_key=True) #å°†è¡¨ç»“æ„å†™åˆ°ç±»é‡Œé¢</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name = Column(String)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fullname = Column(String)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password = Column(String)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, name, fullname,password):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.name = name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.fullname = fullname</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.password = password</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __repr__(self):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;&lt;User('%s','%s','%s')&gt;&quot; % (self.name, self.fullname, self.password)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class Address(Base):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__tablename__ = &quot;addresses&quot;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id = Column(Integer, primary_key=True)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email_address = Column(String,nullable=False)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_id = Column(Integer,ForeignKey('users.id'))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user = relation(User,backref=backref('addresses', order_by=id)) #åˆ›å»ºåŒå‘å…³ç³»,æ ‡è¯†ä»¥userçš„idä¸ºè¿æ¥,ä¹Ÿå°±æ˜¯è¯´:Addressåˆ°Useræ˜¯å¤šå¯¹ä¸€,Useråˆ°Addressæ˜¯ä¸€å¯¹å¤š</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, email_address):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.email_address = email_address</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def __repr__(self):</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&quot;&lt;Address('%s')&gt;&quot; % self.email_address</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;engine =create_engine(&quot;sqlite:///tutorial.db&quot;, echo=True)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;users_table = User.__table__ #è·å–Userè¡¨å¯¹è±¡å¥æŸ„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata = Base.metadata #è·å–metadataå¥æŸ„</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata.create_all(engine)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸‹é¢å…·ä½“è¯´:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;engine =create_engine(&lsquo;sqlite://&rsquo;) #åˆ›å»ºå¼•æ“<br />Base.metadata.create_all(engine) #å¸¸è§è¡¨<br />Base.metadata.bind = create_engine(&lsquo;sqlite://&rsquo;) #ç»‘å®š<br />Base = declarative_base(bind=create_engine(&lsquo;sqlite://&rsquo;)) #ç»‘å®šå¼•æ“<br />mymetadata = MetaData()<br />Base = declarative_base(metadata=mymetadata) #è®¾å®šå…ƒæ•°æ®è®¾å®šç®€å•å…³ç³»:<br />class User(Base):<br />__tablename__ = &lsquo;users&rsquo;id = Column(Integer, primary_key=True)<br />name = Column(String(50))<br />addresses = relationship(&ldquo;Address&rdquo;, backref=&rdquo;user&rdquo;) #relationshipå…¶å®å°±æ˜¯relationçš„å…¨ç§°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classAddress(Base):<br />__tablename__ = &lsquo;addresses&rsquo;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id =Column(Integer, primary_key=True)<br />email = Column(String(50))<br />user_id = Column(Integer, ForeignKey(&lsquo;users.id&rsquo;))<br />è®¾å®šå¤šå¯¹å¤šå…³ç³»:<br />keywords = Table(<br />&lsquo;keywords&rsquo;, Base.metadata,<br />Column(&lsquo;author_id&rsquo;, Integer, ForeignKey(&lsquo;authors.id&rsquo;)),<br />Column(&lsquo;keyword_id&rsquo;, Integer, ForeignKey(&lsquo;keywords.id&rsquo;))<br />)<br />class Author(Base):<br />__tablename__ = &lsquo;authors&rsquo;<br />id = Column(Integer, primary_key=True)<br />keywords = relationship(&ldquo;Keyword&rdquo;, secondary=keywords)<br />å®šä¹‰SQLè¡¨è¾¾å¼:<br />class MyClass(Base):<br />__tablename__ = &lsquo;sometable&rsquo;<br />__table_args__ = &#123;&lsquo;mysql_engine&rsquo;:'InnoDB&rsquo;&#125; #åå­—,æ˜ å°„ç±»,å…ƒæ•°æ®ä¹‹å¤–çš„æŒ‡å®šéœ€è¦ä½¿ç”¨__table_args__</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è€…:<br />class MyClass(Base):<br />__tablename__ = &lsquo;sometable&rsquo;<br />__table_args__ = (<br />ForeignKeyConstraint(['id'], ['remote_table.id']), #å…ƒç»„æ–¹å¼<br />UniqueConstraint(&lsquo;foo&rsquo;),<br />)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è€…:<br />class MyClass(Base):<br />__tablename__ = &lsquo;sometable&rsquo;<br />__table_args__ = (<br />ForeignKeyConstraint(['id'], ['remote_table.id']),<br />UniqueConstraint(&lsquo;foo&rsquo;),<br />&#123;&lsquo;autoload&rsquo;:True&#125; #æœ€åçš„å‚æ•°å¯ä»¥ç”¨å­—å…¸ æƒ³æƒ³*argsand **kwargs<br />)<br />ä½¿ç”¨æ··åˆå¼:<br />class MyClass(Base):<br />__table__ = Table(&lsquo;my_table&rsquo;, Base.metadata, #åœ¨__table__é‡ŒæŒ‡å®šè¡¨ç»“æ„<br />Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />Column(&lsquo;name&rsquo;, String(50))<br />)<br />2 sqlsoup(åœ¨sqlalchemy0.8ç‰ˆæœ¬åä»–å˜æˆäº†ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®,http://pypi.python.org/pypi/sqlsoup,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è€Œæˆ‘ä½¿ç”¨gentooæä¾›çš„0.7.8ç‰ˆæœ¬,ä»¥ä¸‹çš„ç¨‹åºimportéƒ¨åˆ†å¯èƒ½ä¸é€‚ç”¨æ›´é«˜ç‰ˆæœ¬,è€Œéœ€è¦import sqlsoup)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sqlsoupæä¾›ä¸€ä¸ªæ–¹ä¾¿çš„è®¿é—®æ•°æ®åº“çš„æ¥æ–¹å¼,è€Œæ— éœ€åˆ›å»ºç±»,æ˜ å°„æ•°æ®åº“</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿˜æ˜¯çœ‹ä¾‹å­çš„å¯¹æ¯”:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”¨ä»¥å‰çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å¹¶ä¸”æ’å…¥ä¸€äº›æ•°æ®:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; fromsqlalchemy import *<br />&gt;&gt;&gt; engine = create_engine(&lsquo;sqlite:///dongwm.db&rsquo;)<br />&gt;&gt;&gt; metadata = MetaData(engine)<br />&gt;&gt;&gt; product_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;sku&rsquo;, String(20), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;msrp&rsquo;, Numeric))<br />&gt;&gt;&gt; store_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;store&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;name&rsquo;, Unicode(255)))<br />&gt;&gt;&gt; product_price_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;product_price&rsquo;, metadata,<br />&hellip; Column(&lsquo;sku2&prime;, None, ForeignKey(&lsquo;product.sku&rsquo;), primary_key=True),<br />&hellip; Column(&lsquo;store_id&rsquo;, None, ForeignKey(&lsquo;store.id&rsquo;), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;price&rsquo;, Numeric, default=0))<br />&gt;&gt;&gt; metadata.create_all()<br />&gt;&gt;&gt; stmt = product_table.insert()<br />&gt;&gt;&gt; stmt.execute([dict(sku=&quot;123&quot;, msrp=12.34),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(sku=&quot;456&quot;, msrp=22.12),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(sku=&quot;789&quot;, msrp=41.44)])<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x84fbdcc&gt;<br />&gt;&gt;&gt; stmt = store_table.insert()<br />&gt;&gt;&gt; stmt.execute([dict(name=&quot;Main Store&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(name=&quot;Secondary Store&quot;)])<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x850068c&gt;<br />&gt;&gt;&gt; stmt = product_price_table.insert()<br />&gt;&gt;&gt; stmt.execute([dict(store_id=1, sku=&quot;123&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(store_id=1, sku2=&quot;456&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(store_id=1, sku2=&quot;789&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(store_id=2, sku2=&quot;123&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(store_id=2, sku2=&quot;456&quot;),<br />...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict(store_id=2, sku2=&quot;789&quot;)])<br />&lt;sqlalchemy.engine.base.ResultProxy object at 0x85008cc&gt;<br />åˆ›å»ºæ’å…¥å®Œæ¯•,ç„¶åæˆ‘ä»¬ç”¨sqlsoupè¿æ¥æ“ä½œ:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; fromsqlalchemy.ext.sqlsoup import SqlSoup<br />&gt;&gt;&gt; db = SqlSoup(&lsquo;sqlite:///dongwm.db&rsquo;)&nbsp; #è¿æ¥ä¸€ä¸ªå­˜åœ¨çš„æ•°æ®åº“<br />&gt;&gt;&gt; print db.product.all() #æ‰“å°ç»“æœ<br />[MappedProduct(sku=u'123',msrp=Decimal('12.3400000000')),MappedProduct(sku=u'456',msrp=Decimal('22.1200000000')),MappedProduct(sku=u'789',msrp=Decimal('41.4400000000'))]<br />&gt;&gt;&gt; print db.product.get(&rsquo;123&prime;) #æ˜¯ä¸æ˜¯æ¯”session.query(Product)ç®€å•å‘¢?<br />MappedProduct(sku=u&rsquo;123&prime;,msrp=Decimal(&rsquo;12.3400000000&prime;))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ³¨:å‡å¦‚æƒ³åˆ›å»ºä¸€ä¸ªæ•°æ®åº“: db = SqlSoup(&lsquo;sqlite:///:memory:&rsquo;)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;newprod = db.product.insert(sku=&rsquo;111&prime;, msrp=22.44) #æ²¡æœ‰ä½¿ç”¨æ•°æ®æ˜ å°„çš„æ’å…¥<br />&gt;&gt;&gt; db.flush()<br />&gt;&gt;&gt; db.clear() #è°ƒç”¨åº•å±‚,æ¸…é™¤æ‰€æœ‰sessionå®ä¾‹,å®ƒæ˜¯session.expunge_allçš„åˆ«å<br />&gt;&gt;&gt; db.product.all()<br />[MappedProduct(sku=u'123',msrp=Decimal('12.3400000000')),MappedProduct(sku=u'456',msrp=Decimal('22.1200000000')),MappedProduct(sku=u'789',msrp=Decimal('41.4400000000')),MappedProduct(sku=u'111',msrp=Decimal('22.4400000000'))] #æ–°æ¡ç›®å·²ç»å­˜åœ¨äº†<br />#MappedProductä½¿ç”¨__getattr__å°†æ— æ³•è¯†åˆ«çš„å±æ€§å’Œè®¿é—®æ–¹æ³•è½¬å‘åˆ°å®ƒçš„queryå±æ€§,å®ƒè¿˜æä¾›äº†ä¸€äº›æ•°æ®å¤„ç†åŠŸèƒ½ç”¨äºæ›´æ–°</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; fromsqlalchemy import or_, and_, desc<br />&gt;&gt;&gt; where = or_(db.product.sku==&rsquo;123&prime;, db.product.sku==&rsquo;111&prime;)<br />&gt;&gt;&gt; db.product.filter(where).order_by(desc(db.product.msrp)).all() #è¿™æ ·ä½¿ç”¨å¤šæ¡ä»¶è¿‡æ»¤,é™åºæ’ç»ƒ<br />[MappedProduct(sku='111',msrp=22.44), MappedProduct(sku=u'123',msrp=Decimal('12.3400000000'))]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; join1= db.join(db.product, db.product_price, isouter=True) #å…³è”2ä¸ªè¡¨, isouter=Trueç¡®ä¿LEFT OUTER(è¿˜æ²¡ç†è§£)<br />&gt;&gt;&gt; join1.all()<br />[MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),sku2=u'123',store_id=1,price=Decimal('0E-10')),&nbsp;#è¿™ä¸ªå­—æ®µåŒ…å«äº†2ä¸ªè¡¨çš„ç›¸åº”å­—æ®µ<br />MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),sku2=u'123',store_id=2,price=Decimal('0E-10')),MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),sku2=u'456',store_id=1,price=Decimal('0E-10')),MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),sku2=u'456',store_id=2,price=Decimal('0E-10')),MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),sku2=u'789',store_id=1,price=Decimal('0E-10')),MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),sku2=u'789',store_id=2,price=Decimal('0E-10')),MappedJoin(sku=u'111',msrp=Decimal('22.4400000000'),sku2=None,store_id=None,price=None)]<br />&gt;&gt;&gt; join2 = db.join(join1, db.store, isouter=True) #å°†storeè¡¨ä¹Ÿå…³è”è¿›æ¥(å› ä¸ºä¹Ÿæœ‰ä¸€ä¸ªå¤–é”®),å°±æ˜¯å…³è”ä¸‰ä¸ªè¡¨<br />&gt;&gt;&gt; join2.all()<br />[MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),sku2=u'123',store_id=1,price=Decimal('0E-10'),id=1,name=u'MainStore'),MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),sku2=u'123',store_id=2,price=Decimal('0E-10'),id=2,name=u'SecondaryStore'), MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),sku2=u'456',store_id=1,price=Decimal('0E-10'),id=1,name=u'MainStore'),MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),sku2=u'456',store_id=2,price=Decimal('0E-10'),id=2,name=u'SecondaryStore'), MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),sku2=u'789',store_id=1,price=Decimal('0E-10'),id=1,name=u'MainStore'),MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),sku2=u'789',store_id=2,price=Decimal('0E-10'),id=2,name=u'SecondaryStore'), MappedJoin(sku=u'111',msrp=Decimal('22.4400000000'),sku2=None,store_id=None,price=None,id=None,name=None)]<br />&gt;&gt;&gt; join3 = db.with_labels(join1) #æ ¹æ®åŸç±æ ‡è®°,æ¯”å¦‚skuä¼šè¯´å‡º:product_sku,å‘Šè¯‰ä½ å®ƒæ¥ç€productè¡¨,ä½†æ˜¯æŒ‡å®šäº†jion1,å°±ä¸ä¼šæ ‡è¯†å…³äºstoreçš„è¡¨<br />&gt;&gt;&gt; join3.first()<br />MappedJoin(product_sku=u&rsquo;123&prime;,product_msrp=Decimal(&rsquo;12.3400000000&prime;),product_price_sku2=u&rsquo;123&prime;,product_price_store_id=1,product_price_price=Decimal(&rsquo;0E-10&prime;))<br />&gt;&gt;&gt; db.with_labels(join2).first()<br />MappedJoin(product_sku=u&rsquo;123&prime;,product_msrp=Decimal(&rsquo;12.3400000000&prime;),product_price_sku2=u&rsquo;123&prime;,product_price_store_id=1,product_price_price=Decimal(&rsquo;0E-10&prime;),store_id=1,store_name=u&rsquo;MainStore&rsquo;)<br />&gt;&gt;&gt; labelled_product = db.with_labels(db.product)<br />&gt;&gt;&gt; join4 = db.join(labelled_product, db.product_price,&nbsp;isouter=True)<br />&gt;&gt;&gt; join4.first()<br />MappedJoin(product_sku=u&rsquo;123&prime;,product_msrp=Decimal(&rsquo;12.3400000000&prime;),sku2=u&rsquo;123&prime;,store_id=1,price=Decimal(&rsquo;0E-10&prime;))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;db.clear()<br />&gt;&gt;&gt; join5 = db.join(db.product, db.product_price)<br />&gt;&gt;&gt; s = select([db.product._table,<br />...&nbsp;&nbsp;&nbsp;&nbsp; func.avg(join5.c.price).label('avg_price')], #æ·»åŠ ä¸€ä¸ªå­—æ®µè®¡ç®—äº§å“(product)çš„priceå¹³å‡å€¼,å­—æ®µåä¸ºavg_price<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; from_obj=[join5._table],<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; group_by=[join5.c.sku])<br />&gt;&gt;&gt; s = s.alias(&lsquo;products_with_avg_price&rsquo;) #å®ƒæ˜¯fromsqlalchemy import alias; a = alias(self, name=name)çš„ç®€å†™<br />&gt;&gt;&gt; products_with_avg_price = db.map(s, primary_key=[join5.c.sku]) #å› ä¸ºæ²¡æœ‰æ˜ å°„åˆ°è¡¨æˆ–è€…joinï¼Œéœ€è¦æŒ‡å®šå¦‚ä½•æ‰¾åˆ°ä¸»é”®<br />&gt;&gt;&gt; products_with_avg_price.all()<br />[MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),avg_price=0.0),MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),avg_price=0.0),MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),avg_price=0.0)]<br />&gt;&gt;&gt; db.product_price.first().price = 50.00<br />&gt;&gt;&gt; db.flush()<br />&gt;&gt;&gt; products_with_avg_price.all()<br />[MappedJoin(sku=u'123',msrp=Decimal('12.3400000000'),avg_price=0.0),MappedJoin(sku=u'456',msrp=Decimal('22.1200000000'),avg_price=0.0),MappedJoin(sku=u'789',msrp=Decimal('41.4400000000'),avg_price=0.0)]<br />&gt;&gt;&gt; db.products_with_avg_price = products_with_avg_price #ä¿å­˜æ˜ å°„åˆ°db,æ–¹ä¾¿é‡ç”¨<br />&gt;&gt;&gt; msrp=select([db.product.c.msrp],<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; db.product.sku==db.product_price.sku2) #è·å–skuå’Œsku2ç›¸ç­‰æ—¶å€™msrpçš„å€¼<br />&gt;&gt;&gt; db.product_price.update(&nbsp; #æ›´æ–°æ•°æ®<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; values=dict(price=msrp),synchronize_session=False) #è®¾ç½®priceè¿™ä¸ªå­—æ®µå€¼ä¸ºä¸Šé¢å¯¹åº”çš„msrp</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6<br />&gt;&gt;&gt; db.product_price.all()<br />[MappedProduct_price(sku2=u'123',store_id=1,price=Decimal('12.3400000000')),MappedProduct_price(sku2=u'456',store_id=1,price=Decimal('22.1200000000')),MappedProduct_price(sku2=u'789',store_id=1,price=Decimal('41.4400000000')),MappedProduct_price(sku2=u'123',store_id=2,price=Decimal('12.3400000000')),MappedProduct_price(sku2=u'456',store_id=2,price=Decimal('22.1200000000')),MappedProduct_price(sku2=u'789',store_id=2,price=Decimal('41.4400000000'))]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 associationproxy</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;associationproxyç”¨äºåˆ›å»ºä¸€ä¸ªè¯»/å†™æ•´ä¸ªå…³ç³»çš„ç›®æ ‡å±æ€§</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;çœ‹ä¸€ä¸ªä¾‹å­å°±æ‡‚äº†:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;user_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;user&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;user_name&rsquo;, String(255), unique=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;password&rsquo;, String(255)))<br />&gt;&gt;&gt; brand_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;brand&rsquo;, metadata,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;id&rsquo;, Integer, primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;name&rsquo;, String(255)))<br />&gt;&gt;&gt; sales_rep_table = Table(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;sales_rep&rsquo;, metadata,<br />&hellip; Column(&lsquo;brand_id&rsquo;, None, ForeignKey(&lsquo;brand.id&rsquo;), primary_key=True),<br />&hellip; Column(&lsquo;user_id&rsquo;, None, ForeignKey(&lsquo;user.id&rsquo;), primary_key=True),<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; Column(&lsquo;commission_pct&rsquo;, Integer, default=0))<br />&gt;&gt;&gt; class User(object): pass<br />&hellip;<br />&gt;&gt;&gt; class Brand(object): pass<br />&hellip;<br />&gt;&gt;&gt; class SalesRep(object): pass<br />&hellip;<br />&gt;&gt;&gt; mapper(User, user_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; sales_rep=relation(SalesRep, backref=&rsquo;user&rsquo;,uselist=False)))<br />&lt;Mapper at 0x87472ec; User&gt;<br />&gt;&gt;&gt; mapper(Brand, brand_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; sales_reps=relation(SalesRep, backref=&rsquo;brand&rsquo;)))<br />&lt;Mapper at 0x874770c; Brand&gt;<br />&gt;&gt;&gt; mapper(SalesRep, sales_rep_table)<br />&lt;Mapper at 0x874768c; SalesRep&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ORMå®Œæˆ,ä½†æ˜¯å‡å¦‚æˆ‘ä»¬æƒ³è¦brand(å“ç‰Œ)ç±»å¯¹è±¡çš„ä¸€ä¸ªæ‰€æœ‰SalesReps for Brand(å“ç‰Œçš„é”€å”®ä»£è¡¨)çš„Useråˆ—è¡¨å±æ€§,å¯ä»¥è¿™æ ·:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classBrand(object):<br />@property<br />def users(self):<br />return [ sr.user for sr in self.sales_reps ]</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½†æ˜¯ä¸æ–¹ä¾¿å¢åŠ åˆ é™¤,è€Œä½¿ç”¨association_proxy:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; fromsqlalchemy.ext.associationproxy import association_proxy<br />&gt;&gt;&gt; class Brand(object):<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;users=association_proxy(&lsquo;sales_reps&rsquo;, &lsquo;user&rsquo;)<br />&hellip;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è€…:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapper(Brand,brand_table, properties=dict(<br />sales_reps=relation(SalesRep, backref=&rsquo;brand&rsquo;)))<br />Brand.users=association_proxy(&lsquo;sales_reps&rsquo;, &lsquo;user&rsquo;)#ä¼˜ç‚¹æ˜¯ç»´æŒäº†åŸŸå¯¹è±¡</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç±»,å¢åŠ å±æ€§:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classUser(object):<br />def __init__(self, user_name=None, password=None):<br />self.user_name=user_name<br />self.password=password</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classBrand(object):<br />def __init__(self, name=None):<br />self.name = name</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classSalesRep(object):<br />def __init__(self, user=None, brand=None, commission_pct=0):<br />self.user = user<br />self.brand = brand<br />self.commission_pct=commission_pct</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;çœ‹ä¸‹é¢çš„æ•ˆæœ:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt; b =Brand(&lsquo;Cool Clothing&rsquo;)<br />&gt;&gt;&gt; session.add(b)<br />&gt;&gt;&gt; u = User(&lsquo;rick&rsquo;, &lsquo;foo&rsquo;)<br />&gt;&gt;&gt; session.add(u)<br />&gt;&gt;&gt; session.flush()<br />2012-07-20 12:22:33,191 INFO sqlalchemy.engine.base.Engine INSERT INTO user(user_name, password) VALUES (?, ?)<br />2012-07-20 12:22:33,191 INFO sqlalchemy.engine.base.Engine (&lsquo;rick&rsquo;, &lsquo;foo&rsquo;)<br />2012-07-20 12:22:33,191 INFO sqlalchemy.engine.base.Engine INSERT INTO brand(name) VALUES (?)<br />2012-07-20 12:22:33,191 INFO sqlalchemy.engine.base.Engine (&lsquo;Cool Clothing&rsquo;,)<br />&gt;&gt;&gt; b.users<br />2012-07-20 12:22:42,135 INFO sqlalchemy.engine.base.Engine SELECTsales_rep.brand_id AS sales_rep_brand_id, sales_rep.user_id ASsales_rep_user_id, sales_rep.commission_pct AS sales_rep_commission_pct<br />FROM sales_rep<br />WHERE ? = sales_rep.brand_id<br />2012-07-20 12:22:42,135 INFO sqlalchemy.engine.base.Engine (2,)<br />[]<br />&gt;&gt;&gt; b.users.append(u) #è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå•ä¸€çš„ä½ç½®å‚æ•°è°ƒç”¨å…¶ä¸­ä»‹(SalesRep)å¯¹è±¡<br />2012-07-20 12:22:46,782 INFO sqlalchemy.engine.base.Engine SELECTsales_rep.brand_id AS sales_rep_brand_id, sales_rep.user_id ASsales_rep_user_id, sales_rep.commission_pct AS sales_rep_commission_pct<br />FROM sales_rep<br />WHERE ? = sales_rep.user_id<br />2012-07-20 12:22:46,782 INFO sqlalchemy.engine.base.Engine (2,)<br />&gt;&gt;&gt; b.users<br />[&lt;__main__.User object at 0x87d7b6c&gt;]<br />&gt;&gt;&gt; b.sales_reps<br />[&lt;__main__.SalesRep object at 0x87d7c4c&gt;]<br />&gt;&gt;&gt; b.sales_reps[0].commission_pct<br />0<br />&gt;&gt;&gt; session.flush()<br />2012-07-20 12:23:14,215 INFO sqlalchemy.engine.base.Engine INSERT INTOsales_rep (brand_id, user_id, commission_pct) VALUES (?, ?, ?)<br />2012-07-20 12:23:14,215 INFO sqlalchemy.engine.base.Engine (2, 2, 0)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ›´å¤æ‚çš„æƒ³æ³•ç»™é”€å”®äººå‘˜ä¸€ä¸ª10%çš„ææˆ:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Brand.users=association_proxy(<br />&lsquo;sales_reps&rsquo;, &lsquo;user&rsquo;,<br />creator=lambda u:SalesRep(user=u, commission_pct=10))</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‡è®¾æˆ‘ä»¬æƒ³è¦çš„å“ç‰Œå±æ€§æ˜¯ä¸€ä¸ªé™„å¸¦Userå’Œä½£é‡‘commission_pctçš„å­—å…¸:</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fromsqlalchemy.orm.collections import attribute_mapped_collection<br />&gt;&gt;&gt; from sqlalchemy.orm.collections import attribute_mapped_collection<br />&gt;&gt;&gt; reps_by_user_class=attribute_mapped_collection(&lsquo;user&rsquo;)<br />&gt;&gt;&gt; clear_mappers()<br />&gt;&gt;&gt; mapper(Brand, brand_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; sales_reps_by_user=relation(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SalesRep, backref=&rsquo;brand&rsquo;,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collection_class=reps_by_user_class)))<br />&lt;Mapper at 0x862c5ec; Brand&gt;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&middot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;Brand.commissions=association_proxy(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; &lsquo;sales_reps_by_user&rsquo;, &lsquo;commission_pct&rsquo;,<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; creator=lambda key,value: SalesRep(user=key,commission_pct=value))<br />&gt;&gt;&gt; mapper(User, user_table, properties=dict(<br />&hellip;&nbsp;&nbsp;&nbsp;&nbsp; sales_rep=relation(SalesRep, backref=&rsquo;user&rsquo;,uselist=False)))<br />&lt;Mapper at 0x8764b2c; User&gt;<br />&gt;&gt;&gt; mapper(SalesRep, sales_rep_table)<br />&lt;Mapper at 0x87bb4cc; SalesRep&gt;<br />&gt;&gt;&gt; b = session.query(Brand).get(1)<br />&gt;&gt;&gt; u = session.query(User).get(1)<br />&gt;&gt;&gt; b.commissions[u] = 20<br />&gt;&gt;&gt; session.bind.echo = False<br />&gt;&gt;&gt; session.flush()<br />&gt;&gt;&gt; b = session.query(Brand).get(1)<br />&gt;&gt;&gt; u = session.query(User).get(1)<br />&gt;&gt;&gt; u.user_name<br />u&rsquo;dongwm&rsquo;<br />&gt;&gt;&gt; print b.commissions[u]<br />20<br />&gt;&gt;&gt; print b.sales_reps_by_user[u] #ä»£ç†å’ŒåŸæ¥çš„å…³ç³»æ˜¯è‡ªåŠ¨åŒæ­¥çš„<br />&lt;__main__.SalesRep object at 0x87e3dcc&gt;<br />&gt;&gt;&gt; print b.sales_reps_by_user[u].commission_pct<br />20</p> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">æ—¥å¿—æ ‡é¢˜</option><option value="2">æ—¥å¿—å…¨æ–‡</option><option value="3">è¯„è®ºå¼•ç”¨</option><option value="4">æ‰€æœ‰ç•™è¨€</option></select>
	<input value="æœç´¢" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>åˆ†ç±»</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="ç¡¬ä»¶">ç¡¬ä»¶</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="æ¨¡ç”µä¸ç”µè·¯">æ¨¡ç”µä¸ç”µè·¯</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="ç¡¬ä»¶çŸ¥è¯†">ç¡¬ä»¶çŸ¥è¯†</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3Dæ‰“å°">3Dæ‰“å°</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="èµ„è®¯">èµ„è®¯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="æ ‘è“æ´¾">æ ‘è“æ´¾</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="è½¯ä»¶">è½¯ä»¶</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lispã€Erlang">Erlangã€Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="æµ‹è¯•">æµ‹è¯•</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="æºç åˆ†æ">æºç åˆ†æ</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="ç¼–è¯‘åŸç†">ç¼–è¯‘åŸç†</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="é»‘å®¢">é»‘å®¢</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPUç¼–ç¨‹">GPUç¼–ç¨‹</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="éŸ³è§†é¢‘ä¸æµåª’ä½“">éŸ³è§†é¢‘ä¸æµåª’ä½“</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="æ¸¸æˆ">æ¸¸æˆ</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="ç¼–ç¨‹æ‚é¡¹">ç¼–ç¨‹æ‚é¡¹</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="ç½‘ç»œå®‰å…¨">ç½‘ç»œå®‰å…¨</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="è½¯ä»¶å·¥ç¨‹">è½¯ä»¶å·¥ç¨‹</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="å¹¶è¡Œç¼–ç¨‹">å¹¶è¡Œç¼–ç¨‹</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="å¤§æ•°æ®">å¤§æ•°æ®</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="ç†è®º">ç†è®º</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="æ•°å­¦">æ•°å­¦</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="ç‰©ç†">ç‰©ç†</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="ç®—æ³•">ç®—æ³•</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="éŸ³é¢‘å¤„ç†">éŸ³é¢‘å¤„ç†</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&æ¨¡å¼è¯†åˆ«">AR&amp;AI&amp;æ¨¡å¼è¯†åˆ«</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="å·¥å…·">å·¥å…·</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="æ–°é²œç©æ„">æ–°é²œç©æ„</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="è¡Œä¸šåº”ç”¨">è¡Œä¸šåº”ç”¨</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="èµ„è®¯">èµ„è®¯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="ç½‘æ–‡">ç½‘æ–‡</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="ç‚¹å­æ­£ä¼ ">ç‚¹å­æ­£ä¼ </a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="ç†è´¢">ç†è´¢</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="æ”¶é›†">æ”¶é›†</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="åˆ›ä¸š">åˆ›ä¸š</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="å…±äº«è½¯ä»¶">å…±äº«è½¯ä»¶</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="åˆ›æ„">åˆ›æ„</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="æ˜Ÿè±¡å‘½ç†">æ˜Ÿè±¡å‘½ç†</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="æ‚é¡¹">æ‚é¡¹</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="è®°å½•">è®°å½•</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="å¿ƒçµé¸¡æ±¤">å¿ƒçµé¸¡æ±¤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="æ–‡å­¦">æ–‡å­¦</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="å…¶å®ƒå·¥ç¨‹èµ„æ–™">å…¶å®ƒå·¥ç¨‹èµ„æ–™</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="å“²å­¦">å“²å­¦</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="æœ‰è¨€">æœ‰è¨€</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="å¾®è¯­å½•">å¾®è¯­å½•</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="ç½®é¡¶">ç½®é¡¶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="åŠ±å¿—">åŠ±å¿—</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="èµ„æºç®¡ç†">èµ„æºç®¡ç†</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="è¿½è¸ªè¿™ä¸ªåˆ†ç±»çš„RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>æ—¥å†</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">æ—¥</td>
	<td class="calendar-weekday-cell">ä¸€</td>
	<td class="calendar-weekday-cell">äºŒ</td>
	<td class="calendar-weekday-cell">ä¸‰</td>
	<td class="calendar-weekday-cell">å››</td>
	<td class="calendar-weekday-cell">äº”</td>
	<td class="calendar-weekday-cell">å…­</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>ç»Ÿè®¡</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
è®¿é—®æ¬¡æ•° 133640<br/>ä»Šæ—¥è®¿é—® 1<br/>æ—¥å¿—æ•°é‡ 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">ç•™è¨€æ•°é‡ 2</a><br/>åœ¨çº¿äººæ•° 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>æœ€æ–°æ—¥å¿—</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysqlä¼˜åŒ–ä¹‹ç´¢å¼•ä¼˜åŒ–">mysqlä¼˜åŒ–ä¹‹ç´¢å¼•ä¼˜åŒ–</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit ä¼˜åŒ–ï¼Œç™¾ä¸‡è‡³åƒä¸‡çº§å¿«é€Ÿåˆ†é¡µï¼Œ--å¤åˆç´¢å¼•çš„å¼•ç”¨å¹¶åº”ç”¨äºè½»é‡çº§æ¡†æ¶&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sqlè¯­å¥æ‰§è¡Œæ—¶é—´æŸ¥è¯¢">mysql sqlè¯­å¥æ‰§...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHashæ ¸å¿ƒåŸç†è§£æ">GeoHashæ ¸å¿ƒåŸç†è§£...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="å¦‚ä½•å®ç°æŒ‰è·ç¦»æ’åºã€èŒƒå›´æŸ¥æ‰¾">å¦‚ä½•å®ç°æŒ‰è·ç¦»æ’åºã€èŒƒå›´...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>é“¾æ¥</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>åä¼š</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraphä¸­å›½ - ">siggraphä¸­å›½</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="ç‹¬ç«‹æ¸¸æˆèŠ‚ - ">ç‹¬ç«‹æ¸¸æˆèŠ‚</a></li><li><strong>é¡¹ç›®</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="æœ‰é±¼ - ">æœ‰é±¼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="è½¯ä»¶é¡¹ç›®äº¤æ˜“ç½‘ - ">è½¯ä»¶é¡¹ç›®äº¤æ˜“ç½‘</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="ç•¥æ™“ - ">ç•¥æ™“</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="é›…ç‰¹å£«å¤–åŒ…ç½‘  - ">é›…ç‰¹å£«å¤–åŒ…ç½‘ </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="è½¯è¡Œå¤©ä¸‹  - ">è½¯è¡Œå¤©ä¸‹ </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="ä¸­å›½å…±äº«è½¯ä»¶æ³¨å†Œä¸­å¿ƒ - ">ä¸­å›½å…±äº«è½¯ä»¶æ³¨å†Œä¸­å¿ƒ</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="è½¯ä»¶å•†åŠ¡ç½‘ - ">è½¯ä»¶å•†åŠ¡ç½‘</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="æ ‘è“æ´¾å•†åº— - ">æ ‘è“æ´¾å•†åº—</a></li><li><strong>æ‚é¡¹</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="è‹±ç‰¹å°”å‡ºç‰ˆç¤¾ - ">è‹±ç‰¹å°”å‡ºç‰ˆç¤¾</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="å°ä¼—è½¯ä»¶ - ">å°ä¼—è½¯ä»¶</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoeboxå·¥å…· - ">shoeboxå·¥å…·</a></li><li><strong>ä¸ªäºº</strong></li><li><strong>é˜…è¯»</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="èŠ±ç“£ç½‘ - ">èŠ±ç“£ç½‘</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="è‹±è¯­å£è¯­å­¦ä¹ ç½‘ - ">è‹±è¯­å£è¯­å­¦ä¹ ç½‘</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>åœ¨çº¿æ–‡æ¡£</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flexç§»åŠ¨å¼€å‘ - ">Flexç§»åŠ¨å¼€å‘</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobeå¼€å‘è€…ä¸­å¿ƒ - ">Adobeå¼€å‘è€…ä¸­å¿ƒ</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0å‚è€ƒ - ">ActionScript3.0å‚è€ƒ</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="çš®çš®ä¹¦å±‹ - ">çš®çš®ä¹¦å±‹</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="å››å¶ç§‘å­¦ç™¾ç§‘ - ">å››å¶ç§‘å­¦ç™¾ç§‘</a></li><li><strong>ä¸´æ—¶</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="ä¼˜è®¾ - ">ä¼˜è®¾</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>å…¶ä»–</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">ç™»å…¥</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">æ³¨å†Œ</a><br/>RSSï¼š <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">æ—¥å¿—</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">è¯„è®º</a><br/>ç¼–ç ï¼šUTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 200 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>