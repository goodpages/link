<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>OpenGL - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-index">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: block">
						<div class="announce-content">
						OpenGL
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							<span class="pagebar-mainbody"> 分页： 1/12  <a href="index.php-go=category_48&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=1"><img src="doubleleft.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleleft.gif" alt="第一页" title="第一页" border="0"/></a> <span class="pagebar-selections"> <span class="pagelink-current">1</span>  <a href="read.php-3351.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=2">2</a>  <a href="read.php-3350.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=3">3</a>  <a href="read.php-3349.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=4">4</a>  <a href="read.php-3348.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=5">5</a>  <a href="read.php-3347.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=6">6</a>  <a href="read.php-3346.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=7">7</a>  <a href="read.php-3345.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=8">8</a>  <a href="read.php-3344.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=9">9</a>  <a href="read.php-3343.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=10">10</a> </span> <a href="read.php-3351.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=2"><img src="singleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/singleright.gif" alt="下页" title="下页" border="0"/></a>  <a href="read.php-3328.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=12"><img src="doubleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleright.gif" alt="最后页" title="最后页" border="0"/></a> </span> [ 显示模式： <a href="index.php-go=category_48&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=1" title="切换到摘要模式">摘要</a> | <a href="index.php-go=category_48&mode=2&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=2&page=1" title="切换到列表模式">列表</a> ]
						</div>
					</div>
					<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">24</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6960.htm" tppabs="http://i.renjihe.com/blog/read.php?6960">【ShaderToy】基础篇之再谈抗锯齿（antialiasing，AA）</a> <span id="starid6960"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 21:32 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6960.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6960#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6960");'>引用(0)</a> , <a href="read.php-6960.htm" tppabs="http://i.renjihe.com/blog/read.php?6960">阅读(2)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6960" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	http://blog.csdn.net/candycat1992/article/details/44673819<br /><br /><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><span style="color: #990000">写在前面</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">在之前的基础篇中，我们讲到了在绘制点线时如何处理边缘的锯齿，也就是使用<span style="line-height: 26px; font-family: 'Comic Sans MS'"><span style="color: #009695">smoothstep</span></span><span style="line-height: 26px; font-family: Arial">函数。而模糊参数是一些定值，或者是跟屏幕分辨率相关的数值，例如分辨率宽度的5%等等。但这种方法其实是有一种问题的。这需要我们从绘制的图像说起。</span></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial">ShaderToy中绘制的很多图像可以说是一种Procedure Texture，过程纹理，即是计算机生成的纹理。拿之前画的圆和线来说，这些圆和线的绘制过程，是我们计算每个fragment到&ldquo;期望图像&rdquo;的距离，然后根据距离来判断使用哪种颜色。如果这个距离是在欧式空间，即圆和线的例子中那样，那么直接使用定制或者和屏幕系数相关的值作为模糊参数是没有问题的。但一旦这个距离无法用欧氏距离来表示（有很多这样的情况，例如判断到一条正弦曲线的距离，就无法使用点到直线的距离这样简单的公式了），使用这种参数是无法得到很好的模糊效果的。在ShaderToy中，很多处理方法其实就是在进行图片处理工作。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial">这种时候，我们就可以利用另一个函数<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">fwidth</span></span>，和<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">smoothstep</span></span>等函数合作来达到抗锯齿的目的，而这种方法实际上更加通用。这里还将介绍一种新的函数<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">clamp</span></span>。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px; font-family: Arial"><span style="line-height: 26px">本篇涉及到的原ShaderToy中的例子主要有：</span></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px; font-family: Arial"><span style="line-height: 26px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6993  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6993'" tppabs="https://www.shadertoy.com/view/4ssSRl" target="_blank">https://www.shadertoy.com/view/4ssSRl</a><br /></span></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px; font-family: Arial"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6992  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6992'" tppabs="https://www.shadertoy.com/view/ldsSRX" target="_blank">https://www.shadertoy.com/view/ldsSRX</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6991  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6991'" tppabs="https://www.shadertoy.com/view/ldlSzS" target="_blank">https://www.shadertoy.com/view/ldlSzS</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="line-height: 26px; font-size: 14px; font-family: Arial"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6990  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6990'" tppabs="https://www.shadertoy.com/view/MsjSzy" target="_blank">https://www.shadertoy.com/view/MsjSzy</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">我编写的效果如下：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6989  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6989'" tppabs="https://www.shadertoy.com/view/XtB3zw" target="_blank">https://www.shadertoy.com/view/XtB3zw</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6988  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6988'" tppabs="https://www.shadertoy.com/view/4tB3zm" target="_blank"><span style="font-size: 14px">https://www.shadertoy.com/view/4tB3zm</span></a></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6987  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6987'" tppabs="https://www.shadertoy.com/view/4t2GRm" target="_blank"><span style="font-size: 14px">https://www.shadertoy.com/view/4t2GRm</span></a><br /></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><br /></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">以及GPU Gems的一篇文章：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('http://http.developer.nvidia.com/GPUGems/read.php?6986  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://http.developer.nvidia.com/GPUGems/read.php?6986'" tppabs="http://http.developer.nvidia.com/GPUGems/gpugems_ch24.html" target="_blank">http://http.developer.nvidia.com/GPUGems/gpugems_ch24.html</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t1"></a><span style="color: #990000">纹理采样的抗锯齿</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">我们一定听说过抗锯齿这件事情，而不出意外的话，我们肯定也听说过多重采样这个抗锯齿途径。多重采样简单来说就是像素点的颜色是和其相邻的一些像素值有关的。我们把多重采样再一般化，实际上是是一个对图像求卷积的过程。输入图像A，经过某个定义的kernel进行卷积处理后，得到B，我们希望B中的锯齿尽可能少。很多GPU已经提供了一些快速的滤波操作，例如线性滤波等等。多重采样使用的kernel往往是一个长方形，每个点对应的权重是一样的，然后对原图像进行卷积，就可以输出抗锯齿后的图像B了。但是如果我们想要进行更复杂的滤波，就需要自定义kernel。当然，kernel的用处不仅仅是抗锯齿，还可以进行边界检测等等，我后面的文章可能会讲到。这里，我们仅讨论用于抗锯齿的kernel。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">举个例子，我们要渲染一个有纹理的长方形，当知道了该像素对应的纹理UV坐标后，如果我们直接利用<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">texture2D</span></span>访问纹理，那么最终在长方形的边界就会出现明显锯齿。而如果我们利用多重采样的思想，就会在每次计算时，不仅仅对该像素对应的UV进行采样，还会调用多次<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">texture2D</span></span>函数，最后将结果相加取平均值。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">常见的抗锯齿kernel有Box、Cubic等等。</span><span style="font-size: 14px">更多内容可以参考上面的GPU Gems中的文章。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">复杂的滤波操作大都只依赖于，&ldquo;我们应该对图像滤波多少（也可以理解成模糊多大的范围）&rdquo;。很容易理解，例如在如果相邻像素的UV值是一样的，那么我们就不需要采样啦，也就是说，这时可以不进行滤波。而现代很多GPU提供了偏导数函数给我们，在GLSL中，这个函数就是<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('http://http.developer.nvidia.com/Cg/read.php?6985  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://http.developer.nvidia.com/Cg/read.php?6985'" tppabs="http://http.developer.nvidia.com/Cg/fwidth.html" target="_blank">fwidth</a></span>。当调用这个函数时，我们相当于问GPU：&ldquo;嘿伙计，我想知道，参数这个值在屏幕的横纵方向的像素之间变化了多少？&rdquo;<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">fwidth</span>函数返回的是X和Y方向偏导数的绝对值的和，而单方向的偏导可以通过<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">ddx</span>和<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">ddy</span>函数得到，这里不涉及了。当然，这些函数由于和像素有关，因此只能在Fragment Shader中访问。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">例如，当我们写下<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">fwidth(myVar)</span>时，GPU将会返回myVar这个值在当前像素和它的下一个相邻像素之间的差值（与X和Y方向上的下一个像素上该值差的绝对值和）。也就是说，这个值其实就是直线的线性差值。一旦我们知道了在当前像素上这个值的变化程度，我们就可以进行合适程度的滤波操作。因此，对于一张纹理才说，当我们给定它的UV坐标后，更恰当的方法是不仅仅用这个UV坐标直接采样，还应该考虑其周围方形区域内纹理采样的结果，而这个区域就是<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">ddx</span>和<span style="line-height: 26px; font-family: 'Comic Sans MS'; color: #009695">ddy</span>给定的区域。幸运的是，当我们调用<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">tex2D</span></span>这样的函数时，系统背后已经为我们完成了这个操作。而在一些高级的profiles中，还会允许我们自定义滤波窗口的大小。我们以Unity中的代码为例：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">float4&nbsp;fragColor&nbsp;=&nbsp;tex2D(_MainTex,&nbsp;i.uv);&nbsp;&nbsp;</span></span></li></ol></div><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">上述代码等价于：</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">float4&nbsp;fragColor&nbsp;=&nbsp;tex2D(_MainTex,&nbsp;i.uv,&nbsp;ddx(i.uv),&nbsp;ddy(i.uv));&nbsp;&nbsp;</span></span></li></ol></div><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">我们可以自定义滤波大小：</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">float4&nbsp;fragColor&nbsp;=&nbsp;tex2D(_MainTex,&nbsp;i.uv,&nbsp;float2(0),&nbsp;float2(0));&nbsp;&nbsp;</span></span></li></ol></div><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">上述代码意味着，我们强制滤波大小为0，也就是说，总是使用最近邻（Nearest-Neighbor）方法进行滤波，不考虑API状态和mipmaps。下面的图分别表示了滤波大小为*1，*5和*0的效果，注意场景视图中mipmap的使用情况，在大小为0是没有使用任何mipmap。</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px; text-align: center"><span style="font-size: 14px"><img style="border: none" src="read-2.php-6982.png" tppabs="http://img.blog.csdn.net/20150327204644445?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" />&nbsp;<img style="border: none" src="read-2.php-6981.png" tppabs="http://img.blog.csdn.net/20150327204733177?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" />&nbsp;<img style="border: none" src="read-2.php-6980.png" tppabs="http://img.blog.csdn.net/20150327204747419?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" /><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">对于不支持这些函数的硬件，可以使用其他方法代替，有兴趣的可以看这篇文章：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('http://http.developer.nvidia.com/GPUGems/index.php?mode=2&page=11  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://http.developer.nvidia.com/GPUGems/index.php?mode=2&page=11'" tppabs="http://http.developer.nvidia.com/GPUGems/gpugems_ch25.html" target="_blank">http://http.developer.nvidia.com/GPUGems/gpugems_ch25.html</a><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t2"></a><span style="color: #990000">Point Style Sampling</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">上面的方法在point style sampling时同样可以抗锯齿，可以参见我在ShaderToy中写的一个合并版：<a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6989  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6989'" tppabs="https://www.shadertoy.com/view/XtB3zw" target="_blank">https://www.shadertoy.com/view/XtB3zw</a>。实现细节也请移步去那里看。这里只讲关键部分。下面表示了不同放缩程度下的效果：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px; text-align: center"><span style="font-size: 14px"><img style="border: none" src="read-2.php-6979.png" tppabs="http://img.blog.csdn.net/20150328121732649?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" />&nbsp;<img style="border: none" src="read-2.php-6978.png" tppabs="http://img.blog.csdn.net/20150328121639737?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" /><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><br /></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">这里我只分析下里面用到的不同的采样方法（依次对应从左到右的顺序）。代码如下：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">vec4&nbsp;AntiAlias_None(vec2&nbsp;uv,&nbsp;vec2&nbsp;texsize)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;texture2D(iChannel0,&nbsp;uv&nbsp;/&nbsp;texsize,&nbsp;-99999.0);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec4&nbsp;AntiAliasPointSampleTexture_None(vec2&nbsp;uv,&nbsp;vec2&nbsp;texsize)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;texture2D(iChannel0,&nbsp;(floor(uv+0.5)+0.5)&nbsp;/&nbsp;texsize,&nbsp;-99999.0);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec4&nbsp;AntiAliasPointSampleTexture_Smoothstep(vec2&nbsp;uv,&nbsp;vec2&nbsp;texsize)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;w=fwidth(uv);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;texture2D(iChannel0,&nbsp;(floor(uv)+0.5+smoothstep(0.5-w,0.5+w,fract(uv)))&nbsp;/&nbsp;texsize,&nbsp;-99999.0);&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec4&nbsp;AntiAliasPointSampleTexture_Linear(vec2&nbsp;uv,&nbsp;vec2&nbsp;texsize)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;w=fwidth(uv);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;texture2D(iChannel0,&nbsp;(floor(uv)+0.5+clamp((fract(uv)-0.5+w)/w,0.,1.))&nbsp;/&nbsp;texsize,&nbsp;-99999.0);&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec4&nbsp;AntiAliasPointSampleTexture_ModifiedFractal(vec2&nbsp;uv,&nbsp;vec2&nbsp;texsize)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;uv.xy&nbsp;-=&nbsp;0.5;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;w=fwidth(uv);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;texture2D(iChannel0,&nbsp;(floor(uv)+0.5+min(fract(uv)/min(w,1.0),1.0))&nbsp;/&nbsp;texsize,&nbsp;-99999.0);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li></ol></div><br /><ul style="color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><li>左一：AntiAlias_None对应的是最普通的纹理采样，直接使用Vertex传过来的插值后UV坐标对纹理采样，没有进行point sample。<br /><span style="white-space: pre">&nbsp;&nbsp;</span>从效果来看，放大后的效果过于模糊。</li><li>左二：AntiAliasPointSampleTexture_None对应的是普通的点采样，即我们确保采样的是UV对应的纹理上某个定点像素的颜色，这是通过对UV值四舍五入得到整数值，再加上0.5偏移做到的。<br /><span style="white-space: pre">&nbsp;&nbsp;</span>从效果来看，放大后有明显的锯齿，缩小后纹理细节仍很多。<br /></li><li>左三：AntiAliasPointSampleTexture_Smoothstep对应用<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">fwidth</span></span>+<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">smoothstep</span></span><span style="font-size: 14px">进行点</span>采样，这里的<span style="font-size: 14px; font-family: 'Comic Sans MS'; color: #009695">smoothstep</span>是三次插值方法。在对UV值下取整之后，加上0.5偏移，之后还会利用进行<span style="font-size: 14px; font-family: 'Comic Sans MS'; color: #009695">smoothstep</span>抗锯齿。<span style="font-size: 14px; font-family: 'Comic Sans MS'; color: #009695">fwidth</span>的返回值表明UV值在该点和临近像素之间的变化，这个值帮助我们判断模糊的大小范围。最后根据UV的小数部分进行模糊。<br /><span style="white-space: pre">&nbsp;&nbsp;</span>从效果上来看，这种方法的模糊程度相比于后三种来说最高（也不一定都是好事）。</li><li>左四：AntiAliasPointSampleTexture_Linear对应<span style="font-size: 14px">用</span><span style="font-size: 14px; font-family: 'Comic Sans MS'"><span style="color: #009695">fwidth</span></span><span style="font-size: 14px">+</span><span style="font-size: 14px; font-family: 'Comic Sans MS'"><span style="color: #009695">clamp</span></span><span style="font-size: 14px">进行点采样，之所以叫线性方法（Linear）是由于clamp是一个线性插值方法。同样是对UV值下取整之后，加上0.5偏移，然后使用了除法比较来计算模糊区间。<span style="font-family: 'Comic Sans MS'; color: #009695">clamp</span>方法的是将模糊边界直接与0和1比较得到。<br /><span style="white-space: pre">&nbsp;&nbsp;</span>从效果上来看，效果比上一种模糊程度小一点。</span></li><li><span style="font-size: 14px">左五：AntiAliasPointSampleTexture_ModifiedFractal和上一种方法很像，不同的是它直接将UV小数部分和w相除判断结果。</span></li></ul><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><br /></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">总结一下，我们通过点采样的多种方法来演示如何使用<span style="font-family: 'Comic Sans MS'; color: #009695">fwidth</span>+<span style="font-family: 'Comic Sans MS'; color: #009695">smoothstep</span>+<span style="font-family: 'Comic Sans MS'; color: #009695">clamp</span>进行抗锯齿，而这三者的组合也是非常常见的。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t3"></a><span style="color: #990000">过程纹理的抗锯齿</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">对于使用过程纹理（Procedure Texture）的shaders来说，知道上面的知识是有助于我们理解如何进行抗锯齿的。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">过程纹理往往都是通过一些函数来得到的，像ShaderToy中那样，因此抗锯齿往往就需要在像素间评估函数的值来实现。最简单的情况就是，我们可以在边界处取平均值，像多重采样那样。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">考虑我们之前圆和直线的例子，其实就是只考虑了边界。当我们判断该像素在边界时，就将圆的颜色和其他颜色进行混合。但是，如一开始所说，这种抗锯齿方法仅适用于根据欧氏距离判断边界的情况，对于那些不能用欧式距离表示的距离函数来说，这种方法在边界处还是会产生锯齿。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">我们还是来画画直线和圆好啦。只是这次我们要画一个由线段和圆组成的正四面体：线段组成了四面体的六条边，每个顶点用圆来表示。为了更具有一般性，我们改变一下之前计算直线和圆的函数：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;line(vec2&nbsp;pos,&nbsp;vec2&nbsp;point1,&nbsp;vec2&nbsp;point2,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;width)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;dir0&nbsp;=&nbsp;point2&nbsp;-&nbsp;point1;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec2&nbsp;dir1&nbsp;=&nbsp;pos&nbsp;-&nbsp;point1;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;h&nbsp;=&nbsp;clamp(dot(dir0,&nbsp;dir1)/dot(dir0,&nbsp;dir0),&nbsp;0.0,&nbsp;1.0);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(length(dir1&nbsp;-&nbsp;dir0&nbsp;*&nbsp;h)&nbsp;-&nbsp;width&nbsp;*&nbsp;0.5);&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;circle(vec2&nbsp;pos,&nbsp;vec2&nbsp;center,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;radius)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d&nbsp;=&nbsp;length(pos&nbsp;-&nbsp;center)&nbsp;-&nbsp;radius;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li></ol></div><br /><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px">这里只返回距离值，不计算颜色，以便后面我们对比不同的反锯齿效果。绘制函数也有所改变：</p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">vec2&nbsp;originalPos&nbsp;=&nbsp;(2.0&nbsp;*&nbsp;fragCoord&nbsp;-&nbsp;iResolution.xy)/iResolution.yy;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec2&nbsp;pos&nbsp;=&nbsp;originalPos;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Twist</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//pos.x&nbsp;+=&nbsp;0.5&nbsp;*&nbsp;sin(5.0&nbsp;*&nbsp;pos.y);</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec2&nbsp;split&nbsp;=&nbsp;vec2(0,&nbsp;0);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(iMouse.z&nbsp;&gt;&nbsp;0.0)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;split&nbsp;=&nbsp;(-iResolution.xy&nbsp;+&nbsp;2.0&nbsp;*&nbsp;iMouse.xy)&nbsp;/&nbsp;iResolution.yy;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Background</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">vec3&nbsp;col&nbsp;=&nbsp;_BackgroundColor.rgb&nbsp;*&nbsp;(1.0-0.2*length(originalPos));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Apply&nbsp;X&nbsp;Y&nbsp;Z&nbsp;rotations</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Find&nbsp;more&nbsp;info&nbsp;from&nbsp;http://en.wikipedia.org/wiki/Rotation_matrix</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;xSpeed&nbsp;=&nbsp;0.3;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;ySpeed&nbsp;=&nbsp;0.5;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;zSpeed&nbsp;=&nbsp;0.7;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;float3x3&nbsp;mat&nbsp;=&nbsp;float3x3(1.,&nbsp;0.,&nbsp;0.,&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;cos(xSpeed*iGlobalTime),&nbsp;sin(xSpeed*iGlobalTime),&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;-sin(xSpeed*iGlobalTime),&nbsp;cos(xSpeed*iGlobalTime));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;mat&nbsp;=&nbsp;mul(float3x3(cos(ySpeed*iGlobalTime),&nbsp;0.,&nbsp;-sin(ySpeed*iGlobalTime),&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;1.,&nbsp;0.,&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin(ySpeed*iGlobalTime),&nbsp;0.,&nbsp;cos(ySpeed*iGlobalTime)),&nbsp;mat);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;mat&nbsp;=&nbsp;mul(float3x3(cos(zSpeed*iGlobalTime),&nbsp;sin(zSpeed*iGlobalTime),&nbsp;0.,&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-sin(zSpeed*iGlobalTime),&nbsp;cos(zSpeed*iGlobalTime),&nbsp;0.,&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;0.,&nbsp;0.),&nbsp;mat);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;l&nbsp;=&nbsp;1.5;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec3&nbsp;p0&nbsp;=&nbsp;vec3(0.,&nbsp;0.,&nbsp;sqrt6_divide_12&nbsp;*&nbsp;3.)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec3&nbsp;p1&nbsp;=&nbsp;vec3(-0.5,&nbsp;-sqrt3_divide_6,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec3&nbsp;p2&nbsp;=&nbsp;vec3(0.5,&nbsp;-sqrt3_divide_6,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec3&nbsp;p3&nbsp;=&nbsp;vec3(0,&nbsp;sqrt3_divide_6&nbsp;*&nbsp;2.,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;p0&nbsp;=&nbsp;mul(mat,&nbsp;p0);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;p1&nbsp;=&nbsp;mul(mat,&nbsp;p1);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;p2&nbsp;=&nbsp;mul(mat,&nbsp;p2);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;p3&nbsp;=&nbsp;mul(mat,&nbsp;p3);;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec2&nbsp;point0&nbsp;=&nbsp;p0.xy;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec2&nbsp;point1&nbsp;=&nbsp;p1.xy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec2&nbsp;point2&nbsp;=&nbsp;p2.xy;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;vec2&nbsp;point3&nbsp;=&nbsp;p3.xy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d&nbsp;=&nbsp;line(pos,&nbsp;point0,&nbsp;point1,&nbsp;_LineWidth);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point1,&nbsp;point2,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point2,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point0,&nbsp;point2,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point0,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point1,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point0,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point1,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point2,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point3,&nbsp;_CircleRadius));&nbsp;&nbsp;&nbsp;</span></li></ol></div><br /><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">首先，我们把屏幕坐标变换到（-1，1）之间。然后初始化颜色为背景颜色。接着，我们计算一个在XYZ轴上旋转的旋转矩阵，并计算出在标准坐标系中正四面体的四个顶点坐标p0~p3，并把旋转矩阵作用到顶点上来完成旋转。接着，坐标映射到XY平面内，得到二维点坐标point0~point3。这样就完成了准备工作。接着，我们以此判断距离六条线段和四个顶点圆的距离，取最小值。</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">接下来就是抗锯齿的部分：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(originalPos.x&nbsp;&lt;&nbsp;split.x)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;step(0,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;step(0,&nbsp;d));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(originalPos.y&nbsp;&gt;&nbsp;split.y)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;w&nbsp;=&nbsp;_Antialias;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;w&nbsp;=&nbsp;fwidth(0.5*d)&nbsp;*&nbsp;2.0;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Draw&nbsp;split&nbsp;lines</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">col&nbsp;=&nbsp;mix(vec3(0),&nbsp;col,&nbsp;smoothstep(0.005,&nbsp;0.007,&nbsp;abs(originalPos.x&nbsp;-&nbsp;split.x)));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">col&nbsp;=&nbsp;mix(col,&nbsp;vec3(0),&nbsp;(1&nbsp;-&nbsp;smoothstep(0.005,&nbsp;0.007,&nbsp;abs(originalPos.y&nbsp;-&nbsp;split.y)))&nbsp;*&nbsp;step(split.x,&nbsp;originalPos.x));&nbsp;&nbsp;</span></li></ol></div><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">为了对比效果，我们把屏幕分割成三个部分：屏幕左半侧不做任何抗锯齿处理，即直接根据距离值（这里还绘制了一条轮廓线，所以多了一行）判断使用哪种颜色；屏幕右半侧又分了两个部分，上半部分使用我们之前的定制处理方法，即根据抗锯齿参数</span><span style="font-size: 15px; line-height: 35px; font-family: 'Comic Sans MS'; color: #555555"><span style="color: #444444">_Antialias</span></span><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">来决定模糊的范围；下面部分我们使用新的函数</span><span style="font-size: 15px; line-height: 35px; font-family: 'Comic Sans MS'; color: #555555"><span style="color: #009695">fwidth</span></span><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">来处理锯齿。最后两行是用于绘制分割线的。</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">保存后，我们可以得到下面的效果：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px; text-align: center"><span style="font-size: 14px"><img style="border: none" src="read-2.php-6977.png" tppabs="http://img.blog.csdn.net/20150328153906246?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" /><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">为了更好的效果，我们可以添加时间参数让它旋转起来，并且接受鼠标事件来移动分割线的位置，鼠标事件的使用可以参见更新后的<a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6976  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6976'" tppabs="http://blog.csdn.net/candycat1992/article/details/44039077" target="_blank">开篇</a>。完整的代码如下：<br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">Shader&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;shadertoy/AA&nbsp;Line&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&#123;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;Properties&#123;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_CircleRadius&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Circle&nbsp;Radius&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Range(0,&nbsp;0.1))&nbsp;=&nbsp;0.05&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_OutlineWidth&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Outline&nbsp;Width&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Range(0,&nbsp;0.1))&nbsp;=&nbsp;0.01&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_OutlineColor&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Outline&nbsp;Color&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Color)&nbsp;=&nbsp;(1,&nbsp;1,&nbsp;1,&nbsp;1)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_LineWidth&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Line&nbsp;Width&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Range(0,&nbsp;0.1))&nbsp;=&nbsp;0.01&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_LineColor&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Line&nbsp;Color&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Color)&nbsp;=&nbsp;(1,&nbsp;1,&nbsp;1,&nbsp;1)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_Antialias&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Antialias&nbsp;Factor&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Range(0,&nbsp;0.05))&nbsp;=&nbsp;0.01&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_BackgroundColor&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Background&nbsp;Color&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Color)&nbsp;=&nbsp;(1,&nbsp;1,&nbsp;1,&nbsp;1)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iMouse&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;Mouse&nbsp;Pos&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Vector)&nbsp;=&nbsp;(100,100,0,0)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iChannel0(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;iChannel0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;2D)&nbsp;=&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;white&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&#123;&#125;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iChannelResolution0&nbsp;(<span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="string">&quot;iChannelResolution0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">,&nbsp;Vector)&nbsp;=&nbsp;(100,100,0,0)&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;CGINCLUDE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include&nbsp;&quot;UnityCG.cginc&quot;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;target&nbsp;3.0&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;glsl&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;vec2&nbsp;float2</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;vec3&nbsp;float3</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;vec4&nbsp;float4</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;mat2&nbsp;float2x2</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;iGlobalTime&nbsp;_Time.y</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;mod&nbsp;fmod</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;mix&nbsp;lerp</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;atan&nbsp;atan2</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;fract&nbsp;frac&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;texture2D&nbsp;tex2D</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;屏幕的尺寸</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;iResolution&nbsp;_ScreenParams</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;屏幕中的坐标，以pixel为单位</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;gl_FragCoord&nbsp;((_iParam.srcPos.xy/_iParam.srcPos.w)*_ScreenParams.xy)&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;pi&nbsp;3.14159265358979</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;sqrt3_divide_6&nbsp;0.289</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define&nbsp;sqrt6_divide_12&nbsp;0.204</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">const</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;seg&nbsp;=&nbsp;3.0;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">const</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;segwidth&nbsp;=&nbsp;1./(2.*seg-1.);&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;_CircleRadius;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;_OutlineWidth;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float4&nbsp;_OutlineColor;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;_LineWidth;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float4&nbsp;_LineColor;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;_Antialias;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float4&nbsp;_BackgroundColor;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixed4&nbsp;iMouse;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampler2D&nbsp;iChannel0;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixed4&nbsp;iChannelResolution0;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">struct</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;v2f&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float4&nbsp;pos&nbsp;:&nbsp;SV_POSITION;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float4&nbsp;srcPos&nbsp;:&nbsp;TEXCOORD0;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;&nbsp;&nbsp;precision&nbsp;highp&nbsp;float;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2f&nbsp;vert(appdata_base&nbsp;v)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2f&nbsp;o;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.pos&nbsp;=&nbsp;mul&nbsp;(UNITY_MATRIX_MVP,&nbsp;v.vertex);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.srcPos&nbsp;=&nbsp;ComputeScreenPos(o.pos);&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;o;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;main(vec2&nbsp;fragCoord);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixed4&nbsp;frag(v2f&nbsp;_iParam)&nbsp;:&nbsp;COLOR0&nbsp;&#123;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;fragCoord&nbsp;=&nbsp;gl_FragCoord;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;main(gl_FragCoord);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;line(vec2&nbsp;pos,&nbsp;vec2&nbsp;point1,&nbsp;vec2&nbsp;point2,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;width)&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;dir0&nbsp;=&nbsp;point2&nbsp;-&nbsp;point1;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;dir1&nbsp;=&nbsp;pos&nbsp;-&nbsp;point1;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;h&nbsp;=&nbsp;clamp(dot(dir0,&nbsp;dir1)/dot(dir0,&nbsp;dir0),&nbsp;0.0,&nbsp;1.0);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(length(dir1&nbsp;-&nbsp;dir0&nbsp;*&nbsp;h)&nbsp;-&nbsp;width&nbsp;*&nbsp;0.5);&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;circle(vec2&nbsp;pos,&nbsp;vec2&nbsp;center,&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;radius)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d&nbsp;=&nbsp;length(pos&nbsp;-&nbsp;center)&nbsp;-&nbsp;radius;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;main(vec2&nbsp;fragCoord)&nbsp;&#123;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;originalPos&nbsp;=&nbsp;(2.0&nbsp;*&nbsp;fragCoord&nbsp;-&nbsp;iResolution.xy)/iResolution.yy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;pos&nbsp;=&nbsp;originalPos;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Twist</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//pos.x&nbsp;+=&nbsp;0.5&nbsp;*&nbsp;sin(5.0&nbsp;*&nbsp;pos.y);</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;split&nbsp;=&nbsp;vec2(0,&nbsp;0);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(iMouse.z&nbsp;&gt;&nbsp;0.0)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split&nbsp;=&nbsp;(-iResolution.xy&nbsp;+&nbsp;2.0&nbsp;*&nbsp;iMouse.xy)&nbsp;/&nbsp;iResolution.yy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Background</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;col&nbsp;=&nbsp;_BackgroundColor.rgb&nbsp;*&nbsp;(1.0-0.2*length(originalPos));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;xSpeed&nbsp;=&nbsp;0.3;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;ySpeed&nbsp;=&nbsp;0.5;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;zSpeed&nbsp;=&nbsp;0.7;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float3x3&nbsp;mat&nbsp;=&nbsp;float3x3(1.,&nbsp;0.,&nbsp;0.,&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;cos(xSpeed*iGlobalTime),&nbsp;sin(xSpeed*iGlobalTime),&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;-sin(xSpeed*iGlobalTime),&nbsp;cos(xSpeed*iGlobalTime));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mat&nbsp;=&nbsp;mul(float3x3(cos(ySpeed*iGlobalTime),&nbsp;0.,&nbsp;-sin(ySpeed*iGlobalTime),&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;1.,&nbsp;0.,&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin(ySpeed*iGlobalTime),&nbsp;0.,&nbsp;cos(ySpeed*iGlobalTime)),&nbsp;mat);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mat&nbsp;=&nbsp;mul(float3x3(cos(zSpeed*iGlobalTime),&nbsp;sin(zSpeed*iGlobalTime),&nbsp;0.,&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-sin(zSpeed*iGlobalTime),&nbsp;cos(zSpeed*iGlobalTime),&nbsp;0.,&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.,&nbsp;0.,&nbsp;0.),&nbsp;mat);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;l&nbsp;=&nbsp;1.5;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;p0&nbsp;=&nbsp;vec3(0.,&nbsp;0.,&nbsp;sqrt6_divide_12&nbsp;*&nbsp;3.)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;p1&nbsp;=&nbsp;vec3(-0.5,&nbsp;-sqrt3_divide_6,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;p2&nbsp;=&nbsp;vec3(0.5,&nbsp;-sqrt3_divide_6,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;p3&nbsp;=&nbsp;vec3(0,&nbsp;sqrt3_divide_6&nbsp;*&nbsp;2.,&nbsp;-sqrt6_divide_12)&nbsp;*&nbsp;l;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p0&nbsp;=&nbsp;mul(mat,&nbsp;p0);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1&nbsp;=&nbsp;mul(mat,&nbsp;p1);&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p2&nbsp;=&nbsp;mul(mat,&nbsp;p2);&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p3&nbsp;=&nbsp;mul(mat,&nbsp;p3);;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;point0&nbsp;=&nbsp;p0.xy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;point1&nbsp;=&nbsp;p1.xy;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;point2&nbsp;=&nbsp;p2.xy;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;point3&nbsp;=&nbsp;p3.xy;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;d&nbsp;=&nbsp;line(pos,&nbsp;point0,&nbsp;point1,&nbsp;_LineWidth);&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point1,&nbsp;point2,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point2,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point0,&nbsp;point2,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point0,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;line(pos,&nbsp;point1,&nbsp;point3,&nbsp;_LineWidth));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point0,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point1,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point2,&nbsp;_CircleRadius));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;min(d,&nbsp;circle(pos,&nbsp;point3,&nbsp;_CircleRadius));&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(originalPos.x&nbsp;&lt;&nbsp;split.x)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;step(0,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;step(0,&nbsp;d));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;(originalPos.y&nbsp;&gt;&nbsp;split.y)&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;w&nbsp;=&nbsp;_Antialias;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&#123;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: #2e8b57; background-color: inherit" class="datatypes">float</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;w&nbsp;=&nbsp;fwidth(0.5*d)&nbsp;*&nbsp;2.0;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_OutlineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d&nbsp;-&nbsp;_OutlineWidth));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(_LineColor.rgb,&nbsp;col,&nbsp;smoothstep(-w,&nbsp;w,&nbsp;d));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Draw&nbsp;split&nbsp;lines</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(vec3(0),&nbsp;col,&nbsp;smoothstep(0.005,&nbsp;0.007,&nbsp;abs(originalPos.x&nbsp;-&nbsp;split.x)));&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col&nbsp;=&nbsp;mix(col,&nbsp;vec3(0),&nbsp;(1&nbsp;-&nbsp;smoothstep(0.005,&nbsp;0.007,&nbsp;abs(originalPos.y&nbsp;-&nbsp;split.y)))&nbsp;*&nbsp;step(split.x,&nbsp;originalPos.x));&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="keyword">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;vec4(col,&nbsp;1.0);&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;ENDCG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;SubShader&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pass&nbsp;&#123;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CGPROGRAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;vertex&nbsp;vert&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;fragment&nbsp;frag&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: gray; background-color: inherit" class="preprocessor">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#pragma&nbsp;fragmentoption&nbsp;ARB_precision_hint_fastest&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDCG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;FallBack&nbsp;Off&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&#125;&nbsp;&nbsp;</span></li></ol></div><br /><br /><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">想看动态效果的可以直接看ShaderToy中的效果：</span><a style="text-decoration: none; color: #0c89cf; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6988  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6988'" tppabs="https://www.shadertoy.com/view/4tB3zm" target="_blank">https://www.shadertoy.com/view/4tB3zm</a><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h2 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t4"></a><span style="color: #990000">对比结果</span></h2><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">上面使用的距离其实还是欧式距离，因此使用定值或是<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">fwidth</span></span>看起来似乎没什么差别。但是，如果我们对它做少许改变，例如取消下面的注释：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><div class="dp-highlighter bg_cpp" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 938.516px; overflow: hidden; padding-top: 1px; border-color: #cccccc; color: #555555; line-height: 35px; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[cpp]</strong>&nbsp;<a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="copy" class="CopyToClipboard">copy</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="print" class="PrintSource">print</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('http://blog.csdn.net/candycat1992/article/details/read.php?6984  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/candycat1992/article/details/read.php?6984#'" tppabs="http://blog.csdn.net/candycat1992/article/details/44673819#" title="?" class="About">?</a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/read.php?6983  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/read.php?6983'" tppabs="https://code.csdn.net/snippets/630102" target="_blank" title="在CODE上查看代码片"><img style="border: none; position: relative; top: 1px; left: 2px" src="read-1.php-7418" tppabs="https://code.csdn.net/assets/CODE_ico.png" border="0" alt="在CODE上查看代码片" width="12" height="12" /></a><a style="text-decoration: none; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; color: #0c89cf; background-image: none; background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial" href="javascript:if(confirm('https://code.csdn.net/snippets/630102/read.php?7417  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://code.csdn.net/snippets/630102/read.php?7417'" tppabs="https://code.csdn.net/snippets/630102/fork" target="_blank" title="派生到我的代码片"><img style="border: none; position: relative; top: 2px; left: 2px" src="read-1.php-7416" tppabs="https://code.csdn.net/assets/ico_fork.svg" border="0" alt="派生到我的代码片" width="12" height="12" /></a></div></div><ol class="dp-cpp" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; color: #008200; background-color: inherit" class="comment">//&nbsp;Twist</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos.x&nbsp;+=&nbsp;0.5&nbsp;*&nbsp;sin(5.0&nbsp;*&nbsp;pos.y);&nbsp;&nbsp;</span></li></ol></div><br /><span style="font-size: 15px; line-height: 35px; font-family: 'microsoft yahei'; color: #555555">就会发现两者的差异了：</span><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px; text-align: center"><span style="font-size: 14px"><img style="border: none" src="read-2.php-6975.png" tppabs="http://img.blog.csdn.net/20150328160212290" border="0" /><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">右下角使用<span style="font-family: 'Comic Sans MS'; color: #009695">fwidth</span>的区域仍然可以保持良好的抗锯齿状态，而右上角已经开始出现一定量的锯齿了。虽然我们可以通过调大定值<span style="font-family: 'Comic Sans MS'"><span style="color: #444444">_Antialias</span></span>的方法来增大模糊范围，但这样会造成有些区域过于模糊，而且这种根据情况来调整定值的方法会很麻烦。而使用<span style="font-family: 'Comic Sans MS'; color: #009695">fwidth</span>的话，我们就不需要考虑这些因素，因为它是直接得到和临近像素之间的差值，不依赖与欧氏距离。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t5"></a><span style="color: #990000">扩展</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">我突然觉得旋转的正四面体很容易就让人分不清前后了，就想表示出来深度。目前使用了虚线+较暗的颜色来表示一条棱被挡在后面。具体可以见这里（<a style="text-decoration: none; color: #0c89cf" href="javascript:if(confirm('https://www.shadertoy.com/view/read.php?6987  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.shadertoy.com/view/read.php?6987'" tppabs="https://www.shadertoy.com/view/4t2GRm" target="_blank">https://www.shadertoy.com/view/4t2GRm</a>）。不过，还是有穿帮的地方，额，以后有机会再优化下好了。效果如下：</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px; text-align: center"><span style="font-size: 14px"><img style="border: none" src="read-1.php-6974.png" tppabs="http://img.blog.csdn.net/20150330181904809?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2FuZHljYXQxOTky/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" /><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><h1 style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; line-height: 35px"><a style="color: #0c89cf" name="t6"></a><span style="color: #990000">写在最后</span></h1><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">这篇文章老实说来有点杂，我尽我可能想把问题阐述清楚了。。。总结一下，这篇主要想要介绍<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">fwidth</span></span>这个函数在抗锯齿方面的应用，除此之外还介绍了<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">clamp</span></span>，当然我个人还是比较喜欢用<span style="font-family: 'Comic Sans MS'"><span style="color: #009695">smoothstep</span></span>。。。但一个是线性插值的，一个的三次插值的，性能上有少许差别。效果上也有一点思维差别，这要根据项目需要有所选择。</span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px"><br /></span></p><p style="margin: 0px; padding: 0px; color: #555555; font-family: 'microsoft yahei'; font-size: 15px; line-height: 35px"><span style="font-size: 14px">好啦，下一篇我想写下各种插值曲线的细节，包括贝塞尔曲线，Catmull-Rom样条等等。我自己也总是忘。。。写一篇备忘一下。</span></p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">24</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6959.htm" tppabs="http://i.renjihe.com/blog/read.php?6959">smoothstep</a> <span id="starid6959"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 21:32 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6959.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6959#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6959");'>引用(0)</a> , <a href="read.php-6959.htm" tppabs="http://i.renjihe.com/blog/read.php?6959">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6959" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">将返回一个 0 到 1 的值，该值表示参数在最小值和最大值之间的成比例距离。smoothstep 函数将用于在一段时间范围内逐渐但非线性地增加属性，例如，<span style="font-weight: bold" class="MenuCascade">&ldquo;不透明度&rdquo;(Opacity)</span>从 0 增加到 1。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1266"></a></span>smoothstep 函数与 linstep 函数的工作方式类似，不过其将在最小值和最大值之间的中间值附近更快地增加值。该函数使用最小值和最大值之间的 hermite 插值。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1265"></a></span>float smoothstep(float start, float end, float parameter)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1264"></a></span>起点和终点将指定最小值和最大值。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1263"></a></span>参数为要用于生成 smoothstep 数的值。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1262"></a></span>如果参数小于起点，linstep 将返回 0。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1261"></a></span>如果参数大于终点，linstep 将返回 1。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1260"></a></span>下图将根据时间顺序比较 smoothstep 和 linstep 返回的值:</p><span style="font-size: 14px; line-height: 26px; font-family: Arial" class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-125E"></a></span><div class="figure-anchor" style="font-family: Arial; font-size: 14px; line-height: 26px; margin-top: 16pt"><img style="border: none; max-width: 100%" src="http://bad_redirect" border="0" /></div><div class="section" style="font-family: Arial; font-size: 14px; line-height: 26px; margin-top: 12pt"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-125D"></a></span><p style="margin: 20pt 0px 0px; padding: 2pt 6pt 3pt 4pt; font-weight: bold; font-size: 10pt; background-color: #eeeeee" class="section_title_h1"><a style="color: #ca0000" name="TOC_ENTRY__d30e718695"></a><span class="anchor_wrapper"><a style="color: #ca0000" name="GUID-8A8DA4A0-5408-4F1C-91BE-51516D4432B3"></a></span>示例</p><p style="margin: 0px; padding: 0px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-125C"></a></span>假设已使用<span style="font-weight: bold" class="MenuCascade">&ldquo;粒子工具&rdquo;(Particle Tool)</span>来创建名为<span style="font-weight: bold" class="MenuCascade">&ldquo;云&rdquo;(Cloud)</span>的粒子的集合：</p><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-125B"></a></span><div class="figure-anchor" style="margin-top: 16pt"><img style="border: none; max-width: 100%" src="http://bad_redirect" border="0" /></div><p style="margin: 0px; padding: 0px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-125A"></a></span>假设也已逐对象为<span style="font-weight: bold" class="MenuCascade">&ldquo;云&rdquo;(Cloud)</span>添加动态<span style="font-weight: bold" class="MenuCascade">&ldquo;不透明度&rdquo;(Opacity)</span>属性（请参见<span class="char_link"><a style="color: #00289c; text-decoration: none" href="javascript:if(confirm('http://download.autodesk.com/global/docs/maya2013/zh_cn/files/read.php?6969  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://download.autodesk.com/global/docs/maya2013/zh_cn/files/read.php?6969'" tppabs="http://download.autodesk.com/global/docs/maya2013/zh_cn/files/Particle_expressions_Work_with_particle_attributes.htm">使用粒子属性</a></span>）。然后，可以为云的粒子形状节点写入该运行时表达式：</p><div class="codeBlock" style="font-family: 'Courier New', Courier, monospace; font-size: 10pt; margin-top: 8pt; padding: 8pt; background-color: #eeeeee"><pre style="word-wrap: break-word; overflow: auto">CloudShape.opacity = smoothstep(0,5,age); </pre></div><p style="margin: 0px; padding: 0px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1259"></a></span>对于对象年龄的前 5 秒，这将在 0 到 1 的步骤中增加<span style="font-weight: bold" class="MenuCascade">&ldquo;CloudShape&rdquo;</span>的<span style="font-weight: bold" class="MenuCascade">&ldquo;不透明度&rdquo;(Opacity)</span>属性。这将使对象从透明淡入到不透明。在 2.5（0 与 5 的中点）附近,不透明度的淡入和淡出发生得更快。</p><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1258"></a></span><div class="figure-anchor" style="margin-top: 16pt"><img style="border: none; max-width: 100%" src="http://bad_redirect" border="0" /></div><p style="margin: 0px; padding: 0px"><span class="anchor_wrapper"><a style="color: #ca0000" name="WS73099CC142F48755-3D114B7511841AEFA9F-1257"></a></span>有关类似示例的详细信息，请参见 linstep 函数。</p><p style="margin: 0px; padding: 0px">http://download.autodesk.com/global/docs/maya2013/zh_cn/index.html?url=files/Useful_functions_smoothstep.htm,topicNumber=d30e718640</p></div>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6919.htm" tppabs="http://i.renjihe.com/blog/read.php?6919">MD3模型的格式、导入与骨骼概念动画</a> <span id="starid6919"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:29 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6919.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6919#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6919");'>引用(0)</a> , <a href="read.php-6919.htm" tppabs="http://i.renjihe.com/blog/read.php?6919">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6919" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html<br /><br /><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">&nbsp;MD3模型就是MD2模型的升级版，是ID公司的游戏引擎Quake3中使用的主模型格式。它的特点主要集中在骨骼概念的引入吧。本文记录一下ZWModelMD3的一些细节。昨日日本的大地震大海啸真是触目惊心，多少只大怪兽联合才能做到这种恐怖程度&hellip;&hellip;祈福，致所有最近在地震中受灾的地球人。&mdash;&mdash;<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/'" tppabs="http://www.zwqxin.com/">ZwqXin</a>.com</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">相关的模型载入类文章：<br />[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html" target="_blank">用Indexed-VBO渲染3DS模型</a>]<br />[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6653  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6653'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-1.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅰ</a>]<br />[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6651  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6651'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-2.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅱ</a>]&nbsp;<br />[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank">MD2格式模型的格式、导入与帧动画</a>]</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px; font-size: smaller">本文来源于&nbsp;<strong style="margin: 0px; padding: 0px">ZwqXin</strong>&nbsp;(<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html">http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html</a></em></span></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">言归正传吧。其实我觉得MD3模型是一种颇麻烦的模型格式。也许当时骨骼动画还没有大行其道吧，制定模型格式的时候对骨骼概念有了借鉴，但是也只是仅仅限于比较表层的概念：譬如说上层骨骼的运动会影响其下层的骨骼的运动，这种父子关系应该说是骨骼动画中比较核心的东西。MD3实现了这层概念，但是表现出来的却是颇粗糙的：一个怪物模型（MD系列模型主要就是一些人体和怪物）被分成三部分：头部模型、上身模型、下身模型（当然可以说还有一些武器模型）。这三个模型是分别独立的，分别对应一个.md3后缀二进制模型文件和一个.skin后缀文本的材质文件（这些文件名包含head、upper、lower来作区分，显得随意性很大）。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">三个模型之间用tag来标记连接点，下身模型(lower)作为基本的父模型，上身模型（upper）则是它的子模型，下身的运动会相应地传递到上身，同样头部模型（head）是上身模型的子模型。怎么样，很简朴的骨骼吧。我们其实很难说MD3它不是骨骼模型，但是说它是又好像觉得太勉强了点&mdash;&mdash;嘛，就是这种状态。动画信息存储在一个以.animation后缀名的文本文件中：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">sex&nbsp;f</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;first&nbsp;frame,&nbsp;num&nbsp;frames,&nbsp;looping&nbsp;frames,&nbsp;frames&nbsp;per&nbsp;second</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">headoffset&nbsp;-15&nbsp;0&nbsp;0</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">0&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;BOTH_DEATH1</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">29&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;BOTH_DEAD1</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">.....</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">90&nbsp;&nbsp;40&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;TORSO_GESTURE</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">...</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">153&nbsp;8&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;LEGS_WALKCR</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">....</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">动画只有下身和上身具备，头部和武器等都是连接到上身模型上，跟着它运动的而已。每个数字的意义在开头的注释行说得很清楚了。而其每一行所代表的动画则用后注释的方式标明&mdash;&mdash;是的，即使不标也没关系，不过是隐藏了动画的信息难为使用者而已。（本ZWModelMD3类是根据这些字眼来判断动画归属上半身还是下半身模型的，所以不标则很麻烦。）还好MD系列模型所属的ID公司不是那么小家子的，毕竟连模型格式都那么公开了。MD3模型，即使那么不方便，也算是标记了一个小时代了吧。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html" target="_self"><img style="margin: 0px; padding: 4px; border: 0px; clear: both; float: none" src="read-2.php-6648.jpg" tppabs="https://r9vrmq.dm1.livefilestore.com/y1p5VYsH_xuT7Piu_deQ78BHN05ETk9ohVlbMmhfcxYIFEEVfT7Dy1fZ56tuoBU9-Egs7-Wa4rAnjlv5XTmd47GBhVK_jVxUgXz/20110224Snap1.jpg" border="0" alt="MD3模型的格式、导入与骨骼概念动画" /></a></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">说它不方便，首先当然是一个模型就包含那么多个文件：最基本的3个.md3和3个.skin、1个.animation还有纹理（与MD2不同，不再是一个模型一个纹理那样简洁的了），有时候还附加一个或2个.md3的武器模型和对应的材质文件(用.shader文件)。所以标准的做法是把它们集合到一个以模型名字为名字的文件夹中。这里给我的模型管理类引入了路径问题，已经勉强解决了我就不在此提了。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">理应MD3的载入类ZWModelMD3与ZModelMD2很相似，但是事实完全8是这样的。我还是得几乎重新写载入部分的代码。其中一个理由很容易理解，存储格式变化颇大（后面慢慢道来）；还有一个理由则是现在一个模型要包含三个子部分模型和一个武器模型的集合（可以为0），也就是很多东西都要至少三份了。当然导入上就只是加个循环的简单问题，但是识别文件和连接模型也得花点心思了。</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//寻找该文件上层文件夹下的md3后缀文件</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;int&nbsp;nPartType&nbsp;=&nbsp;0;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">WIN32_FIND_DATA&nbsp;FindData;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">memset(szPathFileName,&nbsp;0,&nbsp;sizeof(szPathFileName));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">wcscat_s(szPathFileName,&nbsp;sizeof(szPathFileName)&nbsp;/&nbsp;sizeof(wchar_t),&nbsp;szResDirectory);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">wcscat_s(szPathFileName,&nbsp;sizeof(szPathFileName)&nbsp;/&nbsp;sizeof(wchar_t),&nbsp;L&quot;*.md3&quot;);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">HANDLE&nbsp;hFindHandle&nbsp;=&nbsp;::FindFirstFile(szPathFileName,&nbsp;&amp;FindData);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">if(INVALID_HANDLE_VALUE&nbsp;!=&nbsp;hFindHandle)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPartType&nbsp;=&nbsp;-1;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_wcslwr_s(FindData.cFileName,&nbsp;sizeof(FindData.cFileName)&nbsp;/&nbsp;sizeof(wchar_t));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(wcsstr(FindData.cFileName,&nbsp;L&quot;head&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPartType&nbsp;=&nbsp;MD3_MAINPART_HEAD;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(wcsstr(FindData.cFileName,&nbsp;L&quot;upper&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPartType&nbsp;=&nbsp;MD3_MAINPART_UPPER;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(wcsstr(FindData.cFileName,&nbsp;L&quot;lower&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPartType&nbsp;=&nbsp;MD3_MAINPART_LOWER;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(nPartType&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;nPartType&nbsp;&lt;&nbsp;MD3_MAINPART_COUNT)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(szPathFileName,&nbsp;0,&nbsp;sizeof(szPathFileName));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcscat_s(szPathFileName,&nbsp;sizeof(szPathFileName)&nbsp;/&nbsp;sizeof(wchar_t),&nbsp;szResDirectory);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcscat_s(szPathFileName,&nbsp;sizeof(szPathFileName)&nbsp;/&nbsp;sizeof(wchar_t),&nbsp;FindData.cFileName);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(0&nbsp;==&nbsp;_wfopen_s(&amp;m_FilePointer,&nbsp;szPathFileName,&nbsp;L&quot;rb&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!ImportSubModel(&amp;m_ModelMainMD3[nPartType],&nbsp;szPathFileName,&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(MD3_MAINPART_UPPER&nbsp;==&nbsp;nPartType&nbsp;&#124;&#124;&nbsp;MD3_MAINPART_LOWER&nbsp;==&nbsp;nPartType),&nbsp;usage))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fclose(m_FilePointer);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_FilePointer&nbsp;=&nbsp;NULL;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;while&nbsp;(::FindNextFile(hFindHandle,&nbsp;&amp;FindData));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">可以的话我都不想这样做，加了这么多平台相关的代码不说，实在很麻烦（skin文件也是类似的）：轮询文件夹下的文件(<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">m_ModelMainMD3[MD3_MAINPART_COUNT]</span>是那三个SubModel)，找文件名的关键字（是的，如果你的头部模型文件里没有head这四个字符或者文件夹里有两个以上包含head字符的.md3文件，会把问题弄得很复杂）。ImportSubModel函数与以往一样，导入文件后初始化帧信息和生成VBO。还是从MD3模型格式开始吧：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagMd3Header</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szMagic[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;magic&nbsp;string&nbsp;used&nbsp;to&nbsp;identify&nbsp;the&nbsp;file.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nVersion;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;file&nbsp;version&nbsp;number&nbsp;(must&nbsp;be&nbsp;15).</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szFileName[MNAME];&nbsp;//&nbsp;The&nbsp;file&nbsp;name.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nFlag;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;retained&nbsp;flag.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumFrames;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;animated&nbsp;bones'&nbsp;frames.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumTags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;tags.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumMeshes;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;meshes&nbsp;associated&nbsp;with&nbsp;the&nbsp;model.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumMaxSkin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;max&nbsp;number&nbsp;of&nbsp;skins.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetFrames;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;frames&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetTags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;tags&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetMeshes;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;meshes&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nFileSize;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;size&nbsp;of&nbsp;the&nbsp;whole&nbsp;file.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;Md3Header;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//导入结构定义</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagBoneFrameInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fMinPos[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fMaxPos[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fPos[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fScale;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;szCreator[16];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;BoneFrameInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagTagInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szName[MNAME];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fTranslation[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;fRotation[3][3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;TagInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagMeshHeaderInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szMeshID[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;mesh&nbsp;ID.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szMeshName[MNAME];&nbsp;//&nbsp;The&nbsp;mesh&nbsp;name.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nFlag;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;retained&nbsp;flag.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumMeshFrames;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;frames&nbsp;of&nbsp;every&nbsp;mesh(should&nbsp;equal&nbsp;to&nbsp;header's&nbsp;nNumFrames).</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumSkins;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;mesh&nbsp;skins.(should&nbsp;equal&nbsp;to&nbsp;1&nbsp;?)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumVertices;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;mesh&nbsp;vertices.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nNumFaces;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;mesh&nbsp;faces.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetFaces;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;from&nbsp;the&nbsp;nOffsetMeshes&nbsp;defined&nbsp;by&nbsp;header,&nbsp;for&nbsp;the&nbsp;faces&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetSkins;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;from&nbsp;the&nbsp;nOffsetMeshes&nbsp;defined&nbsp;by&nbsp;header,&nbsp;for&nbsp;the&nbsp;skins&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetTexcoord;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;from&nbsp;the&nbsp;nOffsetMeshes&nbsp;defined&nbsp;by&nbsp;header,&nbsp;for&nbsp;the&nbsp;texcoords&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nOffsetVertices;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;from&nbsp;the&nbsp;nOffsetMeshes&nbsp;defined&nbsp;by&nbsp;header,&nbsp;for&nbsp;the&nbsp;vertices&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nMeshInfoSize;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;size&nbsp;of&nbsp;the&nbsp;whole&nbsp;mesh&nbsp;info&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;MeshHeaderInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagFaceInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nVertIndex[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;FaceInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagSkinInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;szName[MNAME];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nIndex;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;SkinInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagTexcoordInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;u;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float32&nbsp;v;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;TexcoordInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagFrameVertInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertSrc[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;normalInfo[2];&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;FrameVertInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//导入结构定义结束</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">与<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank">MD2格式模型</a>一样，一切从文件头<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">Md3Header</span>开始，每个MD3文件开头的sizeof(Md3Header)大小的都是一个这样的文件头，注释部分我参考了网上注解，应该没错吧（如果有错请指出）。与MD2的不同貌似信息少了不少&mdash;&mdash;别担心，后面还有个<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">MeshHeaderInfo</span>呢。Md3Header除了用于标识的MagicWord（IDP3），version（15），没啥用的maxSkin外，最主要的就是三个东西：boneFrame、tag、mesh。在&ldquo;导入结构定义&rdquo;部分的头三个，就是这部分信息的数据结构，<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">BoneFrameInfo</span>基本可以不理会，除非你想把骨骼控制点（建模软件里弄骨骼的那些）也渲染出来。<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">TagInfo</span>就是骨骼信息的核心了，每个tag作为一个连接标记，决定了所连接的子模型的位置和运动形式&mdash;&mdash;一个变换矩阵。而<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">MeshHeaderInfo</span>就是我们模型的Base数据了，一个模型由一个或多个网格对象（Mesh）组成，每个网格对象对应单一纹理和VBO信息组，这个与3DS、OBJ类似（参见[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html" target="_blank">用Indexed-VBO渲染3DS模型</a>] [<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6651  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6651'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-2.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅱ</a>]）。每个Mesh段也是开头一个信息头，指涉其所在区域内数据的组织：顶点位置、顶点法线、顶点纹理坐标、顶点索引（Skin信息不用理会，我们使用的是用mesh的名字标识去检索.skin文件内容）。<a style="margin: 0px; padding: 0px; color: #465e64; text-decoration: underline; font-weight: bold" name="qwyuu"></a>顶点信息（<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">FrameVertInfo</span>）有点怪异，接下来会说说。如果你这时惊讶于为什么还是每帧都一堆顶点属性（这不还是逐帧动画么），你还没弄清楚&ldquo;骨骼概念&rdquo;动画与真正的骨骼动画的差距。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">再来看看我自定义的保存模型信息的数据结构（再提醒一次，如果你只打算用传统的glVertex打点来绘制而不用VBO，你大可不必这么麻烦地转换，从上述读入的文件&quot;raw信息&quot;已经基本足够提供个给你绘制了，网上也有很多这样的例子吧）：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;Tag信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DTagFrameInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;fTranslation;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;fRotation[3][3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DTagFrameInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;TagLink挂接模型信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DTagLink</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szTagName[MNAME];&nbsp;//&nbsp;Tag名称</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DTagFrameInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pTagFrameInfos;&nbsp;&nbsp;&nbsp;//&nbsp;该Tag下各帧的矩阵信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;void&nbsp;*&gt;&nbsp;&nbsp;&nbsp;LinkingModels;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;挂接模型</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DTagLink;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;动画信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DAnimation&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nStartFrame;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nEndFrame;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nFramesPerSec;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DAnim;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;模型的帧动画信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DFrameInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nCurFrame;&nbsp;&nbsp;//&nbsp;当前帧</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNextFrame;&nbsp;//&nbsp;下一帧</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nStartFrame;//&nbsp;开始帧</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEndFrame;&nbsp;&nbsp;//&nbsp;结束帧</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fSecPerKeyFrame;&nbsp;&nbsp;//&nbsp;关健帧间隔</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurBlendValue;&nbsp;&nbsp;&nbsp;//&nbsp;当前融合变量</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;DWORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DStartPlot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;开始时点</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DFrameInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;网格对象信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DObject</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szName[MNAME];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDiffuseMap;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pPosVerts;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pNormals;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;TexCoord&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pTexcoords;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;short&nbsp;*pIndexes;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;nNumIndexes;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;nNumVerts;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;nNumPosVBOs;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pPosVBO;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pNormVBO;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTexcoordVBO;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nIndexVBO;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DObject;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;模型信息结构体</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DModel&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bVisable;&nbsp;&nbsp;&nbsp;//&nbsp;是否渲染</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bIsTextured;//&nbsp;是否使用纹理</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Md3Header&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MD3Header;&nbsp;&nbsp;//&nbsp;MD3头文件</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pObjects;&nbsp;&nbsp;&nbsp;//&nbsp;网格对象</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DTagLink&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pLinkModels;//&nbsp;Tag连接的模型</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;t3DAnim&gt;&nbsp;&nbsp;&nbsp;&nbsp;Animations;&nbsp;//&nbsp;动画列表</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DFrameInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pFrameInfo;&nbsp;//&nbsp;帧信息(只对Upper和Loewer)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TexObjDiffuseMap;&nbsp;//&nbsp;纹理所在的纹理对象</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DModel;</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">网格对象t3DObject这个我就不多解释了，结合[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6653  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6653'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-1.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅰ</a>]中类似的数据定义，或者看名字都知道了。<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">t3DModel</span>这里除了保存一堆网格对象外，还有一个帧信息<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">t3DFrameInfo</span>，只有上身模型和下身模型才有必要new一个出来：因为它就是用于动画的信息啊（结合一个模型所具有的动画<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">t3DAnim</span>列表[由.animation文件导入]）。然后比较新颖的就是这个<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">t3DTagLink</span>结构了吧，它就是保存上述的tag信息了，它保存了tag名字、这个tag在每一动画帧下的用于子模型的变换矩阵信息（位置和旋转），还保存着连接到这个tag的子模型列表（<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">LinkingModels</span>）。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">数据的转换应该来说关键只是这些数据结构的定义，实际的转换代码也就那么些赋值转换之类了。这里特别注意的是FrameVertInfo（<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649#qwyuu'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html#qwyuu">上面提及过</a>），3个short和2个字节可以表示一个顶点位置和一个法线？ID公司的人就是那么有点犀利&mdash;&mdash;把short除以64来得到位置信息，把两个BYTE归一成(0,1)再乘以360度的弧度来标识球体的经度维度&mdash;&mdash;原点指向该经纬位置的向量，就是我们需要的法线啦！绝！这个我是从GPU GEMS1某个例子里导入MD3模型的代码中发现奇怪的，网上查到解析信息才知道的，不然我可能就忽略它自己去计算粗糙的法线了（毕竟MD2就只能这样）。以下清单的解压缩部分是重点哈~~</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;tagFrameVertInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertSrc[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;normalInfo[2];&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;FrameVertInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;&nbsp;读入文件中的对象到模型中</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;ZWModelMD3::ProcessFileInfo(t3DModel&nbsp;*pModel)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;//Load&nbsp;Tags&nbsp;Data</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;//Load&nbsp;Meshes&nbsp;Data</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pObjects&nbsp;=&nbsp;new&nbsp;t3DObject[pModel-&gt;MD3Header.nNumMeshes];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;MeshHeaderInfo&nbsp;meshHeaderInfo&nbsp;=&nbsp;&#123;0&#125;;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;dLongtitude&nbsp;=&nbsp;0,&nbsp;dLattitude&nbsp;=&nbsp;0;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int32&nbsp;nCurMeshOffset&nbsp;=&nbsp;pModel-&gt;MD3Header.nOffsetMeshes;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pModel-&gt;MD3Header.nNumMeshes;&nbsp;++i)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fseek(m_FilePointer,&nbsp;nCurMeshOffset,&nbsp;SEEK_SET);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fread_s(&amp;meshHeaderInfo,&nbsp;sizeof(MeshHeaderInfo),&nbsp;sizeof(unsigned&nbsp;char),&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof(MeshHeaderInfo)&nbsp;/&nbsp;sizeof(unsigned&nbsp;char),&nbsp;m_FilePointer);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nTotalVerts&nbsp;=&nbsp;meshHeaderInfo.nNumVertices&nbsp;*&nbsp;pModel-&gt;MD3Header.nNumFrames</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FrameVertInfo&nbsp;&nbsp;*pFrameVertInfo&nbsp;=&nbsp;new&nbsp;FrameVertInfo[nTotalVerts];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pObjects[i].pPosVerts&nbsp;=&nbsp;new&nbsp;Vector3[nTotalVerts];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pObjects[i].pNormals&nbsp;&nbsp;=&nbsp;new&nbsp;Vector3[nTotalVerts];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;nTotalVerts;&nbsp;++j)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pObjects[i].pPosVerts[j].set(pFrameVertInfo[j].vertSrc[0]&nbsp;/&nbsp;64.0f,</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pFrameVertInfo[j].vertSrc[1]&nbsp;/&nbsp;64.0f,</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pFrameVertInfo[j].vertSrc[2]&nbsp;/&nbsp;64.0f);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dLongtitude&nbsp;=&nbsp;pFrameVertInfo[j].normalInfo[0]&nbsp;*&nbsp;2.0f&nbsp;*&nbsp;MD3_PI&nbsp;/&nbsp;255;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dLattitude&nbsp;&nbsp;=&nbsp;pFrameVertInfo[j].normalInfo[1]&nbsp;*&nbsp;2.0f&nbsp;*&nbsp;MD3_PI&nbsp;/&nbsp;255;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pObjects[i].pNormals[j].set(cosf(dLattitude)&nbsp;*&nbsp;sinf(dLongtitude),&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cosf(dLongtitude),</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-sinf(dLattitude)&nbsp;*&nbsp;sinf(dLongtitude));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&nbsp;[]pFrameVertInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//...............</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;;</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">现在再来看看怎么连接模型吧（MD3的骨骼概念核心）：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;ZWModelMD3::LinkModels(t3DModel&nbsp;*pParentModel,&nbsp;t3DModel&nbsp;*pChildModel,&nbsp;char&nbsp;*szTagName)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pParentModel-&gt;MD3Header.nNumTags;&nbsp;++i)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(0&nbsp;==&nbsp;strcmp(pParentModel-&gt;pLinkModels[i].szTagName,&nbsp;szTagName))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pParentModel-&gt;pLinkModels[i].LinkingModels.push_back(pChildModel);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;LinkModels(&amp;m_ModelMainMD3[MD3_MAINPART_LOWER],&nbsp;&amp;m_ModelMainMD3[MD3_MAINPART_UPPER],&nbsp;&quot;tag_torso&quot;);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;LinkModels(&amp;m_ModelMainMD3[MD3_MAINPART_UPPER],&nbsp;&amp;m_ModelMainMD3[MD3_MAINPART_HEAD],&nbsp;&nbsp;&quot;tag_head&quot;);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">后面是ImportModel里的执行代码。其实我们只是在<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">t3DTagLink</span>里保存了子模型的指针而已。下身模型的一个叫&ldquo;<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif; color: #0000ff" class="Apple-style-span">tag_torso</span>&rdquo;的Tag连接上身模型，上身模型的一个叫&ldquo;<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif; color: #0000ff" class="Apple-style-span">tag_head</span>&rdquo;的Tag连接头部模型。（顺带一提，上身模型的一个叫&ldquo;tag_weapon&rdquo;的Tag一般是用来连接武器模型的[如果有的话]。）我们渲染的时候，其实就是先渲染父模型，再渲染子模型，再渲染子模型的子模型这样下去（每个子模型渲染前都乘以对应连接tag的变换矩阵）&hellip;&hellip;因为是一种树型的调用模式，所以递归出场了（实在兴奋不起来）：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;ZWModelMD3::DrawModelWithSubModel(t3DModel&nbsp;*pModel,&nbsp;bool&nbsp;bShaderMode)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;DrawSubModel(pModel,&nbsp;bShaderMode);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;ZWQuaternion&nbsp;qQuat,&nbsp;qNextQuat,&nbsp;qInterpolatedQuat;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;iterpPos;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;ZWMatrix16&nbsp;mtFin;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pModel-&gt;MD3Header.nNumTags;&nbsp;++i)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(pModel-&gt;pLinkModels[i].LinkingModels.size()&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;pModel-&gt;pFrameInfo)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterpPos&nbsp;=&nbsp;pModel-&gt;pLinkModels[i].pTagFrameInfos[pModel-&gt;pFrameInfo-&gt;nCurFrame].fTranslation;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterpPos&nbsp;=&nbsp;iterpPos&nbsp;+&nbsp;(pModel-&gt;pLinkModels[i].pTagFrameInfos[pModel-&gt;pFrameInfo-&gt;nNextFrame].fTranslation</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;iterpPos)&nbsp;*&nbsp;pModel-&gt;pFrameInfo-&gt;fCurBlendValue;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qQuat.SetFromMatrixRotationElements(&amp;pModel-&gt;pLinkModels[i].pTagFrameInfos[pModel-&gt;pFrameInfo-&gt;nCurFrame].fRotation[0][0]);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qNextQuat.SetFromMatrixRotationElements(&amp;pModel-&gt;pLinkModels[i].pTagFrameInfos[pModel-&gt;pFrameInfo-&gt;nNextFrame].fRotation[0][0]);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qInterpolatedQuat.SlerpFrom(qQuat,&nbsp;qNextQuat,&nbsp;pModel-&gt;pFrameInfo-&gt;fCurBlendValue);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qInterpolatedQuat.GenerateMatrix3X3(&amp;mtFin);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtFin.SetTranslationPart(ZWVector4D(iterpPos.x,&nbsp;iterpPos.y,&nbsp;iterpPos.z,&nbsp;1.0f));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glPushMatrix();</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glMultMatrixf(mtFin.mt);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(unsigned&nbsp;int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;pModel-&gt;pLinkModels[i].LinkingModels.size();&nbsp;++j)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DrawModelWithSubModel((t3DModel*)pModel-&gt;pLinkModels[i].LinkingModels[j],&nbsp;bShaderMode);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glPopMatrix();</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//渲染时调用</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">DrawModelWithSubModel(&amp;m_ModelMainMD3[MD3_MAINPART_LOWER],&nbsp;true);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">这部分参考的是GameTutorials, LLC的一个MD3导入教程（因为比较久远，那时候VBO还没出生）。这个教程更重要的是一些tips，譬如<a style="margin: 0px; padding: 0px; color: #465e64; text-decoration: underline; font-weight: bold" name="dgfdgdfgfd"></a>导入.animation文件时lower的索引要减去upper索引的首值。还有就是我们插值的方式，我们要进行动画帧间的插值，线性插值的前后应该是对应乘了变换矩阵的点坐标&mdash;&mdash;这样麻烦了点，效果也不好。考虑到我们实际插值的是一个点坐标向量的旋转，所以真●主角出场了&mdash;&mdash;</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">Quaternion四元数([<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/arithmetic/read.php?6646  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/arithmetic/read.php?6646'" tppabs="http://www.zwqxin.com/archives/arithmetic/gimballock-and-quaternion.html" target="_blank">GimbalLock万向节锁与四元数旋转</a>])!!</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">这下倒有点兴奋了。我们在上面把Tag信息里相邻两帧的3X3roatation传给ZWQuaternion类生成两个四元数，再利用SLERP四元数球插值（网上参考很多）来弄出中间的代表旋转的四元数&mdash;&mdash;变换回矩阵，加上translation部分，这样就把子模型的位置点坐标转到正确漂亮的位置了！</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">那你说最底的父模型&mdash;&mdash;下身模型怎么办，没有其他外部的tag信息提供变换矩阵参数给它啊&mdash;&mdash;是的，它的话，唯有线性插值了TAT（建议用shader Mode）。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">渲染部分整个代码就跟其他格式模型差不多了，动画部分也可以根据MD2的那套延伸出[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank">MD2格式模型的格式、导入与帧动画</a>]（毕竟本质上还是帧动画，只不过渲染上加了个骨骼的概念而已嘛）。导入skin文件其实就是查询匹配模型的网格对象的名字，然后把路径最后的文件名指涉的纹理文件导入为纹理而已；最后给出的是我的.animation文件的导入函数，其实就是<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649#dgfdgdfgfd'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html#dgfdgdfgfd">上面</a>提及的那个BUG不BUG的东西要注意点。注意，上下身的动画帧总数很多时候是8一样的，连续动画最后模型姿态会变囧的。（其实MD3模型就是上下身各指定一个动画吧，不过除了BOTH的动画外，其他的组合实在很容易让人，擦。）</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;ZWModelMD3::LoadAnimationInfo()</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;strBuff[MAX_LINE]&nbsp;&nbsp;=&nbsp;&#123;0&#125;;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DAnim&nbsp;animation&nbsp;=&nbsp;&#123;0&#125;;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;numfr&nbsp;=&nbsp;0,&nbsp;loopfr&nbsp;=&nbsp;0;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nLegFrameFix&nbsp;=&nbsp;-1;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(fgets(strBuff,&nbsp;MAX_LINE,&nbsp;m_FilePointer))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isdigit(strBuff[0]))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(4&nbsp;==&nbsp;sscanf_s(strBuff,&nbsp;&quot;%d&nbsp;%d&nbsp;%d&nbsp;%d&quot;,&nbsp;&amp;animation.nStartFrame,&nbsp;&amp;numfr,&nbsp;&amp;loopfr,&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;animation.nFramesPerSec))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animation.nEndFrame&nbsp;=&nbsp;animation.nStartFrame&nbsp;+&nbsp;numfr;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(strstr(strBuff,&nbsp;&quot;BOTH&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ModelMainMD3[MD3_MAINPART_UPPER].Animations.push_back(animation);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ModelMainMD3[MD3_MAINPART_LOWER].Animations.push_back(animation);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(strstr(strBuff,&nbsp;&quot;TORSO&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ModelMainMD3[MD3_MAINPART_UPPER].Animations.push_back(animation);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(strstr(strBuff,&nbsp;&quot;LEG&quot;))</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(-1&nbsp;==&nbsp;nLegFrameFix)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLegFrameFix&nbsp;=&nbsp;animation.nStartFrame&nbsp;-&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ModelMainMD3[MD3_MAINPART_UPPER].Animations[0].nStartFrame;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animation.nStartFrame&nbsp;-=&nbsp;nLegFrameFix;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animation.nEndFrame&nbsp;&nbsp;&nbsp;-=&nbsp;nLegFrameFix;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ModelMainMD3[MD3_MAINPART_LOWER].Animations.push_back(animation);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">就这样结束吧。老实说，MD3这么麻烦，要不是为了学习性连贯点，我就该直奔MD5去了。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><a style="margin: 0px; padding: 0px; color: #a59997; text-decoration: none; font-weight: bold; top: 1px; left: 1px; position: relative" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html" target="_blank"><img style="margin: 0px; padding: 4px; border: 0px; clear: both; float: none" src="read-2.php-6645.jpg" tppabs="https://r9vrmq.dm1.livefilestore.com/y1p0QVO2oMULKZmzWSrtL34KLWLKibu7A_B3UDzfN8IjjpXRGQKleWz79M853c0fUOZYuI-RWXDKHUMHtMFR8GXld3Gufzrci8H/20110226Snap1.jpg" border="0" alt="MD3模型的格式、导入与骨骼概念动画" width="506" height="283" /></a></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">这么多位型人，快点左一脚右一脚去收拾那些大怪兽啦！</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px; font-size: smaller">本文来源于&nbsp;<strong style="margin: 0px; padding: 0px">ZwqXin</strong>&nbsp;(<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html">http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html</a></em></span></p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6918.htm" tppabs="http://i.renjihe.com/blog/read.php?6918">MD2格式模型的格式、导入与帧动画</a> <span id="starid6918"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:29 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6918.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6918#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6918");'>引用(0)</a> , <a href="read.php-6918.htm" tppabs="http://i.renjihe.com/blog/read.php?6918">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6918" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html<br /><br /><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">MD2模型是一种古老的支持帧动画的模型格式，IDSoftware公司的游戏引擎id Tech 2所定义并采用的模型的格式。本文主要记录一下最近写的一个MD2格式导入类ZWModelMD2的一些细节。&mdash;&mdash;<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/'" tppabs="http://www.zwqxin.com/">ZwqXin</a>.com</p><ul style="margin: 0px; padding: 0px 0px 1.2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">ZWModel3DS：[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6640  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6640'" tppabs="http://www.zwqxin.com/archives/opengl/3ds-structure-simple.html">3DS文件结构的初步认识</a>] &nbsp;/ &nbsp;[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html">用Indexed-VBO渲染3DS模型</a>]</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">ZWModelOBJ：[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6653  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6653'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-1.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅰ</a>] &nbsp;/ &nbsp;[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6651  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6651'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-2.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅱ</a>]</li></ul><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><br /><img style="margin: 0px; padding: 4px; border: 0px; clear: both; float: none" src="read-2.php-6639.jpg" tppabs="https://r9vrmq.dm1.livefilestore.com/y1pWzit7BLLTam-deivIut9Q6tixMji3GXMd5VPnzrbmk9fvr_Sin0NkrRh7PbtYCLooyzD4bVO8hQ05l_TiQ3iYU1AYNfPx2xd/MD2Model20100217.jpg" border="0" alt="MD2格式模型的格式、导入与帧动画" /></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px; font-size: smaller">本文来源于&nbsp;<strong style="margin: 0px; padding: 0px">ZwqXin</strong>&nbsp;(<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html">http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html</a></em></span></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">MD2格式最早是跟IDSoftware的游戏QuakeⅡ一起为世人所熟知的。它最大的特性是&ldquo;自定义&rdquo;头文件，支持帧动画（在当今来看这种动画模式比起骨骼动画还是颇简陋的）。帧动画顾名思义，就是通过高速幻灯片的方式展现一个动画，日本90年代之前的动画其实也都是这么一个原理。要达到模型的运动细致的效果，必然需要大量的帧数&mdash;&mdash;最理想的情况当然是渲染程序中的每一帧都能转换一次模型的帧（这是不可能的，会导致庞大数据存储）。好吧，使用关健帧技术，每隔一段时间换一帧，期间的靠插值得出。但是关健帧之间相差太大是会导致模型的运动十分不自然的&mdash;&mdash;所以即使是关健帧，也得足够多才能满足需求。这是MD2模型的局限&mdash;&mdash;模型要越细致，则所需的关键帧数要越多，则所需存储的顶点数据要越多，则模型体积越大，则导入模型所花费的时间越长（渲染时间也会增加，导致程序帧率下降，导致模型的渲染被程序拖慢，造成幻灯片效果，模型也显得不细致）。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">但是一来它的渲染原理易于理解，二来网上资源也不少，还是写了一个导入类ZWModelMD2。md2文件的特点如下：</p><ol style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="HighLighter" style="margin: 0px; padding: 0px"></div><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')"><a style="margin: 0px; padding: 0px; color: #465e64; text-decoration: underline; font-weight: bold" name="points"></a>1.它具有文件头（就好像BMP[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/image-processing/read.php?6638  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/image-processing/read.php?6638'" tppabs="http://www.zwqxin.com/archives/image-processing/bmp-operate-print-pixel.html">Bmp文件的结构与基本操作</a>]一样，里面宏观地记入了这个模型的整体信息），包含各顶点属性的总数、帧数、纹理大小、属性数据所在文件的位置等等一系列信息，而不像3ds、obj那样读到哪算哪。</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">2.二进制文件，它的数据都是对齐的，譬如md2文件中的顶点索引都是unsigned short，每个顶点索引在文件中占的大小都是sizeof(unsigned short)不变。</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">3.它没有类似3ds、obj和其他许多模型格式一样有网格对象的概念，或者说整个MD2模型就是一个整体，唯一的顶点属性集，唯一的属性索引集，<strong style="margin: 0px; padding: 0px"><em style="margin: 0px; padding: 0px">唯一的纹理</em></strong>。</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">4.它按关键帧的顺序把顶点集连续存放，形成一个庞大的总顶点集。但顶点索引只有一份，因为每个顶点集中对应索引的顶点是模型的&ldquo;同一个位置&rdquo;。</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">5.模型和纹理分开，模型文件里没有指明纹理的名称。</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">6.没有法线数据，顶点位置和纹理坐标各一套索引</li></ol><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">根据以上的特征，可以认为md2文件的读入是十分十分方便的，关键是负责读入的数据结构要符合md2文件规范。从文件头开始：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//MD2文件文件头标准</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;tagMd2Header</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nMagic;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;magic&nbsp;number&nbsp;used&nbsp;to&nbsp;identify&nbsp;the&nbsp;file.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nVersion;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;file&nbsp;version&nbsp;number&nbsp;(must&nbsp;be&nbsp;8).</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nSkinWidth;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;width&nbsp;in&nbsp;pixels&nbsp;of&nbsp;our&nbsp;image.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nSkinHeight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;height&nbsp;in&nbsp;pixels&nbsp;of&nbsp;our&nbsp;image.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nFrameSize;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;size&nbsp;in&nbsp;bytes&nbsp;the&nbsp;frames&nbsp;are.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumSkins;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;skins&nbsp;associated&nbsp;with&nbsp;the&nbsp;model.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumVertices;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;vertices.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumTexCoords;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;texture&nbsp;coordinates.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumFaces;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;faces&nbsp;(triangles).</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumGlCommands;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;gl&nbsp;commands.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nNumFrames;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;number&nbsp;of&nbsp;animated&nbsp;frames.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetSkins;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;skin&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetTexCoords;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;texture&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetFaces;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;face&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetFrames;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;frames&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetGlCommands;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;offset&nbsp;in&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;gl&nbsp;commands&nbsp;data.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nOffsetEnd;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;end&nbsp;of&nbsp;the&nbsp;file&nbsp;offset.</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;Md2Header;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">程序读入文件头：</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;fread_s(&amp;m_ModelMD2.MD2Header,&nbsp;sizeof(Md2Header),&nbsp;sizeof(BYTE),&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof(Md2Header)&nbsp;,&nbsp;m_FilePointer);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">简简单单就完成了这么多数据的读入。nMagic是MD2文件的标识符（类似3ds的<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6640  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6640'" tppabs="http://www.zwqxin.com/archives/opengl/3ds-structure-simple.html">primaryChunk</a>），接下来是version、纹理大小、一个帧的数据的大小、纹理数量、每帧的顶点数量、纹理坐标数量、面数、GLcommand数、帧数以及各项数据相对文件起始位置的偏移量。其中，纹理数量和纹理数据的偏移处的数据都是废的（根据<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650#points'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html#points">上面提到的</a>第三点和第五点）。<a style="margin: 0px; padding: 0px; color: #465e64; text-decoration: underline; font-weight: bold" name="glcommand"></a>glcommand其实就是GL_TRIANLE_STRIP/LOOP之类的（MD2文件针对当时独大的OpenGL提供了优化方式，数据里另外存储了一些利于GL应用的东西，但是我怀疑多少模型的作者真正会这样做，感觉不靠谱，有兴趣的可以看看这个网址：<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://tfc.duke.free.fr/coding/read.php?6637  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://tfc.duke.free.fr/coding/read.php?6637'" tppabs="http://tfc.duke.free.fr/coding/md2-specs-en.html" target="_blank">http://tfc.duke.free.fr/coding/md2-specs-en.html</a>的最后部分）。再来看看读入纹理坐标：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagTexcoordInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;u;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;v;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;TexcoordInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//Load&nbsp;Texcoords&nbsp;Data</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">TexcoordInfo&nbsp;*pTexcoordInfo&nbsp;=&nbsp;new&nbsp;TexcoordInfo[pModel-&gt;MD2Header.nNumTexCoords];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">fseek(m_FilePointer,&nbsp;pModel-&gt;MD2Header.nOffsetTexCoords,&nbsp;SEEK_SET);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">fread_s(pTexcoordInfo,&nbsp;pModel-&gt;MD2Header.nNumTexCoords&nbsp;*&nbsp;sizeof(TexcoordInfo),&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;sizeof(TexcoordInfo),&nbsp;pModel-&gt;MD2Header.nNumTexCoords,&nbsp;m_FilePointer);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">很迅速，fseek根据文件头里的偏移量定位文件指针，然后一个fread_s搞掂。再一次pay you attention：这类<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">TexcoordInfo</span>里的数据格式不是自己去定的，而要按md2文件格式的标准来（这里的纹理坐标不是规范化到[0,1]的，除以纹理的宽高后才是）。给出整个用于读入的标准数据结构（文件头上面给出了）：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//导入结构定义</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagVertPosInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;x;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;y;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;z;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;VertPosInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagTexcoordInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;u;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;v;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;TexcoordInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagFrameVertInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;VertPosInfo&nbsp;&nbsp;&nbsp;vertSrc;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;normalIndex;&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;FrameVertInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagFrameInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fScale[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fTranslate[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szName[16];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;FrameVertInfo&nbsp;*frameVertexInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;FrameInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagFaceInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;short&nbsp;nVertIndex[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;short&nbsp;nTexcoordIndex[3];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;FaceInfo;</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">从下往上看，这里：一个面数据由3个顶点索引和3个纹理坐标索引组成；一个帧数据由3个方向上的缩放因子和偏移因子，帧名字（晕死）和一系列帧顶点元数据组成，帧顶点元数据指针在读入时要根据头文件指示的每帧顶点数new出来的；帧顶点元数据又细分为一个顶点元数据和一个法线索引（后者用于<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650#glcommand'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html#glcommand">GLcommand方式</a>绘制时，对我来说是无用数据）；顶点元数据就是3个方向的BYTE。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">这里说一下后面要怎样取真正的顶点数据：顶点位置 = 顶点元 *&nbsp;缩放因子 +&nbsp;偏移因子。你说它省存储吧，它倒省得很彻底：导入文件时把庞大的顶点区（<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650#points'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html#points">第5点</a>提及）的数据都归化为一个个BYTE存储[0,255]，从文件导出时再由统一的缩放和偏移因子来还原，硬把原本至少4字节的东西弄成1字节（先撇开顶点粗糙度不提）。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">好吧。导完数据，知道公式，直接拿数据渲染，顺便计算一下法线，设定每隔n帧换一回顶点数据。OK，完工，本文完结，拜拜。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">汗，才不会那么便宜呢！如果你是用传统的glVertex3f之类的，的确以上可谓全部。但我是要用VBO来渲染呢，VBO。在[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6651  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6651'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-2.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅱ</a>]里我提到应用VBO的两大点准绳：一VBO一纹理这个不用考虑了，一个md2文件才一个纹理。问题是<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650#points'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html#points">上面提到的</a>第6点：位置和纹理坐标各一套索引，不符合第2个准绳：一份VBO里的各顶点属性VBO（不包括索引VBO）的大小应该一致。不要以为把纹理坐标一个个跟顶点位置配对就可以了，考虑这情况：顶点A（3.8, 4.2, 5.0）是2个面的共点，第一个面在该点的纹理坐标（0.84,0.36）第二个面在该点的纹理坐标（0.74, 0.11）。在MD2这种一张纹理还得兼顾模型各个部位的格式里，这种情况是十分常见的。在用索引的时候索引到这个点怎么办，是用第一个纹理坐标还是第二个？</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">是的，导入数据方便快速是一回事，怎么转化为用于存储的数据结构是另一回事：推倒重来。</p><ol class="dp-c" style="padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px; border: none; margin: -5px 0px 1px 5px !important"><li class="alt" style="list-style: decimal-leading-zero outside; border-style: none none none solid; color: inherit; line-height: 14px; border-top-width: initial; border-right-width: initial; border-bottom-width: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-width: 3px; border-left-color: #6ce26c; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-image: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif'); background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: 3px 4px; background-repeat: no-repeat">//标识独立顶点的结构体(不含法线信息)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tagVertInfo</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;tagVertInfo(const&nbsp;VertPosInfo&nbsp;&amp;pos,&nbsp;const&nbsp;TexcoordInfo&nbsp;&amp;tc)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;&nbsp;InfoVertPos&nbsp;=&nbsp;pos;&nbsp;InfoTexcoord&nbsp;=&nbsp;tc;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;VertPosInfo&nbsp;&nbsp;InfoVertPos;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;TexcoordInfo&nbsp;InfoTexcoord;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;tVertInfo;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;帧信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DFrame</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;Vector3&gt;&nbsp;&nbsp;&nbsp;Verts;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;对象的顶点位置</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pNormals;&nbsp;//&nbsp;对象的顶点法线</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DFrame;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;模型信息结构体</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">typedef&nbsp;struct&nbsp;tag3DModel&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bIsTextured;//&nbsp;是否使用纹理</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNumIndexes;//&nbsp;顶点信息索引数目</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNumPosVBOs;//&nbsp;顶点位置VBO数目</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;Md2Header&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MD2Header;&nbsp;&nbsp;//&nbsp;MD2头文件</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;TexCoord&gt;&nbsp;&nbsp;&nbsp;Texcoords;&nbsp;&nbsp;//&nbsp;对象帧&nbsp;-&nbsp;顶点纹理坐标信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;t3DFrame&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pFrames;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;对象帧&nbsp;-&nbsp;顶点位置/法线信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pIndexes;&nbsp;&nbsp;&nbsp;//&nbsp;对象的顶点索引</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pPosVBO;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;顶点位置VBO句柄</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp; &nbsp;......</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;t3DModel;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li></ol><ol style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//导入文件数据</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//&nbsp;缓存当前对象的索引</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">std::map&lt;tVertInfo,&nbsp;unsigned&nbsp;short&gt;&nbsp;vObjectIndexMap;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;//填充模型信息</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">pModel-&gt;pIndexes&nbsp;=&nbsp;new&nbsp;unsigned&nbsp;short[pModel-&gt;MD2Header.nNumFaces&nbsp;*&nbsp;VERTEX_OF_FACE];&nbsp;&nbsp;&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">pModel-&gt;pFrames&nbsp;&nbsp;=&nbsp;new&nbsp;t3DFrame[pModel-&gt;MD2Header.nNumFrames];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">VertPosInfo&nbsp;&nbsp;vCurVertPos;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">TexcoordInfo&nbsp;vCurTexcoord;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nCurFaceVertIndex&nbsp;=&nbsp;0;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nCurIndexDataIdx&nbsp;&nbsp;=&nbsp;0;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">for(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;pModel-&gt;MD2Header.nNumFaces;&nbsp;++i)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;VERTEX_OF_FACE;&nbsp;++j)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nCurFaceVertIndex&nbsp;=&nbsp;pFaceInfo[i].nVertIndex[j];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vCurVertPos&nbsp;&nbsp;=&nbsp;pframeInfo[0].frameVertexInfo[nCurFaceVertIndex].vertSrc;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vCurTexcoord&nbsp;=&nbsp;pTexcoordInfo[pFaceInfo[i].nTexcoordIndex[j]];</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::map&lt;tVertInfo,&nbsp;unsigned&nbsp;short&gt;::iterator&nbsp;pFind&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;vObjectIndexMap.find(tVertInfo(vCurVertPos,&nbsp;vCurTexcoord));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(vObjectIndexMap.end()&nbsp;!=&nbsp;pFind)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pIndexes[nCurIndexDataIdx++]&nbsp;=&nbsp;pFind-&gt;second;&nbsp;//索引指向重复的信息的位置</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//计算各帧的顶点位置</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;k&nbsp;=&nbsp;0;&nbsp;k&nbsp;&lt;&nbsp;pModel-&gt;MD2Header.nNumFrames;&nbsp;++k)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pFrames[k].Verts.push_back(Vector3(</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pframeInfo[k].fScale[0]&nbsp;*&nbsp;pframeInfo[k].frameVertexInfo[nCurFaceVertIndex].vertSrc.x</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;pframeInfo[k].fTranslate[0],&nbsp;...,&nbsp;&nbsp;...));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//计算顶点纹理坐标(每帧一致)</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;Texcoords.push_back(TexCoord(float(vCurTexcoord.u)&nbsp;/&nbsp;pModel-&gt;MD2Header.nSkinWidth,</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float(vCurTexcoord.v)&nbsp;/&nbsp;pModel-&gt;MD2Header.nSkinHeight));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//为新加的信息的位置添加新索引</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;pIndexes[nCurIndexDataIdx++]&nbsp;=&nbsp;pModel-&gt;Texcoords.size()&nbsp;-&nbsp;1;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//缓存查询表</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vObjectIndexMap.insert(std::pair&lt;tVertInfo,&nbsp;unsigned&nbsp;short&gt;(tVertInfo(vCurVertPos,&nbsp;vCurTexcoord),&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pModel-&gt;Texcoords.size()&nbsp;-&nbsp;1));</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;&nbsp;&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&#125;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">pModel-&gt;nNumIndexes&nbsp;=&nbsp;nCurIndexDataIdx;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//清除导入文件数据</li></ol><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">&nbsp;之后计算法线数据，生成VBO，就跟3DS，OBJ类似了（[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html" target="_blank">用Indexed-VBO渲染3DS模型</a>] [<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6651  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6651'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-2.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅱ</a>]）。帧数据（位置、法线）的VBO有两套方案：一是每关键帧一个位置VBO一个法线VBO，渲染时候直接换VBO来绑定就好了；二是只生成两个位置VBO和两个法线VBO，在换关健帧的时候也重新给VBO传输数据。存储上的优劣是显而易见的：前者在传输完数据就可以扔掉内存中的帧数据了（位置和法线），但是数据都往VBO去了，一个200帧的MD2模型共需要400个VBO；后者要把帧数据都留在内存，但是同情形下只需4个VBO。前者利于CPU后者利于GPU。执行速度方面，后者要重传VBO数据，明显更浪费点CPU，但是这里我用的是双缓冲策略，一者在使用中的时候另一者可传输数据，只要关健帧之间的时间间隔不要太离谱（譬如0.1s以下），觉得FPS上不会有太大区别（模型特别巨型则另说）&mdash;&mdash;总之两者都实现了（在Import函数参数里指定，或者后者可转为前者，逆转不能），就是按实际需求情况来了。</p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">Animation帧动画方面，建立一个时间plot给它更新就好了。在插值上，可以利用CPU时间来插（严重不推荐），也可以用Shader插：简单的先行插值函数mix。ZWModelMD2既有shader版本也有非shader版本，这个不怎么复杂。因为至少有两个VBO，所以shader里可以有两个position attribute和两个normal attribute（关于怎么关联attribute变量数据，看此文：[<a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/shaderglsl/read.php?6636  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/shaderglsl/read.php?6636'" tppabs="http://www.zwqxin.com/archives/shaderglsl/communication-between-opengl-glsl.html" target="_blank">OpenGL/GLSL数据传递小记(2.x)</a>]），当然了，还有一个表征关健帧之间过渡完成百分比的融合度unifrom：<span style="margin: 0px; padding: 0px; font-size: 12px; line-height: 14px; font-family: Consolas, 'Courier New', Courier, mono, serif" class="Apple-style-span">u_fBlender</span>。</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol class="dp-c" style="margin: 0px; padding: 0px"><li class="alt" style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">//vertex&nbsp;shader：</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;&nbsp;vec3&nbsp;pos&nbsp;=&nbsp;mix(attrib_position,&nbsp;attrib_nextposition,&nbsp;u_fBlender);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;&nbsp;gl_Position&nbsp;=&nbsp;gl_ModelViewProjectionMatrix&nbsp;*&nbsp;vec4(pos,&nbsp;1.0);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px">&nbsp;三个帧速调用：</p><div class="HighLighter" style="margin: 0px; padding: 0px; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><div class="dp-highlighter" style="margin: 0px; padding: 0px"><ol style="margin: 0px; padding: 0px"><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;&nbsp;&nbsp;SetAnimationFrames(unsigned&nbsp;int&nbsp;nStartFrame,&nbsp;unsigned&nbsp;int&nbsp;nEndFrame,&nbsp;float&nbsp;fSecondsPerKeyFrame);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;&nbsp;&nbsp;SetStaticFrame(unsigned&nbsp;int&nbsp;nStaticFrame);</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">&nbsp;</li><li style="margin: 0px; padding: 2px 0px 1px 15px; list-style: none; background: url('http://www.zwqxin.com/themes/ipati/style/ipati/bullet.gif')">void&nbsp;&nbsp;&nbsp;SetAnimationAllFrames(float&nbsp;fSecondsPerKeyFrame);</li></ol></div></div><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px; text-align: center"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank"><img style="margin: 0px; padding: 4px; border: 0px; clear: both; float: none" src="read-2.php-6635.jpg" tppabs="https://r9vrmq.dm1.livefilestore.com/y1pS0aaYhkNA6-0es63NWaqs1_Rf98yEyqrU-lEp4CSI2rLS28wRwWBQiauIRYR1mBDIM_-dyIzR9DoRuibzfNomjqqpdtROz_g/MD2Models20100217.jpg" border="0" alt="MD2格式模型的格式、导入与帧动画" /></a></p><p style="margin: 10px 0px 15px; padding: 0px; text-indent: 2em; color: #444444; font-family: Tahoma, sans-serif; font-size: 13px; line-height: 19.5px"><span style="margin: 0px; padding: 0px; font-size: smaller">本文来源于&nbsp;<strong style="margin: 0px; padding: 0px">ZwqXin</strong>&nbsp;(<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em style="margin: 0px; padding: 0px"><a style="margin: 0px; padding: 0px; color: #465e64; font-weight: bold" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html">http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html</a></em></span></p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6917.htm" tppabs="http://i.renjihe.com/blog/read.php?6917">MD5模型的格式、导入与顶点蒙皮式骨骼动画I</a> <span id="starid6917"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:27 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6917.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6917#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6917");'>引用(0)</a> , <a href="read.php-6917.htm" tppabs="http://i.renjihe.com/blog/read.php?6917">阅读(2)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6917" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	http://blog.csdn.net/summerhust/article/details/17421213<br /><br /><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px" class="post-title">MD5模型的格式、导入与顶点蒙皮式骨骼动画I</h2><h4 style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" class="post-date"><a style="color: #ff9900" name="t1"></a>2011-10-6 21:14:49&nbsp; &#124; 发布:zwqxin</h4><div class="post-body" style="font-family: Arial; font-size: 14px; line-height: 26px"><p style="margin: 0px; padding: 0px">MD5模型是ID公司第一款真正意义上的骨骼格式模型，在04年随着Doom3一起面世，经过几个版本的变更，现在在骨骼模型格式中依然有其重要地位。本文记录一下ZWModelMD5中的一些细节，先是稍微笔记一下骨骼模型的基本概念和MD5文件的格式与导入。&mdash;&mdash;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/'" tppabs="http://www.zwqxin.com/" target="_blank">ZwqXin</a>.com</p><p style="margin: 0px; padding: 0px">[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank">MD2格式模型的格式、导入与帧动画</a>]</p><p style="margin: 0px; padding: 0px">[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html" target="_blank">MD3模型的格式、导入与骨骼概念动画</a>]</p><p style="margin: 0px; padding: 0px"><span style="font-size: 12px">本文来源于&nbsp;<strong>ZwqXin</strong>&nbsp;(<em><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/summerhust/article/details/read.php?6630  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/summerhust/article/details/read.php?6630'" tppabs="http://blog.csdn.net/summerhust/article/details/17421213" target="_blank">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/summerhust/article/details/read.php?6630  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/summerhust/article/details/read.php?6630'" tppabs="http://blog.csdn.net/summerhust/article/details/17421213" target="_blank">http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-1.html</a></em></span></p><p style="margin: 0px; padding: 0px">经过MD2的帧动画和MD3的骨骼概念动画，当然还有MD4/MDL的尝试，在那个骨骼模型开始风行的时代，MD5作为骨骼动画出现了。在今天，3D模型通常分为静态模型、帧动画模型、骨骼动画模型，它们分别应用于不同的场合，静态模型就不用说了，帧动画模型主要用于人物动作简单、固定、与场景不怎么需要交互的场合，而骨骼动画模型就是与此相对了。</p><p style="margin: 0px; padding: 0px">骨骼的这个概念与我们人体的骨骼还是类似的。我们可以把自己看做一堆骨骼，然后外面蒙上一层肌肉啊皮啊什么的，然后这些肌肉啊皮肤啊的就跟随骨骼的运动而运动。当然了，重要的是我们体内还有那么多器官，那些MD5人体和怪物模型就没有了(笑)。骨骼与骨骼之间是用骨骼节点连接的，我们称骨骼为Bone，称骨骼节点为Joint，一根bone的一端或两端连着两个Joint，而一个Joint可能连着数条Bone。骨骼模型的描述也分为以Bone为主和以Joint为主，MD5是后者。你可以认为Joint就是控制点，通过控制Joint的位置和旋转，可以控制整个骨骼，而整个骨骼也就影响模型的外皮(顶点网格)，于是动画模式建立了。Joint的集合可以用一个树的数据结构描述&mdash;&mdash;跟MD3一样，有一个总的父节点，总的父节点下连着一个或多个子节点，这些子节点本身也作为父节点下连一个或多个子节点&hellip;&hellip;父节点的移动直接先作用到子节点上（抬动肩关节时手臂节点也跟着作同样的运动，之后手肘节点跟着手臂节点作同样移动&hellip;&hellip;类推到指尖节点），再叠加上子节点本身的移动（手臂节点本身可以再那基础上作移动，其影响共同作用到手肘节点&hellip;&hellip;用身体摆摆姿势，这其实是很形象的），于是这个前向的驱动模式建立了。每个Joint的运动信息可以抽象成一个变换矩阵M（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6629  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6629'" tppabs="http://www.zwqxin.com/archives/opengl/opengl-matrix-what.html" target="_blank">乱弹OpenGL中的矩阵变换(上)</a>] ），这样这个驱动模型可以看做是每个时刻给予每个节点一个变换矩阵，变换节点的位置和旋向以驱动骨架。</p><p style="margin: 0px; padding: 0px">既然骨架模型建立了，接下来就是骨架与模型顶点数据的关系。骨骼模型本身渲染出来的不是骨架，而是组成网格（皮肤）的一堆顶点。这堆顶点是怎样定义的呢？在MD2中，每帧都包含一堆顶点位置数据，结果就是程序需要存储大规模的顶点位置数据。MD5则不直接储存顶点位置数据，而是让程序每帧&rdquo;计算&ldquo;出来。在MD5的文件中的网格数据包括纹理坐标（因为最后的顶点数目是固定的，做一纹理坐标数据的数目与之一致）、索引(把顶点组成三角面片，因为最后的顶点是有序的，前一帧的顶点跟后一帧的一一对应，所以只要按这个次序定义索引即可)、节点权重(weight，这就是关联骨骼节点跟顶点的东西，下述)；一个顶点数据有一个纹理坐标、一个或多个weight组成，然后索引数据组织顶点。与以往不同的是，这里面没有法线数据，MD5采用的是与3DS（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html" target="_blank">用Indexed-VBO渲染3DS模型</a>] ）和OBJ（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6653  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6653'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-1.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅰ</a>] ）一样的策略，让程序自己去计算。</p><p style="margin: 0px; padding: 0px">一个weight包含了它对应的Joint的索引（这样一来就建立了 vertex-&gt;weight-&gt;joint的连接），一个位置值(pos)和一个作用比率(bias)。一个顶点的计算公式如下：</p><div class="codeText"><ol class="dp-xml"><li class="alt"><span style="color: red" class="attribute">VertexPos</span>&nbsp;=&nbsp;(M<sub>J-0</sub>&nbsp;*&nbsp;weight[<em>index0</em>].pos&nbsp;*&nbsp;weight[<em>index0</em>].bias)&nbsp;+&nbsp;...&nbsp;+&nbsp;(M<sub>J-N</sub>&nbsp;*&nbsp;weight[<em>indexN</em>].pos&nbsp;*&nbsp;weight<em>[indexN</em>].bias)&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">其中，M<sub>J-x</sub>表示第x个weight对应的节点Joint的变换矩阵。作用比率bias的总和需要是1（100%），这样一个顶点位置可以看作是各个经过矩阵变换后的weight位置的加权平均。而这个Joint矩阵在动画过程中变化的话，结果就是对应计算出来的顶点位置也跟着变化了。这就是骨架驱动皮肤的过程，也称为&rdquo;蒙皮&ldquo;。这步计算可以在CPU上执行，也可以在GPU上执行&mdash;&mdash;通过vertex shadr执行蒙皮，就称为&rdquo;顶点蒙皮（vertex skinning）&ldquo;，我将在下篇文章讲述。</p><p style="margin: 0px; padding: 0px">一个MD5模型包含两个文件，其中.md5mesh后缀的文件包含了该模型的几何体数据(mesh)，而.md5anim后缀的文件则包含了该模型的动画信息。这一点与MD3模型是一样的，只不过很多方面看上去更为规范，没有在[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html" target="_blank">MD3模型的格式、导入与骨骼概念动画</a>]文末提及的那些令人不爽的&ldquo;小提示&quot;。另一点很本质上不同的是，md5的两个文件都是文本文件，这当然提供了更大的方便性，但同时也容易出现文件被乱改的问题（当然了，本来idSoft就只是想自用而已）。</p><p style="margin: 0px; padding: 0px">一个MD5可以只有md5mesh文件，这样模型只不过不含动画信息而已。而这时候出来的模型的姿态被称为Bind-pose。以前看视频看人用maya建模（就是看那部《堕落的艺术》的幕后花粹时），在修改模型，未定义动作之前，人物会呈现一个站立并两手平举的姿态。这就是一个模型的bind-pose姿态吧。这个概念在顶点蒙皮过程中尤显重要，不过你只需要记住这就是没有动画信息（没有md5anim）时候给予模型的一个&rdquo;预设姿势&ldquo;好了。下面看看文件结构</p><div class="codeText"><div class="codeHead">md5mesh：</div><ol class="dp-xml"><li class="alt">joints&nbsp;&#123;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&quot;origin&quot;&nbsp;&nbsp;&nbsp;&nbsp;-1&nbsp;(&nbsp;-0.000000&nbsp;0.016430&nbsp;-0.006044&nbsp;)&nbsp;(&nbsp;0.707107&nbsp;0.000000&nbsp;0.707107&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp; &quot;body&quot;&nbsp;&nbsp;&nbsp; 0&nbsp;( -0.0000002384 0 56.5783920288 )&nbsp;(&nbsp;0.507041&nbsp;-0.578614&nbsp;0.354181&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;origin&nbsp;&nbsp;</li><li>&nbsp;&nbsp;....&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">那些版本号啊XX总数的就不管了，从md5mesh文件开头看起，首先是Joint的定义：名称、父节点序号（-1说明本身是总父节点，这个序号其实就是行号了，譬如上面&rdquo;origin&ldquo;节点的序号就是0，无父节点；&nbsp;&quot;body&quot;节点序号是1，父节点序号是0，也就是说父节点是&rdquo;origin&ldquo;）、bind-pose姿态下节点的位置（位移）和旋转（旋转用四元数【[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/arithmetic/read.php?6646  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/arithmetic/read.php?6646'" tppabs="http://www.zwqxin.com/archives/arithmetic/gimballock-and-quaternion.html" target="_blank">GimbalLock万向节锁与四元数旋转</a>] 】表达，括号里是xyz，需程序自行计算w值）&mdash;&mdash;后面两者可以组成一个变换矩阵M<sub>self-bindpose</sub>，即bindpose姿态下各个节点自身的变换矩阵，如果给这个矩阵依次向上左乘该节点的树分支上各级父节点的变换矩阵，得到就是bindpose下该节点的真正变换矩阵M<sub>J-x(bindpose)</sub>了。</p><div class="codeText"><div class="codeHead">md5mesh：</div><ol class="dp-cpp"><li class="alt">mesh&nbsp;&#123;&nbsp;&nbsp;<span class="comment">//一个网格对象</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;shader&nbsp;<span class="string">&quot;body1.tga&quot;</span>&nbsp;&nbsp;<span class="comment">//该网格对象的纹理</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;numverts&nbsp;590&nbsp;&nbsp;&nbsp;<span class="comment">//顶点数据：vert&nbsp;序号&nbsp;（纹理坐标）&nbsp;对应weight的起始序号&nbsp;weight总数</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;vert&nbsp;0&nbsp;(&nbsp;0.394531&nbsp;0.513672&nbsp;)&nbsp;0&nbsp;2&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numtris&nbsp;888&nbsp;&nbsp;<span class="comment">//索引数据:&nbsp;tri&nbsp;序号&nbsp;三角面片对应的顶点数据的序号</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tri&nbsp;0&nbsp;0&nbsp;2&nbsp;1&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numweights&nbsp;967&nbsp;<span class="comment">//权重数据：weight&nbsp;序号&nbsp;对应的Joint的序号&nbsp;比率bias值&nbsp;（位置值）</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;weight&nbsp;0&nbsp;5&nbsp;1.000000&nbsp;(&nbsp;6.175774&nbsp;8.105262&nbsp;-0.023020&nbsp;)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">md5mesh文件后面部分就是一个个网格对象(mesh)的数据了。看上面注释，跟前面的讲述是一致的。注意这里vert末尾两个数据是对应下面那堆weight的，而且总是相邻的一个或多个weight，所以只需要第一个的序号和连续的weight的个数就可以确定了。顶点仅会被附近的weight影响。</p><p style="margin: 0px; padding: 0px">接下来看md5anim：</p><div class="codeText"><ol class="dp-xml"><li class="alt">hierarchy&nbsp;&#123;&nbsp;&nbsp; //Joint 名字 父节点序号 flag 影响的帧数据起始索引<br /></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&quot;origin&quot;&nbsp;&nbsp;&nbsp;&nbsp;-1&nbsp;63&nbsp;0&nbsp;//&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&quot;Body&quot;&nbsp;&nbsp;0&nbsp;63&nbsp;6&nbsp;&nbsp;//&nbsp;origin&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;....&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">bounds&nbsp;&#123;&nbsp;&nbsp;//每帧的包围盒&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;...&nbsp;)&nbsp;(&nbsp;...&nbsp;)&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">baseframe&#123;&nbsp;&nbsp;//&nbsp; 基础帧数据</li><li>&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;...&nbsp;)&nbsp;(&nbsp;...&nbsp;)&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">frame&nbsp;0&nbsp;&#123;&nbsp;&nbsp; //帧0数据<br /></li><li>...&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">frame&nbsp;1&nbsp;&#123;&nbsp;&nbsp;</li><li>...&nbsp;&nbsp;</li><li class="alt">&#125;&nbsp;&nbsp;</li><li>...&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">老实说我觉得md5anim文件特别别扭，虽然理解起来不难。首先文件的开头也是joint的信息，不过这里主要针对帧数据，尾部的数据是一个索引值(nStartIndex)，指向后面每一帧（frame x）的数据堆里， flag是一个bit位。嘛，这样看吧。MD5虽然不是帧动画，但它依然有&rdquo;关健帧&ldquo;的概念（也可以说这是动画本身的概念），模型的某个动画由有限个关健帧穿插并近邻插值而成，但MD5不同于MD2之处在于它只需要每个关健帧骨骼节点Joint的数据。为了替换上面bindpose的顶点计算公式，我们需要的只是每个joint在动画期间的变换矩阵M<sub>J</sub>，但我们为了能在关健帧之间合理插值，通常并不直接保存矩阵而是分别保存位移信息(transform-vector3)和旋转信息(Rotation-quternion)。这个文件主要包含的就是这每个关健帧下每个Joint的这两个数据，当然还包括关健帧数目。至于这文件里的每帧的模型包围盒信息，并不是必要的。</p><p style="margin: 0px; padding: 0px">在上面的baseframe里有与Joint数目相等的行数，把每行看作一个joint的位移信息+旋转信息（6个数字，这跟md5mesh文件开头joint的bindpose信息是一样的格式），但这里的baseframe数据无实际意义，仅表示一个&rdquo;基础数值&ldquo;，对于第x个关健帧，就拿下面frame x里的某些数据替换这些&rdquo;基础信息&ldquo;，具体每个joint要拿哪些数据去替换，正就是开头的索引值(nStartIndex)和flag决定的了。nStartIndex决定了替换开始对应数据堆的位置，nflag决定替换6个数字中的哪几个（flag分别与1、2、4、8、16、32作逻辑与，第一个出现为真的时候就拿nStartIndex处的数据替换掉，第二个出现真的时候就拿nStartIndex+1处的数据替换掉...如果逻辑与结果为假则不替换直接用回basefame里对应的数据）。这样下来就能取得我们要的&quot;每个关健帧下每个Joint的位移信息+旋转信息&quot;。</p><p style="margin: 0px; padding: 0px">导入代码没什么特别的，也就按步骤进行&rdquo;文件-&gt;一定数据结构下的内存数据&ldquo;的转换。但确实颇冗长，尤其我还是以C语言方式进行读文件的&hellip;&hellip;最后计算法线、生成VBO等都跟以前的模型导入流程差不多，有些细节地方我将在下篇文章提及。最后给出我用于导入的数据结构：</p><div class="codeText"><div class="codeHead">C++代码</div><ol class="dp-cpp"><li class="alt"><span class="comment">//包围盒信息</span>&nbsp;&nbsp;</li><li><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DBound&nbsp;&nbsp;</li><li class="alt">&#123;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMin;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMax;&nbsp;&nbsp;</li><li>&#125;t3DBound;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="comment">//&nbsp;模型的帧动画信息</span>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DFrameInfo&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nFrameCount;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;总帧数</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nAnimComponent;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;每帧动画数据量</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nCurFrame;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;当前帧</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNextFrame;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;下一帧</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nStartFrame;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;开始帧</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEndFrame;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;结束帧</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fSecPerKeyFrame;&nbsp;&nbsp;<span class="comment">//&nbsp;关健帧间隔</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurBlendValue;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;当前融合变量</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">DWORD</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DStartPlot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;开始时点</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;t3DBound&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*tBoundingBox;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;包围盒</span>&nbsp;&nbsp;</li><li class="alt">&#125;t3DFrameInfo;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt"><span class="comment">//&nbsp;Joint属性</span>&nbsp;&nbsp;</li><li><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DJointInfo&nbsp;&nbsp;</li><li class="alt">&#123;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;vTransform;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quaternion&nbsp;qRotatation;&nbsp;&nbsp;</li><li>&#125;t3DJointInfo;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="comment">//&nbsp;Joint模型关节点信息</span>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DJoint&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">char</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szJointName[MNAME];&nbsp;<span class="comment">//&nbsp;Joint名称</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nParentJointIndex;&nbsp;&nbsp;<span class="comment">//&nbsp;父关节点索引</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;Matrix16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BindPoseMatrix;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Joint&nbsp;基本变换(位移和旋转)矩阵</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Matrix16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BindPoseMatrixInv;&nbsp;&nbsp;<span class="comment">//&nbsp;Joint&nbsp;基本变换(位移和旋转)矩阵的逆矩阵</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;t3DJointInfo&gt;&nbsp;FramePoseInfoVec;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Joint&nbsp;帧位移和旋转</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">BYTE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nAffectFlags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;产生影响的顶点数据对象的标记</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nAffectStartIndex;&nbsp;&nbsp;<span class="comment">//&nbsp;产生影响的顶点数据对象在帧数据的起始位置</span>&nbsp;&nbsp;</li><li>&#125;t3DJoint;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="comment">//顶点权位信息</span>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DWeight&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nAttachJoint;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fBias;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vPos;&nbsp;&nbsp;</li><li>&#125;t3DWeight;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DVectorInfo&nbsp;&nbsp;</li><li class="alt">&#123;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nWeightStartIndex;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nWeightCount;&nbsp;&nbsp;</li><li>&#125;VectorWeightInfo;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="comment">//&nbsp;网格对象信息</span>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DObject&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDiffuseMap;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pPosVerts;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;Vector3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pNormals;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;TexCoord&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pTexcoords;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;t3DWeight&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pPosWeights;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;VectorWeightInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pVecWeightInfo;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">short</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*pIndexes;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNumIndexes;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNumVerts;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNumWeights;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPosVBO;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNormVBO;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTexcoordVBO;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nWeightVBO;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nWightCountVBO;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nJointIndexVBO;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nIndexVBO;&nbsp;&nbsp;</li><li>&#125;t3DObject;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li><span class="comment">//&nbsp;模型信息结构体</span>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">typedef</span>&nbsp;<span class="keyword">struct</span>&nbsp;tag3DModel&nbsp;&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bVisable;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;是否渲染</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bIsTextured;&nbsp;&nbsp;<span class="comment">//&nbsp;是否使用纹理</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bHasAnim;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;是否含动画信息</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;GLuint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TexObjMap;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;纹理对象</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;t3DObject&gt;&nbsp;&nbsp;t3DObjVec;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;网格对象列表</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt;t3DJoint&gt;&nbsp;&nbsp;&nbsp;t3DJointVec;&nbsp;&nbsp;<span class="comment">//&nbsp;骨骼点列表</span>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;t3DFrameInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tFrameInfo;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;帧信息</span>&nbsp;&nbsp;</li><li>&#125;t3DModel;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">注意，对于Bindpose的Joint信息我是直接作为矩阵存储的（它的逆矩阵在顶点蒙皮的时候有用，所以也预先存储了），而动画过程中的Joint信息我是作为位移+旋转信息存储的（为了在关键帧中插值）。现在它们都在同一结构体内，迟些时候我应该会分开它们的（分开mesh部分和anim部分）。VBO部分有三个比较特殊的：nWeightVBO（weight的比率bias，用vec4传输，也就是说如果影响一个顶点的weight多于4个，我会把它们压成4个）；nWightCountVBO（实际的weight数目）；nJointIndexVBO（该weight对应的Joint的序号），这些对于顶点蒙皮是有用的，所以需要作为顶点属性传入vertex-sahder。</p><p style="margin: 0px; padding: 0px">在上一篇文章中简单介绍了MD5模型的格式和载入，本文将从渲染的层面上继续笔记一下&ldquo;顶点蒙皮&rdquo;（vertex-skinning）的实现，以及骨骼节点Joint的变换矩阵向vertex-shader(GLSL)传输的其中几种方法。&mdash;&mdash;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/'" tppabs="http://www.zwqxin.com/" target="_blank">ZwqXin</a>.com</p><p style="margin: 0px; padding: 0px">上篇文章见：[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6628  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6628'" tppabs="http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-1.html" target="_blank">MD5模型的格式、导入与顶点蒙皮式骨骼动画I</a>]</p><p style="margin: 0px; padding: 0px">其他模型格式的文章见：<br />[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6657  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6657'" tppabs="http://www.zwqxin.com/archives/opengl/idexed-vbo-for-model-3ds-rendering.html" target="_blank">用Indexed-VBO渲染3DS模型</a>]<br />[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6653  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6653'" tppabs="http://www.zwqxin.com/archives/opengl/obj-model-format-import-and-render-1.html" target="_blank">OBJ模型文件的结构、导入与渲染Ⅰ</a>]<br />[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6650  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6650'" tppabs="http://www.zwqxin.com/archives/opengl/md2-model-format-import-animation.html" target="_blank">MD2格式模型的格式、导入与帧动画</a>]<br />[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6649  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6649'" tppabs="http://www.zwqxin.com/archives/opengl/model-md3-format-import-animation.html" target="_blank">MD3模型的格式、导入与骨骼概念动画</a>]</p><p style="margin: 0px; padding: 0px"><span style="font-size: 12px">本文来源于&nbsp;<strong>ZwqXin</strong>&nbsp;(<em><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/summerhust/article/details/read.php?6630  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/summerhust/article/details/read.php?6630'" tppabs="http://blog.csdn.net/summerhust/article/details/17421213" target="_blank">http://www.zwqxin.com/</a></em>), 转载请注明<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原文地址：<em><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/summerhust/article/details/read.php?6630  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/summerhust/article/details/read.php?6630'" tppabs="http://blog.csdn.net/summerhust/article/details/17421213" target="_blank">http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-2.html</a></em></span></p><p style="margin: 0px; padding: 0px">首先要说一下的是，如果只是把蒙皮工作完全放在CPU端进行计算的话，那么只看上篇文章已经足够了&mdash;&mdash;每一帧执行各个顶点的计算公式，其中的Joint矩阵由各个关健帧下该Joint的位移和旋转信息插值而来。只不过这样做的话，要承受帧率悲剧的痛苦罢了。现代的骨骼蒙皮主要都是在GPU端做的，这就是vertex-skinning On GPU。在<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6628  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6628'" tppabs="http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-1.html" target="_blank">上篇</a>中提及一个顶点的计算公式如下：</p><div class="codeText"><ol class="dp-xml"><li class="alt"><span style="color: red" class="attribute">VertexPos</span>&nbsp;=&nbsp;(M<sub>J-0</sub>&nbsp;*&nbsp;weight[<em>index0</em>].pos&nbsp;*&nbsp;weight[<em>index0</em>].bias)&nbsp;+&nbsp;...&nbsp;+&nbsp;(M<sub>J-N</sub>&nbsp;*&nbsp;weight[<em>indexN</em>].pos&nbsp;*&nbsp;weight<em>[indexN</em>].bias)&nbsp;<br /></li></ol></div><p style="margin: 0px; padding: 0px">我们要做的只不过是把这个公式交给shader进行并行计算罢了。公式的右边都是原材料，我们一一细数一下：</p><ul><li>weight[<em>index0</em>]....weight[<em>indexN</em>]，指定该顶点关联的是哪些weight，以及weiht的总数，这个是直接从md5mesh文件的vert字段读入的wight信息；</li><li>pos、bias，同样，是从md5mesh文件的weight字段读入的信息；</li><li>M<span style="font-size: 12px"><sub>J</sub><sub>-x</sub></span>，是各帧经过插值计算得来Joint矩阵，其中下标x（对应哪个joint）也是由weight字段读入的信息；</li></ul><p style="margin: 0px; padding: 0px">可见，这些都是已知的，直接都丢给shader做就OK了？哪有那么简单。传给vertex-shader的是顶点本身，如果预先都传入0值，那也还要吧上述信息传给shader&mdash;&mdash;怎么传呢？作为一个顶点的属性的话，它们的量太多了&mdash;&mdash;按一个顶点最多受4个weight影响来计算，那是4个bias+4个pos+4个矩阵=4个float+12个float+48个float(矩阵的上4X3)=64个float，作为顶点属性传入的话这很难让人接受。</p><p style="margin: 0px; padding: 0px">我们要从矩阵空间的角度去考虑。空间变换（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6629  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6629'" tppabs="http://www.zwqxin.com/archives/opengl/opengl-matrix-what.html" target="_blank">乱弹OpenGL中的矩阵变换(上)</a>] /[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6627  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6627'" tppabs="http://www.zwqxin.com/archives/opengl/opengl-matrix-what-2.html" target="_blank">乱弹OpenGL中的矩阵变换(下)</a>] ）在这里起着一个比纯数学公式变换更重要的作用，因为很难通过数学证明的方式把上式变换成以下将提及的另一个公式。</p><p style="margin: 0px; padding: 0px">我们最终想要的东西是什么？没错，该模型每一帧所有顶点在&rdquo;模型空间&ldquo;下的坐标位置！（至于把模型空间的点转换到世界空间乃至裁剪空间这些并不是模型导入和自身渲染阶段要处理的事情，虽然同样要在vertex shader里完成。）这个模型坐标系下的坐标如果不在CPU进行所有帧的计算，那还有一个选择，就是从别的坐标系转换过来！我们手头上有哪个坐标系下的模型坐标呢？还记得<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6628  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6628'" tppabs="http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-1.html" target="_blank">上篇</a>中提及的BindPose姿态吗？在那个姿态下的顶点坐标都是可以在无须动画信息的情况下计算出来的&mdash;&mdash;它也是模型坐标系下的坐标，但对应bindpose的姿态，不妨给予它一个别名&mdash;&mdash;bindpose坐标系下的坐标。好了，每一帧，我们手上有一个bindpose坐标系下的顶点位置，以及该帧各骨骼节点（Joint）的变换矩阵M<span style="font-size: 12px"><sub>J</sub><sub>-x</sub></span>，我们怎样把它们转换成该帧下的顶点位置（<span class="attribute">VertexPos</span>）呢？</p><p style="margin: 0px; padding: 0px">还有法宝！bindpose坐标系下的Joint的坐标位置都是经过变换得来的。是的，上篇刚开始谈到md5mesh文件格式的时候引入的M<sub>J-x(bindpose)</sub>！它把对应第x个Joint的weight的位置(weight.pos)转换到bindpose坐标系，那么对于其他东西呢？Joint它自身呢？是的，经过变换后的Joint在其bindpose坐标系下与M<sub>J-x(bindpose)</sub>是等价的（位移和旋转），所以反过来想，变换前的Joint的坐标为（0,0,0）&mdash;&mdash;M<sub>J-x(bindpose)</sub>把第x个joint从它的本地空间（姑且称为joint本地空间）变换到bindpose空间。所以，我们可以直接从每个Joint的角度去观看所有weight，以及与这个Joint有关的顶点。仔细想想，上面的公式中只有Joint的变换矩阵是可变参数，也就是说，只要从joint的角度去看它对应的顶点的话&mdash;&mdash;所有顶点都是静止的，固定的！</p><p style="margin: 0px; padding: 0px">这一点认识摆在我们人体骨骼与皮肤关系上也许更容易直观感受。如此简单却如此重要&mdash;&mdash;任何一帧，对于一个骨骼节点Joint来说，关联的所有顶点的位置都是恒定的&mdash;&mdash;这个位置怎么获得？既然这个位置坐标左乘矩阵M<sub>J-x(bindpose)</sub>进行坐标表换后会变成bindpose下的坐标，那反过来：把bindpose坐标系下的一个顶点VertexPos<sub>bindpose</sub>左乘该变换的逆矩阵M<sub>J-x(bindpose)</sub><sup><sub><span style="font-size: 10px">-1</span></sub></sup>就可以获得了。获得这个位置(VertexPos<sub>J-x</sub>)后，某个动画帧下，左乘该Joint的变换矩阵M<sub>J-x</sub>，就是该帧下该顶点的&rdquo;模型空间&ldquo;下的坐标位置了（上面不提及了bindpose空间也就是一个模型空间嘛）！</p><p style="margin: 0px; padding: 0px">等等！在我们的程序里，一个顶点是通过weight对应至少一个至多四个的Joint的！ 那么这个顶点按上面的法子变换出某帧下的模型空间的坐标岂不是有1~4个？不错，所以对应的weight的比率bias再次对这些坐标进行加权平均，最后得到的就是同时受1~4个Joint影响的顶点的真正模型空间坐标位置：</p><div class="codeText"><div class="codeHead">第二个公式：</div><ol class="dp-cpp"><li class="alt">VertexPos<sup>,</sup>&nbsp;= [(weight[index0].bias *&nbsp;M<sub>J-0</sub>&nbsp;*&nbsp;M<sub>J-0(bindpose)</sub><sup><sub><span style="font-size: 10px">-1</span></sub></sup>&nbsp;) +&nbsp;...&nbsp;+&nbsp;(weight[indexN].bias *&nbsp;M<sub>J-N</sub>&nbsp;*&nbsp;M<sub>J-N(bindpose)</sub><sup><sub><span style="font-size: 10px">-1</span></sub></sup>&nbsp;)]&nbsp;&nbsp;* VertexPos<sub>bindpose &nbsp;</sub>&nbsp;&nbsp;&nbsp;&nbsp;<br /></li></ol></div><p style="margin: 0px; padding: 0px">怎么样？有没有兴趣来证明一个第二个式子等价于第一个式子（VertexPos<sup>,</sup>&nbsp; =&nbsp;VertexPos）？</p><p style="margin: 0px; padding: 0px">在第二个式子里，所有bindpose变量都是可以预先计算好的，bias也是固定的，对应哪些joint、多少个joint，这都是固定的。而且 VertexPos<span style="font-size: 12px"><sub>bindpos</sub><sub>e</sub></span>（一个vec3）、bias（1~4个float，可用一个vec4表示）、jointIndex（1~4个int，也可以用一个vec4表示）、jointCount（1个int），这些都可以作为顶点属性attribute传入GLSL shader（现在知道<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6628  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6628'" tppabs="http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-1.html" target="_blank">上篇</a>中末尾数据结构那三个特殊的VBO是干什么的了吧）；不妨设M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>=&nbsp;M<sub>J-x</sub>&nbsp;*&nbsp;M<sub>J-x(bindpose)</sub><sup><sub><span style="font-size: 10px">-1</span></sub></sup>，骨骼节点有多少个它就有多少个，跟顶点数无关，而且需要每帧更新（直接算出M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>）&mdash;&mdash;这样的变量（M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>）必然要以uniform的形式传入GLSL shader。</p><p style="margin: 0px; padding: 0px">至今，骨骼的顶点蒙皮（vertex-skinning）的大貌已经揭示完成了。</p><p style="margin: 0px; padding: 0px">下面看看怎么把Joint的变换矩阵（说的是M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>）向vertex-shader传输。简单的，大致有四种方法：</p><ol><li>Uniform Array</li><li>Uniform Buffer Object</li><li>2D Texture</li><li>Texture Buffer Object</li></ol><p style="margin: 0px; padding: 0px">其中最直接的当然是Uniform Array啦，定义一个uniform mat4 matJoint[MAX_JOINT]，然后把各M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>直接连成一个数组给传入GLSL就OK了。但问题是GLSL中uniform的个数有限制，如果骨骼节点太多就会超出这个限制了，而且你也不好定MAX_JOINT这个const值。Uniform Buffer Object（UBO）能够解决这个限制，但鉴于不熟，我就不多说。不知道有没有人看过我之前的一篇文章【[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/shaderglsl/read.php?6626  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/shaderglsl/read.php?6626'" tppabs="http://www.zwqxin.com/archives/shaderglsl/glsl-vertex-texture-fetch.html" target="_blank">Vertex Texture Fetch 顶点纹理拾取</a>] 】，里面提到一个很重要的观点：<strong>纹理=数组</strong>。没错，我们可以直接把数据放进一张纹理里，然后让shader用sampler去检索出所需要的数据啊！只不过要建立纹理，且纹理的检索有点麻烦（纹素的原点在其中心）也可能会出一丁点精度问题（我觉得可以忽略这些小问题啦）。我这里主要介绍一种新的方式：Texture Buffer Object（TBO）。</p><p style="margin: 0px; padding: 0px">TBO是又一种Buffer Object，跟VBO（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6625  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6625'" tppabs="http://www.zwqxin.com/archives/opengl/learn-vbo.html" target="_blank">学一学，VBO</a>] ）、FBO（[<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6624  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6624'" tppabs="http://www.zwqxin.com/archives/opengl/learn-fbo.html" target="_blank">学一学，FBO</a>] ）、PBO一样，是一种对Buufer Object的使用方式（另外一提的是Uniform Buffer Object[UBO]也是）。但是它事实上十分简单&mdash;&mdash;它的目的是让一个Buffer Objext内的数据(buffer data)能够被shader作为一个纹理般读取。注意这个纹理只可能是一维的，而且不可以有mipmap、filter，不然是不可能映射到buffer object的buffer里的。</p><div class="codeText"><div class="codeHead">C++代码 初始化</div><ol class="dp-cpp"><li class="alt">glGenBuffers(1,&nbsp;&amp;pModel-&gt;JointMatInfo.nBufferObject);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">glBindBuffer(GL_TEXTURE_BUFFER,&nbsp;pModel-&gt;JointMatInfo.nBufferObject);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">glBufferData(GL_TEXTURE_BUFFER,&nbsp;MATRIX4X3ELEMS&nbsp;*&nbsp;nJointCount&nbsp;*&nbsp;<span class="keyword">sizeof</span>(GLfloat),&nbsp;NULL,&nbsp;GL_STREAM_DRAW);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">glGenTextures(1,&nbsp;&amp;pModel-&gt;JointMatInfo.nTexHandleJointMat);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">glBindTexture(GL_TEXTURE_BUFFER,&nbsp;pModel-&gt;JointMatInfo.nTexHandleJointMat);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">glTexBuffer(GL_TEXTURE_BUFFER,&nbsp;GL_RGBA32F,&nbsp;pModel-&gt;JointMatInfo.nBufferObject);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">pModel-&gt;JointMatInfo.nTexObjJointMat&nbsp;=&nbsp;GL_TEXTURE1;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">m_pJointMatrixBuffer =&nbsp;<span class="keyword">new</span>&nbsp;GLfloat[MATRIX4X3ELEMS&nbsp;*&nbsp;nJointCount];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">memset(m_pJointMatrixBuffer,&nbsp;0,&nbsp;MATRIX4X3ELEMS&nbsp;*&nbsp;nJointCount&nbsp;*&nbsp;<span class="keyword">sizeof</span>(GLfloat));&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">初始化TBO很简单，也就是建立一个Buffer Object（数据可以为空可以不为空，反正后面每帧我都会重新填写数据，初始化时数据参量为NULL即可），建立一个纹理，然后用一个glTexBuffer的函数关联两者即可（注意所有的target需要一致为GL_TEXTURE_BUFFER）。m_pJointMatrixBuffer是为了后面填充数据准备的，因为M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>只有上面4列3行有实际意义（尾行一定是0,0,0,1的），所以可以趁机传输少一点数据，在shader里再还原成mat4。</p><div class="codeText"><div class="codeHead">C++代码 渲染部分</div><ol class="dp-cpp"><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;=&nbsp;mtInterpolated.mt[0];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;1]&nbsp;=&nbsp;mtInterpolated.mt[4];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;2]&nbsp;=&nbsp;mtInterpolated.mt[8];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;3]&nbsp;=&nbsp;mtInterpolated.mt[12];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;4]&nbsp;=&nbsp;mtInterpolated.mt[1];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;5]&nbsp;=&nbsp;mtInterpolated.mt[5];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;6]&nbsp;=&nbsp;mtInterpolated.mt[9];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;7]&nbsp;=&nbsp;mtInterpolated.mt[13];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;8]&nbsp;=&nbsp;mtInterpolated.mt[2];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;&nbsp;9]&nbsp;=&nbsp;mtInterpolated.mt[6];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;10]&nbsp;=&nbsp;mtInterpolated.mt[10];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pJointMatrixBuffer[MATRIX4X3ELEMS&nbsp;*&nbsp;i&nbsp;+&nbsp;11]&nbsp;= mtInterpolated.mt[14];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glBindBuffer(GL_TEXTURE_BUFFER,&nbsp;m_ModelMD5.JointMatInfo.nBufferObject);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glBufferData(GL_TEXTURE_BUFFER,&nbsp;MATRIX4X3ELEMS&nbsp;*&nbsp;nJointCount&nbsp;*&nbsp;<span class="keyword">sizeof</span>(GLfloat),&nbsp;NULL,&nbsp;GL_STREAM_DRAW);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glBufferSubData(GL_TEXTURE_BUFFER,&nbsp;0,&nbsp;MATRIX4X3ELEMS&nbsp;*&nbsp;nJointCount&nbsp;*&nbsp;<span class="keyword">sizeof</span>(GLfloat),&nbsp;m_pJointMatrixBuffer);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glBindBuffer(GL_TEXTURE_BUFFER,&nbsp;NULL);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glActiveTexture(m_ModelMD5.JointMatInfo.nTexObjJointMat);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glBindTexture(GL_TEXTURE_BUFFER,&nbsp;m_ModelMD5.JointMatInfo.nTexHandleJointMat);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">渲染部分首先就是更新当前的TBO数据了，其中&nbsp;mtInterpolated.mt就是M<span style="font-size: 12px"><sub>J-x</sub><sup>,</sup></span>了。更新TBO只是纯粹更新那个Buffer Object而已，跟纹理无关（至于针对buffer object数据传输的优化方式，诸如stream update啦使用带参的glMapBufferRange啦，我就先不进行喽）。然后在VBO渲染前把纹理启用并传输给shader就可以了（注意依然是GL_TEXTURE_BUFFER）。vertex-shader进行顶点蒙皮的代码如下：</p><div class="codeText"><div class="codeHead">ModelVertexSkinningTB.vert&nbsp;&nbsp;&nbsp;&nbsp; - Texture Buffer Object方式的vertex-skinning：</div><ol class="dp-cpp"><li class="alt"><span class="preprocessor">#version&nbsp;140</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">in&nbsp;vec3&nbsp;attrib_position;&nbsp;&nbsp;</li><li>in&nbsp;vec3&nbsp;attrib_normal;&nbsp;&nbsp;</li><li class="alt">in&nbsp;vec2&nbsp;attrib_texcoord;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">in&nbsp;vec4&nbsp;&nbsp;attrib_weightbias;&nbsp;&nbsp;</li><li>in&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;attrib_weightcount;&nbsp;&nbsp;</li><li class="alt">in&nbsp;vec4&nbsp;&nbsp;attrib_weightjoint;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">uniform&nbsp;samplerBuffer&nbsp;jointtex;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">...&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">void</span>&nbsp;main(<span class="keyword">void</span>)&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nWeightCount&nbsp;=&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(attrib_weightcount);&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;attribPos&nbsp;=&nbsp;vec4(attrib_position,&nbsp;1.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;mat4&nbsp;mtRes&nbsp;=&nbsp;mat4(1.0);<span class="comment">//mat4(0.0)</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>(nWeightCount&nbsp;&gt;&nbsp;0)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes&nbsp;=&nbsp;mat4(0.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>(<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;nWeightCount;&nbsp;++i)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes[0]&nbsp;+= texelFetch(jointtex,&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(3&nbsp;*&nbsp;attrib_weightjoint[i])&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes[1]&nbsp;+=&nbsp;texelFetch(jointtex,&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(3&nbsp;*&nbsp;attrib_weightjoint[i])&nbsp;+&nbsp;1)&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes[2]&nbsp;+=&nbsp;texelFetch(jointtex,&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(3&nbsp;*&nbsp;attrib_weightjoint[i])&nbsp;+&nbsp;2)&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes[3]&nbsp;=&nbsp;vec4(0.0,&nbsp;0.0,&nbsp;0.0,&nbsp;1.0);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;mat4&nbsp;mtInvRes&nbsp;=&nbsp;transpose(mtRes);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;resPos&nbsp;=&nbsp;mtInvRes&nbsp;*&nbsp;attribPos;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;resPos&nbsp;=&nbsp;resPos&nbsp;/&nbsp;resPos.w;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;....&nbsp;&nbsp;</li><li>&#125;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px">注意sampler名为samplerBuffer，一维纹理数据只能通过texelFetch去取。因为在纹理里是(RGBA)(RGBA)...这样的结构，所以对于一个骨骼节点Joint的矩阵，3个fetch就取够12个矩阵元素了。最后再给出Uniform Array和2D Texture方式的GLSL顶点shader的代码片段吧：</p><div class="codeText"><div class="codeHead">ModelVertexSkinningUA.vert&nbsp;&nbsp;&nbsp;&nbsp; - Uniform Array方式的vertex-skinning：</div><ol class="dp-cpp"><li class="alt"><span class="preprocessor">#define&nbsp;MAX_JOINT&nbsp;71</span>&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">uniform&nbsp;mat4&nbsp;jointMatrix[MAX_JOINT];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">void</span>&nbsp;main(<span class="keyword">void</span>)&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nWeightCount&nbsp;=&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(attrib_weightcount);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;attribPos&nbsp;=&nbsp;vec4(attrib_position,&nbsp;1.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;mat4&nbsp;mtRes&nbsp;=&nbsp;mat4(1.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>(nWeightCount&nbsp;&gt;&nbsp;0)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes&nbsp;=&nbsp;mat4(0.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>(<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;nWeightCount;&nbsp;++i)&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtRes&nbsp;+=&nbsp;jointMatrix[<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(attrib_weightjoint[i])]&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;resPos&nbsp;=&nbsp;mtRes&nbsp;*&nbsp;attribPos;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;resPos&nbsp;=&nbsp;resPos&nbsp;/&nbsp;resPos.w;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;....&nbsp;&nbsp;</li><li>&#125;&nbsp;&nbsp;</li></ol></div><div class="codeText"><div class="codeHead">ModelVertexSkinningTD.vert&nbsp;&nbsp;&nbsp;&nbsp; - 2D Texture方式的vertex-skinning：</div><ol class="dp-cpp"><li class="alt">uniform&nbsp;sampler2D&nbsp;jointtex;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt"><span class="keyword">void</span>&nbsp;main(<span class="keyword">void</span>)&nbsp;&nbsp;</li><li>&#123;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;nWeightCount&nbsp;=&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>(attrib_weightcount);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;attribPos&nbsp;=&nbsp;vec4(attrib_position,&nbsp;1.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;ivec2&nbsp;jointTexSize&nbsp;=&nbsp;textureSize(jointtex,&nbsp;0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;fTexcoordStepU&nbsp;=&nbsp;1.0&nbsp;/&nbsp;3.0;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: #2e8b57" class="datatypes">float</span>&nbsp;fTexcoordStepV&nbsp;=&nbsp;1.0&nbsp;/&nbsp;jointTexSize.y;&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;vec4&nbsp;vMtX&nbsp;=&nbsp;vec4(0.0);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;vMtY&nbsp;=&nbsp;vec4(0.0);&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;vec4&nbsp;vMtZ&nbsp;=&nbsp;vec4(0.0);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;<span class="keyword">for</span>(<span style="font-weight: bold; color: #2e8b57" class="datatypes">int</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;nWeightCount;&nbsp;++i)&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&#123;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMtX&nbsp;+=&nbsp;texture2D(jointtex,&nbsp;vec2(fTexcoordStepU&nbsp;*&nbsp;0.5,&nbsp;(attrib_weightjoint[i]&nbsp;+&nbsp;0.5)&nbsp;*&nbsp;fTexcoordStepV))&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMtY&nbsp;+=&nbsp;texture2D(jointtex,&nbsp;vec2(fTexcoordStepU&nbsp;*&nbsp;1.5,&nbsp;(attrib_weightjoint[i]&nbsp;+&nbsp;0.5)&nbsp;*&nbsp;fTexcoordStepV))&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMtZ&nbsp;+=&nbsp;texture2D(jointtex,&nbsp;vec2(fTexcoordStepU&nbsp;*&nbsp;2.5,&nbsp;(attrib_weightjoint[i]&nbsp;+&nbsp;0.5)&nbsp;*&nbsp;fTexcoordStepV))&nbsp;*&nbsp;attrib_weightbias[i];&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;&#125;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;vec4&nbsp;resPos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;resPos.x&nbsp;=&nbsp;dot(vMtX,&nbsp;attribPos);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;resPos.y&nbsp;=&nbsp;dot(vMtY,&nbsp;attribPos);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;resPos.z&nbsp;=&nbsp;dot(vMtZ,&nbsp;attribPos);&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;resPos.w&nbsp;=&nbsp;1.0;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;</li><li class="alt">&nbsp;&nbsp;&nbsp;....&nbsp;&nbsp;</li><li>&#125;&nbsp;&nbsp;</li></ol></div><p style="margin: 0px; padding: 0px"><a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://www.zwqxin.com/archives/opengl/read.php?6623  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.zwqxin.com/archives/opengl/read.php?6623'" tppabs="http://www.zwqxin.com/archives/opengl/model-md5-format-import-animation-2.html" target="_blank"><img style="border: none; max-width: 100%" src="read-2.php-6622.jpg" tppabs="https://r9vrmq.dm1.livefilestore.com/y1pVCQcEpp6hp2HOkw0OSIaSMfgLvXQovtptnX_DvcgGCZ0ClHk3vBf4LrODkSJOtFJOiJaMpXVnGEiG6jm17CYY_JTiFUpDnc0/Snapmd520120126drs.jpg" border="0" alt="MD5模型的格式、导入与顶点蒙皮式骨骼动画" /></a></p></div>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6916.htm" tppabs="http://i.renjihe.com/blog/read.php?6916">opengl加载obj文件glm.c库中部分函数分析</a> <span id="starid6916"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:09 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6916.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6916#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6916");'>引用(0)</a> , <a href="read.php-6916.htm" tppabs="http://i.renjihe.com/blog/read.php?6916">阅读(2)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6916" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>本人在学习opengl做项目时，需要设计三维人脸模型。于是寻找多种方案。求得用opengl读取OBJ模型文件，并进行纹理修饰这一解决方案。在使用中用到了glm.c的库。主要用到如下几个函数，并进行了分析。希望能给大家有所帮助，如果分析中有不恰当的地方，望批评指正。建议花点时间看看</strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">（1）<span style="font-family: SimHei">obj文件的读取函数</span><span style="padding: 0px; margin: 0px; font-size: 12pt"><span style="font-family: SimHei"><br /></span></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">GLMmodel*&nbsp;<br />glmReadOBJ(char* filename)<br />&#123;<br />&nbsp; &nbsp; GLMmodel* model;<br />&nbsp; &nbsp; FILE* file;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* open the file */<br />&nbsp; &nbsp; file = fopen(filename, &quot;r&quot;);<br />&nbsp; &nbsp; if (!file) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; fprintf(stderr, &quot;glmReadOBJ() failed: can't open data file &#92;&quot;%s&#92;&quot;.&#92;n&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename);<br />&nbsp; &nbsp; &nbsp; &nbsp; exit(1);<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* allocate a new model */<br />&nbsp; &nbsp; model = (GLMmodel*)malloc(sizeof(GLMmodel));<br />&nbsp; &nbsp; model-&gt;pathname &nbsp; &nbsp;= strdup(filename);//模型文件和材质库的路径<br />&nbsp; &nbsp; model-&gt;mtllibname &nbsp; &nbsp;= NULL;//材质库名<br />&nbsp; &nbsp; model-&gt;numvertices &nbsp; = 0;//顶点数<br />&nbsp; &nbsp; model-&gt;vertices &nbsp; &nbsp;= NULL;//储存顶点的向量<br />&nbsp; &nbsp; model-&gt;numnormals &nbsp; &nbsp;= 0;//模型法向数<br />&nbsp; &nbsp; model-&gt;normals &nbsp; &nbsp; = NULL;//储存法向的向量<br />&nbsp; &nbsp; model-&gt;numtexcoords &nbsp;= 0;//纹理坐标数<br />&nbsp; &nbsp; model-&gt;texcoords &nbsp; &nbsp; &nbsp; = NULL;//储存纹理坐标的向量<br />&nbsp; &nbsp; model-&gt;numfacetnorms = 0;//规则平面数<br />&nbsp; &nbsp; model-&gt;facetnorms &nbsp; &nbsp;= NULL;//储存规则平面的向量<br />&nbsp; &nbsp; model-&gt;numtriangles &nbsp;= 0;//三角形数<br />&nbsp; &nbsp; model-&gt;triangles &nbsp; &nbsp; &nbsp; = NULL;//储存三角形的向量<br />&nbsp; &nbsp; model-&gt;nummaterials &nbsp;= 0;//材质数<br />&nbsp; &nbsp; model-&gt;materials &nbsp; &nbsp; &nbsp; = NULL;//储存材质的向量<br />&nbsp; &nbsp; model-&gt;numgroups &nbsp; &nbsp; &nbsp; = 0;//图元组数<br />&nbsp; &nbsp; model-&gt;groups &nbsp; &nbsp; &nbsp;= NULL;//储存图元组的向量<br />&nbsp; &nbsp; model-&gt;position[0] &nbsp; = 0.0;//模型的位置<br />&nbsp; &nbsp; model-&gt;position[1] &nbsp; = 0.0;<br />&nbsp; &nbsp; model-&gt;position[2] &nbsp; = 0.0;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* make a first pass through the file to get a count of the number<br />&nbsp; &nbsp; of vertices, normals, texcoords &amp; triangles */</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><br />&nbsp; &nbsp; glmFirstPass(model, file);//只是获得v（顶点）、vt（贴图坐标）、vn（法线）、f（面）等数量<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* allocate memory 开辟数据空间*/<br />&nbsp; &nbsp; model-&gt;vertices = (GLfloat*)malloc(sizeof(GLfloat) *<br />&nbsp; &nbsp; &nbsp; &nbsp; 3 * (model-&gt;numvertices + 1));<br />&nbsp; &nbsp; model-&gt;triangles = (GLMtriangle*)malloc(sizeof(GLMtriangle) *<br />&nbsp; &nbsp; &nbsp; &nbsp; model-&gt;numtriangles);<br />&nbsp; &nbsp; if (model-&gt;numnormals) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; model-&gt;normals = (GLfloat*)malloc(sizeof(GLfloat) *<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 * (model-&gt;numnormals + 1));<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (model-&gt;numtexcoords) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; model-&gt;texcoords = (GLfloat*)malloc(sizeof(GLfloat) *<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 * (model-&gt;numtexcoords + 1));<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* rewind to beginning of file and read in the data this pass */<br />&nbsp; &nbsp; rewind(file);//将文件内部的位置指针重新指向一个流（数据流/文件）的开头<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; glmSecondPass(model, file);//读取v（顶点）、vt（贴图坐标）、vn（法线）、f（面）等的数据值<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* close the file */<br />&nbsp; &nbsp; fclose(file);<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; return model;<br />&#125;<br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">（2）<span style="padding: 0px; margin: 0px; font-size: 12pt"><span style="font-family: SimHei">/</span></span><span style="padding: 0px; margin: 0px; font-size: 12pt"><span style="font-family: SimHei">按mode指定模式使用当前的OPENGL绘制上下文（context）绘制模型函数<br /></span></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="padding: 0px; margin: 0px; font-size: 12pt"><span style="font-family: SimHei">//mode指定写入方式，此参数为取或（&ldquo;&#124;&rdquo;）的位联合：<br />//GLM_NONE<span style="padding: 0px; margin: 0px">&nbsp;&nbsp;&nbsp; -&nbsp;</span>只按顶点处理<br />//GLM_FLAT<span style="padding: 0px; margin: 0px">&nbsp;&nbsp;&nbsp; -&nbsp;</span>按面计算法向<br />//GLM_SMOOTH&nbsp;-&nbsp;按顶点计算法向<br />//GLM_TEXTURE -&nbsp;包含纹理座标<br />//GLM_COLOR<span style="padding: 0px; margin: 0px">&nbsp;&nbsp;&nbsp; -&nbsp;</span>只包含颜色信息（纯色材质）<br />//GLM_MATERIAL -&nbsp;包含材质信息<br />//其中GLM_FLAT和GLM_SMOOTH不能同时指定<br />//GLM_COLOR和GLM_MATERIAL也不能同时指定<br /><br /></span></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">GLvoid<br />glmDraw(GLMmodel* model, GLuint mode)//画出obj模型<br />&#123;<br />&nbsp; &nbsp; static GLuint i;<br />&nbsp; &nbsp; static GLMgroup* group;<br />&nbsp; &nbsp; static GLMtriangle* triangle;<br />&nbsp; &nbsp; static GLMmaterial* material;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; assert(model);<br />&nbsp; &nbsp; assert(model-&gt;vertices);<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* do a bit of warning */<br />&nbsp; &nbsp; if (mode &amp; GLM_FLAT &amp;&amp; !model-&gt;facetnorms) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: flat render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;with no facet normals defined.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_FLAT;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_SMOOTH &amp;&amp; !model-&gt;normals) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: smooth render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;with no normals defined.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_SMOOTH;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_TEXTURE &amp;&amp; !model-&gt;texcoords) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: texture render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;with no texture coordinates defined.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_TEXTURE;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_FLAT &amp;&amp; mode &amp; GLM_SMOOTH) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: flat render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;and smooth render mode requested (using smooth).&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_FLAT;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_COLOR &amp;&amp; !model-&gt;materials) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: color render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;with no materials defined.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_COLOR;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_MATERIAL &amp;&amp; !model-&gt;materials) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: material render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;with no materials defined.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_MATERIAL;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_COLOR &amp;&amp; mode &amp; GLM_MATERIAL) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;glmDraw() warning: color and material render mode requested &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;using only material mode.&#92;n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; mode &amp;= ~GLM_COLOR;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; if (mode &amp; GLM_COLOR)<br />&nbsp; &nbsp; &nbsp; &nbsp; glEnable(GL_COLOR_MATERIAL);<br />&nbsp; &nbsp; else if (mode &amp; GLM_MATERIAL)<br />&nbsp; &nbsp; &nbsp; &nbsp; glDisable(GL_COLOR_MATERIAL);<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* perhaps this loop should be unrolled into material, color, flat,<br />&nbsp; &nbsp; &nbsp; &nbsp;smooth, etc. loops? &nbsp;since most cpu's have good branch prediction<br />&nbsp; &nbsp; &nbsp; &nbsp;schemes (and these branches will always go one way), probably<br />&nbsp; &nbsp; &nbsp; &nbsp;wouldn't gain too much? &nbsp;*/<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; group = model-&gt;groups;<br />&nbsp; &nbsp; while (group) &#123;//mode若有GLM_MATERIAL，则配置材质属性<br />&nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_MATERIAL) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; material = &amp;model-&gt;materials[group-&gt;material];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, material-&gt;ambient);//材质属性中的环境光<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, material-&gt;diffuse);//材质属性中的散射光<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, material-&gt;specular);//材质属性中的镜面反射光<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, material-&gt;shininess);//材质属性中的发射光<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_COLOR) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glColor3fv(material-&gt;diffuse);<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; glBegin(GL_TRIANGLES);//绘制三角形<br />&nbsp; &nbsp; &nbsp; &nbsp; for (i = 0; i &lt; group-&gt;numtriangles; i++) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; triangle = &amp;T(group-&gt;triangles[i]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_FLAT)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glNormal3fv(&amp;model-&gt;facetnorms[3 * triangle-&gt;findex]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_SMOOTH)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glNormal3fv(&amp;model-&gt;normals[3 * triangle-&gt;nindices[0]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_TEXTURE)//若要进行纹理修饰，则mode需要有GLM_TEXTURE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glTexCoord2fv(&amp;model-&gt;texcoords[2 * triangle-&gt;tindices[0]]);//指定需绘制三角形第一个点的纹理坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glVertex3fv(&amp;model-&gt;vertices[3 * triangle-&gt;vindices[0]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_SMOOTH)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glNormal3fv(&amp;model-&gt;normals[3 * triangle-&gt;nindices[1]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_TEXTURE)//若要进行纹理修饰，则mode需要有GLM_TEXTURE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glTexCoord2fv(&amp;model-&gt;texcoords[2 * triangle-&gt;tindices[1]]);//指定需绘制三角形第二个点的纹理坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glVertex3fv(&amp;model-&gt;vertices[3 * triangle-&gt;vindices[1]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_SMOOTH)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glNormal3fv(&amp;model-&gt;normals[3 * triangle-&gt;nindices[2]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (mode &amp; GLM_TEXTURE)//若要进行纹理修饰，则mode需要有GLM_TEXTURE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glTexCoord2fv(&amp;model-&gt;texcoords[2 * triangle-&gt;tindices[2]]);//指定需绘制三角形第三个点的纹理坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glVertex3fv(&amp;model-&gt;vertices[3 * triangle-&gt;vindices[2]]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; glEnd();<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; group = group-&gt;next;<br />&nbsp; &nbsp; &#125;<br />&#125;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>(3)glmFirstPass(model, file);//只是获得v（顶点）、vt（贴图坐标）、vn（法线）、f（面）等数量</strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>(再此不做分析了，挺简单的)</strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>(4)glmSecondPass(model, file);//读取v（顶点）、vt（贴图坐标）、vn（法线）、f（面）等的数据值</strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">static GLvoid<br />glmSecondPass(GLMmodel* model, FILE* file)&nbsp;<br />&#123;<br />&nbsp; &nbsp; GLuint numvertices; &nbsp; &nbsp; &nbsp; &nbsp;/* number of vertices in model *///顶点数<br />&nbsp; &nbsp; GLuint numnormals; &nbsp; &nbsp; &nbsp; &nbsp; /* number of normals in model *///模型法向数<br />&nbsp; &nbsp; GLuint numtexcoords; &nbsp; &nbsp; &nbsp; /* number of texcoords in model *///模型法向数<br />&nbsp; &nbsp; GLuint numtriangles; &nbsp; &nbsp; &nbsp; /* number of triangles in model *///三角形数<br />&nbsp; &nbsp; GLfloat* vertices; &nbsp; &nbsp; &nbsp; &nbsp; /* array of vertices &nbsp;*///储存顶点的向量<br />&nbsp; &nbsp; GLfloat* normals; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/* array of normals *///储存法向的向量<br />&nbsp; &nbsp; GLfloat* texcoords; &nbsp; &nbsp; &nbsp; &nbsp;/* array of texture coordinates *///储存纹理坐标的向量<br />&nbsp; &nbsp; GLMgroup* group; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* current group pointer *///储存图元组的向量<br />&nbsp; &nbsp; GLuint material; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* current material */<br />&nbsp; &nbsp; int v, n, t;<br />&nbsp; &nbsp; char buf[128];<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* set the pointer shortcuts */<br />&nbsp; &nbsp; vertices &nbsp; &nbsp; &nbsp; = model-&gt;vertices;<br />&nbsp; &nbsp; normals &nbsp; &nbsp;= model-&gt;normals;<br />&nbsp; &nbsp; texcoords &nbsp; &nbsp;= model-&gt;texcoords;<br />&nbsp; &nbsp; group &nbsp; &nbsp; &nbsp;= model-&gt;groups;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; /* on the second pass through the file, read all the data into the<br />&nbsp; &nbsp; allocated arrays */<br />&nbsp; &nbsp; numvertices = numnormals = numtexcoords = 1;<br />&nbsp; &nbsp; numtriangles = 0;<br />&nbsp; &nbsp; material = 0;<br />&nbsp; &nbsp; while(fscanf(file, &quot;%s&quot;, buf) != EOF) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; switch(buf[0]) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; case '#': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* comment */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* eat up rest of line */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fgets(buf, sizeof(buf), file);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; case 'v': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* v, vn, vt */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch(buf[1]) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case '&#92;0': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/* vertex */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%f %f %f&quot;,&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;vertices[3 * numvertices + 0], //第numvertices个顶点的x轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;vertices[3 * numvertices + 1], //第numvertices个顶点的y轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;vertices[3 * numvertices + 2]);//第numvertices个顶点的z轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numvertices++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'n': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* normal */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%f %f %f&quot;,&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;normals[3 * numnormals + 0],//第numnormals个顶点法向量的x轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;normals[3 * numnormals + 1], //第numnormals个顶点法向量的y轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;normals[3 * numnormals + 2]);//第numnormals个顶点法向量的z轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numnormals++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 't': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* texcoord */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%f %f&quot;,&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;texcoords[2 * numtexcoords + 0],//第numtexcoords个贴图坐标的x轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;texcoords[2 * numtexcoords + 1]);//第numtexcoords个贴图坐标的y轴坐标<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtexcoords++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'u':<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fgets(buf, sizeof(buf), file);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf(buf, &quot;%s %s&quot;, buf, buf);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;material = material = glmFindMaterial(model, buf);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'g': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* group */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* eat up rest of line */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fgets(buf, sizeof(buf), file);<br />#if SINGLE_STRING_GROUP_NAMES<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf(buf, &quot;%s&quot;, buf);<br />#else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buf[strlen(buf)-1] = '&#92;0'; &nbsp;/* nuke '&#92;n' */<br />#endif<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group = glmFindGroup(model, buf);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;material = material;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'f': &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* face */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v = n = t = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%s&quot;, buf);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* can be one of %d, %d//%d, %d/%d, %d/%d/%d %d//%d */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (strstr(buf, &quot;//&quot;)) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* v//n */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf(buf, &quot;%d//%d&quot;, &amp;v, &amp;n);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[0] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d//%d&quot;, &amp;v, &amp;n);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[1] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d//%d&quot;, &amp;v, &amp;n);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[2] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(fscanf(file, &quot;%d//%d&quot;, &amp;v, &amp;n) &gt; 0) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = T(numtriangles-1).vindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[0] = T(numtriangles-1).nindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = T(numtriangles-1).vindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[1] = T(numtriangles-1).nindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[2] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125; else if (sscanf(buf, &quot;%d/%d/%d&quot;, &amp;v, &amp;t, &amp;n) == 3) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* v/t/n */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[0] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[0] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d/%d/%d&quot;, &amp;v, &amp;t, &amp;n);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[1] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[1] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d/%d/%d&quot;, &amp;v, &amp;t, &amp;n);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[2] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[2] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(fscanf(file, &quot;%d/%d/%d&quot;, &amp;v, &amp;t, &amp;n) &gt; 0) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = T(numtriangles-1).vindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[0] = T(numtriangles-1).tindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[0] = T(numtriangles-1).nindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = T(numtriangles-1).vindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[1] = T(numtriangles-1).tindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[1] = T(numtriangles-1).nindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[2] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).nindices[2] = n &lt; 0 ? n + numnormals : n;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125; else if (sscanf(buf, &quot;%d/%d&quot;, &amp;v, &amp;t) == 2) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* v/t */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[0] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d/%d&quot;, &amp;v, &amp;t);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[1] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d/%d&quot;, &amp;v, &amp;t);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[2] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(fscanf(file, &quot;%d/%d&quot;, &amp;v, &amp;t) &gt; 0) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = T(numtriangles-1).vindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[0] = T(numtriangles-1).tindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = T(numtriangles-1).vindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[1] = T(numtriangles-1).tindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).tindices[2] = t &lt; 0 ? t + numtexcoords : t;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125; else &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* v */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf(buf, &quot;%d&quot;, &amp;v);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d&quot;, &amp;v);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fscanf(file, &quot;%d&quot;, &amp;v);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(fscanf(file, &quot;%d&quot;, &amp;v) &gt; 0) &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[0] = T(numtriangles-1).vindices[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[1] = T(numtriangles-1).vindices[2];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T(numtriangles).vindices[2] = v &lt; 0 ? v + numvertices : v;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; group-&gt;triangles[group-&gt;numtriangles++] = numtriangles;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numtriangles++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* eat up rest of line */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fgets(buf, sizeof(buf), file);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &#125;<br />&nbsp;&nbsp;<br />#if 0<br />&nbsp; /* announce the memory requirements */<br />&nbsp; printf(&quot; Memory: %d bytes&#92;n&quot;,<br />&nbsp; &nbsp; &nbsp; numvertices &nbsp;* 3*sizeof(GLfloat) +<br />&nbsp; &nbsp; &nbsp; numnormals &nbsp; * 3*sizeof(GLfloat) * (numnormals ? 1 : 0) +<br />&nbsp; &nbsp; &nbsp; numtexcoords * 3*sizeof(GLfloat) * (numtexcoords ? 1 : 0) +<br />&nbsp; &nbsp; &nbsp; numtriangles * sizeof(GLMtriangle));<br />#endif<br />&#125;</p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Nov</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6915.htm" tppabs="http://i.renjihe.com/blog/read.php?6915">OpenGL加载OBJ模型文件并进行纹理修饰</a> <span id="starid6915"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 22:09 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6915.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6915#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6915");'>引用(0)</a> , <a href="read.php-6915.htm" tppabs="http://i.renjihe.com/blog/read.php?6915">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6915" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>本人在学习opengl做项目时，需要设计三维人脸模型。于是寻找多种方案。求得用opengl读取OBJ模型文件，并进行纹理修饰这一解决方案。在使用中用到了glm库。以下是我对glm.c库的两篇分析。<a style="color: #ca0000; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/a350203223/article/details/read.php?6611  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/a350203223/article/details/read.php?6611'" tppabs="http://blog.csdn.net/a350203223/article/details/10093135" target="_blank">http://blog.csdn.net/a350203223/article/details/10093135</a></strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong><a style="color: #ca0000; text-decoration: none" href="javascript:if(confirm('http://blog.csdn.net/a350203223/article/details/read.php?6608  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/a350203223/article/details/read.php?6608'" tppabs="http://blog.csdn.net/a350203223/article/details/10045665" target="_blank">http://blog.csdn.net/a350203223/article/details/10045665</a></strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong>以下是进行解决读取ＯＢＪ文件并进行纹理修饰的主要程序。希望能给大家有所帮助，如果分析中有不恰当的地方，望批评指正。建议花点时间自己研究，全部程序不会给出。运行结果如下：</strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><span style="font-size: 18px"><strong><img style="border: none; max-width: 100%" src="read-2.php-6607.png" tppabs="http://img.blog.csdn.net/20130820043151156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTM1MDIwMzIyMw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" border="0" /></strong></span></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">void RenderScene(void)<br />&nbsp;&#123;<br />&nbsp;static GLfloat dark[4] = &#123; 0.0, 0.0, 0.0, 1.0 &#125;;<br />&nbsp;&nbsp;&nbsp; static GLfloat normal[4] = &#123; 0.5, 0.5, 0.5, 1.0 &#125;;<br />&nbsp;&nbsp;&nbsp; static GLfloat bright[4] = &#123; 1.0, 1.0, 1.0, 1.0 &#125;;<br />&nbsp;&nbsp;&nbsp; static GLfloat pos[4] = &#123; -0.2588, 0.0, 0.9659, 0.0 &#125;;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; /* Clear the window */<br />&nbsp;&nbsp;&nbsp; glClear(GL_COLOR_BUFFER_BIT &#124; GL_DEPTH_BUFFER_BIT);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; /* Setup for drawing... */<br />&nbsp;&nbsp;&nbsp; glDepthFunc(GL_LEQUAL);<br />&nbsp;&nbsp;&nbsp; glEnable(GL_DEPTH_TEST);<br />&nbsp;&nbsp;&nbsp; glEnable(GL_LIGHTING);<br />&nbsp;&nbsp;&nbsp; glEnable(GL_LIGHT0);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;if (!pmodel) &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pmodel = glmReadOBJ(&quot;obj/刘德华.obj&quot;);//读取OBJ文件&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!pmodel) exit(0);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glmUnitize(pmodel);//单位化模型model并返回缩放比例因子，单位化就是把模型通过平移和缩放变换限制到3维坐标系中点为中心的一个单位正方体区域内<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glmFacetNormals(pmodel);//计算模型面的法向（假定多边形顶点顺序为逆时针）<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glmVertexNormals(pmodel, 90.0);//计算模型的平滑顶点法向，angle参数为平滑交叉的最大角度（角度制）<br />&nbsp;&nbsp;&nbsp; &#125;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;TexBits = LoadDIBitmap(&quot;obj/刘德华.bmp&quot;, &amp;TexInfo);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><br />&nbsp;glPushMatrix();<br />&nbsp;glTranslatef(0, 0, -3);<br />&nbsp;glRotatef(xRot, 1.0f, 0.0f, 0.0f);<br />&nbsp;glRotatef(yRot, 0.0f, 1.0f, 0.0f);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;glDisable(GL_BLEND);<br />&nbsp;&nbsp;&nbsp; glDisable(GL_TEXTURE_2D);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; glLightModelfv(GL_LIGHT_MODEL_AMBIENT, dark);<br />&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_DIFFUSE, dark);<br />&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_SPECULAR, bright);<br />&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_POSITION, pos);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_AMBIENT, dark);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_DIFFUSE, dark);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_SPECULAR, bright);<br />&nbsp;&nbsp;&nbsp; glMateriali(GL_FRONT, GL_SHININESS, 128);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);<br />&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);<br />&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);<br />&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_2D, 0, 3, TexInfo-&gt;bmiHeader.biWidth,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TexInfo-&gt;bmiHeader.biHeight, 0, GL_BGR_EXT,<br />&nbsp;&nbsp; GL_UNSIGNED_BYTE, TexBits);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; glmDraw(pmodel,GLM_SMOOTH &#124;GLM_TEXTURE &#124; GLM_MATERIAL);//先画一个实体&mdash;&mdash;无纹理<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;glBlendFunc(GL_ONE, GL_ONE);<br />&nbsp;&nbsp;&nbsp; glEnable(GL_BLEND);<br />&nbsp;&nbsp;&nbsp; glEnable(GL_TEXTURE_2D);<br />&nbsp;glLightModelfv(GL_LIGHT_MODEL_AMBIENT, normal);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_AMBIENT, normal);<br />&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_DIFFUSE, normal);<br />&nbsp;&nbsp;&nbsp; glLightfv(GL_LIGHT0, GL_SPECULAR, dark);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_AMBIENT, normal);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_DIFFUSE, normal);<br />&nbsp;&nbsp;&nbsp; glMaterialfv(GL_FRONT, GL_SPECULAR, dark);<br />&nbsp;&nbsp;&nbsp; glMateriali(GL_FRONT, GL_SHININESS, 0);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><br />&nbsp;glmDraw(pmodel,GLM_SMOOTH &#124;GLM_TEXTURE &#124; GLM_MATERIAL);//再画一个经纹理修饰和光照处理后的人物<br />&nbsp;glPopMatrix();</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; glutSwapBuffers();<br />&nbsp;&#125;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">4</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6726.htm" tppabs="http://i.renjihe.com/blog/read.php?6726">Bump Mapping综述</a> <span id="starid6726"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 17:11 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6726.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6726#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6726");'>引用(0)</a> , <a href="read.php-6726.htm" tppabs="http://i.renjihe.com/blog/read.php?6726">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6726" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">1、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">What`s Bump Mapping?</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">通过改变几何体表面各点的法线，使本来是平的东西看起来有凹凸的效果，是一种欺骗眼睛的技术：）。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: 宋体">我们知道，如果几何体表面有高低不平的凹凸，那么表面上各点的法线方向就会不同，</span>&nbsp;<span style="font-family: 宋体">那么当光照射到这些点上时，各点光照产生效果就不一样，那么我们最终看到的各点就是凹凸不平的。如果几何体表面是平的，但是各点的法线方向各不相同，当用光照模型进行光照计算后，我们看到最终渲染出来的图会是什么样呢？会看到高低不平的凹凸效果。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">把各象素法线相关的信息存于一张</span><span style="font-family: Verdana, sans-serif">Texture</span><span style="font-family: 宋体">中，各象素的法线就是通过从这张</span><span style="font-family: Verdana, sans-serif">Texture</span><span style="font-family: 宋体">中</span><span style="font-family: Verdana, sans-serif">Sample</span><span style="font-family: 宋体">得到的信息，进行一定的计算得到。根据</span><span style="font-family: Verdana, sans-serif">Sample</span><span style="font-family: 宋体">的方法和计算的方法不同，分为了</span><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">，</span><span style="font-family: Verdana, sans-serif">Normal Mapping,Parallax Mapping,Parallax Occulision Mapping,Relief Mapping</span><span style="font-family: 宋体">等等。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">这种思想最早是由图形学届大牛中的大牛</span><span style="font-family: Verdana, sans-serif">Jim Blinn</span><span style="font-family: 宋体">提出的，后来的</span><span style="font-family: Verdana, sans-serif">Normal Mapping, Parallax Mapping,Parallax Occulision Mapping,Relief Mapping</span><span style="font-family: 宋体">等等</span><span style="font-family: Verdana, sans-serif">,</span><span style="font-family: 宋体">均是基于同样的思想，只是考虑得越来越全面，产生的效果越来越好。</span></p><p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">2、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">Why Bump Mapping?</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: 宋体">如果要在几何体表面表现出凹凸不平的细节，那么在建模的时候就会需要很多的三角面，如果用这样的模型去实时渲染，出来的效果是非常好，只是性能上很有可能无法忍受。</span><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">不需要增加额外的几何信息</span><span style="font-family: Verdana, sans-serif">,</span><span style="font-family: 宋体">就可以达到增强被渲染物体的表面细节的效果，可以大大地提高渲染速度，因此得到了广泛的应用。</span></p><p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">3、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">Bump Mapping</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 24pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-size: 12pt; font-family: 宋体">Jim Blinn</span><span style="font-size: 12pt; font-family: 宋体">在1978发表了一篇名为</span><span style="font-family: 宋体">：&ldquo;</span><span style="font-family: Verdana, sans-serif">Simulation of Wrinkled Surfaces</span><span style="font-family: 宋体">&rdquo;，提出了</span><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">这个东东。</span><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">通过一张</span><span style="font-family: Verdana, sans-serif">Height Map</span><span style="font-family: 宋体">记录各象素点的高度信息，有了高度信息，就可以计算</span><span style="font-family: Verdana, sans-serif">HeightMap</span><span style="font-family: 宋体">中当前象素与周围象素的高度差，这个高度差就代表了各象素的坡度，用这个坡度信息去绕动法向量，得到最终法向量，用于光照计算。坡度越陡，绕动就越大。那么，根据</span><span style="font-family: Verdana, sans-serif">HeighMap</span><span style="font-family: 宋体">如何计算</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">呢？</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: 宋体">设当前象素纹理坐标为</span><span style="font-family: Verdana, sans-serif">(u,v),</span><span style="font-family: 宋体">切线空间中切向量为</span><span style="font-family: Verdana, sans-serif">T(</span><span style="font-family: 宋体">对应纹理空间</span><span style="font-family: Verdana, sans-serif">U</span><span style="font-family: 宋体">方向</span><span style="font-family: Verdana, sans-serif">)</span><span style="font-family: 宋体">，负法线为</span><span style="font-family: Verdana, sans-serif">B</span><span style="font-family: 宋体">（对应纹理空间</span><span style="font-family: Verdana, sans-serif">V</span><span style="font-family: 宋体">方向）</span><span style="font-family: Verdana, sans-serif">,Height(u,v)</span><span style="font-family: 宋体">表示纹理坐标</span><span style="font-family: Verdana, sans-serif">(u,v)</span><span style="font-family: 宋体">处的高度值。</span><span style="font-family: Verdana, sans-serif">&nbsp;&nbsp;&nbsp;</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">du=1/HightmapWidth,dv = 1/Hightmap Height</span><span style="font-family: 宋体">所有计算均是在切线空间，计算公式如下：</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">u_gradient = Height(u-du, v) - Height (u+du, v)&nbsp;</span><span style="font-family: 宋体">（</span><span style="font-family: Verdana, sans-serif">U</span><span style="font-family: 宋体">方向的坡度）</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">v_gradient = Height(u, v-dv) - Height (u, v+dv)&nbsp;(V</span><span style="font-family: 宋体">方向的坡度</span><span style="font-family: Verdana, sans-serif">)</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">New_Normal = Normal + (T * u_gradient) + (B * v_gradient)</span><span style="font-family: 宋体">（</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">是当前象素切线空间的</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">）。用</span><span style="font-family: Verdana, sans-serif">shader</span><span style="font-family: 宋体">片断如下：</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">float u_gradient = tex2D(HeightMap,texcoord+float2(-du,0) )-</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: Verdana, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tex2D(HeightMap,texcoord+float2(+du,0));</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: Verdana, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Verdana, sans-serif">float v_gradient = tex2D(HeightMap,texcoord+float2(-dv,0))-</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: Verdana, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tex2D(HeightMap,texcoord+float2(dv,0));</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: Verdana, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Verdana, sans-serif">float normal = normal + Tangent*u_gradient+Binormal*v_gradient;</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left">&nbsp;</p><p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">4、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">Normal Mapping</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 15.75pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">Normal Mapping</span><span style="font-family: 宋体">也叫做</span><span style="font-family: Verdana, sans-serif">Dot3 Bump Mapping,</span><span style="font-family: 宋体">它也是</span><span style="font-family: Verdana, sans-serif">Bump Mapping</span><span style="font-family: 宋体">的一种，区别在于</span><span style="font-family: Verdana, sans-serif">Normal Mapping</span><span style="font-family: 宋体">技术直接把</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">存到一张</span><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">里面，从</span><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">里面采回来的值就是</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">，不需要像</span><span style="font-family: Verdana, sans-serif">HeightMap</span><span style="font-family: 宋体">那样再经过额外的计算。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 15.75pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">一般都是由</span><span style="font-family: Verdana, sans-serif">HeightMap</span><span style="font-family: 宋体">离线生成，建模工具</span><span style="font-family: Verdana, sans-serif">(</span><span style="font-family: 宋体">如</span><span style="font-family: Verdana, sans-serif">Max,Maya)</span><span style="font-family: 宋体">一般都支持导出模型的</span><span style="font-family: Verdana, sans-serif">NormalMap,</span><span style="font-family: 宋体">一般都是由高模导出</span><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">，在渲染的时候用低模＋高模导出的</span><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">，在</span><span style="font-family: Verdana, sans-serif">PixelShader</span><span style="font-family: 宋体">采样出</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">值，中运用某种光照模型，运行逐象素光照。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 15.75pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: 宋体">值得注意的是，</span><span style="font-family: Verdana, sans-serif">NormalMap</span><span style="font-family: 宋体">存的</span><span style="font-family: Verdana, sans-serif">Normal</span><span style="font-family: 宋体">是基于切线空间的，因此要进行光照计算时，需要把</span><span style="font-family: Verdana, sans-serif">Normal,Light Direction,View direction</span><span style="font-family: 宋体">统一到同一坐标空间中。一般的做法是在</span><span style="font-family: Verdana, sans-serif">VS</span><span style="font-family: 宋体">中把</span><span style="font-family: Verdana, sans-serif">Light Direction</span><span style="font-family: 宋体">和</span><span style="font-family: Verdana, sans-serif">View Direction</span><span style="font-family: 宋体">变换到</span><span style="font-family: Verdana, sans-serif">Tangent Space,</span><span style="font-family: 宋体">通过硬件</span><span style="font-family: Verdana, sans-serif">Rasterrize</span><span style="font-family: 宋体">后，在</span><span style="font-family: Verdana, sans-serif">PS</span><span style="font-family: 宋体">中便统一到切线空间，可以直接计算。</span><span style="font-family: Verdana, sans-serif">Normal Map</span><span style="font-family: 宋体">的</span><span style="font-family: Verdana, sans-serif">Shader</span><span style="font-family: 宋体">网上可以搜出一堆，这里就不贴啦。</span></p><p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">5、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">Parallax Mapping</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: 宋体">当使用</span><span style="font-family: Verdana, sans-serif">Normal Mapping</span><span style="font-family: 宋体">技术时，并没有把视线方向考滤进去。在真实世界中，如果物体表面高低不平，当视线方向不同时，看到的效果也不相同。</span><span style="font-family: Verdana, sans-serif">Parallax Mapping</span><span style="font-family: 宋体">就是为了解决此问题而提出的。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: Verdana, sans-serif">Parallax Mapping</span><span style="font-family: 宋体">首先在一篇名为&ldquo;</span><span style="font-family: Verdana, sans-serif">Detailed Shape Representation with Parallax Mapping</span><span style="font-family: 宋体">&rdquo;的文章中提出。它的基本思想如下图示（本图来自</span><span style="font-family: Verdana, sans-serif">Parallax Mapping with Offset Limiting: A PerPixel Approximation of Uneven Surfaces</span><span style="font-family: 宋体">）。在图示的视线方向，如果表面是真正的凹凸不平的，如</span><span style="font-family: Verdana, sans-serif">real surfacer</span><span style="font-family: 宋体">所示，那么能看到的是</span><span style="font-family: Verdana, sans-serif">B</span><span style="font-family: 宋体">点，因此用于采样法线的正确纹理坐是</span><span style="font-family: Verdana, sans-serif">TB</span><span style="font-family: 宋体">而不是</span><span style="font-family: Verdana, sans-serif">TA</span><span style="font-family: 宋体">。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e" align="left"><span style="font-family: 宋体"><img style="border: 0px" src="read-2.php-5657" tppabs="http://images.cnblogs.com/cnblogs_com/cxrs/PM1.jpg" border="0" width="558" height="271" /></span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 24pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-size: 10.5pt; font-family: 宋体; color: windowtext">因此，我们需要对纹理坐标作偏移，为了满足实时渲染的要求，采用了取近似偏移的方法（如下图示），这种近似的算法已经可以达到比较好的效果。具体的</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif; color: windowtext">offset</span><span style="font-size: 10.5pt; font-family: 宋体; color: windowtext">计算可以参考：&ldquo;</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif">Parallax Mapping with Offset Limiting: A PerPixel</span>&nbsp;<span style="font-size: 10.5pt; font-family: Verdana, sans-serif; color: windowtext">Approximation of Uneven Surface</span><span style="font-size: 10.5pt; font-family: 宋体; color: windowtext">&rdquo;，里面有详细的讲解。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-size: 10.5pt; font-family: 宋体; color: windowtext"><img style="border: 0px" src="read-1.php-5548" tppabs="http://images.cnblogs.com/cnblogs_com/cxrs/PM2.jpg" border="0" width="461" height="200" /></span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 20pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e">&nbsp;</p><p style="margin: 0cm 0cm 0pt 36pt; line-height: 19.5px; font-size: 13px; text-indent: -36pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">6、<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family: Verdana, sans-serif">Parallax Occlusion Mapping</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">Parallax Occlusion Mapping</span><span style="font-family: 宋体">是对</span><span style="font-family: Verdana, sans-serif">Parallax Mapping</span><span style="font-family: 宋体">的改进，</span><span style="font-family: Verdana, sans-serif">DirectX SDK</span><span style="font-family: 宋体">中有个</span><span style="font-family: Verdana, sans-serif">Sample</span><span style="font-family: 宋体">专门讲这个，相关细节可以参看此</span><span style="font-family: Verdana, sans-serif">Sample. Parallax Occlusion Mapping</span><span style="font-family: 宋体">中实现了</span><span style="font-family: Verdana, sans-serif">Self Shadow</span><span style="font-family: 宋体">，还计算了比较精确的</span><span style="font-family: Verdana, sans-serif">offset</span><span style="font-family: 宋体">，复杂度比</span><span style="font-family: Verdana, sans-serif">Parallax Mapping</span><span style="font-family: 宋体">大，但是实现效果更好。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e">&nbsp;</p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e"><span style="font-family: Verdana, sans-serif">7</span><span style="font-family: 宋体">各种</span><span style="font-family: Verdana, sans-serif">Mapping</span><span style="font-family: 宋体">的比较。</span></p><p style="margin: 10px auto; line-height: 19.5px; font-size: 13px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: #28557e">&nbsp;</p><table border="1" cellspacing="0" cellpadding="0" align="center" style="border-collapse: collapse; border-spacing: 0px; border: medium none; word-break: break-word; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; margin: auto auto auto -8.8pt; background-color: #28557e"><tbody><tr><td width="142" valign="top" style="border: 1pt solid black; border-collapse: collapse; padding: 0cm 5.4pt; width: 106.35pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px">&nbsp;</p></td><td width="57" valign="top" style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: black black black #f0f0f0; border-collapse: collapse; padding: 0cm 5.4pt; width: 42.55pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">高度图</span></p></td><td width="57" valign="top" style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: black black black #f0f0f0; border-collapse: collapse; padding: 0cm 5.4pt; width: 42.5pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">法线图</span></p></td><td width="85" valign="top" style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: black black black #f0f0f0; border-collapse: collapse; padding: 0cm 5.4pt; width: 63.8pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">随视点变化</span></p></td><td width="76" valign="top" style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: black black black #f0f0f0; border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">自阴影</span></p></td><td width="76" valign="top" style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: black black black #f0f0f0; border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">性能</span></p></td></tr><tr><td width="142" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-color: #f0f0f0 black black; border-collapse: collapse; padding: 0cm 5.4pt; width: 106.35pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: Verdana, sans-serif">Bump Mapping</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.55pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.5pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">不需要</span></p></td><td width="85" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 63.8pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">否</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">无</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">快</span></p></td></tr><tr><td width="142" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-color: #f0f0f0 black black; border-collapse: collapse; padding: 0cm 5.4pt; width: 106.35pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: Verdana, sans-serif">Normal Mapping</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.55pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px">&nbsp;</p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.5pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="85" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 63.8pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">否</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">无</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">快</span></p></td></tr><tr><td width="142" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-color: #f0f0f0 black black; border-collapse: collapse; padding: 0cm 5.4pt; width: 106.35pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: Verdana, sans-serif">Parallax Mapping</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.55pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.5pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="85" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 63.8pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">是</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">否</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">较快</span></p></td></tr><tr><td width="142" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-color: #f0f0f0 black black; border-collapse: collapse; padding: 0cm 5.4pt; width: 106.35pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: Verdana, sans-serif">Parallax Occlusion Mapping</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.55pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="57" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 42.5pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">需要</span></p></td><td width="85" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 63.8pt; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">是</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">是</span></p></td><td width="76" valign="top" style="border-right-width: 1pt; border-bottom-width: 1pt; border-right-style: solid; border-bottom-style: solid; border-color: rgb(240, 240, 240) black black rgb(240, 240, 240); border-collapse: collapse; padding: 0cm 5.4pt; width: 2cm; background-color: transparent"><p style="margin: 10px auto; line-height: 1.5; font-size: 13px"><span style="font-family: 宋体">慢</span></p><div><span style="font-family: 宋体"><br /></span></div></td></tr></tbody></table>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Mar</span>
	<span class="textbox-calendar-day">25</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6474.htm" tppabs="http://i.renjihe.com/blog/read.php?6474">Ogre的mesh和skeleton文件数据格式分析</a> <span id="starid6474"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 16:51 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6474.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6474#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6474");'>引用(0)</a> , <a href="read.php-6474.htm" tppabs="http://i.renjihe.com/blog/read.php?6474">阅读(0)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6474" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; color: #362e2b">首先看一下skeleton文件，skeleton文件描述和记录了物体的骨骼和动画情况。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; color: #362e2b"></p><div class="dp-highlighter bg_html" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 693px; overflow: auto; padding-top: 1px; line-height: 26px; color: #362e2b; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[html]</strong>&nbsp;<a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="copy" class="CopyToClipboard">copy</a></div></div><ol class="dp-xml" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">skeleton</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bones</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">....&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bonehierarchy</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">...&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">animaions</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">...&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">skeleton</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li></ol></div><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; color: #362e2b"></p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">从上面得知,整个skeleton文件分成了三部分bones,bonehierarchy,animations。</p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">&nbsp;&nbsp;1.bones部分描述了每一块骨头的具体情况:</p><div class="dp-highlighter bg_html" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 693px; overflow: auto; padding-top: 1px; line-height: 26px; color: #362e2b; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[html]</strong>&nbsp;<a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="copy" class="CopyToClipboard">copy</a></div></div><ol class="dp-xml" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bones</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bone</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">id</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">name</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Joint1&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">position</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">x</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0x1195046&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">y</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0.51196&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">z</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">rotation</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">angle</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">axis</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">x</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">y</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">z</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">rotation</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bone</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bone</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....&nbsp;&nbsp;</span></li></ol></div><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; color: #362e2b"></p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">从上面可知，其实一块骨头，实际上真正的有效数据仅是一个起始位置，和一个起始的转向。当然骨骼还包括骨骼的编号和名字这样的数据。</p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">2.bonehierarchy，即骨骼的继承关系，描述了骨骼是怎么样组成骨架的。</p><div class="dp-highlighter bg_html" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 693px; overflow: auto; padding-top: 1px; line-height: 26px; color: #362e2b; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[html]</strong>&nbsp;<a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="copy" class="CopyToClipboard">copy</a></div></div><ol class="dp-xml" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bonehierarchy</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">bonepatent</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">bone</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Joint2&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">parent</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Joint1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">boneparent</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">bone</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Joint3&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">parent</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Jonin2&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">boneparent</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;bone&nbsp;...&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">...&nbsp;&nbsp;&nbsp;</span></li></ol></div><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">至此skeleton文件已经完整的描述了一整个骨架。</p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">3.animations动画集部分。动画集，由多个动画组成。&nbsp; 每个动画由一系列的track组成，每个track由一系列的Keyframe组成。一个track描述了单块骨头在每个keyframe所描述的时间点的位移和旋转。</p><img style="border: none; max-width: 100%; font-family: Arial; font-size: 14px; line-height: 26px; color: #362e2b" src="read-2.php-6208" tppabs="http://pic002.cnblogs.com/images/2012/376836/2012030520000980.jpg" border="0" /><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">上图显示名为&quot;Attack1&quot;的动作，时长为1s, 由多个track组成，其中一个track所表示的是名为&quot;Join1&quot;的骨头的运动情况。各种Keyframe表示在指示时间点的位移和旋转。</p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px"><br /></p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px"><br /></p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px">再看看mesh文件</p><p style="margin: 5px auto; padding: 0px; line-height: 19px; color: #444444; font-family: YoonGothic, AppleGothic; font-size: 13px"></p><div class="dp-highlighter bg_html" style="font-family: Consolas, 'Courier New', Courier, mono, serif; width: 693px; overflow: auto; padding-top: 1px; line-height: 26px; color: #362e2b; margin: 18px 0px !important; background-color: #e7e5dc"><div class="bar" style="padding-left: 45px"><div class="tools" style="padding: 3px 8px 10px 10px; font-stretch: normal; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: #999999; background-color: #f8f8f8"><strong>[html]</strong>&nbsp;<a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="view plain" class="ViewSource">view plain</a><a style="text-decoration: none; outline: none; color: #a0a0a0; border: none; padding: 0px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url('http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif'); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat" href="javascript:if(confirm('http://blog.csdn.net/n/wemedia/16/read.php?6216  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://blog.csdn.net/n/wemedia/16/read.php?6216#'" tppabs="http://blog.csdn.net/rsqiang/article/details/7615078#" target="_blank" title="copy" class="CopyToClipboard">copy</a></div></div><ol class="dp-xml" style="padding: 0px; border: none; color: #5c5c5c; margin: 0px 0px 1px 45px !important; background-color: #ffffff"><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">mesh</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">submeshes</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">submesh</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">materail</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;Examples/Ninja&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">usesharedvertices</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;fase&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">use32bitindexes</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;fase&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">operationtype</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;trangle_list&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">faces</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">count</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;904&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">face</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">v1</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">v2</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">v3</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;2&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..........................&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">faces</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">geometry</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">vertexcount</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;781&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexbuffer</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">positions</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;true&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">normals</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;true&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertex</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">position</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">x</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">y</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;179.594&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">z</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;-16.0094&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">normal</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">x</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1.66615e-008&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">y</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0.160267&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">z</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;-0.987074&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertex</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.....................................&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexbuffer</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexbuffer</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">texture_coord_dimensions_0</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;2&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">texture_coords</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertex</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">texcoord</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">u</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0.44849&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">v</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0.141284&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertex</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.......................&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexbuffer</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">geometry</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">boneassignments</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexboneassignment</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">vertexindex</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">boneindex</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;7&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">weight</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">vertexboneassignment</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">vertexindex</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">boneindex</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;7&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">weight</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..................&nbsp;&nbsp;</span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">boneassignments</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">submeshes</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: inherit; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">skeletonlink</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit" class="attribute">name</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">=</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit" class="attribute-value">&quot;ninja.skeleton&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">/&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li><li style="border-style: none none none solid; border-left-width: 3px; border-left-color: #999999; list-style: decimal-leading-zero outside; color: #555555; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important; background-color: #f5fae2"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit"><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&lt;/</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag-name">mesh</span><span style="margin: 0px; padding: 0px; border: none; font-weight: bold; color: blue; background-color: inherit" class="tag">&gt;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit">&nbsp;&nbsp;</span></span></li></ol></div><br /><span style="font-size: 13px; line-height: 19px; font-family: YoonGothic, AppleGothic; color: #444444">&nbsp;每个mesh由多个submesh组成，每个submesh由faces部分，&nbsp;geometry 部分，boneassignments部分组成。faces部分用&nbsp;顶点索引<strong>描述了物体的每一个三角形面</strong>。geometry部分由两个vertexbuffer组成，第一个<strong>描述了每个顶点的坐标和法线</strong>，每二个<strong>描述了顶点的UV</strong>,boneassignments部分<strong>描述了每个顶点所附着的骨头组及权重</strong>。</span>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div><div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Mar</span>
	<span class="textbox-calendar-day">25</span>
	</div>
	<div class="textbox-title">
		<h4>
		<a href="read.php-6473.htm" tppabs="http://i.renjihe.com/blog/read.php?6473">【OpenMesh】删除几何元素</a> <span id="starid6473"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/>
		</h4>
		<div class="textbox-label">
		<a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 16:50 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="查看分类： OpenGL">OpenGL</a> , <a href="read.php-6473.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?6473#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb6473");'>引用(0)</a> , <a href="read.php-6473.htm" tppabs="http://i.renjihe.com/blog/read.php?6473">阅读(1)</a> , Via 本站原创 
		</div>
	</div>
	<div id="tb6473" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content">
	<span style="font-family: Simsun"><span style="font-size: 14px; line-height: 24px; background-color: #c7edcc">http://www.csdn123.com/html/blogs/20130720/40193.htm<br /><br /></span></span><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">这个小例子演示如何移除网格中的面和顶点。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">我们使用第一个例子中的正方体。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">如果我们希望我们的网格能够移除顶点，面或者边，我们必须为网格类扩展默认特性。顶点，面和Halfedge需要OpenMesh::Attributes::Status属性，这个属性用于当一个元素被删除的时候保持其已删除标记。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">定义网格特性的结构如下：</span><br /><pre class="cpp" style="font-size: 14px; line-height: 24px; background-color: #c7edcc">struct MyTraits : public OpenMesh::DefaultTraits &#123; VertexAttributes(OpenMesh::Attributes::Status); FaceAttributes(OpenMesh::Attributes::Status); EdgeAttributes(OpenMesh::Attributes::Status); &#125;;</pre><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">当我们创建立方体图形后，我们可以简单的调用delete_vertices()删除面和顶点(delete_face()或者delete_edge())。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">注意，没有方法能够直接删除Halfedge，因为当边被删除的时候Halfedge会自动的删除。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">一个元素是否会被标记为删除可以通过下面的函数来请求</span><br /><pre class="cpp" style="font-size: 14px; line-height: 24px; background-color: #c7edcc">mesh.status(handle).deleted(); // true if element handle is marked as deleted // false otherwise</pre><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">handle可以是顶点的边的或者面的。</span><br /><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">在这个例子中我们删除删除所有的面只留下一个面以及这个面对应的顶点。代码如下：</span><br /><pre class="cpp" style="font-size: 14px; line-height: 24px; background-color: #c7edcc">// Delete face 0 mesh.delete_face(fhandle[0], false); // ... face 2 mesh.delete_face(fhandle[2], false); // ... face 3 mesh.delete_face(fhandle[3], false); // ... face 4 mesh.delete_face(fhandle[4], false); // ... face 5 mesh.delete_face(fhandle[5], false);&nbsp;&nbsp;// If isolated vertices result in a face deletion // they have to be deleted manually. If you want this // to happen automatically, change the second parameter // to true. // Now delete the isolated vertices 0, 1, 2 and 3 mesh.delete_vertex(vhandle[0], false); mesh.delete_vertex(vhandle[1], false); mesh.delete_vertex(vhandle[2], false); mesh.delete_vertex(vhandle[3], false);&nbsp;&nbsp;删除掉的顶点和面被标记为&quot;deleted&quot;。调用garbage_collection()来将删除数据移除内存。 // Delete all elements that are marked as deleted // from memory. mesh.garbage_collection();</pre><span style="font-size: 14px; line-height: 24px; font-family: Simsun; background-color: #c7edcc">完整代码：</span><br /><pre class="cpp" style="font-size: 14px; line-height: 24px; background-color: #c7edcc">//============================================================================= //&nbsp;&nbsp;// OpenMesh&nbsp;&nbsp;// Copyright (C) 2001-2005 by Computer Graphics Group, RWTH Aachen&nbsp;&nbsp;// www.openmesh.org&nbsp;&nbsp;//&nbsp;&nbsp;//----------------------------------------------------------------------------- //&nbsp;&nbsp;// License&nbsp;&nbsp;//&nbsp;&nbsp;// This library is free software; you can redistribute it and/or modify it&nbsp;&nbsp;// under the terms of the GNU Library General Public License as published&nbsp;&nbsp;// by the Free Software Foundation, version 2.&nbsp;&nbsp;//&nbsp;&nbsp;// This library is distributed in the hope that it will be useful, but&nbsp;&nbsp;// WITHOUT ANY WARRANTY; without even the implied warranty of&nbsp;&nbsp;// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU&nbsp;&nbsp;// Library General Public License for more details.&nbsp;&nbsp;//&nbsp;&nbsp;// You should have received a copy of the GNU Library General Public&nbsp;&nbsp;// License along with this library; if not, write to the Free Software&nbsp;&nbsp;// Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&nbsp;&nbsp;//&nbsp;&nbsp;//----------------------------------------------------------------------------- //&nbsp;&nbsp;// $Revision: 83 $ // $Date: 2009-02-27 17:31:45 +0100 (Fri, 27 Feb 2009) $ //&nbsp;&nbsp;//============================================================================= #include &lt;iostream&gt; // -------------------- OpenMesh #include &lt;OpenMesh/Core/IO/MeshIO.hh&gt; #include &lt;OpenMesh/Core/Mesh/PolyMesh_ArrayKernelT.hh&gt; #include &lt;OpenMesh/Core/System/config.h&gt; #include &lt;OpenMesh/Core/Mesh/Status.hh&gt; // ---------------------------------------------------------------------------- struct MyTraits : public OpenMesh::DefaultTraits &#123; VertexAttributes(OpenMesh::Attributes::Status); FaceAttributes(OpenMesh::Attributes::Status); EdgeAttributes(OpenMesh::Attributes::Status); &#125;; typedef OpenMesh::PolyMesh_ArrayKernelT&lt;MyTraits&gt; MyMesh; // ---------------------------------------------------------------------------- // Build a simple cube and delete it except one face&nbsp;&nbsp;int main() &#123; MyMesh mesh; // generate vertices MyMesh::VertexHandle vhandle[8]; MyMesh::FaceHandle fhandle[6]; vhandle[0] = mesh.add_vertex(MyMesh::Point(-1, -1, 1)); vhandle[1] = mesh.add_vertex(MyMesh::Point( 1, -1, 1)); vhandle[2] = mesh.add_vertex(MyMesh::Point( 1, 1, 1)); vhandle[3] = mesh.add_vertex(MyMesh::Point(-1, 1, 1)); vhandle[4] = mesh.add_vertex(MyMesh::Point(-1, -1, -1)); vhandle[5] = mesh.add_vertex(MyMesh::Point( 1, -1, -1)); vhandle[6] = mesh.add_vertex(MyMesh::Point( 1, 1, -1)); vhandle[7] = mesh.add_vertex(MyMesh::Point(-1, 1, -1)); // generate (quadrilateral) faces std::vector&lt;MyMesh::VertexHandle&gt; tmp_face_vhandles; tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[0]); tmp_face_vhandles.push_back(vhandle[1]); tmp_face_vhandles.push_back(vhandle[2]); tmp_face_vhandles.push_back(vhandle[3]); fhandle[0] = mesh.add_face(tmp_face_vhandles);&nbsp;&nbsp;tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[7]); tmp_face_vhandles.push_back(vhandle[6]); tmp_face_vhandles.push_back(vhandle[5]); tmp_face_vhandles.push_back(vhandle[4]); fhandle[1] = mesh.add_face(tmp_face_vhandles);&nbsp;&nbsp;tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[1]); tmp_face_vhandles.push_back(vhandle[0]); tmp_face_vhandles.push_back(vhandle[4]); tmp_face_vhandles.push_back(vhandle[5]); fhandle[2] = mesh.add_face(tmp_face_vhandles);&nbsp;&nbsp;tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[2]); tmp_face_vhandles.push_back(vhandle[1]); tmp_face_vhandles.push_back(vhandle[5]); tmp_face_vhandles.push_back(vhandle[6]); fhandle[3] = mesh.add_face(tmp_face_vhandles); tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[3]); tmp_face_vhandles.push_back(vhandle[2]); tmp_face_vhandles.push_back(vhandle[6]); tmp_face_vhandles.push_back(vhandle[7]); fhandle[4] = mesh.add_face(tmp_face_vhandles);&nbsp;&nbsp;tmp_face_vhandles.clear(); tmp_face_vhandles.push_back(vhandle[0]); tmp_face_vhandles.push_back(vhandle[3]); tmp_face_vhandles.push_back(vhandle[7]); tmp_face_vhandles.push_back(vhandle[4]); fhandle[5] = mesh.add_face(tmp_face_vhandles); // And now delete all faces and vertices // except face (vh[7], vh[6], vh[5], vh[4]) // whose handle resides in fhandle[1]&nbsp;&nbsp;// Delete face 0 mesh.delete_face(fhandle[0], false); // ... face 2 mesh.delete_face(fhandle[2], false); // ... face 3 mesh.delete_face(fhandle[3], false); // ... face 4 mesh.delete_face(fhandle[4], false); // ... face 5 mesh.delete_face(fhandle[5], false);&nbsp;&nbsp;// If isolated vertices result in a face deletion // they have to be deleted manually. If you want this // to happen automatically, change the second parameter // to true. // Now delete the isolated vertices 0, 1, 2 and 3 mesh.delete_vertex(vhandle[0], false); mesh.delete_vertex(vhandle[1], false); mesh.delete_vertex(vhandle[2], false); mesh.delete_vertex(vhandle[3], false); // Delete all elements that are marked as deleted // from memory. mesh.garbage_collection(); // write mesh to output.obj try &#123; if ( !OpenMesh::IO::write_mesh(mesh, &quot;output.off&quot;) ) &#123; std::cerr &lt;&lt; &quot;Cannot write mesh to file 'output.off'&quot; &lt;&lt; std::endl; return 1; &#125; &#125; catch( std::exception&amp; x ) &#123; std::cerr &lt;&lt; x.what() &lt;&lt; std::endl; return 1; &#125;&nbsp;&nbsp;return 0; &#125;</pre>
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none"> 
	</div>
</div>
					<div class="article-bottom" style="display: block">
						<div class="pages">
							<span class="pagebar-mainbody"> 分页： 1/12  <a href="index.php-go=category_48&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=1"><img src="doubleleft.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleleft.gif" alt="第一页" title="第一页" border="0"/></a> <span class="pagebar-selections"> <span class="pagelink-current">1</span>  <a href="read.php-3351.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=2">2</a>  <a href="read.php-3350.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=3">3</a>  <a href="read.php-3349.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=4">4</a>  <a href="read.php-3348.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=5">5</a>  <a href="read.php-3347.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=6">6</a>  <a href="read.php-3346.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=7">7</a>  <a href="read.php-3345.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=8">8</a>  <a href="read.php-3344.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=9">9</a>  <a href="read.php-3343.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=10">10</a> </span> <a href="read.php-3351.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=2"><img src="singleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/singleright.gif" alt="下页" title="下页" border="0"/></a>  <a href="read.php-3328.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=12"><img src="doubleright.gif" tppabs="http://i.renjihe.com/blog/template/default/images/arrows/doubleright.gif" alt="最后页" title="最后页" border="0"/></a> </span> [ 显示模式： <a href="index.php-go=category_48&mode=1&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=1&page=1" title="切换到摘要模式">摘要</a> | <a href="index.php-go=category_48&mode=2&page=1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48&mode=2&page=1" title="切换到列表模式">列表</a> ]
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL"><strong>OpenGL</strong></a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 433 ms, 4 Queries.</span>";
//]]>
</script></body>
</html>