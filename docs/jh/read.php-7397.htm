<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>体绘制（Volume Rendering）概述 - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-7395.htm" tppabs="http://i.renjihe.com/blog/read.php?7395" title="上一篇 地形纹理Splattin"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>地形纹理Splattin</a></div>
	<div class="next-article"><a href="read.php-7398.htm" tppabs="http://i.renjihe.com/blog/read.php?7398" title="下一篇 漫谈计算摄像学 (一)："><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>漫谈计算摄像学 (一)：</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jul</span>
	<span class="textbox-calendar-day">22</span>
	</div>
	<div class="textbox-title">
		<h4>
		体绘制（Volume Rendering）概述 <span id="starid7397"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 14:36 , <a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="查看分类： 理论">理论</a> &raquo; <a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="查看分类： CV&amp;Graphic">CV&amp;Graphic</a> , <a href="read.php-7397.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?7397#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb7397");'>引用(0)</a> , <a href="read.php-7397.htm" tppabs="http://i.renjihe.com/blog/read.php?7397">阅读(0)</a> ,  Via 本站原创 <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="字体大小" border='0'/> <a href="javascript: doZoom(16);">大</a> | <a href="javascript: doZoom(14);">中</a> | <a href="javascript: doZoom(12);">小</a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?5830  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?5830'" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_7397"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="订阅本文" border='0'/></a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?5838  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?5838'" tppabs="http://i.renjihe.com/blog/read.php?save_7397"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="保存本文为文本文档" border='0'/></a></span>
		</div>
	</div>
	<div id="tb7397" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	<p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><strong>摘抄&ldquo;GPU Programming And Cg Language Primer 1rd Edition&rdquo; 中文名&ldquo;GPU编程与CG语言之阳春白雪下里巴人&rdquo;&nbsp; &nbsp;</strong></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">1982 年2 月，美国国家科学基金会在华盛顿召开了科学可视化技术的首次会议，会议认为&ldquo;科学家不仅需要分析由计算机得出的计算数据，而且需要了解在计算过程中的数据变换，而这些都需要借助于计算机图形学以及图像处理技术&rdquo;。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">---- 《三维数据场可视化》1.1 节科学计算可视化概述</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">自 20 世纪 80 年代科学计算可视化（ Visualization in Scientific Computing ）被提出后，三维体数据的可视化逐渐称为发展的重点，并最终形成了体绘制技术领域。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">一些文章，甚至是优秀硕博士论文库上的文章，解释体绘制概念时，通常都说 &ldquo; 体绘制技术是直接根据三维体数据场信息产生屏幕上的二维图像 &rdquo; ，这种说法太过含糊，如果根据三维体数据场信息随便产生一张图像，难道也是体绘制吗？我查找相关文献后，发现这种说法是国外一些文献的误译，例如， M.Levoy 在文章 &ldquo;Display of surfaces from volume data&rdquo;( 文献【 14 】 ) 中提到 &ldquo;volume rendering describes a wide range of techniques for generating images from three-dimensional scalar data&rdquo; ，翻译过来就是 &ldquo; 体绘制描述了一系列的 &ldquo; 根据三维标量数据产生二维图片 &rdquo; 的技术 &rdquo; 。注意，人家文章中用的是 &ldquo; 描述 &rdquo; ，而不是对体绘制下定义。老实说，老外的这种说法虽然挑不出毛病，但是我依然感觉没有落实到重点。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体绘制的核心在于 &ldquo; 展示体细节！而不是表面细节 &rdquo; 。我给出的定义是：依据三维体数据，将所有体细节同时展现在二维图片上的技术，称之为体绘制技术。利用体绘制技术，可以在一幅图像中显示多种物质的综合分布情况，并且可以通过不透明度的控制，反应等值面的情况。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">例如， CT 图片中展示的是人体的肌肉和骨骼信息，而不是表面信息（那是照片）。所以理解体绘制和面绘制技术的区别的 , 一个很直观的比喻是：普通照相机照出的相片和 CT 仪器拍出的 CT 照片，虽然都是二维图片，但是展现的对象是不同的！</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">国外自上世纪 80 年代末以来，在体绘制技术方面已经取得了长足的进步，西门子、东芝、通用电器，都有对 GPU 编程领域以及体绘制技术进行研究，并将体绘制技术运用到医疗器材中。然而，体绘制技术在中国的发展，如果说还处于萌芽阶段，实不为过！我在学习和研究过程中，在国内网站上甚至只找到了一个可用的体数据，还是国外代码中附带的演示数据，而国内的 openGPU 网站上关于体绘制的论坛板块则是根本是空白。国外已经常用的医疗器材和算法，在中国还没有成形，这实在是一种悲哀。一个讽刺的现象是，外国公司从事体绘制算法研究的却不乏中国人，这更是一种悲哀。写到这里，作为一名以 server the people 为毕生理想的有志青年，我有点伤感，有些沮丧，所以，还是先洗洗睡了，明天再来写下面的章节。</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t0"></a>14.1 体绘制与科学可视化</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">科学可视化技术是运用计算机图形学、图像处理、计算机视觉等方法，将科学、工程学、医学等计算、测量过程中的符号、数字信息转换为直观的图形图像，并在屏幕上显示的理论、技术和方法。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">体绘制是科学可视化领域中的一个技术方向。如前所述，体绘制的目标是在一副图片上展示空间体细节。举例而言，你面前有一间房子，房子中有家具、家电，站在房子外面只能看到外部形状，无法观察到房子的布局或者房子中的物体；假设房子和房子中的物体都是半透明的，这样你就可以同时查看到所有的细节。这就是体绘制所要达到的效果。</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t1"></a>14.2 体绘制应用领域</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">人类发展史上的重大技术带来的影响大致分为两种：其一，技术首先改变生活本身，然后改变人类对世界的看法，例如电视、电话等；还有一种技术，是首先改变人类对世界的看法，然后改变生活本身，例如伦琴射线、望远镜。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体绘制技术应该属于后者，通过改变所见，而改变生活。体绘制计算的重要意义，首先在于可以在医疗领域 server the people, 有助于疾病的诊断，这一点应该不用多说，计算机断层扫描（ CT ）已经广泛应用于疾病的诊断。医疗领域的巨大需求推动了体绘制技术的告诉发展，如果了解 CT 的工作原理，也就大致了解了体绘制技术原理和流程，所以本书在附录 B 给出了医学体绘制的有关文献，作为补充阅读资料，当您对体素、光线投射等术语缺乏感性认识时，可以参阅理解；其二，体绘制计算可以用于地质勘探、气象分析、分子模型构造等科学领域。我在工作期间承担的一个较大的项目便是有关 &ldquo; 三维气象可视化 &rdquo; ，气象数据通常非常庞大，完全可以号称海量数据，每一个气压面上都有温度、湿度、风力风向等格点数据，气象研究人员希望可以同时观察到很多气压面的情况，这时就可以采用体绘制技术，对每个切面（气压面）进行同时显示。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体绘制技术也能用于强化视觉效果，自然界中很多视觉效果是不规则的体，如流体、云、烟等，它们很难用常规的几何元素进行建模，使用粒子系统的模拟方法也不能尽善尽美，而使用体绘制可以达到较好的模拟效果。如 图 41 所示，这是使用体绘制技术进行烟的模拟效果。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="feed-1.php-go=entry_5832" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/41.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t2"></a>14.3 体绘制与光照模型</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">尽管光照模型通常用于面绘制，但是并不意味着体绘制技术中不能使用光照模型。实际上 , 体绘制技术以物体对光的吸收原理为理论基础，在实现方式上，最终要基于透明度合成计算模型。此外，经典的光照模型，例如 phong 模型， cook-torrance 模型都可以做为体绘制技术的补充，完善体绘制效果，增强真实感。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">往往有初学者会分不清 &ldquo; 体绘制技术 &rdquo; 以及 &ldquo; 透明光照模型 &rdquo; 之间的区别。这个问题很有意思。实际上，体绘制技术与透明光照模型在感性认识上十分类似，在很多教程中对体绘制技术的阐述也涉及到透明物体。但是，透明光照模型，一般侧重于分析光在透明介质中的传播方式（折射，发散，散射，衰减等），并对这种传播方式所带来的效果进行模拟；而体绘制技术偏重于物体内部层次细节的真实展现。举例而言，对于一个透明的三棱镜，使用透明光照模型的目的在于 &ldquo; 模拟光的散射，折射现象（彩虹） &rdquo; ；而对于地形切片数据或者人体数据，则需要使用体绘制技术观察到其中的组织结构。此外，在实现方式上，透明光照模型一般是跟踪光线的交互过程，并在一系列的交互过程中计算颜色值；而体绘制技术是在同一射线方向上对体数据进行采样，获取多个体素的颜色值，然后根据其透明度进行颜色的合成。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">总的来说，透明光照模型侧重于光照效果展现，并偏向艺术化；而体绘制技术侧重展现物质内部细节，要求真实！</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">不过，现在体绘制技术实际上也可以用于艺术领域，因为体绘制技术所使用的方法，实际上具有很强的通用性，尤其是传统的 ray-cast 方法，完全可以应用到透明光照模型中（绘制烟雾等）。不同的技术之间会存在共融性，将技术和领域的关系近固化，是研究人员的大忌。科学史上很多前例都说明了一个事实：不同领域的交合点，往往会出现重大发现或发明。在爱因斯坦之前，又有谁知道时间、空间和质量之间的关系呢？</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t3"></a>体数据（ Volume Data ）</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">学习任何一门技术，首先要弄清楚这项技术的起源以及数据来源。技术的起源也就是技术最原始的需求，最原始的发展动力，了解了这一点就了解了这项技术的价值。而了解一门技术的数据来源，就把握了技术的最初脉络，是 &ldquo; 持其牛耳 &rdquo; 的一种方法，正如软件工程中的数据流分析方法一般。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">我很想说，体数据与面数据的区别，就好像一个实心的铁球和一个空心的兵乓球的区别。不过这个比喻很显然有点俗，很难让人相信作者（我）是一个专业人士。于是我决定还是将与体数据相关的专业术语都阐述一遍。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">不过，在此之前，我需要先消除大家的恐惧感，研究表明，动物对于未知事物总是存在恐惧感，这也是阻碍进一步学习的关键所在。体数据不是什么特别高深的火星符号，它是对一种数据类型的描述，只要是包含了体细节的数据，都可以称之为体数据。举个例子，有一堆混凝土，其中包含了碳物质（ C ）若干，水分子（ H20 ）若干，还有不明化学成分的胶状物，你用这种混凝土建造了块方砖，如果存在一个三维数组，将方砖 X 、 Y 、 Z 方向上的物质分布表示出来，则该数组可以被称为体数据。不要小看上面这个比喻，体数据本质上就是按照这个原理进行组织的！</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体数据一般有 2 种来源：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 科学计算的结果，如：有限元的计算和流体物理计算；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 仪器测量数据，如： CT 或 MRI 扫描数据、地震勘测数据、气象检测数据等。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">与体数据相关的专业术语有：体素（ Voxel ）、体纹理（ Volume Texture ）。尤其要注意：所谓面数据，并不是说二维平面数据，而是说这个数据中只有表面细节，没有包含体细节，实际上体数据和面数据的本质区别，在于是否包含了体细节，而不是在维度方面。</p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t4"></a>14.4.2 体素（ Voxel ）</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">Wikipedia 中对体属 voxel 的介绍为：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">A voxel (a&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?save_5832  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?save_5832'" tppabs="http://en.wikipedia.org/wiki/Portmanteau" title="Portmanteau">portmanteau&nbsp;</a>of the words&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?5792  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?5792'" tppabs="http://en.wikipedia.org/wiki/Volumetric" title="Volumetric">volumetric&nbsp;</a>and&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?5795  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?5795'" tppabs="http://en.wikipedia.org/wiki/Pixel" title="Pixel">pixel</a>) is a volume element, representing a value on a&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/feed.php?go=entry_5794  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/feed.php?go=entry_5794'" tppabs="http://en.wikipedia.org/wiki/Regular_grid" title="Regular grid">regular grid&nbsp;</a>in&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?save_5794  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?save_5794'" tppabs="http://en.wikipedia.org/wiki/3D_computer_graphics" title="3D computer graphics">three dimensional&nbsp;</a>space. This is analogous to a&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/read.php?5795  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/read.php?5795'" tppabs="http://en.wikipedia.org/wiki/Pixel" title="Pixel">pixel&nbsp;</a>, which represents&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/index.php?go=category_12&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/index.php?go=category_12&mode=2&page=1'" tppabs="http://en.wikipedia.org/wiki/2D_computer_graphics" title="2D computer graphics">2D&nbsp;</a>image data in a&nbsp;<a style="color: #ff9900; text-decoration: none" href="javascript:if(confirm('http://en.wikipedia.org/wiki/index.php?go=category_12&mode=2&page=2  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://en.wikipedia.org/wiki/index.php?go=category_12&mode=2&page=2'" tppabs="http://en.wikipedia.org/wiki/Bitmap" title="Bitmap">bitmap&nbsp;</a>。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">即 &ldquo; 体素，是组成体数据的最小单元，一个体素表示体数据中三维空间某部分的值。体素相当于二维空间中像素的概念 &rdquo; 。 图 42 中每个小方块代表一个体素。体素不存在绝对空间位置的概念，只有在体空间中的相对位置，这一点和像素是一样的。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">通常我们看到的体数据都会有一个体素分布的描述，即，该数据由 n*m*t 个体素组成，表示该体数据在 X 、 Y 、 Z 方向上分别有 n 、 m 、 t 个体素。在数据表达上，体素代表三维数组中的一个单元。假设一个体数据在三维空间上 256*256*256 个体素组成，则，如果用三维数组表示，就必须在每一维上分配 256 个空间。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">在实际的仪器采样中，会给出体素相邻间隔的数据描述，单位是毫米（ mm ），例如 0.412mm 表示该体数据中相邻体素的间隔为 0.412 毫米 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=2&page=3" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/42.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t5"></a>14.4.1 体纹理（ Volume Texture ）</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体数据最主要的文件格式是 &ldquo; 体纹理（ volume texture ） &rdquo; ！故而，非常有必要对体纹理的概念进行详细的阐述。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">目前，学术性文章中关于体纹理的概念描述存在不小的混乱，很多书籍或者网页资料没有明确的区分 2d texture ， 3d texture ， volume texture 之间的区别。导致不少人认为 &ldquo; 只要是用于三维虚拟或仿真技术中的纹理都称之为 3d texture&rdquo; 。这是一个误会。纹理上的 2 ， 3 维之分本质上是根据其所描述的数据维数而定的，所谓 2d texture 指的是纹理只描述了空间的面数据，而 3d texture 则是描述了空间中的三维数据。 3d texture 另一个较为学术化的名称是： volume texture 。文献【 22 】上对体纹理的定义是：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">3D texture (Three Dimensional Texture), also known as &quot;volume texture,&quot; is a logical extension of the traditional (and better known) 2D texture. In this context, a texture is simply a bitmap image that is used to provide surface coloring for a 3D model. A 3D texture can be thought of as a number of thin pieces of texture used to generate a three dimensional image map. 3D textures are typically represented by 3 coordinates.</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">翻译成中文就是 &ldquo; 三维纹理，即体纹理，是传统 2D 纹理在逻辑上的扩展。二维纹理是一张简单的位图图片，用于为三维模型提供表面点的颜色值；而一个三维纹理，可以被认为由很多张 2D 纹理组成的，用于描述三维空间数据的图片。三维纹理通过三维纹理坐标进行访问 &rdquo; 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">从上面这句话，可以得到两点信息：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 三维纹理和体纹理是同一概念；三维纹理和二维纹理是不同的；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 三维纹理通过三维纹理坐标进行访问。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">这时可能会有人提出问题了，图片都是平面的，怎么能表示三维数据？请注意，我们通常所看到的图片确实都是平面的，但是并不意味着 x,y 平面上的像素点不能存放三维数据，举一个例子：在高级语言编程中，我们完全可以用一维数组去存放三维数组中的数据，只要按照一定规则存放即可！</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">按照一定规则将三维数据存放在 XY 像素平面所得到的纹理，称之为 volume texture 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">体数据通常是由 CT 仪器进行扫描得到的，然后保存在图片的像素点上。目前国际上比较常用的体纹理格式有，基于 DirectX 的 .dds 格式和 .raw 格式。注意，很多人会将 .raw 格式当作摄像器材使用的那种格式，其实这两个格式的后缀虽然都是 .raw ，但是其数据组织形式是不同的。用于体纹理的 .raw 格式，存放的是三维数据，用于摄像器材的 .raw 格式只是普通的二维图片。 图 43 从左到右分别是 University of T&uuml;bingen （ Germany ）、 Viatronix Inc.(USA) 、 Walter Reed Army Medical Center (USA) 三家机构的通过仪器扫描得到的体纹理数据的体绘制图片。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=2&page=4" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/43.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">这三个体纹理数据的描述分别是： 256 x 320 x 128 /0.66, 0.66, 0.66 ； 512 x 512 x 174/0.8398, 0.8398, 3.2 ； 512 x 512 x 463/0.625, 0.625, 1.0 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">由于在国内的网站上很难找到体数据，所以下面我给出几个国外的网址，这些网址提供用于教学和研究只用的体纹理数据（只能用于教学和研究）。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">http://wwwvis.informatik.uni-stuttgart.de/~engel/pre-integrated/data.html</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">http://www9.informatik.uni-erlangen.de/External/vollib/</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">http://www.volren.org/</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t6"></a>14.5 体绘制算法</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">国际上留下的体绘制算法主要有：光线投射算法（ Ray-casting ）、错切 - 变形算法（ Shear-warp ）、频域体绘制算法（ Frequency Domain ）和抛雪球算法（ Splatting ）。其中又以光线投射算法最为重要和通用。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">究其原因，无外乎有三点：其一，该算法在解决方案上基于射线扫描过程，符合人类生活常识，容易理解；其二，该算法可以达到较好的绘制效果；其三，该算法可以较为轻松的移植到 GPU 上进行实现，可以达到实时绘制的要求。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">本书的第 15 章将重点阐述光线投射算法。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t7"></a>15.1 光线投射算法原理</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">光线投射方法是基于图像序列的直接体绘制算法。从图像的每一个像素，沿固定方向（通常是视线方向）发射一条光线，光线穿越整个图像序列，并在这个过程中，对图像序列进行采样获取颜色信息，同时依据光线吸收模型将颜色值进行累加，直至光线穿越整个图像序列，最后得到的颜色值就是渲染图像的颜色。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">为什么在上面的定义是穿越 &ldquo; 图像序列 &rdquo; ，而不是直接使用 &ldquo; 体纹理 &rdquo; ？原因在于，体数据有多种组织形式，在基于 CPU 的高级语言编程中，有时并不使用体纹理，而是使用图像序列。在基于 GPU 的着色程序中，则必须使用体纹理。这里所说的图像序列，也可以理解为切片数据。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">尤其要注意：光线投射算法是从视点到 &ldquo; 图像序列最表面的外层像素 &rdquo; 引射线穿越体数据，而不少教程中都是糊里糊涂的写到 &ldquo; 从屏幕像素出发 &rdquo; ，这种说法太过简单，而且很容易让人误解技术的实现途径，可以说这是一种以讹传讹的说法！从屏幕像素出发引出射线，是光线跟踪算法，不是光线投射算法。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">体绘制中的光线投射方法与真实感渲染技术中的光线跟踪算法有些类似，即沿着光线的路径进行色彩的累计。但两者的具体操作不同。首先，光线投射方法中的光线是直线穿越数据场，而光线跟踪算法中需要计算光线的反射和折射现象。其次，光线投射算法是沿着光线路径进行采样，根据样点的色彩和透明度，用体绘制的色彩合成算子进行色彩的累计，而光线跟踪算法并不刻意进行色彩的累计，而只考虑光线和几何体相交处的情况；最后，光线跟踪算法中光线的方向是从视点到屏幕像素引射线，并要进行射线和场景实体的求交判断和计算，而光线投射算法，是从视点到物体上一点引射线（ 16.1.2 节会进行详细阐述），不必进行射线和物体的求交判断。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">上述文字，对于光线投射算法的描述可能太过简单，会引起一些疑惑，不过这是正常的，有了疑惑才会去思考解决之道，最怕看了以后没有任何疑惑，那只是浮光掠影似的一知半解，而不是真正的了然于胸。</p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t8"></a>15.1.1 吸收模型</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">几乎每一个直接体绘制算法都将体数据当作 &ldquo; 在某一密度条件下，光线穿越体时，每个体素对光线的吸收发射分布情况 &rdquo; 。这一思想来源于物理光学，并最终通过光学模型（ Optical Models ）进行分类描述。为了区别之前的光照渲染模型，下面统一将 Optical Model 翻译为光学模型。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">文献【 15 】中对大多数在直接体绘制算法中使用的重要光学模型进行了描述，这里给出简要概述。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 吸收模型（ Absorption only ）：将体数据当作由冷、黑的体素组成，这些体素对光线只是吸收，本身既不发射光线，也不反射、透射光线；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发射模型（ Emission only ）：体数据中的体素只是发射光线，不吸收光线；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 吸收和发射模型（ Absorption plus emission ）：这种光学模型使用最为广泛，体数据中的体素本身发射光线，并且可以吸收光线，但不对光线进行反射和透射。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 散射和阴影模型（ Scattering and Shading/shadowing ）：体素可以散射（反射和折射）外部光源的光线，并且由于体素之间的遮挡关系，可以产生阴影；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 多散射模型（ Multiple Scattering ）：光线在被眼睛观察之前，可以被多个体素散射。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">通常我们使用 吸收和发射模型（ Absorption plus emission ）。为了增强真实感，也可以加上阴影（包括自阴影）计算。</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t9"></a>15.2 光线投射算法若干细节之处</h2><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t10"></a>15.2.1 光线如何穿越体纹理</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">这一节中将阐述光线如何穿越体纹理。这是一个非常重要的细节知识点，很多人就是因为无法理解 &ldquo; 体纹理和光线投射的交互方式 &rdquo; 而放弃学习体绘制技术。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">前面的章节似乎一直在暗示这一点：通过一个体纹理，就可以进行体渲染。我最初学习体绘制时，也被这种暗示迷惑了很久，后来查找到一个国外的软件，可以将体纹理渲染到立方体或者圆柱体中，这时我才恍然大悟：体纹理并不是空间的模型数据，空间体模型（通常是规则的立方体或圆柱体）和体纹理相互结合才能进行体渲染。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">举例而言，我们要在电脑中看到一个纹理贴图效果，那么至少需要一张二维的纹理和一个面片，才能进行纹理贴图操作。这个面片实际上就是纹理的载体。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">同理，在体绘制中同样需要一个三维模型作为体纹理的载体，体纹理通过纹理坐标（三维）和模型进行对应，然后由视点向模型上的点引射线，该射线穿越模型空间等价于射线穿越了体纹理。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">通常使用普通的立方体或者圆柱体作为体绘制的空间模型。本章使用立方体作为体纹理的载体。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">注意：体纹理通过纹理坐标和三维模型进行对应，考虑到 OpenGL 和 Direct3D 使用的体纹理坐标并不相同，所以写程序时请注意到这一点。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=2&page=5" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/44.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">图 44 展示了体纹理坐标在立方体上的分布，经过测试，这种分布关系是基于 OpenGL 的。在宿主程序中确定立方体 8 个顶点的体纹理坐标，注意是三元向量，然后传入 GPU ，立方体 6 个面内部点的体纹理坐标会在 GPU 上自动插值得到。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">根据视点和立方体表面点可以唯一确定一条射线，射线穿越整个立方体等价于穿越体数据，并在穿越过程中对体数据等距采样，对每次得到的采样数据按照光透公式进行反复累加。这个累加过程基于 11 章讲过的透明合成公式，不过之前只是进行了简单的讲解，在本章中将针对透明度，透明合成，以及排序关系做全面阐述。</p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t11"></a>15.2.2 透明度、合成</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">透明度本质上代表着光穿透物体的能力，光穿透一个物体会导致波长比例的变化，如果穿越多个物体，则这种变化是累加的。所以，透明物体的渲染，本质上是将透明物体的颜色和其后物体的颜色进行混合，这被称为 alpha 混合技术。图形硬件实现 alpha 混合技术，使用 over 操作符。 Alpha 混合技术的公式如下所示：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=2&page=6" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/gs-15-1.jpg" border="0" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">其中，as 表示透明物体的透明度， cs表示透明物体的原本颜色， cd表示目标物体的原本颜色， co 则是通过透明物体观察目标物体所得到的颜色值。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">如果有多个透明物体，通常需要对物体进行排序，除非所有物体的透明度都是一样的。在图形硬件中实现多个透明物体的绘制是依赖于 Z 缓冲区。在光线投射算法中，射线穿越体纹理的同时也就是透明度的排序过程。所以这里存在一个合成的顺序问题。可以将射线穿越纹理的过程作为采样合成过程，这是从前面到背面进行排序，也可以反过来从背面到前面排序，毫无疑问这两种方式得到的效果是不太一样的。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">如果从前面到背面进行采样合成，则合成公式为：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=2&page=7" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/gs-15-2.jpg" border="0" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">其中， Ci 和 Ai分别是在体纹理上采样所得到的颜色值和不透明度，其实也就是体素中蕴含的数据； deta Ci和 deta Ai表示累加的颜色值和不透明度。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">注意，很多体纹理其实并没有包含透明度，所以有时是自己定义一个初始的透明度，然后进行累加。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">如果从背面到前面进行采样合成，则公式为：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="index-1.php-go=category_12&mode=1&page=1" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/gs-15-3.jpg" border="0" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t12"></a>15.2.3 沿射线进行采样</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="read-1.php-6544" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/45.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">如 图 45 所示，假定光线从 F 点投射到立方体中，并从 L 点投出，在立方体中穿越的距离为 m 。当光线从 F 点投射到立方体中，穿越距离为 n （ n&lt;m ）时进行采样，则存在公式：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="read-1.php-6381" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/gs-15-4.jpg" border="0" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">其中 Tstart表示立方体表面被投射点的体纹理坐标； d表示投射方向；detal 表示采样间隔，随着 n 的增加而递增；t 为求得的采样纹理坐标。通过求得的采样纹理坐标就可以在体纹理上查询体素数据。直到 n&gt;m ，或者透明度累加超过 1 ，一条射线的采样过程才结束。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">下面总结一下：首先需要一个确定了顶点纹理坐标的三维立方体，光线穿越立方体的过程，就是穿越体纹理的过程，在整个穿越过程中，计算采样体纹理坐标，并进行体纹理采样，这个采样过程直到光线投出立方体或者累加的透明度为 1 时结束。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">我想这个过程应该不复杂，大家一定要记住：纹理坐标是联系三维模型和体纹理数据之间的桥梁，通过计算光线穿越三维模型，可以计算体纹理在光线穿越方向上的变化，这就是计算采样纹理坐标的方法。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">高中时学习物理的力学部分，最初一直处于浑浑噩噩的状态，遇到应用题不知道从何处入手，后来看一本参考资料讲到 &ldquo; 加速度是联系力和运动状态的桥梁，遇到题目首先分析加速度的求法 &rdquo; ，由此举一反三，不再感觉物理难学。所以在此我也借用那句话，总结纹理坐标的作用。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">现在还存在一个问题：如何知道光线投射出了立方体？这个问题等价于计算光线在立方体中穿越的距离 m 。在下一节中将进行阐述。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">附：在 OpenGL 和 DirectX 中，体纹理坐标的分布规则是不一样的，所以要针对自己当前使用的 profile 来确定顶点体纹理坐标的设置。这也从侧面说明了， Cg 语言是基于 OpenGL 和 DirectX 的。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">&nbsp;</p><h3 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t13"></a>15.2.2 如何判断光线投射出体纹理</h3><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">上一节阐述过：光线投射出体纹理，等价于光线投射出立方体。所以如何判断光线投射出体纹理，可以转换为判断光线投射出立方体。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">首先计算光线在立方体中入射到出射的行进距离 m ，然后当每次采样体纹理时同时计算光线在立方体中的穿越距离 n ，如果 n&gt;=m ，则说明光线射出立方体。给定光线方向，以及采样的距离间隔，就可以求出光线在立方体中的穿越距离 n 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">如果是在 CPU 上，距离 m 很容易通过解析几何的知识求得，直接求出光线和几何体的两个交点坐标，然后计算欧几里德距离即可。但是在 GPU 上计算光线和几何体的交点是一个老大难的问题，尤其在几何体不规则的情况下；此外，就算是规则的几何体，光线与其求交的过程也是非常消耗时间，所以通过求取交点然后计算距离的方法不予采用。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">请思考一下，在 GPU 中确定点和点之间顺序关系的还有哪个量？深度值（我自问自答）。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">在 GPU 中可以间接反应点和点之间关系的有两个量，一个是纹理坐标，另一个就是深度值。通常在渲染中会进行深度剔除，也就是只显示深度值小的片段。不过也存在另外一个深度剔除，将深度值小的片段剔除，而留下深度值最大的片段（深度值的剔除方法设置，在 OpenGL 和 Direct 中都有现成函数调用）。如果使用后者，则场景中渲染显示的是离视点最远的面片集合。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">所以，计算距离 m 的方法如下：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 剔除深度值较大的片段（正常的渲染状态），渲染场景深度图 frontDepth （参阅第 14 章），此时 frontDepth 上的每个像素的颜色值都代表&ldquo;某个方向上离视点最近的点的距离&rdquo;；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 剔除深度值较小的片段，渲染场景深度图 backDepth ， backDepth 上的每个像素的颜色值都代表&ldquo;某个方向上离视点最远的点的距离&rdquo;；</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 将两张深度图上的数据进行相减，得到的值就是光线投射距离 m 。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">如果认真实现过第 14 章讲的 shadow Map 算法，对这个过程应该不会感到太复杂。可能存在的问题是：背面渲染很多人没有接触过。这里对背面渲染的一些细微之处进行阐述，以免大家走弯路。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">通常，背面的面片（不朝向视点的面片）是不会被渲染出来的，图形学基础比较好的同学应该知道，三个顶点通常按逆时针顺序组成一个三角面，这样做的好处是，背面面片的法向量与视线法向量的点积为负数，可以据此做面片剔除算法（光照模型实现中也常用到），所以只是改变深度值的比较方法还不够，还必须关闭按照逆 / 顺时针进行面片剔除功能，这样才能渲染出背面深度图。 图 46 是立方体的正面和背面深度图。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left"><img style="border: none; max-width: 100%" src="read-1.php-6338" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/46.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="left">附：在很多教程上，都是将 frontDepth 和 backDepth 相减后的值，保存为另外一个纹理，称之为方向纹理，每个像素由 r 、 g 、 b 、 a 组成，前三个通道存储颜色值，最后的 a 通道存放距离值，我觉得这个过程稍微繁琐了些，此外由于方向向量可能存在负值，而颜色通道中只能保存正值，所以必须将方向向量归一化到【 0 ， 1 】空间，这个过程有可能导致数据精度的损失。基于如上的考虑，我将方向向量的计算放到片段着色程序中，通过视点和顶点位置进行计算。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t14"></a>算法流程</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="read-1.php-6290" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/47.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">图 47 展示了使用光线投射算法进行体绘制的实现流程。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">首先要渲染出正向面深度图和背向面深度图，这是为了计算射线穿越的最大距离，做为循环采样控制的结束依据；然后在顶点着色程序中计算顶点位置和射线方向，射线方向由视线方向和点的世界坐标决定，其实射线方向也可以放在片段着色程序中进行计算。然后到了最关键的地方，就是循环纹理采样、合成。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">每一次循环都要计算新的采样纹理坐标和采样距离，然后进行颜色合成和透明度累加，如果采样距离超过了最大穿越距离，或者透明度累加到 1 ，则循环结束。将合成得到的颜色值输出即可。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">图 48 给出了使用光线投射算法进行体绘制的效果图：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px"><img style="border: none; max-width: 100%" src="read-1.php-6263" tppabs="http://p.blog.csdn.net/images/p_blog_csdn_net/liu_lin_xm/EntryImages/20091122/48.jpg" border="0" /><br /></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px" align="center"></p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t15"></a>15.4 光线投射算法实现</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">本节给出光线投射算法的着色程序实现代码。依然是分为三个部分：结构体、顶点着色程序和片段着色程序。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">代码 22 光线投射算法结构体</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">struct VertexIn</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#123;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 position : POSITION;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 texCoord:&nbsp; TEXCOORD;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#125;;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">struct VertexScreen</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#123;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 position&nbsp;&nbsp; : POSITION;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 worldPos&nbsp;&nbsp; : TEXCOORD0;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 projPos&nbsp;&nbsp;&nbsp; : TEXCOORD1;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 texCoord&nbsp;&nbsp; : TEXCOORD2;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#125;;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">代码 23 光线投射算法顶点着色程序</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">VertexScreen main_v(VertexIn posIn,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uniform float4x4 world,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;uniform float4x4 worldViewProj,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;uniform float4x4 texViewProj)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#123;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; VertexScreen posOut;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; posOut.position = mul(worldViewProj, posIn.position);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; posOut.worldPos = mul(world,posIn.position);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; posOut.projPos = mul(texViewProj, posOut.worldPos);&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; posOut.texCoord = posIn.texCoord;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp; return posOut;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#125;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">代码 24 光线投射算法片段着色程序</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">void main_f(VertexScreen posIn,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; uniform float3 eyePosition,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; uniform sampler3D volumeTex: register(s0),</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; uniform sampler2D frontDepthTex: register(s1) ,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; uniform sampler2D backDepthTex: register(s2) ,</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out float4 result&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : COLOR)</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#123;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 根据视点和当前顶点世界坐标计算方向</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float3 dir = posIn.worldPos.xyz-eyePosition;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dir = normalize(dir);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float3 deltaDir = float3(0.0, 0.0, 0.0);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 获取当前顶点的三维纹理坐标</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float3 tex = posIn.texCoord.xyz;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float2 uvDelta;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uvDelta.x = 0.0;//ddx( tex ).x;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uvDelta.y = 0.0;//ddy( tex ).y;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 取出深度间隔值 , 并设置采样间隔</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float2 uv= posIn.projPos.xy/posIn.projPos.w;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float frontDis = tex2D(frontDepthTex,uv).x;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float backDis = tex2D(backDepthTex,uv).x;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float len = backDis-frontDis;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 初始化颜色值、采样值、透明度</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float3 norm_dir = normalize(dir);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float stepsize = 0.01;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float delta = stepsize;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float3 delta_dir = norm_dir * delta;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float delta_dir_len = length(delta_dir);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float3 vec = posIn.texCoord.xyz;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 col_acc = float4(0,0,0,0);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float alpha_acc = 0;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float length_acc = 0;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float4 color_sample;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; float alpha_sample;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp; for(int i = 0; i &lt; 800; i++)&#123;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color_sample = tex3D(volumeTex,vec);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alpha_sample = color_sample.a * stepsize;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col_acc&nbsp;&nbsp; += (1.0 - alpha_acc) * color_sample * alpha_sample * 3;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alpha_acc += alpha_sample;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vec += delta_dir;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; length_acc += delta_dir_len;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(length_acc &gt;= len &#124;&#124; alpha_acc &gt; 1.0) break; // 采样循环控制条件</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&#125;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.xyz = col_acc.xyz*2.0+float3(0.2,0.2,0.2);</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.w = col_acc.w;&nbsp;&nbsp;</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">&#125;</p><h2 style="margin: 0px; padding: 0px; font-family: Arial; line-height: 26px"><a style="color: #ff9900" name="t16"></a>15.5 本章小结</h2><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">本书的第14 、15 章阐述了体绘制中光线投射算法的基本原理和实现流程。实际上，在此基础上可以对光线投射算法加以扩展，例如将光线投射算法和阴影绘制算法相结合，可以渲染出真实感更强的图像。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">此外，有些体数据是中间是空的，在射线方向上进行采样时需要跳过空区域，这其中也需要额外的算法处理，在英文中称为&ldquo;Object-Order Empty Space Skipping &rdquo;。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">目前我所发现关于体绘制以及光线投射算法最好的教材是Markus Hadwiger 等人所写的&ldquo;Advanced Illumination Techniques for GPU-Based Volume Raycasting &rdquo;。此书发表在SIGGRAPH ASIA2008 上，是目前所能找到最新也是非常权威的教材，共166 页。英文阅读能力比较好的同学可以尝试着看一下。</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px">本章已经是此书的最后一章，最后希望中国的计算机科学可以真正上升到科学研究的层次，而不是一直在混沌中热衷做泥瓦匠的工作。</p> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 82 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>