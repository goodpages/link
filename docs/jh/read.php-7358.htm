<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="UTF-8" />
<meta content="all" name="robots" />
<meta name="author" content="流浪的龙－个人知识管理" />
<meta name="description" content="" />
<meta name="keywords" content="bo-blog" />
<xbasehref="http://i.renjihe.com/blog/" />
<link rel="alternate" title="流浪的龙－个人知识管理" href="feed.php" type="application/rss+xml" />
<link rel="stylesheet" rev="stylesheet" href="styles.css" tppabs="http://i.renjihe.com/blog/template/default/styles.css" type="text/css" media="all" />

<title>六角网格的实现 - 流浪的龙－个人知识管理 - </title>
<script type="text/javascript" src="common.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/common.js?jsver=2.1.1.3626.3"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://i.renjihe.com/blog/inc/rsd.php" />
<script type="text/javascript" src="jslang.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/lang/zh-cn/jslang.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="ajax.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/ajax.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript" src="swfobject.js-jsver=2.1.1.3626.3" tppabs="http://i.renjihe.com/blog/images/js/swfobject.js?jsver=2.1.1.3626.3"></script>
<script type="text/javascript">
//<![CDATA[
var moreimagepath="template/default/images";
var shutajax=0;
var absbaseurl='index.htm'/*tpa=http://i.renjihe.com/blog/*/;
//]]>
</script>
<link title="搜索 流浪的龙－个人知识管理" rel="search"  type="application/opensearchdescription+xml"  href="http://i.renjihe.com/blog/inc/opensearch.php" />



</head>
<body id="pagelocation-read">
<div id="wrapper">
	<div id="innerWrapper">
		<div id="header">
			<div id="innerHeader">
				<div id="blogLogo">
				</div>
				<div class="blog-header">
					<h1 class="blog-title"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php">流浪的龙－个人知识管理</a></h1>
					<div class="blog-desc"></div>
				</div>
				<div id="menu">
					<ul>
					<li><span id="nav_index" class="activepage"><a href="index.php.htm" tppabs="http://i.renjihe.com/blog/index.php" ><span id="navitem_index" class="activepageitem">首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2F"><a href="javascript:if(confirm('http://i.renjihe.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/'" tppabs="http://i.renjihe.com/"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2F">个性首页</span></a></span></li>
<li><span id="nav_http_3A_2F_2Fi.renjihe.com_2Flink.html"><a href="javascript:if(confirm('http://i.renjihe.com/link.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://i.renjihe.com/link.html'" tppabs="http://i.renjihe.com/link.html"  target="_blank"><span id="navitem_http_3A_2F_2Fi.renjihe.com_2Flink.html">网址导航</span></a></span></li>
<li><span id="nav_tag"><a href="tag.php.htm" tppabs="http://i.renjihe.com/blog/tag.php" ><span id="navitem_tag">标签</span></a></span></li>
<li><span id="nav_guestbook"><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php" ><span id="navitem_guestbook">留言</span></a></span></li>
					</ul>
				</div>
			</div>
		</div>
		<div id="mainWrapper">
			<div id="content" class="content">
				<div id="innerContent">
					<div class="announce" style="display: none">
						<div class="announce-content">
						
						</div>
					</div>
					<div class="article-top" style="display: none">
						<div class="pages">
							
						</div>
					</div>
					<div class="article-top">
	<div class="prev-article"><a href="read.php-7357.htm" tppabs="http://i.renjihe.com/blog/read.php?7357" title="上一篇 六角网格大观"><img src="toolbar_previous.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_previous.gif" alt='' border='0'/>六角网格大观</a></div>
	<div class="next-article"><a href="read.php-7362.htm" tppabs="http://i.renjihe.com/blog/read.php?7362" title="下一篇 Get Start St"><img src="toolbar_next.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_next.gif" alt='' border='0'/>Get Start St</a></div>
</div>
<div class="textbox">
	<div class="textbox-calendar">
	<span class="textbox-calendar-month">Jun</span>
	<span class="textbox-calendar-day">29</span>
	</div>
	<div class="textbox-title">
		<h4>
		六角网格的实现 <span id="starid7358"><img src="unstarred.gif" tppabs="http://i.renjihe.com/blog/template/default/images/others/unstarred.gif" alt="" title="未加星标" border="0"/></span> <img src="blank.gif" tppabs="http://i.renjihe.com/blog/images/weather/blank.gif" alt="不指定" title="不指定"/> 
		</h4>
		<div class="textbox-label">
		 <a href="view.php-go=user_1.htm" tppabs="http://i.renjihe.com/blog/view.php?go=user_1" target="_blank">renjihe1988</a> , 21:09 , <a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="查看分类： 软件">软件</a> &raquo; <a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="查看分类： 游戏">游戏</a> , <a href="read.php-7358.htm#reply" tppabs="http://i.renjihe.com/blog/read.php?7358#reply" title="发表您的评论">评论(0)</a> , <a href='javascript: void(0);' title="查看引用地址" onclick='showhidediv("tb7358");'>引用(0)</a> , <a href="read.php-7358.htm" tppabs="http://i.renjihe.com/blog/read.php?7358">阅读(0)</a> ,  Via 本站原创 <span class="text-label-indented"><img src="toolbar_fontsize.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_fontsize.gif" alt='' title="字体大小" border='0'/> <a href="javascript: doZoom(16);">大</a> | <a href="javascript: doZoom(14);">中</a> | <a href="javascript: doZoom(12);">小</a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/feed.php?go=entry_309  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/feed.php?go=entry_309'" tppabs="http://i.renjihe.com/blog/feed.php?go=entry_7358"><img src="toolbar_rss.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_rss.gif" alt='' title="订阅本文" border='0'/></a> <a href="javascript:if(confirm('http://i.renjihe.com/blog/read.php?save_309  \n\nļ޷ Teleport Ultra , Ϊ , , Ŀֹͣ  \n\nڷϴ?'))window.location='http://i.renjihe.com/blog/read.php?save_309'" tppabs="http://i.renjihe.com/blog/read.php?save_7358"><img src="toolbar_save.gif" tppabs="http://i.renjihe.com/blog/template/default/images/toolbar_save.gif" alt='' title="保存本文为文本文档" border='0'/></a></span>
		</div>
	</div>
	<div id="tb7358" style="display: none;" class="textbox-tburl"><strong>引用功能被关闭了。</strong></div>
	
	<div class="textbox-content" id="zoomtext">
	 	<div>http://www-cs-students.stanford.edu/~amitp/gameprog.html</div><div>http://theory.stanford.edu/~amitp/GameProgramming/</div><div><br /></div><div>http://www.indienova.com/indie-game-development/grid-implementation-of-hex/<br /><br /><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 0px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">引言</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">Amit 潜心研究六角网格系统多年，本文是其系列教程中的一篇，探讨了具体如何实现六角网格系统。<br />文本需要参考作者的另外一篇文章《六角网格大观》(<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/hex-grids-reference/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/hex-grids-reference/'" tppabs="http://www.indienova.com/indie-game-development/hex-grids-reference/">indienova译文版</a>)来阅读。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">概述</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我在<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/game-programming-grids/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/game-programming-grids/'" tppabs="http://www.indienova.com/indie-game-development/game-programming-grids/">《网格沉思》</a>与<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/hex-grids-reference/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/hex-grids-reference/'" tppabs="http://www.indienova.com/indie-game-development/hex-grids-reference/">《六角网格大观》</a>等文章中描述了实现六角网格系统的数学基础与算法，这里就让我们基于它们实现一个可用的六角网格系统库文件。我们首先需要考虑的是这个库需要哪些核心内容：</p><ul style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px">由于许多算法都基于立方坐标，因此我需要为其建立一个数据结构，这样就能以它为基础实现这些算法。我将这个类命名为 Hex。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">某些游戏需要向玩家显示坐标，但并非显示立方坐标，而是轴坐标或偏移坐标，因此我们还需要为玩家可见的坐标系统建立一个数据结构，并且编写用于在两种坐标间相互转换的函数。立方坐标与轴坐标本质上没有区别，因此我不会为其单独建立新的坐标系统，还是继续使用 Hex 类。但我会为偏移坐标建立单独的数据结构 Offest。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">网格地图中还需要存储一些额外的信息，诸如地形，对象，单元等等。用2维数列是可行之策，但有时这样会稍显不直观，因此我创建了 Map 类专门负责此项任务。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">为了向屏幕绘制六边形，我需要将网格坐标转换为屏幕坐标的方法。为此需要创建 Layout 类。在六角网格大观中没有涵盖某些内容：<p style="box-sizing: border-box; margin: 0px 0px 15px"></p><ul style="box-sizing: border-box; margin: 0px; padding: 0px 0px 0px 40px"><li style="box-sizing: border-box; margin: 0px; padding: 0px">既支持 y 轴朝上的坐标系(在 3d 库中很常见)也支持 y 轴朝下的坐标系(在 2d 库中很常见)，在六角网格大观中我只讨论了 y 轴朝下的情况。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">支持拉伸或收缩后的六边形，这在使用像素图形时尤为常见。在六角网格大观中我只讨论了正六边形的情况。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">支持将&nbsp;0,0&nbsp;六角网格放置在屏幕的任意位置。在六角网格大观一文中，我只讨论了将&nbsp;0,0&nbsp;六角网格放置在0,0&nbsp;位置。</li></ul></li><li style="box-sizing: border-box; margin: 0px; padding: 0px">此外，我还需要实现将鼠标点击位置和其他像素坐标转换为六角网格坐标的方法。我会将这块功能放入&nbsp;Layout&nbsp;类中。六角网格坐标与屏幕坐标的相互转换有相似之处，因此将它们放到一起很合理。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">《六角网格大观》中没有讨论整点六角坐标与浮点数六角网格坐标之间的区别。在需要用到浮点数坐标的地方，我会专门定义&nbsp;FractionalHex&nbsp;来实现线性插值与圆整的算法。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">一旦创建好坐标系并实现求相邻网格的方法，就可以运用基于图论的算法来求解移动范围，寻路搜寻等诸多问题。寻路算法我已经在另外<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.redblobgames.com/pathfinding/a-star/index.php?go=category_13&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.redblobgames.com/pathfinding/a-star/index.php?go=category_13&mode=2&page=1'" tppabs="http://www.redblobgames.com/pathfinding/a-star/introduction.html">一篇教程</a>中详细讨论过了，这里就不再重复。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我打算主要使用 C++ 来编写范例代码，但我也为这份代码编写了 Java，C#，Python，JavaScript，Haxe 和 Lua 的版本。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">六角网格坐标</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">在《六角网格大观》一文中我将立方坐标与轴坐标视为两种不同的坐标系。立方坐标实则是&nbsp;x, y, z&nbsp;三维空间中的一个面&nbsp;x + y + z = 0。轴坐标只有两个轴，轴间夹角为 60&deg; 或 120&deg;。我这里使用了以&nbsp;q, r, s&nbsp;而非&nbsp;x, y, z&nbsp;来命名坐标的立方类：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// 存储立方坐标，立方坐标构造函数</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">assert</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">简洁明了。下面这个类内部也存储了轴坐标，但使用立方坐标作为接口：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// 存储轴坐标，立方坐标构造函数</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">assert</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> q_ </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">这两种写法效果一致。头一种显式地写出了&nbsp;s&nbsp;坐标，第二种则使用寄存器，在需要的时候再计算具体的&nbsp;s。立方坐标与轴坐标本质上是一种坐标系，因此我不会为其单独编写独立的类。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">另一种风格是将&nbsp;s&nbsp;放入构造函数而非将其作为参数传递：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// 存储立方坐标，轴坐标构造函数</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(-</span><span style="box-sizing: border-box" class="pln">q_ </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">这种写法的优势在于你需要用到&nbsp;s&nbsp;的时候多半是在调用的时候。你拥有&nbsp;q&nbsp;和&nbsp;r，虽然没有&nbsp;s，但是将&nbsp;-q-r&nbsp;作为第三个参数就可以了。你还可以将这种风格与第二种写法(存储轴坐标)相融合，只存储&nbsp;q&nbsp;与&nbsp;r，并使用寄存器来计算&nbsp;s。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">还有一种风格是，使用数组而非命名字段：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// 存储矢量，立方坐标构造函数</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">assert</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">这种写法的好处，就像你一开始就看到的，在于它平等看待三个坐标值&nbsp;q, r, s。你可以编写循环来处理它们而无须复制代码。如果使用 CPU 运算你应该使用 SIMD(单指令多数据流) 指令，使用 GPU 运算则应该使用&nbsp;vec3。如果你已经读过后文中的相等判断以及&nbsp;hex_add，&nbsp;hex_subtract，&nbsp;hex_scale，hex_length，hex_round&nbsp;以及&nbsp;hex_lerp&nbsp;等函数，你应该能感觉到统一对待三个坐标用途有多么巨大。当使用这种表达方式时，如果你读过后文的&nbsp;hex_to_pixel&nbsp;和pixel_code，你会发现可以直接使用六角坐标来进行矢量与矩阵运算(无论是使用 CPU 还是 GPU)。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">编程是一项充满权衡的活动。就本文而言，我首先关注的方面是简洁性和可读性，并不刻意注重性能或者抽象层次的问题，因此我选择使用第一种风格：储存立方坐标，使用立方坐标构造函数。这样最易于阐述算法。然而，以上提到这些风格我都很喜欢，如果适合项目我会毫不犹豫地选择它们。在一些具有多重构造函数的语言中，出于方便，我会同时使用轴坐标与立方坐标的构造函数。在 C++ 中，我会使用模板参数来替代&nbsp;int&nbsp;类型，而在 C 或 C++11 中， 可以使用&nbsp;union将&nbsp;int v[]&nbsp;和&nbsp;int q, r, s&nbsp;两种风格融为一体。模板参数&nbsp;w&nbsp;可以用于区分位置与矢量。将它们结合在一起，代码如下：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">template</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">_Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// Both storage types, both constructors</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">union</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #195f91" class="lit">3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q_ </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Number</span><span style="box-sizing: border-box" class="pln"> s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> v</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">typedef</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">_Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">typedef</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">_Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">HexDifference</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">typedef</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">_Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">typedef</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">_Hex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHexDifference</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">在这篇教程中，我没有选择 C++ 特有的编程风格，因为我希望本文的代码能更直接地翻译成其他语言。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">相等判断</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">判断是否相等是非常直观的问题：坐标相等即说明是同一个六边形。在 C++ 中，使用&nbsp;==&nbsp;操作符；在 Python 中，使用方法&nbsp;__eq__;在 Java 中，专门定义一个&nbsp;equals()&nbsp;方法。尽可能贴合语言本身的编程风格：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">bool</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">operator</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;&amp;</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;&amp;</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">bool</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">operator</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">!=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">!(</span><span style="box-sizing: border-box" class="pln">a </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">==</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">坐标运算</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">由于立方坐标来自3维笛卡尔坐标系，因此它们也可以进行一般的加减乘除运算。举例来讲，Hex(2, 0, -2)&nbsp;代表指向东北长度为2的矢量，因此从位置&nbsp;Hex(3, -5, 2)&nbsp;向东北移动2格的方法也十分明显：&nbsp;Hex(2 + 3, 0 + -5, -2 + -2)。在其他的坐标系，比如偏移坐标系中，这种写法是行不通的。只有当你实现了三维笛卡尔坐标系时才能进行这些运算，但我这里选择用&nbsp;q, r, s&nbsp;来命名，没有使用传统的命名方法&nbsp;x, y, z:</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_add</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_subtract</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_multiply</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> k</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> k</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> k</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> k</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">距离</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">两个六边形的距离即两者连线的长度。不管是求距离还是求连线长度，运算起来都不麻烦。参见《六角网格大观》一文：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> hex_length</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">))</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> hex_distance</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> hex_length</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex_subtract</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><h6 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 12px; background-color: #f4f4f4">相邻</h6><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">计算距离时，我定义了两个函数：一个参数的&nbsp;length&nbsp;和两个参数的&nbsp;distance。对相邻问题处理方式也很类似。direction&nbsp;函数有一个参数，而&nbsp;neighbor&nbsp;函数有两个参数。参看六角网格大观：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> vector</span><span style="box-sizing: border-box" class="pln"> hex_directions </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_direction</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> direction </span><span style="box-sizing: border-box; color: #999999" class="com">/* 0 to 5 */</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">assert</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> direction </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;&amp;</span><span style="box-sizing: border-box" class="pln"> direction </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">6</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> hex_directions</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box" class="pln">direction</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">];</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_neighbor</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> direction</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> hex_add</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> hex_direction</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">direction</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">假如超出默认的六个方向范围，就使用&nbsp;hex_directions[(6 + (direction % 6)) % 6]。嗯，看起来是有点丑，但它即使对反方向也适用。(附记：如果 C++ 能有可以处理负数的取模运算符那该多好啊。参见&nbsp;<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://stackoverflow.com/questions/4003232/index.php?go=category_13&mode=2&page=2  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://stackoverflow.com/questions/4003232/index.php?go=category_13&mode=2&page=2'" tppabs="http://stackoverflow.com/questions/4003232/how-to-code-a-modulo-operator-in-c-c-obj-c-that-handles-negative-numbers">stackoverflow</a>&nbsp;的一篇讨论。)</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">布局</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">接着我们来实现在六角坐标与屏幕坐标间相互转换的功能。布局方案分顶点朝上和边线朝上。我们会用到转换矩阵以及它的逆矩阵，因此需要有存储矩阵的方案。在绘制顶点时，顶点朝上布局起始角度为 30&deg; 而边线朝上则从 0&deg; 开始，因此也需要存放布局信息。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我定义了一个辅助类&nbsp;<span style="box-sizing: border-box; font-weight: 700">Orientation</span>&nbsp;来存储这些数据:<br />2x2 的转换矩阵，2x2 的逆矩阵，以及起始角度。</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> f0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> f1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> f2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> f3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> b0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> start_angle</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// in multiples of 60&deg;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> f0_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> f1_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> f2_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> f3_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> b0_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> b1_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> b2_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> b3_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> start_angle_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">:</span><span style="box-sizing: border-box" class="pln"> f0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">f0_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> f1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">f1_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> f2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">f2_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> f3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">f3_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b0_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> b1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b1_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> b2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b2_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> b3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b3_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; start_angle</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">start_angle_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">由于仅有两种朝向，因此我使用常量：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box" class="pln"> layout_pointy&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.5</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box" class="pln"> layout_flat&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> sqrt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #195f91" class="lit">0.0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">将它们用于&nbsp;Layout&nbsp;类：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box" class="pln"> orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box" class="pln"> orientation_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> size_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> origin_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">:</span><span style="box-sizing: border-box" class="pln"> orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">orientation_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">size_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">origin_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">哦，对了，我还需要定义个极简的&nbsp;<span style="box-sizing: border-box; font-weight: 700">Point</span>&nbsp;类。如果你使用的图形库/几何库中以及提供了这个类，就用它们提供的就好：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> x_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> y_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">x_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">y_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">附记：你可能已经注意到了，这里的许多东西其底层都是元素为数字的数组。Hex&nbsp;是&nbsp;int[3]。朝向是一个角度，用双精度浮点数&nbsp;double&nbsp;表示，而两个矩阵，都是&nbsp;double[4]&nbsp;或&nbsp;double[2][2]。点 Point 是&nbsp;double[2]。布局由一个朝向Orientation&nbsp;和两个点&nbsp;Point&nbsp;组成。后文中将会用到的&nbsp;FractionalHex&nbsp;是&nbsp;double[3]，而&nbsp;OffsetCoord&nbsp;是int[2]。我选择使用结构体，而没有使用数组，是因为我可以为结构体的元素命名，而这些名字能够帮助我理解它们，同时对类型检查也有好处。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">一切就绪，我们来编写布局的算法吧。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">六角网格到屏幕</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">《六角网格大观》一文中包括两种六角网格坐标转换为像素坐标的方法，每一种适应一种朝向。尽管数值有所不同，但本质上代码是一样的。 因此，在实现该功能时，我将具体的数值放入了&nbsp;Orientation&nbsp;类中，从&nbsp;f0&nbsp;到&nbsp;f3:</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> hex_to_pixel</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> M </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">f0 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">f1 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> y </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">f2 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">f3 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> y </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">和《六角网格大观》一文有所不同的是，我分别声明了两个方向的大小：x&nbsp;与&nbsp;y。这样就能实现：</p><ul style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px">你可以拉伸，收缩六边形来适配你使用的任意大小的像素材质。请注意&nbsp;size.x&nbsp;与&nbsp;size.y&nbsp;并非六边形的宽度和高度。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">你可以令 y 变为负数来反转 y 轴方向。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">此外，《六角网格大观》一文中将&nbsp;q = 0, r = 0&nbsp;的六边形面心放置在&nbsp;x = 0,y = 0&nbsp;位置，但起始基本上你想放到什么位置都无关紧要。如果想要其他的位置，只需要往中心位置(layout.origin)增加一个变化量就好。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">屏幕到六角网格</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">《六角网格大观》一文也包含两种将像素坐标转换为六角网格坐标的方案，每一种适用于一种朝向。同样地，虽然数值不同，但代码没有本质差别。这次我们使用的是逆矩阵，我将矩阵求逆放入了&nbsp;Orientation&nbsp;中，从&nbsp;b0&nbsp;到&nbsp;b3，并用在下面的函数中。在六角网格到屏幕坐标的转换中，我先乘以矩阵，再乘以大小，然后加上原点。而从屏幕坐标转换到六角网格，我需要逆转这个过程：首先减去原点，然后除以大小，再乘以逆矩阵：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box" class="pln"> pixel_to_hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> p</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> M </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> pt </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">p</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">p</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">origin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">b0 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> pt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">b1 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> pt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">b2 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> pt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> M</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">b3 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> pt</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">此处可能会出现一点稍微麻烦的情况：我将整型的六角网格坐标转换为屏幕坐标，但反过来，却无法保证屏幕坐标转换后的六角网格坐标恰好为整数。这样我得到的不是整型的坐标，而是双精度浮点类型的坐标，转换函数的返回值为<span style="box-sizing: border-box; font-weight: 700">FractionalHex</span>&nbsp;而非&nbsp;<span style="box-sizing: border-box; font-weight: 700">Hex</span>。为了得到整型坐标，还需要经过一次圆整，稍后我会实现这一功能。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">绘制六角网格</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">绘制六边形需要清楚它的顶角相对于中心的位置关系。使用边线朝上布局时，顶角位于 0&deg;，60&deg;，120&deg;，180&deg;，240&deg;，300&deg;；使用顶点朝上布局时，顶角位于 30&deg;, 90&deg;, 150&deg;, 210&deg;, 270&deg;, 330&deg;。我在&nbsp;Orientation&nbsp;类中编码了起始角度start_angle&nbsp;的值，为 0&deg; 时是&nbsp;0.0，为 60&deg; 时是&nbsp;0.5。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">当我知道顶角相对中心的位置关系后，就能够通过从中心位置移动相对距离来找到顶角的屏幕位置，并将坐标放入数组之中：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> hex_corner_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> corner</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> size </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> angle </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> M_PI </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">corner </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">orientation</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">start_angle</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">6</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> cos</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">angle</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> sin</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">angle</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;vector</span><span style="box-sizing: border-box" class="pln"> polygon_corners</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Layout</span><span style="box-sizing: border-box" class="pln"> layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; vector</span><span style="box-sizing: border-box" class="pln"> corners </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> center </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> hex_to_pixel</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> i </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> i </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">6</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> i</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box" class="pln"> offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> hex_corner_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">layout</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> i</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; corners</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">push_back</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Point</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">center</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">x</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; center</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">y</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> corners</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">布局范例</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">好的，下面我们来试试看。我们已经编写好了&nbsp;Hex，&nbsp;Orientation，Layout，Point&nbsp;以及他们间互相转换的函数。这样就足够绘制六边形了。我决定用 JavaScript 版本的代码在浏览器中绘制一些六边形。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我们先来尝试这两种布局：layout_pointy&nbsp;和&nbsp;layout_flat:</p><div class="col_half" style="box-sizing: border-box; width: 384px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10540" src="index-1.php-go=category_13&mode=2&page=3" tppabs="http://indienova.com/wp-uploads/2016/05/1.png" border="0" alt="1" width="300" height="200" /></div><div class="col_half col_last" style="box-sizing: border-box; width: 384px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10541" src="index-1.php-go=category_13&mode=2&page=4" tppabs="http://indienova.com/wp-uploads/2016/05/2.png" border="0" alt="2" width="300" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">接着我们来试试大小的网格：分别为&nbsp;Point(10, 10)，Point(20, 20)&nbsp;以及&nbsp;Point(40, 40):</p><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10545" src="index-1.php-go=category_13&mode=2&page=5" tppabs="http://indienova.com/wp-uploads/2016/05/3.png" border="0" alt="3" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10546" src="index-1.php-go=category_13&mode=1&page=1" tppabs="http://indienova.com/wp-uploads/2016/05/4.png" border="0" alt="4" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10548" src="read-1.php-6352" tppabs="http://indienova.com/wp-uploads/2016/05/5.png" border="0" alt="5" width="200" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我们试试拉伸和收缩六边形，将大小设置为&nbsp;Point(15, 25)&nbsp;和&nbsp;Point(25, 15):</p><div class="col_half" style="box-sizing: border-box; width: 384px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10549" src="read-1.php-6270" tppabs="http://indienova.com/wp-uploads/2016/05/6.png" border="0" alt="6" width="300" height="200" /></div><div class="col_half col_last" style="box-sizing: border-box; width: 384px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10550" src="read-1.php-6130" tppabs="http://indienova.com/wp-uploads/2016/05/7.png" border="0" alt="7" width="300" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">让我们试着将 y 轴朝下设置&nbsp;Point(25, 25)&nbsp;再反转 y 轴设置&nbsp;Point(25, -25)。我们仔细来看一看方向反转前后&nbsp;r&nbsp;是如何增长的：</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我认为这是一组很合理的朝向大小测试，它展现出&nbsp;Layout&nbsp;类能够处理广泛类型的需求，甚至无需编写其他类型的&nbsp;Hex类。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">浮点数六角网格</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">从像素转换为六角坐标我们会用到浮点六角坐标。看起来很像&nbsp;Hex&nbsp;类，但使用&nbsp;double&nbsp;而非&nbsp;int:</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">:</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">s_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">六角网格坐标圆整</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">将浮点六角坐标圆整到最近的整型六角坐标。六角网格大观一文中的算法十分直观：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> hex_round</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">round</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">round</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">round</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> q_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> r_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> s_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> abs</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">if</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span><span style="box-sizing: border-box" class="pln"> r_diff </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">and</span><span style="box-sizing: border-box" class="pln"> q_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span><span style="box-sizing: border-box" class="pln"> s_diff</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">else</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">if</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r_diff </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span><span style="box-sizing: border-box" class="pln"> s_diff</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">else</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">线条绘制</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我们通过线性插值在两个六边形间绘制连线，再将其圆整到最近的六边形上。线性插值的实现非常简单：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box" class="pln"> hex_lerp</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> t</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">FractionalHex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> t</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> t</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> t</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">当线性插值实现后，连线的实现就非常容易了：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">vector</span><span style="box-sizing: border-box" class="pln"> hex_linedraw</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> N </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> hex_distance</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; vector</span><span style="box-sizing: border-box" class="pln"> results </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">double</span><span style="box-sizing: border-box" class="pln"> step </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1.0</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> max</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">N</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> i </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> i </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> N</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> i</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; results</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">push_back</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex_round</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hex_lerp</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> step </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> i</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> results</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">max(N, 1)&nbsp;这一段代码是用来处理&nbsp;A == B&nbsp;长度为&nbsp;0&nbsp;的情况。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">地图</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">有两个相关的问题需要解决：如何<span style="box-sizing: border-box; font-weight: 700">生成六边形形状</span>以及如何存储地图数据。让我先从地图数据存储开始：</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">地图存储</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">存储地图最简单的办法是使用哈希表。在 C++ 中，为了使用&nbsp;unordered_map&nbsp;或者&nbsp;unordered_set&nbsp;我们需要为&nbsp;Hex&nbsp;定义哈希函数。如果 C++ 让定义它的过程简单点就好了，不过现在这样倒也还不坏。我将求出&nbsp;q&nbsp;和&nbsp;r&nbsp;字段的哈希值(这里我就略去冗余的步骤)，并使用 Boost 提供的&nbsp;hash_combine&nbsp;算法将其联合起来：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">namespace</span><span style="box-sizing: border-box" class="pln"> std </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">template</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;&gt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> hash</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">size_t</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">operator</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">()(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hash</span><span style="box-sizing: border-box" class="pln"> int_hash</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">size_t</span><span style="box-sizing: border-box" class="pln"> hq </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> int_hash</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">size_t</span><span style="box-sizing: border-box" class="pln"> hr </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> int_hash</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> hq </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">^</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hr </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0x9e3779b9</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hq </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;&lt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">6</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">hq </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;&gt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">下面的例子演示了如何为每个六边形制作浮点数高度的地图：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_map</span><span style="box-sizing: border-box" class="pln"> heights</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> heights</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)]</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">4.3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> cout </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;&lt;</span><span style="box-sizing: border-box" class="pln"> heights</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">3</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)];</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">哈希表本身不是很有用，我需要将其与其他数据联合起来创建地图形状。用图论术语来讲，我需要一些数据来创建节点。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">地图形状</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">在这个章节中我会写一些循环来产生许多形状的地图。你可以利用这些循环来为你的地图生成一系列六角坐标。我编写了填充这些六角坐标的样例代码。</p><h6 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 12px; background-color: #f4f4f4">平行四边形</h6><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果使用是是轴坐标/立方坐标，下面这个直观的循环代码就能产生出平行四边形的地图而不是常见的四边形地图：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> q1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> q2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> r1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> r2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">有三个坐标，循环要求你选出其中两个：&nbsp;(q, r),&nbsp;(s, q)&nbsp;或者&nbsp;(r, s)。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">分别产生顶点朝上布局地图为：</p><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10552" src="read-1.php-6129" tppabs="http://indienova.com/wp-uploads/2016/05/8.png" border="0" alt="8" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10553" src="read-1.php-6102" tppabs="http://indienova.com/wp-uploads/2016/05/9.png" border="0" alt="9" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10554" src="read-1.php-6072" tppabs="http://indienova.com/wp-uploads/2016/05/10.png" border="0" alt="10" width="200" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">边线朝上布局地图为：</p><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10555" src="read-1.php-5973" tppabs="http://indienova.com/wp-uploads/2016/05/11.png" border="0" alt="11" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10556" src="read-1.php-5972" tppabs="http://indienova.com/wp-uploads/2016/05/12.png" border="0" alt="12" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10557" src="read-1.php-5864" tppabs="http://indienova.com/wp-uploads/2016/05/13.png" border="0" alt="13" width="200" height="200" /></div><h6 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 12px; background-color: #f4f4f4">三角形</h6><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">三角形有两种朝向，在代码中需要考虑你具体选择哪种朝向。假定 y 轴方向朝下，当使用顶点朝上布局时，这些三角形将面朝南边/西北/东北：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> map_size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> map_size </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><div class="col_half" style="box-sizing: border-box; width: 384px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10558" src="read-1.php-5822" tppabs="http://indienova.com/wp-uploads/2016/05/14.png" border="0" alt="14" width="300" height="200" /></div><div class="col_half col_last" style="box-sizing: border-box; width: 384px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10559" src="read-1.php-5821" tppabs="http://indienova.com/wp-uploads/2016/05/15.png" border="0" alt="15" width="300" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">而在边线朝上布局中，这些三角形面朝东边/西北/西南：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> map_size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> map_size </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> map_size</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><div class="col_half" style="box-sizing: border-box; width: 384px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10560" src="read-1.php-5782" tppabs="http://indienova.com/wp-uploads/2016/05/16.png" border="0" alt="16" width="300" height="200" /></div><div class="col_half col_last" style="box-sizing: border-box; width: 384px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10561" src="read-1.php-5781" tppabs="http://indienova.com/wp-uploads/2016/05/17.png" border="0" alt="17" width="300" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果反转 y 轴方向，只需在代码中调换南北方向即可。</p><h6 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 12px; background-color: #f4f4f4">六边形</h6><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">六角网格大观中我演示了如何生成六边形的地图：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r1 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> max</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(-</span><span style="box-sizing: border-box" class="pln">map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r2 </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> min</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> map_radius</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> r1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;=</span><span style="box-sizing: border-box" class="pln"> r2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">下面分别是顶点朝上布局和边线朝上布局的地图：</p><div class="col_half" style="box-sizing: border-box; width: 384px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10563" src="read-1.php-5780" tppabs="http://indienova.com/wp-uploads/2016/05/18.png" border="0" alt="18" width="300" height="200" /></div><div class="col_half col_last" style="box-sizing: border-box; width: 384px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10564" src="read-1.php-5779" tppabs="http://indienova.com/wp-uploads/2016/05/19.png" border="0" alt="19" width="300" height="200" /></div><h6 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 12px; background-color: #f4f4f4">矩形</h6><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">在轴坐标/立方坐标中，生成四边形的地图略微有些棘手。六角网格大观中给了立方坐标生成六边形地图的一个方案，但是我当时并没有给出具体的代码，这里我将它写出来，如下所示：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> map_height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r_offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> floor</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// or r&gt;&gt;1</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> map_width </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">和前面一样，我会从&nbsp;q, r, s&nbsp;中选出两个用于循环，但这一次顺序至关重要，因为外层与内层的循环是有所区别的。下面是使用顶点朝上布局，将&nbsp;(outer, inner)&nbsp;循环设置为&nbsp;(r, q), (q, s), (s, r), (q, r), (s, q), (r, s)&nbsp;时生成的地图：</p><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10565" src="read-1.php-5778" tppabs="http://indienova.com/wp-uploads/2016/05/20.png" border="0" alt="20" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10566" src="read-1.php-5777" tppabs="http://indienova.com/wp-uploads/2016/05/21.png" border="0" alt="21" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10567" src="read-1.php-5776" tppabs="http://indienova.com/wp-uploads/2016/05/22.png" border="0" alt="22" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10568" src="read-1.php-5775" tppabs="http://indienova.com/wp-uploads/2016/05/23.png" border="0" alt="23" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10569" src="read-1.php-5774" tppabs="http://indienova.com/wp-uploads/2016/05/25.png" border="0" alt="25" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10570" src="read-1.php-5771" tppabs="http://indienova.com/wp-uploads/2016/05/26.png" border="0" alt="26" width="200" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">他们的确都是四边形，但他们不用都得与 x， y 轴方向对齐！你们大多数人可能会希望得到第一种地图，也就是&nbsp;r&nbsp;作为外层循环参数而&nbsp;q&nbsp;作为内层循环参数。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">那么使用边线朝上布局时又怎么样呢？当&nbsp;(outer, inner)&nbsp;循环参数分别为&nbsp;(r, q), (q, s), (s, r), (q, r), (s, q), (r, s)&nbsp;时地图如下所示：</p><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10571" src="read-1.php-5747" tppabs="http://indienova.com/wp-uploads/2016/05/27.png" border="0" alt="27" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10572" src="read-1.php-5738" tppabs="http://indienova.com/wp-uploads/2016/05/28.png" border="0" alt="28" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10573" src="read-1.php-5737" tppabs="http://indienova.com/wp-uploads/2016/05/29.png" border="0" alt="29" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10574" src="read-1.php-5733" tppabs="http://indienova.com/wp-uploads/2016/05/30.png" border="0" alt="30" width="200" height="200" /></div><div class="col_one_third" style="box-sizing: border-box; width: 245.031px; position: relative; margin-right: 32px; margin-bottom: 50px; float: left; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10575" src="read-1.php-5732" tppabs="http://indienova.com/wp-uploads/2016/05/31.png" border="0" alt="31" width="200" height="200" /></div><div class="col_one_third col_last" style="box-sizing: border-box; width: 245.031px; position: relative; margin-bottom: 50px; float: left; clear: right; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; margin-right: 0px !important; background-color: #f4f4f4"><img style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; display: block; margin: 30px auto; float: none; height: auto" class="alignnone size-full wp-image-10576" src="read-1.php-5697" tppabs="http://indienova.com/wp-uploads/2016/05/32.png" border="0" alt="32" width="200" height="200" /></div><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">为了得到第四种地图，你可以使用&nbsp;q&nbsp;作为外层循环参数，&nbsp;作为内层循环参数&nbsp;然后调换宽高：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">unordered_set</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> map_width</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q_offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> floor</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #999999" class="com">// or q&gt;&gt;1</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> map_height </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> q_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">这两种版本的代码会产生本质上相同，但细节处稍有区别的形状。你可能需要多做一些实验才能得到精确满足你需求的地图形状。例如，你可以试着将偏移设为&nbsp;floor((q+1)/2)&nbsp;或者&nbsp;floor((q-1)/2)&nbsp;而非&nbsp;floor(q/2)，以观察地图边界如何发生轻微的变化。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">优化存储</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">哈希表是一个相当通用的解决方案，并且适用于任何一种地图形状，甚至适用于一些奇形怪状，中间带空洞的地图形状。你可以将其作为一个节点-边类型的图来查看它，使用&nbsp;hex_neighbor&nbsp;来存储节点，并且显式地临时计算节点之间的边。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">还有一种方法也可以用于存储节点-边类型的图结构，预先计算所有的边并且显式地存储它们。每一个节点都有一个整型id，并且我们会使用数组的数组来存储接壤的节点。或者每一个节点都是一个对象，我们使用它的一个字段来储存相邻节点的列表。这种图的拓扑结构也具有通用性，可以适用于任何形状的地图。你也可以对其使用各种基于图论的算法，可以用来求解移动范围，地图距离或者路径搜寻等诸多问题。如果地图形状规则或者经常会被编辑修改，那么隐式地存储边的数据也不会有什么问题；如果地图形状不规则(有界，有墙壁，有空洞等等)而且不会经常变动，那么还是显式储存边的数据为好。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">某些地图形状也可以使用紧凑的2维数组或者1维数组来存储。六角大观中为此给出了可视化的演示。这里，我再给出一个代码范例。主要的思想是无论对哪种地图形状来说，代码中都会包含嵌套的循环：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> a </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> a1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> a </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> a2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> a</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> b </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> b1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> b </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> b2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> b</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">...</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果要紧凑地存储地图数据，我会使用数组的数组，并且使用形如&nbsp;array[a-a1][b-b1]&nbsp;的索引。例如，下面是四边形的代码：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r_offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> floor</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> width </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r_offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">insert</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">));</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">变量&nbsp;a&nbsp;表示&nbsp;r，而变量&nbsp;b&nbsp;为&nbsp;q。数值&nbsp;a1&nbsp;为 0 而&nbsp;b1&nbsp;为&nbsp;-floor(r/2)， 即&nbsp;array[r-0][q-(-floor(r/2))]&nbsp;，因此可以被简化成&nbsp;array[r][q+floor(r/2)]。注意&nbsp;floor(r/2)&nbsp;中&nbsp;r &gt;&gt; 1。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">此外，我还需要知道数组的大小&nbsp;size。我需要&nbsp;a2-a1&nbsp;个数组，而每个数组的大小应该是&nbsp;b2-b1。(务必小心检查偏移1的错误:如果循环之中&nbsp;a &lt;= a2&nbsp;你会需要&nbsp;a2-a1+1&nbsp;个数组，类似还有&nbsp;b &lt;= b2&nbsp;的情况。)我可以使用 C++ 矢量模板来建立这些数组：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box" class="pln">vector</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">emplace_back</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">width</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我可以将它们封装到&nbsp;Map&nbsp;类中：</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">template</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">class</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">RectangularPointyTopMap</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; vector</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">public</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">:</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> width</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">for</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">0</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&lt;</span><span style="box-sizing: border-box" class="pln"> height</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">++)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">emplace_back</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">width</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">inline</span><span style="box-sizing: border-box" class="pln"> T</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> at</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> map</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">[</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">][</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&gt;&gt;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)];</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果是其他类型的地图形状，可能会略微复杂一些，但还是遵循相同的模式：为了确定地图的大小，解决数组访问的问题，我必须研究创建地图的循环代码。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果使用1维数组会显得棘手一些，因此我这里就不展开说了。我自己的多数项目中会使用基于图论的表示方法，它具有最大的灵活性和可重用性。当存储空间比较紧要的时候我只需要考虑使用更加紧凑的地图存储格式就好了。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">偏移坐标</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">在六角网格大观一文中我使用&nbsp;q&nbsp;和&nbsp;r&nbsp;来存放偏移坐标，但由于我也将其用于立方坐标系和轴坐标系中，所以这里我就改用&nbsp;col&nbsp;与&nbsp;row:</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">struct</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> col</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> row</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> col_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> row_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">):</span><span style="box-sizing: border-box" class="pln"> col</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">col_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">),</span><span style="box-sizing: border-box" class="pln"> row</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">row_</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;&#125;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我希望能把立方坐标系与轴坐标系使用的&nbsp;Hex&nbsp;类用于除了玩家看到的显示位置(那里还是偏移坐标更有用武之地)之外的所有地方。这也就是说，我需要编写&nbsp;Hex&nbsp;与&nbsp;OffsetCoord&nbsp;之间相互转换的代码。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">有四种偏移坐标系类型：奇行，偶行，奇列，偶列。行类型使用顶点朝上布局，而列类型使用边线朝上布局。偶类型偏移为 +1，而奇类型偏移为 -1:</p><pre class="prettyprint" style="box-sizing: border-box; overflow: auto; font-size: 13px; line-height: 20px; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; padding: 10px 15px; margin-bottom: 20px; word-break: break-all; word-wrap: break-word; border: 1px solid #e1e1e8; border-radius: 4px; white-space: pre-wrap; margin-top: 0px !important"><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> EVEN </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">const</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> ODD </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box" class="pln"> qoffset_from_cube</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> col </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> row </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">))</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">col</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> row</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> qoffset_to_cube</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">col</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">row </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">col </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">col </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">))</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box" class="pln"> roffset_from_cube</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> col </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">))</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> row </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">col</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> row</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;</span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box" class="pln"> roffset_to_cube</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> offset</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">OffsetCoord</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">)</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#123;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">col </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">((</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">row </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">+</span><span style="box-sizing: border-box" class="pln"> offset </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">*</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">row </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&amp;</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">1</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">))</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">/</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #195f91" class="lit">2</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> r </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> h</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">.</span><span style="box-sizing: border-box" class="pln">row</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">int</span><span style="box-sizing: border-box" class="pln"> s </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">=</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln">q </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">-</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">;</span><span style="box-sizing: border-box" class="pln">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="box-sizing: border-box; color: #2f6f9f" class="kwd">return</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #4f9fcf" class="typ">Hex</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">(</span><span style="box-sizing: border-box" class="pln">q</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> r</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">,</span><span style="box-sizing: border-box" class="pln"> s</span><span style="box-sizing: border-box; color: #93a1a1" class="pun">);</span><span style="box-sizing: border-box" class="pln"> </span><span style="box-sizing: border-box; color: #93a1a1" class="pun">&#125;</span></pre><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果你仅使用奇偶两种类型中的一种，可以将偏移量硬编码到代码之中，这样可以让代码更为简单快速。抑或你可以将偏移量&nbsp;offset&nbsp;作为模板参数，这样可以让编译器内联它从而优化代码。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">使用偏移坐标系时我需要知道行列数的奇偶性，我们使用&nbsp;a&amp;1&nbsp;而不用&nbsp;a%2&nbsp;来返回&nbsp;0&nbsp;或者&nbsp;+1，为什么呢？</p><ul style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px">如果是使用补码的系统(几乎囊括目前大多数的系统)，当&nbsp;a&nbsp;为偶数时&nbsp;a&amp;1&nbsp;会返回&nbsp;0，为奇数时会返回&nbsp;1。这正是我想要的结果。虽然严格来说，它也并非是完全可移植的。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">在某些语言中，包括&nbsp;C++&nbsp;在内，a%2&nbsp;计算的是余数而非模数。如果&nbsp;a&nbsp;为&nbsp;-1，我们知道这是一个奇数，我们希望&nbsp;a%2&nbsp;返回&nbsp;1， 然而一些系统却会返回&nbsp;-1。如果你使用的语言可以计算模数，那就放心大胆使用&nbsp;a%2&nbsp;就好。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">如果你使用的坐标数值永远都不可能为负数，用&nbsp;a%2&nbsp;也不会出什么问题。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">如果你使用的语言里没有&nbsp;a&amp;1&nbsp;可用，可以用&nbsp;abs(a) % 2作为替代。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">此外，在很多(或者说所有？)语言中，&amp;&nbsp;的优先级都比&nbsp;+&nbsp;低，所以最好在&nbsp;a&amp;1&nbsp;外加上圆括号。</p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">附记</h4><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">立方坐标 VS 轴坐标</h5><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">立方网格坐标包含三个数字，但其中一个在约束条件下可以通过另外两个求出。选择将其存放进第三个字段或者选择在访问函数计算它基本上只是代码风格的区别。如果非常关注性能问题，就有必须仔细考虑到底是使用寄存器还是临时计算结果节约开销了。在 C++ 这样的语言中，只要能使用寄存器和内联方法，就应该尽可能使用它，以节约内存(毕竟访问 RAM 的开销十分昂贵)。在有些语言中，例如 Python，使用寄存器的性能开销也不小，这时候我们应该减少函数的调用(函数调用开销并不小)，并且在字段中存储第三个坐标。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">另外有兴趣的读者也可以查阅这篇<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://cs.ucla.edu/~tianyi.zhang/read.php?5435  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://cs.ucla.edu/~tianyi.zhang/read.php?5435'" tppabs="http://cs.ucla.edu/~tianyi.zhang/perfdiff.pdf">论文</a>，它提到使用轴坐标和立方坐标相比使用偏移坐标，会在视线，距离等算法的计算中更快一筹，但在用作显示时会更慢一些(正和我们预料的一样)。但我没能找到他们测试用的代码。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果性能真的很重要，最佳做法是实际去测试具体的数据。</p><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">C++</h5><ul style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px">C++ 具有各种数值类型，复制和传递它们的开销都很小。为了让代码更紧凑，如果你的地图不大，可以考虑在&nbsp;Hex或者&nbsp;Offset&nbsp;中使用 int16 或者 int8 的整型。假如你使用寄存器来计算&nbsp;s，并使用 int16 来保存&nbsp;q&nbsp;和&nbsp;r(或是col&nbsp;和&nbsp;row)，那么整个坐标恰好用掉一个32位的字长。</li><p style="box-sizing: border-box; margin: 0px 0px 15px">。</p><li style="box-sizing: border-box; margin: 0px; padding: 0px">正如前文所述，这些类没有默认为空的构造函数，因此它们不会被看作是普通的 POD 对象类型，尽管我觉得把它们当成 POD 对象也没什么关系。如果你更习惯 POD 对象那么就改用默认的构造函数并进行结构体初始化。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px">我本来可以写一个模板类&nbsp;Hex&lt;&gt;，实例化就能得到&nbsp;Hex&nbsp;与&nbsp;Hex。考虑到许多读者可能愿意将代码翻译成其他语言的版本，最后我放弃了这种想法。</li></ul><h5 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 14px; background-color: #f4f4f4">Python，JavaScript</h5><ul style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px">Python 和其他一些动态类型的语言(比如 JS)无需区分&nbsp;Hex&nbsp;与&nbsp;FractionalHex。因此你可以直接使用&nbsp;Hex&nbsp;而无需理会&nbsp;FractionalHex&nbsp;类。</li></ul><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; line-height: 1.5; color: #444444; margin: 0px 0px 20px; font-size: 18px; padding-top: 30px; padding-bottom: 15px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: #0088cc; background-color: #f4f4f4">源码</h4><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">我已经用一些语言写了一些还没有优化过的半成品代码，写过一点单元测试，但缺乏详细的文档。不过你可以随意地借鉴和参考它们来编写自己的六角网格库：</p><ul class="org-ul" style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5383  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5383'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.cc">C++</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5361  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5361'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.py">Python</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5354  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5354'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.js">Javascript</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5346  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?5346'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.cs">C#</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/feed.php?go=entry_7526  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/feed.php?go=entry_7526'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/Tests.hx">Haxe</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?save_7526  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?save_7526'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/Tests.java">Java</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/feed.php?go=entry_7527  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/feed.php?go=entry_7527'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.ts">Typescript</a></li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?save_7527  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/read.php?save_7527'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/output/lib.lua">Lua</a>&nbsp;5.2; 查看&nbsp;<a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/?p=931  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/?p=931'" tppabs="http://www.indienova.com/indie-game-development/grid-implementation-of-hex/codegen/OutputLua.hx">源码</a>中关于 5.1 与 5.3 版本的笔记。</li></ul><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">如果以后能编写 Racket，Rust，Ruby，Haskell，Swift 等其他语言的版本那就更酷了。不过我不知道能不能抽出这个时间。</p><p style="box-sizing: border-box; margin: 0px 0px 15px; line-height: 24px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; background-color: #f4f4f4">下面这些程序库也值得一看，有些包含源码：</p><ul class="org-ul" style="box-sizing: border-box; margin: 0px 0px 30px; padding: 0px 0px 0px 40px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 24px; background-color: #f4f4f4"><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://gamelogic.co.za/grids/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://gamelogic.co.za/grids/'" tppabs="http://gamelogic.co.za/grids/">GameLogic Grids</a>&nbsp;- Unity - includes more grid types than I knew even existed! Their blog has tons of useful information about grids (hex and others)</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://hexgridutilities.codeplex.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://hexgridutilities.codeplex.com/'" tppabs="http://hexgridutilities.codeplex.com/">Hex-Grid Utilities</a>&nbsp;- C# - includes field of view, pathfinding, WinForms</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/tejon/?p=950  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/tejon/?p=950'" tppabs="https://github.com/tejon/HexCoord">tejon/HexCoord</a>&nbsp;- C#/Unity</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('http://settworks.com/pages/tools/?p=990  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://settworks.com/pages/tools/?p=990'" tppabs="http://settworks.com/pages/tools/hexkit">HexKit</a>&nbsp;- Unity - the tejon/HexCoord library plus more</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/dpc/?p=784  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/dpc/?p=784'" tppabs="https://github.com/dpc/hex2d-rs">dpc/hex2d-rs</a>&nbsp;- Rust</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/Hexworks/?p=961  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/Hexworks/?p=961'" tppabs="https://github.com/Hexworks/hexameter">Hexworks/hexameter</a>&nbsp;- Java</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/denizztret/optimization.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/denizztret/optimization.html'" tppabs="https://github.com/denizztret/ObjectiveHexagon">denizztret/ObjectiveHexagon</a>&nbsp;- Objective C</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #777777; outline: 0px; background-color: transparent" href="javascript:if(confirm('https://github.com/Sscchhmueptfter/optimization-indexes.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/Sscchhmueptfter/optimization-indexes.html'" tppabs="https://github.com/Sscchhmueptfter/HexUtils">Sscchhmueptfter/HexUtils</a>&nbsp;- Java</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/mpalmerlee/server-administration.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/mpalmerlee/server-administration.html'" tppabs="https://github.com/mpalmerlee/HexagonTools">mpalmerlee/HexagonTools</a>&nbsp;- Javascript</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/timgilbert/961  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/timgilbert/961'" tppabs="https://github.com/timgilbert/scala-hexmap">timgilbert/scala-hexmap</a>&nbsp;- Scala</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/mhwombat/grid/%e6%b3%84%e5%af%86%e7%94%a8%e6%88%b7%e6%a3%80%e7%b4%a2  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/mhwombat/grid/%e6%b3%84%e5%af%86%e7%94%a8%e6%88%b7%e6%a3%80%e7%b4%a2'" tppabs="https://github.com/mhwombat/grid/wiki">mhwombat/grid</a>&nbsp;- Haskell - includes square, triangle, hexagonal, octagonal grids</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/DigitalMachinist/feed.php?go=entry_7525  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/DigitalMachinist/feed.php?go=entry_7525'" tppabs="https://github.com/DigitalMachinist/HexGrid">DigitalMachinist/HexGrid</a>&nbsp;- C#</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/RobertBrewitz/read.php?save_7525  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/RobertBrewitz/read.php?save_7525'" tppabs="https://github.com/RobertBrewitz/axial-hexagonal-grid">RobertBrewitz/axial-hexagonal-grid</a>&nbsp;- Javascript</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/Amaranthos/UnityHexGrid/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/Amaranthos/UnityHexGrid/'" tppabs="https://github.com/Amaranthos/UnityHexGrid/">Amaranthos/UnityHexGrid</a>&nbsp;- C#/Unity</li><li style="box-sizing: border-box; margin: 0px; padding: 0px"><a style="box-sizing: border-box; color: #0088cc; text-decoration: none !important; background-color: transparent" href="javascript:if(confirm('https://github.com/icrawler/index.php?go=category_24&mode=2&page=1  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://github.com/icrawler/index.php?go=category_24&mode=2&page=1'" tppabs="https://github.com/icrawler/HexaMoon">icrawler/Hexamoon</a>&nbsp;- Lua</li></ul></div> 
	</div>
	<div class="textbox-bottom">
	</div>
	<div class="tags" style="display: none">  
	</div>
</div>
<div id="commentWrapper" class="comment-wrapper">
	<a name="topreply"></a>
	<div id="addnew"></div>	<div class="comment-pages">
	
	</div>
</div>

					<div class="article-bottom" style="display: none">
						<div class="pages">
							
						</div>
					</div>
				</div>
			</div>
		<div id="sidebar" class="sidebar">
			<div id="innerSidebar">
				<div id="innerSidebarSearch">
					<form method="post" action="http://i.renjihe.com/blog/visit.php">
	<input name="job" type="hidden" value="search"/>
	<input name="keyword" class="search-field" type="text"/>
	<select name="searchmethod"><option value="1">日志标题</option><option value="2">日志全文</option><option value="3">评论引用</option><option value="4">所有留言</option></select>
	<input value="搜索" class="button" type="submit"/>
	</form>
				</div>
				<div id="innerSidebarOne">
					<div id='panelCategory' class="panel">
<h5 style="cursor: pointer" onclick='showhidediv("sideblock_category");'>分类</h5>
<div class="panel-content" id="sideblock_category" style="display: block">
<ul><li><a href="index.php-go=category_1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_1" title="硬件">硬件</a> [1] <a href="feed.php-go=category_1" tppabs="http://i.renjihe.com/blog/feed.php?go=category_1"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_6.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_6" title="fpga/cpld">fpga/cpld</a> [10] <a href="feed.php-go=category_6" tppabs="http://i.renjihe.com/blog/feed.php?go=category_6"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_66.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_66" title="模电与电路">模电与电路</a> [1] <a href="feed.php-go=category_66" tppabs="http://i.renjihe.com/blog/feed.php?go=category_66"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_7.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_7" title="DSP">DSP</a> [14] <a href="feed.php-go=category_7" tppabs="http://i.renjihe.com/blog/feed.php?go=category_7"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_27.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_27" title="硬件知识">硬件知识</a> [26] <a href="feed.php-go=category_27" tppabs="http://i.renjihe.com/blog/feed.php?go=category_27"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_73.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_73" title="3D打印">3D打印</a> [1] <a href="feed.php-go=category_73" tppabs="http://i.renjihe.com/blog/feed.php?go=category_73"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_64.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_64" title="资讯">资讯</a> [18] <a href="feed.php-go=category_64" tppabs="http://i.renjihe.com/blog/feed.php?go=category_64"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_78.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_78" title="树莓派">树莓派</a> [5] <a href="feed.php-go=category_78" tppabs="http://i.renjihe.com/blog/feed.php?go=category_78"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_2" title="软件">软件</a> [0] <a href="feed.php-go=category_2.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_2"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_9.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_9" title="linux">linux</a> [912] <a href="feed.php-go=category_9" tppabs="http://i.renjihe.com/blog/feed.php?go=category_9"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_14.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_14" title="QT">QT</a> [131] <a href="feed.php-go=category_14" tppabs="http://i.renjihe.com/blog/feed.php?go=category_14"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_82.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_82" title="Lua">Lua</a> [15] <a href="feed.php-go=category_82" tppabs="http://i.renjihe.com/blog/feed.php?go=category_82"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_15.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_15" title="Android">Android</a> [261] <a href="feed.php-go=category_15" tppabs="http://i.renjihe.com/blog/feed.php?go=category_15"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_65.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_65" title="Iphone">Iphone</a> [48] <a href="feed.php-go=category_65" tppabs="http://i.renjihe.com/blog/feed.php?go=category_65"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_32.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_32" title="windows">windows</a> [61] <a href="feed.php-go=category_32" tppabs="http://i.renjihe.com/blog/feed.php?go=category_32"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_31.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_31" title="webkit">webkit</a> [79] <a href="feed.php-go=category_31" tppabs="http://i.renjihe.com/blog/feed.php?go=category_31"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_10.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_10" title="C/C++">C/C++</a> [98] <a href="feed.php-go=category_10" tppabs="http://i.renjihe.com/blog/feed.php?go=category_10"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_29.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_29" title="lisp、Erlang">Erlang、Lisp</a> [28] <a href="feed.php-go=category_29" tppabs="http://i.renjihe.com/blog/feed.php?go=category_29"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_46.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_46" title="Python">Python</a> [255] <a href="feed.php-go=category_46" tppabs="http://i.renjihe.com/blog/feed.php?go=category_46"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_18.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_18" title="Java">Java</a> [25] <a href="feed.php-go=category_18" tppabs="http://i.renjihe.com/blog/feed.php?go=category_18"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_13.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_13" title="web">web</a> [486] <a href="feed.php-go=category_13" tppabs="http://i.renjihe.com/blog/feed.php?go=category_13"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_50.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_50" title="测试">测试</a> [12] <a href="feed.php-go=category_50" tppabs="http://i.renjihe.com/blog/feed.php?go=category_50"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_23.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_23" title="源码分析">源码分析</a> [85] <a href="feed.php-go=category_23" tppabs="http://i.renjihe.com/blog/feed.php?go=category_23"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_19.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_19" title="编译原理">编译原理</a> [82] <a href="feed.php-go=category_19" tppabs="http://i.renjihe.com/blog/feed.php?go=category_19"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_83.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_83" title="黑客">黑客</a> [4] <a href="feed.php-go=category_83" tppabs="http://i.renjihe.com/blog/feed.php?go=category_83"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_39.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_39" title="GPU编程">GPU编程</a> [89] <a href="feed.php-go=category_39" tppabs="http://i.renjihe.com/blog/feed.php?go=category_39"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_48.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_48" title="OpenGL">OpenGL</a> [117] <a href="feed.php-go=category_48" tppabs="http://i.renjihe.com/blog/feed.php?go=category_48"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_52.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_52" title="OpenCV">OpenCV</a> [18] <a href="feed.php-go=category_52" tppabs="http://i.renjihe.com/blog/feed.php?go=category_52"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_20.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_20" title="音视频与流媒体">音视频与流媒体</a> [412] <a href="feed.php-go=category_20" tppabs="http://i.renjihe.com/blog/feed.php?go=category_20"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_62.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_62" title="游戏">游戏</a> [455] <a href="feed.php-go=category_62" tppabs="http://i.renjihe.com/blog/feed.php?go=category_62"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_54.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_54" title="FLEX&AS">FLEX&amp;AS</a> [124] <a href="feed.php-go=category_54" tppabs="http://i.renjihe.com/blog/feed.php?go=category_54"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_61.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_61" title="编程杂项">编程杂项</a> [55] <a href="feed.php-go=category_61" tppabs="http://i.renjihe.com/blog/feed.php?go=category_61"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_57.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_57" title="网络安全">网络安全</a> [43] <a href="feed.php-go=category_57" tppabs="http://i.renjihe.com/blog/feed.php?go=category_57"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_28.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_28" title="软件工程">软件工程</a> [40] <a href="feed.php-go=category_28" tppabs="http://i.renjihe.com/blog/feed.php?go=category_28"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_74.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_74" title="并行编程">并行编程</a> [4] <a href="feed.php-go=category_74" tppabs="http://i.renjihe.com/blog/feed.php?go=category_74"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_77.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_77" title="大数据">大数据</a> [10] <a href="feed.php-go=category_77" tppabs="http://i.renjihe.com/blog/feed.php?go=category_77"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_37" title="理论">理论</a> [0] <a href="feed.php-go=category_37.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=category_37"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_38.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_38" title="数学">数学</a> [75] <a href="feed.php-go=category_38" tppabs="http://i.renjihe.com/blog/feed.php?go=category_38"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_43.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_43" title="物理">物理</a> [19] <a href="feed.php-go=category_43" tppabs="http://i.renjihe.com/blog/feed.php?go=category_43"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_24.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_24" title="算法">算法</a> [80] <a href="feed.php-go=category_24" tppabs="http://i.renjihe.com/blog/feed.php?go=category_24"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_40.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_40" title="音频处理">音频处理</a> [3] <a href="feed.php-go=category_40" tppabs="http://i.renjihe.com/blog/feed.php?go=category_40"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_36.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_36" title="CV&Graphic">CV&amp;Graphic</a> [183] <a href="feed.php-go=category_36" tppabs="http://i.renjihe.com/blog/feed.php?go=category_36"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li class="indent"><a href="index.php-go=category_35.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_35" title="AR&AI&模式识别">AR&amp;AI&amp;模式识别</a> [127] <a href="feed.php-go=category_35" tppabs="http://i.renjihe.com/blog/feed.php?go=category_35"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_26.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_26" title="工具">工具</a> [56] <a href="feed.php-go=category_26" tppabs="http://i.renjihe.com/blog/feed.php?go=category_26"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_3.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_3" title="新鲜玩意">新鲜玩意</a> [446] <a href="feed.php-go=category_3" tppabs="http://i.renjihe.com/blog/feed.php?go=category_3"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_63.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_63" title="行业应用">行业应用</a> [6] <a href="feed.php-go=category_63" tppabs="http://i.renjihe.com/blog/feed.php?go=category_63"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_4.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_4" title="资讯">资讯</a> [137] <a href="feed.php-go=category_4" tppabs="http://i.renjihe.com/blog/feed.php?go=category_4"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_12.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_12" title="网文">网文</a> [622] <a href="feed.php-go=category_12" tppabs="http://i.renjihe.com/blog/feed.php?go=category_12"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_41.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_41" title="点子正传">点子正传</a> [20] <a href="feed.php-go=category_41" tppabs="http://i.renjihe.com/blog/feed.php?go=category_41"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_56.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_56" title="理财">理财</a> [24] <a href="feed.php-go=category_56" tppabs="http://i.renjihe.com/blog/feed.php?go=category_56"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_55.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_55" title="收集">收集</a> [157] <a href="feed.php-go=category_55" tppabs="http://i.renjihe.com/blog/feed.php?go=category_55"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_71.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_71" title="创业">创业</a> [405] <a href="feed.php-go=category_71" tppabs="http://i.renjihe.com/blog/feed.php?go=category_71"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_80.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_80" title="共享软件">共享软件</a> [12] <a href="feed.php-go=category_80" tppabs="http://i.renjihe.com/blog/feed.php?go=category_80"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_72.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_72" title="创意">创意</a> [20] <a href="feed.php-go=category_72" tppabs="http://i.renjihe.com/blog/feed.php?go=category_72"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_85.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_85" title="星象命理">星象命理</a> [40] <a href="feed.php-go=category_85" tppabs="http://i.renjihe.com/blog/feed.php?go=category_85"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_11.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_11" title="杂项">杂项</a> [50] <a href="feed.php-go=category_11" tppabs="http://i.renjihe.com/blog/feed.php?go=category_11"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_58.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_58" title="记录">记录</a> [26] <a href="feed.php-go=category_58" tppabs="http://i.renjihe.com/blog/feed.php?go=category_58"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_79.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_79" title="心灵鸡汤">心灵鸡汤</a> [78] <a href="feed.php-go=category_79" tppabs="http://i.renjihe.com/blog/feed.php?go=category_79"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_75.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_75" title="文学">文学</a> [9] <a href="feed.php-go=category_75" tppabs="http://i.renjihe.com/blog/feed.php?go=category_75"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_67.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_67" title="其它工程资料">其它工程资料</a> [2] <a href="feed.php-go=category_67" tppabs="http://i.renjihe.com/blog/feed.php?go=category_67"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_84.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_84" title="哲学">哲学</a> [24] <a href="feed.php-go=category_84" tppabs="http://i.renjihe.com/blog/feed.php?go=category_84"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_87.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_87" title="有言">有言</a> [9] <a href="feed.php-go=category_87" tppabs="http://i.renjihe.com/blog/feed.php?go=category_87"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_88.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_88" title="微语录">微语录</a> [15] <a href="feed.php-go=category_88" tppabs="http://i.renjihe.com/blog/feed.php?go=category_88"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_76.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_76" title="置顶">置顶</a> [440] <a href="feed.php-go=category_76" tppabs="http://i.renjihe.com/blog/feed.php?go=category_76"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_86.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_86" title="励志">励志</a> [10] <a href="feed.php-go=category_86" tppabs="http://i.renjihe.com/blog/feed.php?go=category_86"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li><li><a href="index.php-go=category_81.htm" tppabs="http://i.renjihe.com/blog/index.php?go=category_81" title="资源管理">资源管理</a> [1] <a href="feed.php-go=category_81" tppabs="http://i.renjihe.com/blog/feed.php?go=category_81"><img src="rss.png" tppabs="http://i.renjihe.com/blog/template/default/images/rss.png" border="0" alt="RSS" title="追踪这个分类的RSS" /></a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_calendar");'>日历</h5>
<div class="panel-content" id="sidebar_calendar" style="display: block">
<table id="calendar" cellspacing="1" width="100%">
<tbody><tr><td colspan="7" class="calendar-top">
<a href="index.php-go=archive&cm=9&cy=2015.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2015" rel="noindex,nofollow">&lt;</a>
<a href="archive.php.htm" tppabs="http://i.renjihe.com/blog/archive.php" rel="noindex,nofollow"><span class="calendar-year">2016</span></a>
<a href="index.php-go=archive&cm=9&cy=2017.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2017" rel="noindex,nofollow">&gt;</a>
	&nbsp;&nbsp;
<a href="index.php-go=archive&cm=8&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=8&cy=2016" rel="noindex,nofollow">&lt;</a>
<a href="index.php-go=archive&cm=9&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=9&cy=2016" rel="noindex,nofollow"><span class="calendar-month">9</span></a>
<a href="index.php-go=archive&cm=10&cy=2016.htm" tppabs="http://i.renjihe.com/blog/index.php?go=archive&cm=10&cy=2016" rel="noindex,nofollow">&gt;</a>
</td></tr>
<tr class="calendar-weekdays">
	<td class="calendar-weekday-cell">日</td>
	<td class="calendar-weekday-cell">一</td>
	<td class="calendar-weekday-cell">二</td>
	<td class="calendar-weekday-cell">三</td>
	<td class="calendar-weekday-cell">四</td>
	<td class="calendar-weekday-cell">五</td>
	<td class="calendar-weekday-cell">六</td>
</tr>
<tr class="calendar-weekdays"><td class="calendar-sunday"></td><td class="calendar-day"></td><td class="calendar-day"></td><td class="calendar-day"></td><td id="cal1" class="calendar-day"><a href="index.php-go=showday_2016-9-1.htm" tppabs="http://i.renjihe.com/blog/index.php?go=showday_2016-9-1" rel="noindex,nofollow">1</a></td><td id="cal2" class="calendar-day">2</td><td id="cal3" class="calendar-today">3</td></tr><tr class="calendar-weekdays"><td id="cal4" class="calendar-sunday">4</td><td id="cal5" class="calendar-day">5</td><td id="cal6" class="calendar-day">6</td><td id="cal7" class="calendar-day">7</td><td id="cal8" class="calendar-day">8</td><td id="cal9" class="calendar-day">9</td><td id="cal10" class="calendar-saturday">10</td></tr><tr class="calendar-weekdays"><td id="cal11" class="calendar-sunday">11</td><td id="cal12" class="calendar-day">12</td><td id="cal13" class="calendar-day">13</td><td id="cal14" class="calendar-day">14</td><td id="cal15" class="calendar-day">15</td><td id="cal16" class="calendar-day">16</td><td id="cal17" class="calendar-saturday">17</td></tr><tr class="calendar-weekdays"><td id="cal18" class="calendar-sunday">18</td><td id="cal19" class="calendar-day">19</td><td id="cal20" class="calendar-day">20</td><td id="cal21" class="calendar-day">21</td><td id="cal22" class="calendar-day">22</td><td id="cal23" class="calendar-day">23</td><td id="cal24" class="calendar-saturday">24</td></tr><tr class="calendar-weekdays"><td id="cal25" class="calendar-sunday">25</td><td id="cal26" class="calendar-day">26</td><td id="cal27" class="calendar-day">27</td><td id="cal28" class="calendar-day">28</td><td id="cal29" class="calendar-day">29</td><td id="cal30" class="calendar-day">30</td><td class="calendar-saturday"></td></tr>
</tbody></table>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_statistics");'>统计</h5>
<div class="panel-content" id="sidebar_statistics" style="display: block">
访问次数 133640<br/>今日访问 1<br/>日志数量 7121<br/><a href="guestbook.php.htm" tppabs="http://i.renjihe.com/blog/guestbook.php">留言数量 2</a><br/>在线人数 1<br/>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_entries");'>最新日志</h5>
<div class="panel-content" id="sidebar_entries" style="display: block">
<ul><li class='rowcouple'><a href="read.php-7527.htm" tppabs="http://i.renjihe.com/blog/read.php?7527" title="mysql优化之索引优化">mysql优化之索引优化</a></li><li class='rowodd'><a href="read.php-7526.htm" tppabs="http://i.renjihe.com/blog/read.php?7526" title="Mysql limit 优化，百万至千万级快速分页，--复合索引的引用并应用于轻量级框架&nbsp;&nbsp;">Mysql limit ...</a></li><li class='rowcouple'><a href="read.php-7525.htm" tppabs="http://i.renjihe.com/blog/read.php?7525" title="mysql sql语句执行时间查询">mysql sql语句执...</a></li><li class='rowodd'><a href="read.php-7524.htm" tppabs="http://i.renjihe.com/blog/read.php?7524" title="GeoHash核心原理解析">GeoHash核心原理解...</a></li><li class='rowcouple'><a href="read.php-7523.htm" tppabs="http://i.renjihe.com/blog/read.php?7523" title="如何实现按距离排序、范围查找">如何实现按距离排序、范围...</a></li></ul>
</div>
</div>
				</div>
				<div id="innerSidebarTwo">
					<div class="panel">
<h5 onclick='showhidediv("sidebar_link");'>链接</h5>
<div class="panel-content" id="sidebar_link" style="display: block">
<ul><li><strong>协会</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org/'" tppabs="http://www.siggraph.org/" target="_blank" title="siggraph - ">siggraph</a></li><li class="indent"><a href="javascript:if(confirm('http://www.siggraph.org.cn/Pages/index.aspx  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.siggraph.org.cn/Pages/index.aspx'" tppabs="http://www.siggraph.org.cn/Pages/index.aspx" target="_blank" title="siggraph中国 - ">siggraph中国</a></li><li class="indent"><a href="javascript:if(confirm('http://www.igf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.igf.com/'" tppabs="http://www.igf.com/" target="_blank" title="独立游戏节 - ">独立游戏节</a></li><li><strong>项目</strong></li><li class="indent"><a href="javascript:if(confirm('http://youyur.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://youyur.com/'" tppabs="http://youyur.com/" target="_blank" title="有鱼 - ">有鱼</a></li><li class="indent"><a href="javascript:if(confirm('http://codecanyon.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://codecanyon.net/'" tppabs="http://codecanyon.net/" target="_blank" title="codecanyon - ">codecanyon</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sxsoft.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sxsoft.com/'" tppabs="http://www.sxsoft.com/" target="_blank" title="软件项目交易网 - ">软件项目交易网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.csto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.csto.com/'" tppabs="http://www.csto.com/" target="_blank" title="csto - ">csto</a></li><li class="indent"><a href="javascript:if(confirm('http://themeforest.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://themeforest.net/'" tppabs="http://themeforest.net/" target="_blank" title="themeforest - ">themeforest</a></li><li class="indent"><a href="javascript:if(confirm('http://www.digitalriver.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.digitalriver.com/'" tppabs="http://www.digitalriver.com/" target="_blank" title="Digital River - ">Digital River</a></li><li class="indent"><a href="javascript:if(confirm('http://www.vworker.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.vworker.com/'" tppabs="http://www.vworker.com/" target="_blank" title="vworker - ">vworker</a></li><li class="indent"><a href="javascript:if(confirm('http://luexiao.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://luexiao.com/'" tppabs="http://luexiao.com/" target="_blank" title="略晓 - ">略晓</a></li><li class="indent"><a href="javascript:if(confirm('http://www.yateshi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.yateshi.com/'" tppabs="http://www.yateshi.com/" target="_blank" title="雅特士外包网  - ">雅特士外包网 </a></li><li class="indent"><a href="javascript:if(confirm('http://wpappstore.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://wpappstore.com/'" tppabs="http://wpappstore.com/" target="_blank" title="WP App Store - ">WP App Store</a></li><li class="indent"><a href="javascript:if(confirm('http://store.steampowered.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.steampowered.com/'" tppabs="http://store.steampowered.com/" target="_blank" title="Steam - ">Steam</a></li><li class="indent"><a href="javascript:if(confirm('http://www.taskcity.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.taskcity.com/'" tppabs="http://www.taskcity.com/" target="_blank" title="TaskCity - ">TaskCity</a></li><li class="indent"><a href="javascript:if(confirm('http://www.istockphoto.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.istockphoto.com/'" tppabs="http://www.istockphoto.com/" target="_blank" title="iStockphoto - ">iStockphoto</a></li><li class="indent"><a href="javascript:if(confirm('http://envato.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://envato.com/'" tppabs="http://envato.com/" target="_blank" title="Envato - ">Envato</a></li><li class="indent"><a href="javascript:if(confirm('https://tutsplus.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://tutsplus.com/'" tppabs="https://tutsplus.com/" target="_blank" title="Tuts+ Premium - ">Tuts+ Premium</a></li><li class="indent"><a href="javascript:if(confirm('http://www.sharebank.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.sharebank.com.cn/'" tppabs="http://www.sharebank.com.cn/" target="_blank" title="软行天下  - ">软行天下 </a></li><li class="indent"><a href="javascript:if(confirm('http://www.softreg.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.softreg.com.cn/'" tppabs="http://www.softreg.com.cn/" target="_blank" title="中国共享软件注册中心 - ">中国共享软件注册中心</a></li><li class="indent"><a href="javascript:if(confirm('https://www.elance.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.elance.com/'" tppabs="https://www.elance.com/" target="_blank" title="Elance - ">Elance</a></li><li class="indent"><a href="javascript:if(confirm('http://www.freelancer.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.freelancer.com/'" tppabs="http://www.freelancer.com/" target="_blank" title="freelancer - ">freelancer</a></li><li class="indent"><a href="javascript:if(confirm('http://www.bizsofts.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bizsofts.com/'" tppabs="http://www.bizsofts.com/" target="_blank" title="软件商务网 - ">软件商务网</a></li><li class="indent"><a href="javascript:if(confirm('https://www.odesk.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='https://www.odesk.com/'" tppabs="https://www.odesk.com/" target="_blank" title="oDesk - ">oDesk</a></li><li class="indent"><a href="javascript:if(confirm('http://store.raspberrypi.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://store.raspberrypi.com/'" tppabs="http://store.raspberrypi.com/" target="_blank" title="树莓派商店 - ">树莓派商店</a></li><li><strong>杂项</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.codinghorror.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.codinghorror.com/'" tppabs="http://www.codinghorror.com/" target="_blank" title="codinghorror - ">codinghorror</a></li><li class="indent"><a href="javascript:if(confirm('http://www.fabiensanglard.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.fabiensanglard.net/'" tppabs="http://www.fabiensanglard.net/" target="_blank" title="fabiensanglard - ">fabiensanglard</a></li><li class="indent"><a href="javascript:if(confirm('http://www.intel.com/intelpress/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.intel.com/intelpress/'" tppabs="http://www.intel.com/intelpress/" target="_blank" title="英特尔出版社 - ">英特尔出版社</a></li><li class="indent"><a href="javascript:if(confirm('http://www.opencart.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.opencart.com/'" tppabs="http://www.opencart.com/" target="_blank" title="OpenCart - ">OpenCart</a></li><li class="indent"><a href="javascript:if(confirm('http://www.appinn.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.appinn.com/'" tppabs="http://www.appinn.com/" target="_blank" title="小众软件 - ">小众软件</a></li><li class="indent"><a href="javascript:if(confirm('http://renderhjs.net/shoebox/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://renderhjs.net/shoebox/'" tppabs="http://renderhjs.net/shoebox/" target="_blank" title="shoebox工具 - ">shoebox工具</a></li><li><strong>个人</strong></li><li><strong>阅读</strong></li><li class="indent"><a href="javascript:if(confirm('http://huaban.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://huaban.com/'" tppabs="http://huaban.com/" target="_blank" title="花瓣网 - ">花瓣网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.oralstudy.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.oralstudy.cn/'" tppabs="http://www.oralstudy.cn/" target="_blank" title="英语口语学习网 - ">英语口语学习网</a></li><li class="indent"><a href="javascript:if(confirm('http://www.dspguide.com/pdfbook.htm  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.dspguide.com/pdfbook.htm'" tppabs="http://www.dspguide.com/pdfbook.htm" target="_blank" title="DSP Guide - ">DSP Guide</a></li><li><strong>在线文档</strong></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/flex/mobileapps/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/flex/mobileapps/index.html'" tppabs="http://help.adobe.com/zh_CN/flex/mobileapps/index.html" target="_blank" title="Flex移动开发 - ">Flex移动开发</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/learn/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/learn/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/learn/index.html" target="_blank" title="Flex AS3 - ">Flex AS3</a></li><li class="indent"><a href="javascript:if(confirm('http://www.adobe.com/cn/devnet.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.adobe.com/cn/devnet.html'" tppabs="http://www.adobe.com/cn/devnet.html" target="_blank" title="Adobe开发者中心 - ">Adobe开发者中心</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/'" tppabs="http://help.adobe.com/zh_CN/FlashPlatform/reference/actionscript/3/" target="_blank" title="ActionScript3.0参考 - ">ActionScript3.0参考</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/as3/dev/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/as3/dev/index.html'" tppabs="http://help.adobe.com/zh_CN/as3/dev/index.html" target="_blank" title="ActionScript 3.0 - ">ActionScript 3.0</a></li><li class="indent"><a href="javascript:if(confirm('http://help.adobe.com/zh_CN/air/build/index.html  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://help.adobe.com/zh_CN/air/build/index.html'" tppabs="http://help.adobe.com/zh_CN/air/build/index.html" target="_blank" title="AIR - ">AIR</a></li><li class="indent"><a href="javascript:if(confirm('http://www.ppurl.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.ppurl.com/'" tppabs="http://www.ppurl.com/" target="_blank" title="皮皮书屋 - ">皮皮书屋</a></li><li class="indent"><a href="javascript:if(confirm('http://science.scileaf.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://science.scileaf.com/'" tppabs="http://science.scileaf.com/" target="_blank" title="四叶科学百科 - ">四叶科学百科</a></li><li><strong>临时</strong></li><li class="indent"><a href="javascript:if(confirm('http://www.uisdc.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.uisdc.com/'" tppabs="http://www.uisdc.com/" target="_blank" title="优设 - ">优设</a></li><li class="indent"><a href="javascript:if(confirm('http://www.genesis-3d.com.cn/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.genesis-3d.com.cn/'" tppabs="http://www.genesis-3d.com.cn/" target="_blank" title="genesis-3d - ">genesis-3d</a></li><li class="indent"><a href="javascript:if(confirm('http://designlol.net/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://designlol.net/'" tppabs="http://designlol.net/" target="_blank" title="designlol - ">designlol</a></li></ul>
</div>
</div><div class="panel">
<h5 onclick='showhidediv("sidebar_misc");'>其他</h5>
<div class="panel-content" id="sidebar_misc" style="display: block">
<a href="login.php.htm" tppabs="http://i.renjihe.com/blog/login.php">登入</a><br/><a href="login.php-job=register.htm" tppabs="http://i.renjihe.com/blog/login.php?job=register">注册</a><br/>RSS： <a href="feed.php" tppabs="http://i.renjihe.com/blog/feed.php">日志</a> | <a href="feed.php-go=comment.htm" tppabs="http://i.renjihe.com/blog/feed.php?go=comment">评论</a><br/>编码：UTF-8<br/><a href="javascript:if(confirm('http://validator.w3.org/check?uri=referer  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://validator.w3.org/check?uri=referer'" tppabs="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.0</a>
</div>
</div>
				</div>
				<div id="innerSidebarFooter">
				 Powered by <a href="javascript:if(confirm('http://www.bo-blog.com/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.bo-blog.com/'" tppabs="http://www.bo-blog.com/" target="_blank">Bo-Blog 2.1.1 Release</a><span id="footer-security"><a href="javascript:if(confirm('http://www.cnbct.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.cnbct.org/'" tppabs="http://www.cnbct.org/" target="_blank" title="Code detection by Bug.Center.Team"><img src="detect.gif" tppabs="http://i.renjihe.com/blog/images/others/detect.gif" alt="Code detection by Bug.Center.Team" border="0" /></a></span>
				<div id="processtime">
				</div>
				</div>
			</div>
		</div>
	</div>
		<div id="footer">
		</div>
	</div>
</div>
<script type="text/javascript">
loadSidebar();
</script>
<script type='text/javascript'>
//<![CDATA[
if (document.getElementById('processtime')) document.getElementById('processtime').innerHTML="<span class='runtimedisplay'>Run in 148 ms, 6 Queries.</span>";
//]]>
</script></body>
</html>